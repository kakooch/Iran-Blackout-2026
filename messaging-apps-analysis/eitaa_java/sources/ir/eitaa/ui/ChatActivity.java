package ir.eitaa.ui;

import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.AnimatorSet;
import android.animation.ObjectAnimator;
import android.animation.ValueAnimator;
import android.annotation.TargetApi;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.ClipData;
import android.content.ClipboardManager;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapShader;
import android.graphics.Canvas;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.Matrix;
import android.graphics.Outline;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Shader;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.SystemClock;
import android.text.Layout;
import android.text.Spannable;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.text.TextUtils;
import android.text.style.CharacterStyle;
import android.text.style.ForegroundColorSpan;
import android.text.style.URLSpan;
import android.util.Pair;
import android.util.Property;
import android.util.SparseArray;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.TextureView;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewOutlineProvider;
import android.view.ViewTreeObserver;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.animation.DecelerateInterpolator;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;
import androidx.collection.LongSparseArray;
import androidx.core.content.FileProvider;
import androidx.core.graphics.ColorUtils;
import androidx.recyclerview.widget.ChatListItemAnimator;
import androidx.recyclerview.widget.GridLayoutManagerFixed;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.LinearSmoothScrollerCustom;
import androidx.recyclerview.widget.RecyclerView;
import com.google.android.exoplayer2.ui.AspectRatioFrameLayout;
import ir.eitaa.PhoneFormat.PhoneFormat;
import ir.eitaa.features.ChatLock.ChatLockHelper;
import ir.eitaa.helper.live.LiveHelper;
import ir.eitaa.messenger.AndroidUtilities;
import ir.eitaa.messenger.ApplicationLoader;
import ir.eitaa.messenger.BuildVars;
import ir.eitaa.messenger.ChatObject;
import ir.eitaa.messenger.ChatThemeController;
import ir.eitaa.messenger.ContactsController;
import ir.eitaa.messenger.DialogObject;
import ir.eitaa.messenger.Emoji;
import ir.eitaa.messenger.EmojiData;
import ir.eitaa.messenger.FileLoader;
import ir.eitaa.messenger.FileLog;
import ir.eitaa.messenger.ForwardingMessagesParams;
import ir.eitaa.messenger.ImageLocation;
import ir.eitaa.messenger.ImageReceiver;
import ir.eitaa.messenger.LocaleController;
import ir.eitaa.messenger.MediaController;
import ir.eitaa.messenger.MediaDataController;
import ir.eitaa.messenger.MessageObject;
import ir.eitaa.messenger.MessagesController;
import ir.eitaa.messenger.MessagesStorage;
import ir.eitaa.messenger.NotificationCenter;
import ir.eitaa.messenger.R;
import ir.eitaa.messenger.SendMessagesHelper;
import ir.eitaa.messenger.SharedConfig;
import ir.eitaa.messenger.UserConfig;
import ir.eitaa.messenger.UserObject;
import ir.eitaa.messenger.Utilities;
import ir.eitaa.messenger.VideoEditedInfo;
import ir.eitaa.messenger.browser.Browser;
import ir.eitaa.tgnet.ConnectionsManager;
import ir.eitaa.tgnet.RequestDelegate;
import ir.eitaa.tgnet.ResultCallback;
import ir.eitaa.tgnet.SerializedData;
import ir.eitaa.tgnet.TLObject;
import ir.eitaa.tgnet.TLRPC$BotInfo;
import ir.eitaa.tgnet.TLRPC$BotInlineResult;
import ir.eitaa.tgnet.TLRPC$Chat;
import ir.eitaa.tgnet.TLRPC$ChatFull;
import ir.eitaa.tgnet.TLRPC$ChatInvite;
import ir.eitaa.tgnet.TLRPC$ChatParticipant;
import ir.eitaa.tgnet.TLRPC$ChatParticipants;
import ir.eitaa.tgnet.TLRPC$Dialog;
import ir.eitaa.tgnet.TLRPC$Document;
import ir.eitaa.tgnet.TLRPC$DraftMessage;
import ir.eitaa.tgnet.TLRPC$EncryptedChat;
import ir.eitaa.tgnet.TLRPC$FileLocation;
import ir.eitaa.tgnet.TLRPC$InputStickerSet;
import ir.eitaa.tgnet.TLRPC$KeyboardButton;
import ir.eitaa.tgnet.TLRPC$Message;
import ir.eitaa.tgnet.TLRPC$MessageAction;
import ir.eitaa.tgnet.TLRPC$MessageEntity;
import ir.eitaa.tgnet.TLRPC$MessageFwdHeader;
import ir.eitaa.tgnet.TLRPC$MessageMedia;
import ir.eitaa.tgnet.TLRPC$MessageReplies;
import ir.eitaa.tgnet.TLRPC$Peer;
import ir.eitaa.tgnet.TLRPC$PhotoSize;
import ir.eitaa.tgnet.TLRPC$Poll;
import ir.eitaa.tgnet.TLRPC$PollResults;
import ir.eitaa.tgnet.TLRPC$ReplyMarkup;
import ir.eitaa.tgnet.TLRPC$TL_Live_getMedia;
import ir.eitaa.tgnet.TLRPC$TL_botCommand;
import ir.eitaa.tgnet.TLRPC$TL_botInlineMessageMediaAuto;
import ir.eitaa.tgnet.TLRPC$TL_botInlineMessageMediaInvoice;
import ir.eitaa.tgnet.TLRPC$TL_channelForbidden;
import ir.eitaa.tgnet.TLRPC$TL_channelFull;
import ir.eitaa.tgnet.TLRPC$TL_channels_viewSponsoredMessage;
import ir.eitaa.tgnet.TLRPC$TL_chatBannedRights;
import ir.eitaa.tgnet.TLRPC$TL_chatFull;
import ir.eitaa.tgnet.TLRPC$TL_chatInviteExported;
import ir.eitaa.tgnet.TLRPC$TL_contacts_acceptContact;
import ir.eitaa.tgnet.TLRPC$TL_document;
import ir.eitaa.tgnet.TLRPC$TL_encryptedChat;
import ir.eitaa.tgnet.TLRPC$TL_error;
import ir.eitaa.tgnet.TLRPC$TL_exportedMessageLink;
import ir.eitaa.tgnet.TLRPC$TL_game;
import ir.eitaa.tgnet.TLRPC$TL_groupCall;
import ir.eitaa.tgnet.TLRPC$TL_inlineBotSwitchPM;
import ir.eitaa.tgnet.TLRPC$TL_inputMediaLiveStream;
import ir.eitaa.tgnet.TLRPC$TL_inputMediaPoll;
import ir.eitaa.tgnet.TLRPC$TL_inputMessageEntityMentionName;
import ir.eitaa.tgnet.TLRPC$TL_inputStickerSetID;
import ir.eitaa.tgnet.TLRPC$TL_inputStickerSetShortName;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonBuy;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonCallback;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonGame;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonSwitchInline;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonUrl;
import ir.eitaa.tgnet.TLRPC$TL_keyboardButtonUrlAuth;
import ir.eitaa.tgnet.TLRPC$TL_messageActionGameScore;
import ir.eitaa.tgnet.TLRPC$TL_messageActionPaymentSent;
import ir.eitaa.tgnet.TLRPC$TL_messageActionPinMessage;
import ir.eitaa.tgnet.TLRPC$TL_messageEmpty;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityBold;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityCode;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityItalic;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityMentionName;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityPre;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityStrike;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityTextUrl;
import ir.eitaa.tgnet.TLRPC$TL_messageEntityUnderline;
import ir.eitaa.tgnet.TLRPC$TL_messageMediaLiveStream;
import ir.eitaa.tgnet.TLRPC$TL_messageMediaPhoto;
import ir.eitaa.tgnet.TLRPC$TL_messageMediaPoll;
import ir.eitaa.tgnet.TLRPC$TL_messageMediaWebPage;
import ir.eitaa.tgnet.TLRPC$TL_messageReplyHeader;
import ir.eitaa.tgnet.TLRPC$TL_messages_acceptUrlAuth;
import ir.eitaa.tgnet.TLRPC$TL_messages_discussionMessage;
import ir.eitaa.tgnet.TLRPC$TL_messages_editMessage;
import ir.eitaa.tgnet.TLRPC$TL_messages_getDiscussionMessage;
import ir.eitaa.tgnet.TLRPC$TL_messages_getMessageEditData;
import ir.eitaa.tgnet.TLRPC$TL_messages_getReplies;
import ir.eitaa.tgnet.TLRPC$TL_messages_getUnreadMentions;
import ir.eitaa.tgnet.TLRPC$TL_messages_getWebPagePreview;
import ir.eitaa.tgnet.TLRPC$TL_messages_requestUrlAuth;
import ir.eitaa.tgnet.TLRPC$TL_messages_sendScheduledMessages;
import ir.eitaa.tgnet.TLRPC$TL_payments_bankCardData;
import ir.eitaa.tgnet.TLRPC$TL_payments_paymentReceipt;
import ir.eitaa.tgnet.TLRPC$TL_peerNotifySettings;
import ir.eitaa.tgnet.TLRPC$TL_poll;
import ir.eitaa.tgnet.TLRPC$TL_pollAnswer;
import ir.eitaa.tgnet.TLRPC$TL_reactionCount;
import ir.eitaa.tgnet.TLRPC$TL_replyKeyboardForceReply;
import ir.eitaa.tgnet.TLRPC$TL_updates_channelDifferenceTooLong;
import ir.eitaa.tgnet.TLRPC$TL_urlAuthResultAccepted;
import ir.eitaa.tgnet.TLRPC$TL_urlAuthResultDefault;
import ir.eitaa.tgnet.TLRPC$TL_urlAuthResultRequest;
import ir.eitaa.tgnet.TLRPC$TL_webPage;
import ir.eitaa.tgnet.TLRPC$TL_webPagePending;
import ir.eitaa.tgnet.TLRPC$Updates;
import ir.eitaa.tgnet.TLRPC$User;
import ir.eitaa.tgnet.TLRPC$UserFull;
import ir.eitaa.tgnet.TLRPC$WebPage;
import ir.eitaa.tgnet.TLRPC$messages_Messages;
import ir.eitaa.ui.ActionBar.ActionBar;
import ir.eitaa.ui.ActionBar.ActionBarLayout;
import ir.eitaa.ui.ActionBar.ActionBarMenuItem;
import ir.eitaa.ui.ActionBar.ActionBarMenuSubItem;
import ir.eitaa.ui.ActionBar.ActionBarPopupWindow;
import ir.eitaa.ui.ActionBar.AdjustPanLayoutHelper;
import ir.eitaa.ui.ActionBar.AlertDialog;
import ir.eitaa.ui.ActionBar.BackDrawable;
import ir.eitaa.ui.ActionBar.BaseFragment;
import ir.eitaa.ui.ActionBar.BottomSheet;
import ir.eitaa.ui.ActionBar.ChatTheme;
import ir.eitaa.ui.ActionBar.SimpleTextView;
import ir.eitaa.ui.ActionBar.Theme;
import ir.eitaa.ui.ActionBar.ThemeDescription;
import ir.eitaa.ui.Adapters.MentionsAdapter;
import ir.eitaa.ui.Adapters.MessagesSearchAdapter;
import ir.eitaa.ui.Adapters.StickersAdapter;
import ir.eitaa.ui.AvatarPreviewer;
import ir.eitaa.ui.Cells.BotHelpCell;
import ir.eitaa.ui.Cells.BotSwitchCell;
import ir.eitaa.ui.Cells.ChatActionCell;
import ir.eitaa.ui.Cells.ChatLoadingCell;
import ir.eitaa.ui.Cells.ChatMessageCell;
import ir.eitaa.ui.Cells.ChatUnreadCell;
import ir.eitaa.ui.Cells.CheckBoxCell;
import ir.eitaa.ui.Cells.ContextLinkCell;
import ir.eitaa.ui.Cells.DialogCell;
import ir.eitaa.ui.Cells.MentionCell;
import ir.eitaa.ui.Cells.StickerCell;
import ir.eitaa.ui.Cells.TextSelectionHelper;
import ir.eitaa.ui.ChatActivity;
import ir.eitaa.ui.Components.AlertsCreator;
import ir.eitaa.ui.Components.AnimatedFileDrawable;
import ir.eitaa.ui.Components.AnimationProperties;
import ir.eitaa.ui.Components.BackupImageView;
import ir.eitaa.ui.Components.BluredView;
import ir.eitaa.ui.Components.BotCommandsMenuContainer;
import ir.eitaa.ui.Components.BotCommandsMenuView;
import ir.eitaa.ui.Components.Bulletin;
import ir.eitaa.ui.Components.BulletinFactory;
import ir.eitaa.ui.Components.ChatActivityEnterTopView;
import ir.eitaa.ui.Components.ChatActivityEnterView;
import ir.eitaa.ui.Components.ChatAttachAlert;
import ir.eitaa.ui.Components.ChatAttachAlertDocumentLayout;
import ir.eitaa.ui.Components.ChatAvatarContainer;
import ir.eitaa.ui.Components.ChatBigEmptyView;
import ir.eitaa.ui.Components.ChatGreetingsView;
import ir.eitaa.ui.Components.ChatThemeBottomSheet;
import ir.eitaa.ui.Components.ChecksHintView;
import ir.eitaa.ui.Components.ClearHistoryAlert;
import ir.eitaa.ui.Components.ClippingImageView;
import ir.eitaa.ui.Components.CounterView;
import ir.eitaa.ui.Components.CubicBezierInterpolator;
import ir.eitaa.ui.Components.EditTextCaption;
import ir.eitaa.ui.Components.EmbedBottomSheet;
import ir.eitaa.ui.Components.EmojiView;
import ir.eitaa.ui.Components.ExtendedGridLayoutManager;
import ir.eitaa.ui.Components.FireworksOverlay;
import ir.eitaa.ui.Components.ForwardingPreviewView;
import ir.eitaa.ui.Components.FragmentContextView;
import ir.eitaa.ui.Components.GigagroupConvertAlert;
import ir.eitaa.ui.Components.HideViewAfterAnimation;
import ir.eitaa.ui.Components.HintView;
import ir.eitaa.ui.Components.ImportingAlert;
import ir.eitaa.ui.Components.InstantCameraView;
import ir.eitaa.ui.Components.InviteMembersBottomSheet;
import ir.eitaa.ui.Components.LayoutHelper;
import ir.eitaa.ui.Components.MotionBackgroundDrawable;
import ir.eitaa.ui.Components.NumberTextView;
import ir.eitaa.ui.Components.PhonebookShareAlert;
import ir.eitaa.ui.Components.PinnedLineView;
import ir.eitaa.ui.Components.PipRoundVideoView;
import ir.eitaa.ui.Components.PollVotesAlert;
import ir.eitaa.ui.Components.RLottieDrawable;
import ir.eitaa.ui.Components.RadialProgressView;
import ir.eitaa.ui.Components.RecyclerAnimationScrollHelper;
import ir.eitaa.ui.Components.RecyclerListView;
import ir.eitaa.ui.Components.ReportAlert;
import ir.eitaa.ui.Components.SearchCounterView;
import ir.eitaa.ui.Components.SearchViewPager;
import ir.eitaa.ui.Components.ShareAlert;
import ir.eitaa.ui.Components.SizeNotifierFrameLayout;
import ir.eitaa.ui.Components.TextSelectionHint;
import ir.eitaa.ui.Components.TextStyleSpan;
import ir.eitaa.ui.Components.TrendingStickersAlert;
import ir.eitaa.ui.Components.TypefaceSpan;
import ir.eitaa.ui.Components.URLSpanBotCommand;
import ir.eitaa.ui.Components.URLSpanMono;
import ir.eitaa.ui.Components.URLSpanReplacement;
import ir.eitaa.ui.Components.URLSpanUserMention;
import ir.eitaa.ui.Components.UndoView;
import ir.eitaa.ui.Components.voip.VoIPHelper;
import ir.eitaa.ui.ContactAddActivity;
import ir.eitaa.ui.ContentPreviewViewer;
import ir.eitaa.ui.DialogsActivity;
import ir.eitaa.ui.GroupCreateActivity;
import ir.eitaa.ui.LocationActivity;
import ir.eitaa.ui.PaymentActivity;
import ir.eitaa.ui.PhotoAlbumPickerActivity;
import ir.eitaa.ui.PhotoViewer;
import ir.eitaa.ui.PollCreateActivity;
import j$.util.Comparator;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.net.URL;
import java.util.AbstractMap;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.concurrent.CountDownLatch;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.webrtc.MediaStreamTrack;

/* loaded from: classes3.dex */
public class ChatActivity extends BaseFragment implements NotificationCenter.NotificationCenterDelegate, DialogsActivity.DialogsActivityDelegate, LocationActivity.LocationActivityDelegate, ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate {
    private static final int[] allowedNotificationsDuringChatListAnimations;
    public static Pattern privateMsgUrlPattern;
    public static Pattern publicMsgUrlPattern;
    public static Pattern voiceChatUrlPattern;
    private ArrayList<View> actionModeViews;
    private long activityResumeTime;
    private ActionBarMenuSubItem addContactItem;
    private TextView addToContactsButton;
    private boolean addToContactsButtonArchive;
    private TextView alertNameTextView;
    private TextView alertTextView;
    private FrameLayout alertView;
    private AnimatorSet alertViewAnimator;
    private float alertViewEnterProgress;
    private boolean allowContextBotPanel;
    private boolean allowContextBotPanelSecond;
    private boolean allowStickersPanel;
    private HashMap<MessageObject, Boolean> alredyPlayedStickers;
    private ArrayList<ChatMessageCell> animateSendingViews;
    boolean animateTo;
    private HashMap<TLRPC$Document, Integer> animatingDocuments;
    private ClippingImageView animatingImageView;
    public ArrayList<MessageObject> animatingMessageObjects;
    private Paint aspectPaint;
    private Path aspectPath;
    private AspectRatioFrameLayout aspectRatioFrameLayout;
    private ActionBarMenuItem attachItem;
    private ActionBarMenuItem audioCallIconItem;
    private ChatAvatarContainer avatarContainer;
    private ChatActivity backToPreviousFragment;
    private ChatBigEmptyView bigEmptyView;
    private BluredView blurredView;
    private MessageObject botButtons;
    private PhotoViewer.PhotoViewerProvider botContextProvider;
    private ArrayList<Object> botContextResults;
    private LongSparseArray<TLRPC$BotInfo> botInfo;
    private MessageObject botReplyButtons;
    private String botUser;
    private int botsCount;
    private FrameLayout bottomMessagesActionContainer;
    private FrameLayout bottomOverlay;
    private AnimatorSet bottomOverlayAnimation;
    private FrameLayout bottomOverlayChat;
    private UnreadCounterTextView bottomOverlayChatText;
    private ImageView bottomOverlayImage;
    private RadialProgressView bottomOverlayProgress;
    private TextView bottomOverlayText;
    private float bottomPanelTranslationY;
    private float bottomPanelTranslationYReverse;
    Bulletin.Delegate bulletinDelegate;
    private boolean[] cacheEndReached;
    private int canEditMessagesCount;
    private int canForwardMessagesCount;
    private int canSaveDocumentsCount;
    private int canSaveMusicCount;
    private boolean canShowPagedownButton;
    private Runnable cancelFixedPositionRunnable;
    private int cantDeleteMessagesCount;
    private int cantForwardMessagesCount;
    private int cantSaveMessagesCount;
    private ValueAnimator changeBoundAnimator;
    private ChatActivityDelegate chatActivityDelegate;
    private ChatActivityEnterTopView chatActivityEnterTopView;
    protected ChatActivityEnterView chatActivityEnterView;
    private boolean chatActivityEnterViewAnimateBeforeSending;
    private int chatActivityEnterViewAnimateFromTop;
    private ChatActivityAdapter chatAdapter;
    private ChatAttachAlert chatAttachAlert;
    private int chatEmojiViewPadding;
    private long chatEnterTime;
    protected TLRPC$ChatFull chatInfo;
    private TLRPC$ChatInvite chatInvite;
    private Runnable chatInviteRunnable;
    private long chatInviterId;
    private GridLayoutManagerFixed chatLayoutManager;
    private long chatLeaveTime;
    private ChatListItemAnimator chatListItemAnimator;
    private RecyclerListView chatListView;
    private float chatListViewPaddingTop;
    private float chatListViewPaddingTopOnlyTopViews;
    private int chatListViewPaddingVisibleOffset;
    private ArrayList<ChatMessageCell> chatMessageCellsCache;
    private int chatMode;
    private RecyclerAnimationScrollHelper chatScrollHelper;
    private final ChatScrollCallback chatScrollHelperCallback;
    private ChatThemeBottomSheet chatThemeBottomSheet;
    private boolean chatWasReset;
    private Runnable checkPaddingsRunnable;
    private boolean checkTextureViewPosition;
    private ChecksHintView checksHintView;
    private boolean clearingHistory;
    private Dialog closeChatDialog;
    private ImageView closePinned;
    private ImageView closeReportSpam;
    private int commentLoadingGuid;
    private int commentLoadingMessageId;
    private int commentMessagesLoadingGuid;
    private int commentMessagesRequestId;
    private int commentRequestId;
    private int contentPaddingTop;
    private float contentPanTranslation;
    public SizeNotifierFrameLayout contentView;
    private boolean createGroupCall;
    private int createUnreadMessageAfterId;
    private boolean createUnreadMessageAfterIdLoading;
    protected TLRPC$Chat currentChat;
    protected TLRPC$EncryptedChat currentEncryptedChat;
    private boolean currentFloatingDateOnScreen;
    private boolean currentFloatingTopIsNotMessage;
    private String currentPicturePath;
    private int currentPinnedMessageId;
    private int[] currentPinnedMessageIndex;
    protected TLRPC$User currentUser;
    private Runnable delayedReadRunnable;
    private Runnable destroyTextureViewRunnable;
    int dialogFilterId;
    int dialogFolderId;
    private long dialog_id;
    private int distanceToPeer;
    private ChatMessageCell drawLaterRoundProgressCell;
    private ChatMessageCell dummyMessageCell;
    private AnimatorSet editButtonAnimation;
    private int editTextEnd;
    private ActionBarMenuItem editTextItem;
    private int editTextStart;
    private MessageObject editingMessageObject;
    private int editingMessageObjectReqId;
    private EmojiAnimationsOverlay emojiAnimationsOverlay;
    private View emojiButtonRed;
    private TextView emptyView;
    private FrameLayout emptyViewContainer;
    private boolean[] endReached;
    private FireworksOverlay fireworksOverlay;
    private boolean first;
    private boolean firstLoading;
    boolean firstOpen;
    private boolean firstUnreadSent;
    private int first_unread_id;
    private boolean fixPaddingsInLayout;
    private int fixedKeyboardHeight;
    private AnimatorSet floatingDateAnimation;
    private ChatActionCell floatingDateView;
    private float floatingDateViewOffset;
    private boolean forceHistoryEmpty;
    private int forceNextPinnedMessageId;
    private boolean forceScrollToFirst;
    private boolean forceScrollToTop;
    private CharSequence formwardingNameText;
    private TextView forwardButton;
    private AnimatorSet forwardButtonAnimation;
    private boolean[] forwardEndReached;
    private HintView forwardHintView;
    private MessageObject forwardingMessage;
    private MessageObject.GroupedMessages forwardingMessageGroup;
    private ForwardingMessagesParams forwardingMessages;
    ForwardingPreviewView forwardingPreviewView;
    private ArrayList<CharSequence> foundUrls;
    private TLRPC$WebPage foundWebPage;
    private FragmentContextView fragmentContextView;
    private FragmentContextView fragmentLocationContextView;
    private boolean fragmentOpened;
    private AnimatorSet fragmentTransition;
    private Runnable fragmentTransitionRunnable;
    private boolean fromMyName;
    private boolean fromPullingDownTransition;
    private TextView gifHintTextView;
    private boolean globalIgnoreLayout;
    private ChatGreetingsView greetingsViewContainer;
    private ChatObject.Call groupCall;
    private LongSparseArray<MessageObject.GroupedMessages> groupedMessagesMap;
    private boolean hasAllMentionsLocal;
    private boolean hasBotsCommands;
    private boolean hasUnfavedSelected;
    private ActionBarMenuItem headerItem;
    private Runnable hideAlertViewRunnable;
    private int hideDateDelay;
    private int highlightMessageId;
    private MessageObject hintMessageObject;
    private int hintMessageType;
    private boolean ignoreAttachOnPause;
    private ChatActionCell infoTopView;
    private Animator infoTopViewAnimator;
    private long inlineReturn;
    private InstantCameraView instantCameraView;
    private boolean invalidateChatListViewTopPadding;
    private boolean invalidateMessagesVisiblePart;
    private boolean isComments;
    private boolean isForwardFromMyName;
    private boolean isPauseOnThemePreview;
    private boolean lastCallCheckFromServer;
    private int lastLoadIndex;
    private int lastStableId;
    private float lastTouchY;
    private int last_message_id;
    private int linkSearchRequestId;
    ArrayList<MessageObject> livesToCheck;
    private int loadedPinnedMessagesCount;
    private boolean loading;
    private boolean loadingForward;
    private boolean loadingFromOldPosition;
    private SparseArray<Boolean> loadingPinnedMessages;
    private boolean loadingPinnedMessagesList;
    private int loadsCount;
    private boolean locationAlertShown;
    private int[] maxDate;
    private int[] maxMessageId;
    private boolean maybeStartTrackingSlidingView;
    private HintView mediaBanTooltip;
    private FrameLayout mentionContainer;
    private ExtendedGridLayoutManager mentionGridLayoutManager;
    private LinearLayoutManager mentionLayoutManager;
    private AnimatorSet mentionListAnimation;
    private RecyclerListView mentionListView;
    private boolean mentionListViewIgnoreLayout;
    private boolean mentionListViewIsDragging;
    private boolean mentionListViewIsScrolling;
    private int mentionListViewLastViewPosition;
    private int mentionListViewLastViewTop;
    private int mentionListViewScrollOffsetY;
    private FrameLayout mentiondownButton;
    private ObjectAnimator mentiondownButtonAnimation;
    private SimpleTextView mentiondownButtonCounter;
    private ImageView mentiondownButtonImage;
    private MentionsAdapter mentionsAdapter;
    private RecyclerListView.OnItemClickListener mentionsOnItemClickListener;
    private ActionBarMenuSubItem menuDeleteItem;
    private long mergeDialogId;
    private ActionBarPopupWindow mesageSeenUsersPopupWindow;
    private Animator messageEditTextAnimator;
    public MessageEnterTransitionContainer messageEnterTransitionContainer;
    protected ArrayList<MessageObject> messages;
    private HashMap<String, ArrayList<MessageObject>> messagesByDays;
    private SparseArray<MessageObject>[] messagesDict;
    private MessagesSearchAdapter messagesSearchAdapter;
    private RecyclerListView messagesSearchListView;
    private AnimatorSet messagesSearchListViewAnimation;
    private int[] minDate;
    private int[] minMessageId;
    private ActionBarMenuSubItem muteItem;
    private MessageObject needAnimateToMessage;
    private boolean needRemovePreviousSameChatActivity;
    private boolean needSelectFromMessageId;
    private int newMentionsCount;
    private int newUnreadMessageCount;
    private boolean nextScrollForce;
    private int nextScrollForcePinnedMessageId;
    private int nextScrollFromMessageId;
    private int nextScrollLoadIndex;
    private boolean nextScrollSelect;
    private int nextScrollToMessageId;
    private HintView noSoundHintView;
    RecyclerListView.OnItemClickListenerExtended onItemClickListener;
    RecyclerListView.OnItemLongClickListenerExtended onItemLongClickListener;
    public boolean openAnimationEnded;
    private long openAnimationStartTime;
    private boolean openImport;
    private boolean openKeyboardOnAttachMenuClose;
    private boolean openSearchKeyboard;
    private View overlayView;
    private FrameLayout pagedownButton;
    private AnimatorSet pagedownButtonAnimation;
    private CounterView pagedownButtonCounter;
    private ImageView pagedownButtonImage;
    private boolean pagedownButtonShowedByScroll;
    private boolean paused;
    private boolean pausedOnLastMessage;
    private String pendingLinkSearchString;
    private ArrayList<MessageObject> pendingSendMessages;
    private SparseArray<MessageObject> pendingSendMessagesDict;
    private PhotoViewer.PhotoViewerProvider photoViewerProvider;
    private int pinBullerinTag;
    private Bulletin pinBulletin;
    private PinchToZoomHelper pinchToZoomHelper;
    private NumberTextView pinnedCounterTextView;
    private int pinnedCounterTextViewX;
    private boolean pinnedEndReached;
    private int pinnedImageCacheType;
    private TLRPC$PhotoSize pinnedImageLocation;
    private TLObject pinnedImageLocationObject;
    private int pinnedImageSize;
    private TLRPC$PhotoSize pinnedImageThumbLocation;
    private PinnedLineView pinnedLineView;
    private AnimatorSet pinnedListAnimator;
    private ImageView pinnedListButton;
    private float pinnedMessageEnterOffset;
    private ArrayList<Integer> pinnedMessageIds;
    private BackupImageView[] pinnedMessageImageView;
    private HashMap<Integer, MessageObject> pinnedMessageObjects;
    private SimpleTextView[] pinnedMessageTextView;
    private FrameLayout pinnedMessageView;
    private AnimatorSet pinnedMessageViewAnimator;
    private SimpleTextView[] pinnedNameTextView;
    private AnimatorSet[] pinnedNextAnimation;
    private boolean pinnedPorgressIsShowing;
    private RadialProgressView pinnedProgress;
    private ChatMessageCell pollHintCell;
    private HintView pollHintView;
    private int pollHintX;
    private int pollHintY;
    private LongSparseArray<ArrayList<MessageObject>> polls;
    private ArrayList<MessageObject> pollsToCheck;
    private int popupAnimationIndex;
    private NotificationCenter.PostponeNotificationCallback postponeNotificationsWhileLoadingCallback;
    private final DialogInterface.OnCancelListener postponedScrollCancelListener;
    private boolean postponedScrollIsCanceled;
    private int postponedScrollMessageId;
    private int postponedScrollMinMessageId;
    private int postponedScrollToLastMessageQueryIndex;
    private TLRPC$Document preloadedGreetingsSticker;
    private int prevSetUnreadCount;
    private RadialProgressView progressBar;
    private AlertDialog progressDialog;
    private FrameLayout progressView;
    private View progressView2;
    private float pullingDownAnimateProgress;
    private ChatActivity pullingDownAnimateToActivity;
    private Animator pullingDownBackAnimator;
    private ChatPullingDownDrawable pullingDownDrawable;
    private float pullingDownOffset;
    private SparseArray<MessageObject> repliesMessagesDict;
    private TextView replyButton;
    private AnimatorSet replyButtonAnimation;
    private ImageView replyCloseImageView;
    private ImageView replyIconImageView;
    private int replyImageCacheType;
    private TLRPC$PhotoSize replyImageLocation;
    private TLObject replyImageLocationObject;
    private int replyImageSize;
    private TLRPC$PhotoSize replyImageThumbLocation;
    private BackupImageView replyImageView;
    private View replyLineView;
    private int replyMaxReadId;
    private MessageObject replyMessageHeaderObject;
    private SparseArray<ArrayList<Integer>> replyMessageOwners;
    private SimpleTextView replyNameTextView;
    private SimpleTextView replyObjectHintTextView;
    private SimpleTextView replyObjectTextView;
    private TLRPC$Chat replyOriginalChat;
    private int replyOriginalMessageId;
    private MessageObject replyingMessageObject;
    private TextView reportSpamButton;
    private AnimatorSet reportSpamViewAnimator;
    private int reportType;
    private int returnToLoadIndex;
    private int returnToMessageId;
    private AnimatorSet runningAnimation;
    private TLRPC$TL_messages_discussionMessage savedDiscussionMessage;
    private TLRPC$messages_Messages savedHistory;
    private boolean savedNoDiscussion;
    private boolean savedNoHistory;
    private int scheduledMessagesCount;
    private HintView scheduledOrNoSoundHint;
    private AnimatorSet scrimAnimatorSet;
    private Paint scrimPaint;
    private ActionBarPopupWindow scrimPopupWindow;
    private ActionBarMenuSubItem[] scrimPopupWindowItems;
    private int scrimPopupX;
    private int scrimPopupY;
    private View scrimView;
    private int scrollAnimationIndex;
    private boolean scrollByTouch;
    private int scrollCallbackAnimationIndex;
    private MessageObject scrollToMessage;
    private int scrollToMessagePosition;
    private int scrollToOffsetOnRecreate;
    private int scrollToPositionOnRecreate;
    private boolean scrollToThreadMessage;
    private boolean scrollToTopOnResume;
    private boolean scrollToTopUnReadOnResume;
    private boolean scrollToVideo;
    private boolean scrollingChatListView;
    private boolean scrollingFloatingDate;
    private HintView searchAsListHint;
    private boolean searchAsListHintShown;
    private View searchAsListTogglerView;
    private ImageView searchCalendarButton;
    private FrameLayout searchContainer;
    private SearchCounterView searchCountText;
    private ImageView searchDownButton;
    private ActionBarMenuItem searchIconItem;
    private ActionBarMenuItem searchItem;
    private boolean searchItemVisible;
    public String searchString;
    private ImageView searchUpButton;
    private ImageView searchUserButton;
    private TLRPC$Chat searchingChatMessages;
    private boolean searchingForUser;
    private TLRPC$User searchingUserMessages;
    private SparseArray<MessageObject>[] selectedMessagesCanCopyIds;
    private SparseArray<MessageObject>[] selectedMessagesCanStarIds;
    private NumberTextView selectedMessagesCountTextView;
    private SparseArray<MessageObject>[] selectedMessagesIds;
    private MessageObject selectedObject;
    private MessageObject.GroupedMessages selectedObjectGroup;
    private MessageObject selectedObjectToEditCaption;
    private boolean setPinnedTextTranslationX;
    private boolean showAudioCallAsIcon;
    private boolean showCloseChatDialogLater;
    private boolean showPinBulletin;
    private final Runnable showScheduledOrNoSoundRunnable;
    private boolean showScrollToMessageError;
    private boolean showSearchAsIcon;
    private boolean showSwitchMediaChannelButton;
    private boolean showTapForForwardingOptionsHit;
    private ChatMessageCell slidingView;
    private HintView slowModeHint;
    private boolean sponsoredMessagesAdded;
    private int startFromVideoMessageId;
    private int startFromVideoTimestamp;
    private int startLoadFromMessageId;
    private int startLoadFromMessageIdSaved;
    private int startLoadFromMessageOffset;
    private String startVideoEdit;
    private boolean startedTrackingSlidingView;
    private StickersAdapter stickersAdapter;
    private RecyclerListView stickersListView;
    private RecyclerListView.OnItemClickListener stickersOnItemClickListener;
    private FrameLayout stickersPanel;
    private ImageView stickersPanelArrow;
    private boolean swipeBackEnabled;
    private FrameLayout switchMediaChannelButton;
    private ImageView switchMediaChannelImage;
    private Runnable tapForForwardingOptionsHitRunnable;
    private TextSelectionHelper.ChatListTextSelectionHelper textSelectionHelper;
    private TextSelectionHint textSelectionHint;
    private boolean textSelectionHintWasShowed;
    private ThemeDelegate themeDelegate;
    private int threadMaxInboxReadId;
    private int threadMaxOutboxReadId;
    private boolean threadMessageAdded;
    private int threadMessageId;
    private MessageObject threadMessageObject;
    private ArrayList<MessageObject> threadMessageObjects;
    private boolean threadMessageVisible;
    private int threadUnreadMessagesCount;
    private View timeItem2;
    private HintView timerHintView;
    private boolean toPullingDownTransition;
    private FrameLayout topChatPanelView;
    private float topChatPanelViewOffset;
    private UndoView topUndoView;
    private float topViewOffset;
    private int topViewWasVisible;
    private int totalPinnedMessagesCount;
    private int transitionAnimationIndex;
    private UndoView undoView;
    private MessageObject unreadMessageObject;
    private Runnable unselectRunnable;
    private Runnable updateDeleteItemRunnable;
    Runnable updatePinnedProgressRunnable;
    private boolean userBlocked;
    protected TLRPC$UserFull userInfo;
    private FrameLayout videoPlayerContainer;
    private TextureView videoTextureView;
    private String voiceChatHash;
    private HintView voiceHintTextView;
    private Runnable waitingForCharaterEnterRunnable;
    private ArrayList<Integer> waitingForLoad;
    private SparseArray<MessageObject> waitingForReplies;
    private boolean waitingForReplyMessageLoad;
    private boolean waitingForSendingMessageLoad;
    private boolean wasManualScroll;
    private boolean wasPaused;

    private interface ChatActivityDelegate {

        /* renamed from: ir.eitaa.ui.ChatActivity$ChatActivityDelegate$-CC, reason: invalid class name */
        public final /* synthetic */ class CC {
            public static void $default$onReport(ChatActivityDelegate chatActivityDelegate) {
            }

            public static void $default$onUnpin(ChatActivityDelegate chatActivityDelegate, boolean z, boolean z2) {
            }

            public static void $default$openReplyMessage(ChatActivityDelegate chatActivityDelegate, int i) {
            }

            public static void $default$openSearch(ChatActivityDelegate chatActivityDelegate, String str) {
            }
        }

        void onReport();

        void onUnpin(boolean all, boolean hide);

        void openReplyMessage(int mid);

        void openSearch(String text);
    }

    static /* synthetic */ boolean lambda$createView$10(View view, MotionEvent motionEvent) {
        return true;
    }

    static /* synthetic */ boolean lambda$createView$11(View view, MotionEvent motionEvent) {
        return true;
    }

    static /* synthetic */ boolean lambda$createView$37(View view, MotionEvent motionEvent) {
        return true;
    }

    static /* synthetic */ void lambda$markSponsoredAsRead$164(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
    }

    static /* synthetic */ boolean lambda$showChatThemeBottomSheet$167(MotionEvent motionEvent) {
        return true;
    }

    static /* synthetic */ void lambda$updateInfoTopView$56(View view) {
    }

    @Override // ir.eitaa.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public /* synthetic */ void startMusicSelectActivity() {
        ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate.CC.$default$startMusicSelectActivity(this);
    }

    static /* synthetic */ float access$12816(ChatActivity chatActivity, float f) {
        float f2 = chatActivity.pullingDownOffset + f;
        chatActivity.pullingDownOffset = f2;
        return f2;
    }

    static /* synthetic */ int access$24710(ChatActivity chatActivity) {
        int i = chatActivity.newMentionsCount;
        chatActivity.newMentionsCount = i - 1;
        return i;
    }

    static /* synthetic */ int access$28308(ChatActivity chatActivity) {
        int i = chatActivity.scheduledMessagesCount;
        chatActivity.scheduledMessagesCount = i + 1;
        return i;
    }

    static /* synthetic */ int access$28312(ChatActivity chatActivity, int i) {
        int i2 = chatActivity.scheduledMessagesCount + i;
        chatActivity.scheduledMessagesCount = i2;
        return i2;
    }

    static /* synthetic */ int access$32704(ChatActivity chatActivity) {
        int i = chatActivity.pinBullerinTag + 1;
        chatActivity.pinBullerinTag = i;
        return i;
    }

    static /* synthetic */ int access$5608(ChatActivity chatActivity) {
        int i = chatActivity.lastLoadIndex;
        chatActivity.lastLoadIndex = i + 1;
        return i;
    }

    static {
        int i = NotificationCenter.commentsRead;
        allowedNotificationsDuringChatListAnimations = new int[]{NotificationCenter.messagesRead, NotificationCenter.threadMessagesRead, i, NotificationCenter.messagesReadEncrypted, NotificationCenter.messagesReadContent, i, NotificationCenter.didLoadPinnedMessages, NotificationCenter.newDraftReceived, NotificationCenter.updateMentionsCount, NotificationCenter.didUpdateConnectionState, NotificationCenter.updateInterfaces, NotificationCenter.closeChats, NotificationCenter.chatInfoCantLoad, NotificationCenter.userInfoDidLoad, NotificationCenter.pinnedInfoDidLoad, NotificationCenter.didSetNewWallpapper, NotificationCenter.didApplyNewTheme};
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$new$0, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$new$0$ChatActivity(DialogInterface dialogInterface) {
        this.postponedScrollIsCanceled = true;
        this.postponedScrollMessageId = 0;
        this.nextScrollToMessageId = 0;
        this.forceNextPinnedMessageId = 0;
        invalidateMessagesVisiblePart();
        showPinnedProgress(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    class UnreadCounterTextView extends View {
        boolean animatedFromBottom;
        private int circleWidth;
        int counterColor;
        private String currentCounterString;
        CharSequence lastText;
        private TextPaint layoutPaint;
        private int layoutTextWidth;
        private Paint paint;
        int panelBackgroundColor;
        private RectF rect;
        ValueAnimator replaceAnimator;
        float replaceProgress;
        private int rippleColor;
        Drawable selectableBackground;
        int textColor;
        private StaticLayout textLayout;
        private StaticLayout textLayoutOut;
        private TextPaint textPaint;
        private int textWidth;

        public UnreadCounterTextView(Context context) {
            super(context);
            this.textPaint = new TextPaint(1);
            this.paint = new Paint(1);
            this.rect = new RectF();
            this.layoutPaint = new TextPaint(1);
            this.replaceProgress = 1.0f;
            this.textPaint.setTextSize(AndroidUtilities.dp(13.0f));
            this.textPaint.setTypeface(AndroidUtilities.getFontFamily(true));
            this.layoutPaint.setTextSize(AndroidUtilities.dp(15.0f));
            this.layoutPaint.setTypeface(AndroidUtilities.getFontFamily(true));
        }

        public void setText(CharSequence text, boolean animatedFromBottom) {
            if (this.lastText == text) {
                return;
            }
            this.lastText = text;
            this.animatedFromBottom = animatedFromBottom;
            this.textLayoutOut = this.textLayout;
            this.layoutTextWidth = (int) Math.ceil(this.layoutPaint.measureText(text, 0, text.length()));
            this.textLayout = new StaticLayout(text, this.layoutPaint, this.layoutTextWidth, Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, true);
            setContentDescription(text);
            invalidate();
            if (this.textLayoutOut != null) {
                ValueAnimator valueAnimator = this.replaceAnimator;
                if (valueAnimator != null) {
                    valueAnimator.cancel();
                }
                this.replaceProgress = 0.0f;
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
                this.replaceAnimator = valueAnimatorOfFloat;
                valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$UnreadCounterTextView$6RFNZWucGxCVBHEXtTPmH62HUU8
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                        this.f$0.lambda$setText$0$ChatActivity$UnreadCounterTextView(valueAnimator2);
                    }
                });
                this.replaceAnimator.setDuration(150L);
                this.replaceAnimator.start();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$setText$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$setText$0$ChatActivity$UnreadCounterTextView(ValueAnimator valueAnimator) {
            this.replaceProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            invalidate();
        }

        public void setText(CharSequence text) {
            this.layoutTextWidth = (int) Math.ceil(this.layoutPaint.measureText(text, 0, text.length()));
            this.textLayout = new StaticLayout(text, this.layoutPaint, this.layoutTextWidth, Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, true);
            setContentDescription(text);
            invalidate();
        }

        @Override // android.view.View
        protected void drawableStateChanged() {
            super.drawableStateChanged();
            Drawable drawable = this.selectableBackground;
            if (drawable != null) {
                drawable.setState(getDrawableState());
            }
        }

        @Override // android.view.View
        public boolean verifyDrawable(Drawable drawable) {
            Drawable drawable2 = this.selectableBackground;
            if (drawable2 != null) {
                return drawable2 == drawable || super.verifyDrawable(drawable);
            }
            return super.verifyDrawable(drawable);
        }

        @Override // android.view.View
        public void jumpDrawablesToCurrentState() {
            super.jumpDrawablesToCurrentState();
            Drawable drawable = this.selectableBackground;
            if (drawable != null) {
                drawable.jumpToCurrentState();
            }
        }

        @Override // android.view.View
        public boolean onTouchEvent(MotionEvent event) {
            StaticLayout staticLayout;
            int iDp;
            if (event.getAction() == 0 && (staticLayout = this.textLayout) != null) {
                int iCeil = (int) Math.ceil(staticLayout.getLineWidth(0));
                if (getMeasuredWidth() != ((View) getParent()).getMeasuredWidth()) {
                    if (ChatActivity.this.botInfo != null) {
                        iDp = getMeasuredWidth();
                    } else {
                        int i = this.circleWidth;
                        iDp = iCeil + (i > 0 ? i + AndroidUtilities.dp(8.0f) : 0) + AndroidUtilities.dp(48.0f);
                    }
                } else {
                    iDp = getMeasuredWidth() - AndroidUtilities.dp(96.0f);
                }
                float f = iDp / 2.0f;
                this.rect.set((getMeasuredWidth() - iDp) / 2, (getMeasuredHeight() / 2.0f) - f, r2 + iDp, (getMeasuredHeight() / 2.0f) + f);
                if (!this.rect.contains(event.getX(), event.getY())) {
                    setPressed(false);
                    return false;
                }
            }
            return super.onTouchEvent(event);
        }

        @Override // android.view.View
        protected void onDraw(Canvas canvas) {
            StaticLayout staticLayout = this.textLayout;
            int themedColor = ChatActivity.this.getThemedColor("chat_fieldOverlayText");
            if (this.textColor != themedColor) {
                TextPaint textPaint = this.layoutPaint;
                this.textColor = themedColor;
                textPaint.setColor(themedColor);
            }
            int themedColor2 = ChatActivity.this.getThemedColor("chat_messagePanelBackground");
            if (this.panelBackgroundColor != themedColor2) {
                TextPaint textPaint2 = this.textPaint;
                this.panelBackgroundColor = themedColor2;
                textPaint2.setColor(themedColor2);
            }
            int themedColor3 = ChatActivity.this.getThemedColor("chat_goDownButtonCounterBackground");
            if (this.counterColor != themedColor3) {
                Paint paint = this.paint;
                this.counterColor = themedColor3;
                paint.setColor(themedColor3);
            }
            if (getParent() != null) {
                int measuredWidth = getMeasuredWidth();
                int measuredWidth2 = (getMeasuredWidth() - measuredWidth) / 2;
                if (this.rippleColor != ChatActivity.this.getThemedColor("chat_fieldOverlayText") || this.selectableBackground == null) {
                    int iDp = AndroidUtilities.dp(60.0f);
                    int themedColor4 = ChatActivity.this.getThemedColor("chat_fieldOverlayText");
                    this.rippleColor = themedColor4;
                    Drawable drawableCreateSimpleSelectorCircleDrawable = Theme.createSimpleSelectorCircleDrawable(iDp, 0, ColorUtils.setAlphaComponent(themedColor4, 26));
                    this.selectableBackground = drawableCreateSimpleSelectorCircleDrawable;
                    drawableCreateSimpleSelectorCircleDrawable.setCallback(this);
                }
                int iDp2 = getLeft() + measuredWidth2 <= 0 ? measuredWidth2 - AndroidUtilities.dp(20.0f) : measuredWidth2;
                int iDp3 = measuredWidth2 + measuredWidth;
                if (iDp3 > ((View) getParent()).getMeasuredWidth()) {
                    iDp3 += AndroidUtilities.dp(20.0f);
                }
                int i = measuredWidth / 2;
                this.selectableBackground.setBounds(iDp2, (getMeasuredHeight() / 2) - i, iDp3, (getMeasuredHeight() / 2) + i);
                this.selectableBackground.draw(canvas);
            }
            if (this.textLayout != null) {
                canvas.save();
                if (this.replaceProgress != 1.0f && this.textLayoutOut != null) {
                    int alpha = this.layoutPaint.getAlpha();
                    canvas.save();
                    canvas.translate(((getMeasuredWidth() - this.textLayoutOut.getWidth()) / 2) - (this.circleWidth / 2), (getMeasuredHeight() - this.textLayout.getHeight()) / 2);
                    canvas.translate(0.0f, (this.animatedFromBottom ? -1.0f : 1.0f) * AndroidUtilities.dp(18.0f) * this.replaceProgress);
                    float f = alpha;
                    this.layoutPaint.setAlpha((int) ((1.0f - this.replaceProgress) * f));
                    this.textLayoutOut.draw(canvas);
                    canvas.restore();
                    canvas.save();
                    canvas.translate(((getMeasuredWidth() - this.layoutTextWidth) / 2) - (this.circleWidth / 2), (getMeasuredHeight() - this.textLayout.getHeight()) / 2);
                    canvas.translate(0.0f, (this.animatedFromBottom ? 1.0f : -1.0f) * AndroidUtilities.dp(18.0f) * (1.0f - this.replaceProgress));
                    this.layoutPaint.setAlpha((int) (f * this.replaceProgress));
                    this.textLayout.draw(canvas);
                    canvas.restore();
                    this.layoutPaint.setAlpha(alpha);
                } else {
                    canvas.translate(((getMeasuredWidth() - this.layoutTextWidth) / 2) - (this.circleWidth / 2), (getMeasuredHeight() - this.textLayout.getHeight()) / 2);
                    this.textLayout.draw(canvas);
                }
                canvas.restore();
            }
            if (this.currentCounterString == null || staticLayout == null) {
                return;
            }
            int iCeil = (int) Math.ceil(staticLayout.getLineWidth(0));
            this.rect.set(((((getMeasuredWidth() - iCeil) / 2) + iCeil) - (this.circleWidth / 2)) + AndroidUtilities.dp(6.0f), (getMeasuredHeight() / 2) - AndroidUtilities.dp(10.0f), r1 + this.circleWidth, (getMeasuredHeight() / 2) + AndroidUtilities.dp(10.0f));
            canvas.drawRoundRect(this.rect, AndroidUtilities.dp(10.0f), AndroidUtilities.dp(10.0f), this.paint);
            canvas.drawText(this.currentCounterString, this.rect.centerX() - (this.textWidth / 2.0f), this.rect.top + AndroidUtilities.dp(14.5f), this.textPaint);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startMultiselect(int position) {
        int i = position - this.chatAdapter.messagesStartRow;
        if (i < 0 || i >= this.messages.size()) {
            return;
        }
        MessageObject messageObject = this.messages.get(i);
        final boolean z = this.selectedMessagesIds[0].get(messageObject.getId(), null) == null && this.selectedMessagesIds[1].get(messageObject.getId(), null) == null;
        final SparseArray sparseArray = new SparseArray();
        for (int i2 = 0; i2 < this.selectedMessagesIds[0].size(); i2++) {
            sparseArray.put(this.selectedMessagesIds[0].keyAt(i2), this.selectedMessagesIds[0].valueAt(i2));
        }
        for (int i3 = 0; i3 < this.selectedMessagesIds[1].size(); i3++) {
            sparseArray.put(this.selectedMessagesIds[1].keyAt(i3), this.selectedMessagesIds[1].valueAt(i3));
        }
        this.chatListView.startMultiselect(position, false, new RecyclerListView.onMultiSelectionChanged() { // from class: ir.eitaa.ui.ChatActivity.7
            boolean limitReached;

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public void onSelectionChanged(int position2, boolean selected, float x, float y) throws Resources.NotFoundException, NumberFormatException {
                int i4 = position2 - ChatActivity.this.chatAdapter.messagesStartRow;
                if (z) {
                    selected = !selected;
                }
                if (i4 < 0 || i4 >= ChatActivity.this.messages.size()) {
                    return;
                }
                MessageObject messageObject2 = ChatActivity.this.messages.get(i4);
                if (!selected || (ChatActivity.this.selectedMessagesIds[0].indexOfKey(messageObject2.getId()) < 0 && ChatActivity.this.selectedMessagesIds[1].indexOfKey(messageObject2.getId()) < 0)) {
                    if ((selected || ChatActivity.this.selectedMessagesIds[0].indexOfKey(messageObject2.getId()) >= 0 || ChatActivity.this.selectedMessagesIds[1].indexOfKey(messageObject2.getId()) >= 0) && messageObject2.contentType == 0) {
                        if (selected && ChatActivity.this.selectedMessagesIds[0].size() + ChatActivity.this.selectedMessagesIds[1].size() >= 50) {
                            this.limitReached = true;
                        } else {
                            this.limitReached = false;
                        }
                        RecyclerView.ViewHolder viewHolderFindViewHolderForAdapterPosition = ChatActivity.this.chatListView.findViewHolderForAdapterPosition(position2);
                        if (viewHolderFindViewHolderForAdapterPosition != null) {
                            View view = viewHolderFindViewHolderForAdapterPosition.itemView;
                            if (view instanceof ChatMessageCell) {
                                ChatActivity.this.processRowSelect(view, false, x, y);
                                return;
                            }
                        }
                        ChatActivity.this.addToSelectedMessages(messageObject2, false);
                        ChatActivity.this.updateActionModeTitle();
                        ChatActivity.this.updateVisibleRows();
                    }
                }
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public boolean canSelect(int position2) {
                int i4 = position2 - ChatActivity.this.chatAdapter.messagesStartRow;
                if (i4 < 0 || i4 >= ChatActivity.this.messages.size()) {
                    return false;
                }
                MessageObject messageObject2 = ChatActivity.this.messages.get(i4);
                if (messageObject2.contentType != 0) {
                    return false;
                }
                if (z || sparseArray.get(messageObject2.getId(), null) != null) {
                    return z && sparseArray.get(messageObject2.getId(), null) != null;
                }
                return true;
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public int checkPosition(int position2, boolean selectionTop) {
                MessageObject.GroupedMessages groupedMessages;
                int i4 = position2 - ChatActivity.this.chatAdapter.messagesStartRow;
                if (i4 >= 0 && i4 < ChatActivity.this.messages.size()) {
                    MessageObject messageObject2 = ChatActivity.this.messages.get(i4);
                    if (messageObject2.contentType == 0 && messageObject2.hasValidGroupId() && (groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(messageObject2.getGroupId())) != null) {
                        return ChatActivity.this.chatAdapter.messagesStartRow + ChatActivity.this.messages.indexOf(groupedMessages.messages.get(selectionTop ? 0 : r5.size() - 1));
                    }
                }
                return position2;
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public boolean limitReached() {
                return this.limitReached;
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public void getPaddings(int[] paddings) {
                paddings[0] = (int) ChatActivity.this.chatListViewPaddingTop;
                paddings[1] = 0;
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.onMultiSelectionChanged
            public void scrollBy(int dy) {
                ChatActivity.this.chatListView.scrollBy(0, dy);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$new$1, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$new$1$ChatActivity() {
        ChatActivityEnterView chatActivityEnterView;
        View sendButton;
        if (getParentActivity() == null || this.fragmentView == null || (chatActivityEnterView = this.chatActivityEnterView) == null || (sendButton = chatActivityEnterView.getSendButton()) == null || this.chatActivityEnterView.getEditField().getText().length() < 5) {
            return;
        }
        SharedConfig.increaseScheduledOrNoSuoundHintShowed();
        if (this.scheduledOrNoSoundHint == null) {
            HintView hintView = new HintView(getParentActivity(), 4, this.themeDelegate);
            this.scheduledOrNoSoundHint = hintView;
            hintView.setShowingDuration(5000L);
            this.scheduledOrNoSoundHint.setAlpha(0.0f);
            this.scheduledOrNoSoundHint.setVisibility(4);
            this.scheduledOrNoSoundHint.setText(LocaleController.getString("ScheduledOrNoSoundHint", R.string.ScheduledOrNoSoundHint));
            this.contentView.addView(this.scheduledOrNoSoundHint, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
        }
        this.scheduledOrNoSoundHint.showForView(sendButton, true);
    }

    public ChatActivity(Bundle args) {
        super(args);
        this.isForwardFromMyName = false;
        this.chatMessageCellsCache = new ArrayList<>();
        this.alredyPlayedStickers = new HashMap<>();
        this.actionModeViews = new ArrayList<>();
        this.showSwitchMediaChannelButton = false;
        this.pinnedMessageImageView = new BackupImageView[2];
        this.pinnedNameTextView = new SimpleTextView[2];
        this.pinnedMessageTextView = new SimpleTextView[2];
        this.pinnedNextAnimation = new AnimatorSet[2];
        this.hideDateDelay = 500;
        this.scheduledMessagesCount = -1;
        this.reportType = -1;
        this.threadMessageVisible = true;
        this.pendingSendMessagesDict = new SparseArray<>();
        this.pendingSendMessages = new ArrayList<>();
        this.animatingMessageObjects = new ArrayList<>();
        this.animatingDocuments = new HashMap<>();
        this.scrollToPositionOnRecreate = -1;
        this.scrollToOffsetOnRecreate = 0;
        this.pollsToCheck = new ArrayList<>(10);
        this.livesToCheck = new ArrayList<>(10);
        this.pinnedMessageIds = new ArrayList<>();
        this.pinnedMessageObjects = new HashMap<>();
        this.loadingPinnedMessages = new SparseArray<>();
        this.currentPinnedMessageIndex = new int[1];
        this.lastStableId = 10;
        this.allowContextBotPanelSecond = true;
        this.paused = true;
        this.firstOpen = true;
        this.lastLoadIndex = 1;
        this.selectedMessagesIds = new SparseArray[]{new SparseArray<>(), new SparseArray<>()};
        this.selectedMessagesCanCopyIds = new SparseArray[]{new SparseArray<>(), new SparseArray<>()};
        this.selectedMessagesCanStarIds = new SparseArray[]{new SparseArray<>(), new SparseArray<>()};
        this.waitingForLoad = new ArrayList<>();
        this.needRemovePreviousSameChatActivity = true;
        this.prevSetUnreadCount = Integer.MIN_VALUE;
        this.animateSendingViews = new ArrayList<>();
        this.messagesDict = new SparseArray[]{new SparseArray<>(), new SparseArray<>()};
        this.repliesMessagesDict = new SparseArray<>();
        this.replyMessageOwners = new SparseArray<>();
        this.messagesByDays = new HashMap<>();
        this.messages = new ArrayList<>();
        this.waitingForReplies = new SparseArray<>();
        this.polls = new LongSparseArray<>();
        this.groupedMessagesMap = new LongSparseArray<>();
        this.maxMessageId = new int[]{ConnectionsManager.DEFAULT_DATACENTER_ID, ConnectionsManager.DEFAULT_DATACENTER_ID};
        this.minMessageId = new int[]{Integer.MIN_VALUE, Integer.MIN_VALUE};
        this.maxDate = new int[]{Integer.MIN_VALUE, Integer.MIN_VALUE};
        this.minDate = new int[2];
        this.endReached = new boolean[2];
        this.cacheEndReached = new boolean[2];
        this.forwardEndReached = new boolean[]{true, true};
        this.firstLoading = true;
        this.last_message_id = 0;
        this.startLoadFromMessageOffset = ConnectionsManager.DEFAULT_DATACENTER_ID;
        this.startFromVideoTimestamp = -1;
        this.first = true;
        this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
        this.scrollToMessagePosition = -10000;
        this.botInfo = new LongSparseArray<>();
        this.destroyTextureViewRunnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$WJog8iaf8V351-xcgrVS6qDf8jo
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.destroyTextureView();
            }
        };
        this.popupAnimationIndex = -1;
        this.updateDeleteItemRunnable = new Runnable() { // from class: ir.eitaa.ui.ChatActivity.1
            @Override // java.lang.Runnable
            public void run() {
                String pluralString;
                if (ChatActivity.this.selectedObject == null || ChatActivity.this.menuDeleteItem == null) {
                    return;
                }
                int iMax = Math.max(0, ChatActivity.this.selectedObject.messageOwner.ttl_period - (ChatActivity.this.getConnectionsManager().getCurrentTime() - ChatActivity.this.selectedObject.messageOwner.date));
                if (iMax < 86400) {
                    pluralString = AndroidUtilities.formatDuration(iMax, false);
                } else {
                    pluralString = LocaleController.formatPluralString("Days", Math.round(iMax / 86400.0f));
                }
                ChatActivity.this.menuDeleteItem.setSubtext(LocaleController.formatString("AutoDeleteIn", R.string.AutoDeleteIn, pluralString));
                AndroidUtilities.runOnUIThread(ChatActivity.this.updateDeleteItemRunnable, 1000L);
            }
        };
        this.swipeBackEnabled = true;
        this.fragmentTransitionRunnable = new Runnable() { // from class: ir.eitaa.ui.ChatActivity.2
            @Override // java.lang.Runnable
            public void run() {
                if (ChatActivity.this.fragmentTransition == null || ChatActivity.this.fragmentTransition.isRunning()) {
                    return;
                }
                ChatActivity.this.fragmentTransition.start();
            }
        };
        this.postponedScrollCancelListener = new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$dJ4WWcQvxlxYAxv_7aDvkEVuGSY
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$new$0$ChatActivity(dialogInterface);
            }
        };
        this.postponeNotificationsWhileLoadingCallback = new NotificationCenter.PostponeNotificationCallback() { // from class: ir.eitaa.ui.ChatActivity.3
            @Override // ir.eitaa.messenger.NotificationCenter.PostponeNotificationCallback
            public boolean needPostpone(int id, int currentAccount, Object[] args2) {
                if (id == NotificationCenter.didReceiveNewMessages) {
                    long jLongValue = ((Long) args2[0]).longValue();
                    if (ChatActivity.this.firstLoading && jLongValue == ChatActivity.this.dialog_id) {
                        return true;
                    }
                }
                return false;
            }
        };
        this.fixedKeyboardHeight = -1;
        this.photoViewerProvider = new PhotoViewer.EmptyPhotoViewerProvider() { // from class: ir.eitaa.ui.ChatActivity.4
            @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
            public PhotoViewer.PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC$FileLocation fileLocation, int index, boolean needPreview) {
                return ChatActivity.this.getPlaceForPhoto(messageObject, fileLocation, needPreview, false);
            }

            @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
            public boolean validateGroupId(long groupId) {
                MessageObject.GroupedMessages groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(groupId);
                return groupedMessages != null && groupedMessages.messages.size() > 1;
            }
        };
        this.botContextProvider = new PhotoViewer.EmptyPhotoViewerProvider() { // from class: ir.eitaa.ui.ChatActivity.5
            /* JADX WARN: Removed duplicated region for block: B:14:0x0044  */
            @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
            /*
                Code decompiled incorrectly, please refer to instructions dump.
                To view partially-correct add '--show-bad-code' argument
            */
            public ir.eitaa.ui.PhotoViewer.PlaceProviderObject getPlaceForPhoto(ir.eitaa.messenger.MessageObject r5, ir.eitaa.tgnet.TLRPC$FileLocation r6, int r7, boolean r8) {
                /*
                    r4 = this;
                    r5 = 0
                    if (r7 < 0) goto L7f
                    ir.eitaa.ui.ChatActivity r6 = ir.eitaa.ui.ChatActivity.this
                    java.util.ArrayList r6 = ir.eitaa.ui.ChatActivity.access$900(r6)
                    int r6 = r6.size()
                    if (r7 < r6) goto L10
                    goto L7f
                L10:
                    ir.eitaa.ui.ChatActivity r6 = ir.eitaa.ui.ChatActivity.this
                    ir.eitaa.ui.Components.RecyclerListView r6 = ir.eitaa.ui.ChatActivity.access$1000(r6)
                    int r6 = r6.getChildCount()
                    ir.eitaa.ui.ChatActivity r8 = ir.eitaa.ui.ChatActivity.this
                    java.util.ArrayList r8 = ir.eitaa.ui.ChatActivity.access$900(r8)
                    java.lang.Object r7 = r8.get(r7)
                    r8 = 0
                    r0 = 0
                L26:
                    if (r0 >= r6) goto L7f
                    ir.eitaa.ui.ChatActivity r1 = ir.eitaa.ui.ChatActivity.this
                    ir.eitaa.ui.Components.RecyclerListView r1 = ir.eitaa.ui.ChatActivity.access$1000(r1)
                    android.view.View r1 = r1.getChildAt(r0)
                    boolean r2 = r1 instanceof ir.eitaa.ui.Cells.ContextLinkCell
                    if (r2 == 0) goto L44
                    r2 = r1
                    ir.eitaa.ui.Cells.ContextLinkCell r2 = (ir.eitaa.ui.Cells.ContextLinkCell) r2
                    ir.eitaa.tgnet.TLRPC$BotInlineResult r3 = r2.getResult()
                    if (r3 != r7) goto L44
                    ir.eitaa.messenger.ImageReceiver r2 = r2.getPhotoImage()
                    goto L45
                L44:
                    r2 = r5
                L45:
                    if (r2 == 0) goto L7c
                    r5 = 2
                    int[] r5 = new int[r5]
                    r1.getLocationInWindow(r5)
                    ir.eitaa.ui.PhotoViewer$PlaceProviderObject r6 = new ir.eitaa.ui.PhotoViewer$PlaceProviderObject
                    r6.<init>()
                    r7 = r5[r8]
                    r6.viewX = r7
                    r7 = 1
                    r5 = r5[r7]
                    int r7 = android.os.Build.VERSION.SDK_INT
                    r0 = 21
                    if (r7 < r0) goto L60
                    goto L62
                L60:
                    int r8 = ir.eitaa.messenger.AndroidUtilities.statusBarHeight
                L62:
                    int r5 = r5 - r8
                    r6.viewY = r5
                    ir.eitaa.ui.ChatActivity r5 = ir.eitaa.ui.ChatActivity.this
                    ir.eitaa.ui.Components.RecyclerListView r5 = ir.eitaa.ui.ChatActivity.access$1000(r5)
                    r6.parentView = r5
                    r6.imageReceiver = r2
                    ir.eitaa.messenger.ImageReceiver$BitmapHolder r5 = r2.getBitmapSafe()
                    r6.thumb = r5
                    int[] r5 = r2.getRoundRadius()
                    r6.radius = r5
                    return r6
                L7c:
                    int r0 = r0 + 1
                    goto L26
                L7f:
                    return r5
                */
                throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass5.getPlaceForPhoto(ir.eitaa.messenger.MessageObject, ir.eitaa.tgnet.TLRPC$FileLocation, int, boolean):ir.eitaa.ui.PhotoViewer$PlaceProviderObject");
            }

            @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
            public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
                if (index < 0 || index >= ChatActivity.this.botContextResults.size()) {
                    return;
                }
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.lambda$createView$31((TLRPC$BotInlineResult) chatActivity.botContextResults.get(index), notify, scheduleDate);
            }
        };
        this.onItemLongClickListener = new RecyclerListView.OnItemLongClickListenerExtended() { // from class: ir.eitaa.ui.ChatActivity.6
            @Override // ir.eitaa.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            public void onLongClickRelease() {
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            public void onMove(float dx, float dy) {
            }

            @Override // ir.eitaa.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            public boolean onItemClick(View view, int position, float x, float y) throws Resources.NotFoundException, NumberFormatException {
                if (ChatActivity.this.textSelectionHelper.isTryingSelect() || ChatActivity.this.textSelectionHelper.isSelectionMode()) {
                    return false;
                }
                ChatActivity.this.wasManualScroll = true;
                if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) {
                    ChatActivity.this.processRowSelect(view, view instanceof ChatMessageCell ? !((ChatMessageCell) view).isInsideBackground(x, y) : false, x, y);
                } else {
                    ChatActivity.this.createMenu(view, false, true, x, y);
                }
                if (view instanceof ChatMessageCell) {
                    ChatActivity.this.startMultiselect(position);
                }
                return true;
            }
        };
        this.onItemClickListener = new RecyclerListView.OnItemClickListenerExtended() { // from class: ir.eitaa.ui.ChatActivity.8
            @Override // ir.eitaa.ui.Components.RecyclerListView.OnItemClickListenerExtended
            public void onItemClick(View view, int position, float x, float y) throws Resources.NotFoundException, NumberFormatException {
                ChatActivity.this.wasManualScroll = true;
                if (!((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() && ChatActivity.this.reportType < 0) {
                    ChatActivity.this.createMenu(view, true, false, x, y);
                    return;
                }
                boolean z = false;
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) view;
                    if (ChatActivity.this.textSelectionHelper.isSelected(chatMessageCell.getMessageObject())) {
                        return;
                    } else {
                        z = !chatMessageCell.isInsideBackground(x, y);
                    }
                }
                ChatActivity.this.processRowSelect(view, z, x, y);
            }
        };
        this.chatScrollHelperCallback = new ChatScrollCallback();
        this.showScheduledOrNoSoundRunnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$z-eIUzrBfpaeOWsiz5-If3qMHOw
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$new$1$ChatActivity();
            }
        };
        this.fromMyName = false;
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:171:0x06f8  */
    /* JADX WARN: Removed duplicated region for block: B:172:0x0709  */
    /* JADX WARN: Removed duplicated region for block: B:216:0x0829  */
    /* JADX WARN: Removed duplicated region for block: B:224:0x0878  */
    /* JADX WARN: Removed duplicated region for block: B:268:0x095e  */
    /* JADX WARN: Type inference failed for: r5v10 */
    /* JADX WARN: Type inference failed for: r5v11, types: [boolean] */
    /* JADX WARN: Type inference failed for: r5v12 */
    /* JADX WARN: Type inference failed for: r6v10 */
    /* JADX WARN: Type inference failed for: r6v11 */
    /* JADX WARN: Type inference failed for: r6v8 */
    /* JADX WARN: Type inference failed for: r6v9, types: [boolean] */
    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public boolean onFragmentCreate() throws java.lang.InterruptedException {
        /*
            Method dump skipped, instructions count: 2431
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.onFragmentCreate():boolean");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$2, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$2$ChatActivity(MessagesStorage messagesStorage, long j, CountDownLatch countDownLatch) {
        this.currentChat = messagesStorage.getChat(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$3, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$3$ChatActivity(MessagesStorage messagesStorage, long j, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$4, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$4$ChatActivity(MessagesStorage messagesStorage, int i, CountDownLatch countDownLatch) {
        this.currentEncryptedChat = messagesStorage.getEncryptedChat(i);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$5, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$5$ChatActivity(MessagesStorage messagesStorage, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(this.currentEncryptedChat.user_id);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$8, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$8$ChatActivity() {
        this.chatInviteRunnable = null;
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        if (ChatObject.isChannel(this.currentChat) && !this.currentChat.megagroup) {
            builder.setMessage(LocaleController.getString("JoinByPeekChannelText", R.string.JoinByPeekChannelText));
            builder.setTitle(LocaleController.getString("JoinByPeekChannelTitle", R.string.JoinByPeekChannelTitle));
        } else {
            builder.setMessage(LocaleController.getString("JoinByPeekGroupText", R.string.JoinByPeekGroupText));
            builder.setTitle(LocaleController.getString("JoinByPeekGroupTitle", R.string.JoinByPeekGroupTitle));
        }
        builder.setPositiveButton(LocaleController.getString("JoinByPeekJoin", R.string.JoinByPeekJoin), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$69wkPFZR_1eOfLuwCpShkLd8Tms
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$onFragmentCreate$6$ChatActivity(dialogInterface, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$6rSrOwHR1QQUCyXJmg11ntp6ZJE
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$onFragmentCreate$7$ChatActivity(dialogInterface, i);
            }
        });
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$6, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$6$ChatActivity(DialogInterface dialogInterface, int i) {
        UnreadCounterTextView unreadCounterTextView = this.bottomOverlayChatText;
        if (unreadCounterTextView != null) {
            unreadCounterTextView.callOnClick();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onFragmentCreate$7, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onFragmentCreate$7$ChatActivity(DialogInterface dialogInterface, int i) {
        finishFragment();
    }

    private void fillInviterId(boolean load) {
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat == null || this.chatInfo == null || ChatObject.isNotInChat(tLRPC$Chat) || this.currentChat.creator) {
            return;
        }
        TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
        long j = tLRPC$ChatFull.inviterId;
        if (j != 0) {
            this.chatInviterId = j;
            return;
        }
        TLRPC$ChatParticipants tLRPC$ChatParticipants = tLRPC$ChatFull.participants;
        if (tLRPC$ChatParticipants != null) {
            TLRPC$ChatParticipant tLRPC$ChatParticipant = tLRPC$ChatParticipants.self_participant;
            if (tLRPC$ChatParticipant != null) {
                this.chatInviterId = tLRPC$ChatParticipant.inviter_id;
                return;
            }
            long clientUserId = getUserConfig().getClientUserId();
            int size = this.chatInfo.participants.participants.size();
            for (int i = 0; i < size; i++) {
                TLRPC$ChatParticipant tLRPC$ChatParticipant2 = this.chatInfo.participants.participants.get(i);
                if (tLRPC$ChatParticipant2.user_id == clientUserId) {
                    this.chatInviterId = tLRPC$ChatParticipant2.inviter_id;
                    return;
                }
            }
        }
        if (load && this.chatInviterId == 0) {
            getMessagesController().checkChatInviter(this.currentChat.id, false);
        }
    }

    private void hideUndoViews() {
        UndoView undoView = this.undoView;
        if (undoView != null) {
            undoView.hide(true, 0);
        }
        Bulletin bulletin = this.pinBulletin;
        if (bulletin != null) {
            bulletin.hide(false, 0L);
        }
        UndoView undoView2 = this.topUndoView;
        if (undoView2 != null) {
            undoView2.hide(true, 0);
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onFragmentDestroy() throws InterruptedException {
        super.onFragmentDestroy();
        ChatLockHelper.removeFromUnlockedChats(Long.valueOf(getDialogId()));
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.onDestroy();
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.onDestroy();
        }
        MentionsAdapter mentionsAdapter = this.mentionsAdapter;
        if (mentionsAdapter != null) {
            mentionsAdapter.onDestroy();
        }
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.dismissInternal();
        }
        getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
        getNotificationCenter().onAnimationFinish(this.scrollAnimationIndex);
        getNotificationCenter().onAnimationFinish(this.scrollCallbackAnimationIndex);
        hideUndoViews();
        Runnable runnable = this.chatInviteRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
            this.chatInviteRunnable = null;
        }
        getNotificationCenter().removePostponeNotificationsCallback(this.postponeNotificationsWhileLoadingCallback);
        getMessagesController().setLastCreatedDialogId(this.dialog_id, this.chatMode == 1, false);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesDidLoad);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.emojiLoaded);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.invalidateMotionBackground);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateConnectionState);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateInterfaces);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceiveNewMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.closeChats);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.threadMessagesRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.commentsRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.changeRepliesCounter);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesDeleted);
        getNotificationCenter().removeObserver(this, NotificationCenter.historyCleared);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageReceivedByServer);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageReceivedByAck);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageSendError);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadChatInviter);
        getNotificationCenter().removeObserver(this, NotificationCenter.groupCallUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.encryptedChatUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesReadEncrypted);
        getNotificationCenter().removeObserver(this, NotificationCenter.removeAllMessagesFromDialog);
        getNotificationCenter().removeObserver(this, NotificationCenter.contactsDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingProgressDidChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingDidReset);
        getNotificationCenter().removeObserver(this, NotificationCenter.screenshotTook);
        getNotificationCenter().removeObserver(this, NotificationCenter.blockedUsersDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.fileNewChunkAvailable);
        getNotificationCenter().removeObserver(this, NotificationCenter.didCreatedNewDeleteTask);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingDidStart);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingGoingToStop);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateMessageMedia);
        getNotificationCenter().removeObserver(this, NotificationCenter.replaceMessagesObjects);
        getNotificationCenter().removeObserver(this, NotificationCenter.notificationsSettingsUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.replyMessagesDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceivedWebpages);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceivedWebpagesInUpdates);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesReadContent);
        getNotificationCenter().removeObserver(this, NotificationCenter.botInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.botKeyboardDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatSearchResultsAvailable);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatSearchResultsLoading);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingPlayStateChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateMessagesViews);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatInfoCantLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadPinnedMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.peerSettingsDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.newDraftReceived);
        getNotificationCenter().removeObserver(this, NotificationCenter.userInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.pinnedInfoDidLoad);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.didSetNewWallpapper);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.didApplyNewTheme);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.goingToPreviewTheme);
        getNotificationCenter().removeObserver(this, NotificationCenter.channelRightsUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateMentionsCount);
        getNotificationCenter().removeObserver(this, NotificationCenter.audioRecordTooShort);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdatePollResults);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateReactions);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatOnlineCountDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.videoLoadingStateChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.scheduledMessagesUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.diceStickersDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.dialogDeleted);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadSponsoredMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateLive);
        if (this.currentEncryptedChat != null) {
            getNotificationCenter().removeObserver(this, NotificationCenter.didVerifyMessagesStickers);
        }
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.needSetDayNightTheme);
        if (this.chatMode == 0 && AndroidUtilities.isTablet()) {
            getNotificationCenter().postNotificationName(NotificationCenter.openedChatChanged, Long.valueOf(this.dialog_id), Boolean.TRUE);
        }
        if (this.currentUser != null) {
            MediaController.getInstance().stopMediaObserver();
        }
        if (this.currentEncryptedChat != null) {
            try {
                if (Build.VERSION.SDK_INT >= 23 && (SharedConfig.passcodeHash.length() == 0 || SharedConfig.allowScreenCapture)) {
                    AndroidUtilities.setFlagSecure(this, false);
                }
            } catch (Throwable th) {
                FileLog.e(th);
            }
        }
        if (this.currentUser != null) {
            getMessagesController().cancelLoadFullUser(this.currentUser.id);
        }
        AndroidUtilities.removeAdjustResize(getParentActivity(), this.classGuid);
        StickersAdapter stickersAdapter = this.stickersAdapter;
        if (stickersAdapter != null) {
            stickersAdapter.onDestroy();
        }
        ChatAttachAlert chatAttachAlert2 = this.chatAttachAlert;
        if (chatAttachAlert2 != null) {
            chatAttachAlert2.onDestroy();
        }
        AndroidUtilities.unlockOrientation(getParentActivity());
        if (ChatObject.isChannel(this.currentChat)) {
            getMessagesController().startShortPoll(this.currentChat, this.classGuid, true);
            TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
            if (tLRPC$ChatFull != null && tLRPC$ChatFull.linked_chat_id != 0) {
                getMessagesController().startShortPoll(getMessagesController().getChat(Long.valueOf(this.chatInfo.linked_chat_id)), this.classGuid, true);
            }
        }
        TextSelectionHelper.ChatListTextSelectionHelper chatListTextSelectionHelper = this.textSelectionHelper;
        if (chatListTextSelectionHelper != null) {
            chatListTextSelectionHelper.clear();
        }
        ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
        if (chatListItemAnimator != null) {
            chatListItemAnimator.onDestroy();
        }
        PinchToZoomHelper pinchToZoomHelper = this.pinchToZoomHelper;
        if (pinchToZoomHelper != null) {
            pinchToZoomHelper.clear();
        }
        this.chatThemeBottomSheet = null;
    }

    /* JADX WARN: Removed duplicated region for block: B:156:0x04bc  */
    /* JADX WARN: Removed duplicated region for block: B:177:0x053a  */
    /* JADX WARN: Removed duplicated region for block: B:286:0x0983  */
    /* JADX WARN: Removed duplicated region for block: B:310:0x0acf  */
    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public android.view.View createView(final android.content.Context r42) throws android.content.res.Resources.NotFoundException {
        /*
            Method dump skipped, instructions count: 8609
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.createView(android.content.Context):android.view.View");
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$10, reason: invalid class name */
    class AnonymousClass10 extends ActionBar.ActionBarMenuOnItemClick {
        AnonymousClass10() {
        }

        /* JADX WARN: Code restructure failed: missing block: B:253:0x0726, code lost:
        
            if (android.text.TextUtils.isEmpty(r2.username) != false) goto L265;
         */
        @Override // ir.eitaa.ui.ActionBar.ActionBar.ActionBarMenuOnItemClick
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void onItemClick(final int r27) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
            /*
                Method dump skipped, instructions count: 1921
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass10.onItemClick(int):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onItemClick$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onItemClick$0$ChatActivity$10(boolean z, int i) {
            if (i <= 0 || ChatActivity.this.getParentActivity() == null) {
                return;
            }
            BulletinFactory.of(ChatActivity.this).createDownloadBulletin(z ? BulletinFactory.FileType.AUDIOS : BulletinFactory.FileType.UNKNOWNS, i, ChatActivity.this.themeDelegate).show();
        }

        /* renamed from: ir.eitaa.ui.ChatActivity$10$1, reason: invalid class name */
        class AnonymousClass1 implements ClearHistoryAlert.ClearHistoryAlertDelegate {
            AnonymousClass1() {
            }

            @Override // ir.eitaa.ui.Components.ClearHistoryAlert.ClearHistoryAlertDelegate
            public void onClearHistory(boolean revoke) {
                if (revoke) {
                    ChatActivity chatActivity = ChatActivity.this;
                    if (chatActivity.currentUser != null) {
                        chatActivity.getMessagesStorage().getMessagesCount(ChatActivity.this.currentUser.id, new MessagesStorage.IntCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$10$1$IwoHdFkz-z1qSwyt2vcddbLPUac
                            @Override // ir.eitaa.messenger.MessagesStorage.IntCallback
                            public final void run(int i) {
                                this.f$0.lambda$onClearHistory$1$ChatActivity$10$1(i);
                            }
                        });
                        return;
                    }
                }
                ChatActivity.this.performHistoryClear(revoke);
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$onClearHistory$0, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$onClearHistory$0$ChatActivity$10$1(boolean z) {
                ChatActivity.this.performHistoryClear(true);
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$onClearHistory$1, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$onClearHistory$1$ChatActivity$10$1(int i) {
                if (i >= 50) {
                    ChatActivity chatActivity = ChatActivity.this;
                    AlertsCreator.createClearOrDeleteDialogAlert(chatActivity, true, false, true, null, chatActivity.currentUser, false, false, new MessagesStorage.BooleanCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$10$1$aGAv7yCFrJiFd4N6I1WWXSlRtw8
                        @Override // ir.eitaa.messenger.MessagesStorage.BooleanCallback
                        public final void run(boolean z) {
                            this.f$0.lambda$onClearHistory$0$ChatActivity$10$1(z);
                        }
                    }, chatActivity.themeDelegate);
                } else {
                    ChatActivity.this.performHistoryClear(true);
                }
            }

            @Override // ir.eitaa.ui.Components.ClearHistoryAlert.ClearHistoryAlertDelegate
            public void onAutoDeleteHistory(int ttl, int action) {
                ChatActivity.this.getMessagesController().setDialogHistoryTTL(ChatActivity.this.dialog_id, ttl);
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.userInfo == null && chatActivity.chatInfo == null) {
                    return;
                }
                UndoView undoView = chatActivity.undoView;
                long j = ChatActivity.this.dialog_id;
                ChatActivity chatActivity2 = ChatActivity.this;
                TLRPC$User tLRPC$User = chatActivity2.currentUser;
                TLRPC$UserFull tLRPC$UserFull = chatActivity2.userInfo;
                undoView.showWithAction(j, action, tLRPC$User, Integer.valueOf(tLRPC$UserFull != null ? tLRPC$UserFull.ttl_period : chatActivity2.chatInfo.ttl_period), (Runnable) null, (Runnable) null);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onItemClick$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onItemClick$1$ChatActivity$10(int i, boolean z) {
            if (i == 15 && ChatObject.isChannel(ChatActivity.this.currentChat)) {
                TLRPC$Chat tLRPC$Chat = ChatActivity.this.currentChat;
                if (!tLRPC$Chat.megagroup || !TextUtils.isEmpty(tLRPC$Chat.username)) {
                    ChatActivity.this.getMessagesController().deleteDialog(ChatActivity.this.dialog_id, 2, z);
                    return;
                }
            }
            if (i != 15) {
                NotificationCenter notificationCenter = ChatActivity.this.getNotificationCenter();
                ChatActivity chatActivity = ChatActivity.this;
                int i2 = NotificationCenter.closeChats;
                notificationCenter.removeObserver(chatActivity, i2);
                ChatActivity.this.getNotificationCenter().postNotificationName(i2, new Object[0]);
                ChatActivity.this.finishFragment();
                NotificationCenter notificationCenter2 = ChatActivity.this.getNotificationCenter();
                int i3 = NotificationCenter.needDeleteDialog;
                ChatActivity chatActivity2 = ChatActivity.this;
                notificationCenter2.postNotificationName(i3, Long.valueOf(ChatActivity.this.dialog_id), chatActivity2.currentUser, chatActivity2.currentChat, Boolean.valueOf(z));
                return;
            }
            ChatActivity.this.performHistoryClear(z);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$9, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$9$ChatActivity(View view, MotionEvent motionEvent) {
        ChatThemeBottomSheet chatThemeBottomSheet = this.chatThemeBottomSheet;
        if (chatThemeBottomSheet == null) {
            return false;
        }
        chatThemeBottomSheet.close();
        return true;
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$11, reason: invalid class name */
    class AnonymousClass11 extends ActionBarMenuItem.ActionBarMenuItemSearchListener {
        boolean searchWas;

        AnonymousClass11() {
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public boolean canCollapseSearch() {
            if (ChatActivity.this.messagesSearchListView.getTag() == null) {
                return true;
            }
            ChatActivity.this.showMessagesSearchListView(false);
            return false;
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchCollapse() throws Resources.NotFoundException, NumberFormatException {
            TLRPC$Chat tLRPC$Chat;
            ChatActivity.this.searchCalendarButton.setVisibility(0);
            if (ChatActivity.this.searchUserButton != null) {
                ChatActivity.this.searchUserButton.setVisibility(0);
            }
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false, true);
                ChatActivity.this.searchingForUser = false;
            }
            ChatActivity.this.mentionLayoutManager.setReverseLayout(false);
            ChatActivity.this.mentionsAdapter.setSearchingMentions(false);
            ChatActivity.this.searchingUserMessages = null;
            ChatActivity.this.searchingChatMessages = null;
            ChatActivity.this.searchItem.setSearchFieldHint(LocaleController.getString("Search", R.string.Search));
            ChatActivity.this.searchItem.setSearchFieldCaption(null);
            AndroidUtilities.updateViewVisibilityAnimated(ChatActivity.this.avatarContainer, true, 0.95f, true);
            if (ChatActivity.this.editTextItem != null && ChatActivity.this.editTextItem.getTag() != null) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(0);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(8);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(8);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(8);
                }
            } else if (!ChatActivity.this.chatActivityEnterView.hasText() || !TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer()) || ((tLRPC$Chat = ChatActivity.this.currentChat) != null && !ChatObject.canSendMessages(tLRPC$Chat))) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(0);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(0);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(0);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(8);
                }
            } else {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(0);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(8);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(8);
                }
            }
            if ((ChatActivity.this.threadMessageId == 0 && !UserObject.isReplyUser(ChatActivity.this.currentUser)) || (ChatActivity.this.threadMessageObject != null && ChatActivity.this.threadMessageObject.getRepliesCount() == 0)) {
                ChatActivity.this.searchItem.setVisibility(8);
            }
            ChatActivity.this.searchItemVisible = false;
            ChatActivity.this.getMediaDataController().clearFoundMessageObjects();
            if (ChatActivity.this.messagesSearchAdapter != null) {
                ChatActivity.this.messagesSearchAdapter.notifyDataSetChanged();
            }
            ChatActivity.this.removeSelectedMessageHighlight();
            ChatActivity.this.updateBottomOverlay();
            ChatActivity.this.updatePinnedMessageView(true);
            ChatActivity.this.updateVisibleRows();
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchExpand() {
            if (ChatActivity.this.threadMessageId != 0 || UserObject.isReplyUser(ChatActivity.this.currentUser)) {
                ChatActivity.this.openSearchWithText(null);
            }
            if (ChatActivity.this.openSearchKeyboard) {
                ChatActivity.this.saveKeyboardPositionBeforeTransition();
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$11$VXKkrl0Nkpx022zzv0p6rkJKORM
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onSearchExpand$0$ChatActivity$11();
                    }
                }, 500L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onSearchExpand$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onSearchExpand$0$ChatActivity$11() {
            this.searchWas = false;
            ChatActivity.this.searchItem.getSearchField().requestFocus();
            AndroidUtilities.showKeyboard(ChatActivity.this.searchItem.getSearchField());
            ChatActivity.this.removeKeyboardPositionBeforeTransition();
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchPressed(EditText editText) {
            this.searchWas = true;
            ChatActivity.this.updateSearchButtons(0, 0, -1);
            ChatActivity.this.getMediaDataController().searchMessagesInChat(editText.getText().toString(), ChatActivity.this.dialog_id, ChatActivity.this.mergeDialogId, ((BaseFragment) ChatActivity.this).classGuid, 0, ChatActivity.this.threadMessageId, ChatActivity.this.searchingUserMessages, ChatActivity.this.searchingChatMessages);
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onTextChanged(EditText editText) {
            ChatActivity.this.showMessagesSearchListView(false);
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag("@" + editText.getText().toString(), 0, ChatActivity.this.messages, true, true);
                return;
            }
            if (ChatActivity.this.searchingUserMessages == null && ChatActivity.this.searchingChatMessages == null && ChatActivity.this.searchUserButton != null && TextUtils.equals(editText.getText(), LocaleController.getString("SearchFrom", R.string.SearchFrom))) {
                ChatActivity.this.searchUserButton.callOnClick();
            }
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onCaptionCleared() {
            if (ChatActivity.this.searchingUserMessages != null || ChatActivity.this.searchingChatMessages != null) {
                ChatActivity.this.searchUserButton.callOnClick();
                return;
            }
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false, true);
                ChatActivity.this.searchingForUser = false;
                ChatActivity.this.searchItem.setSearchFieldText("", true);
            }
            ChatActivity.this.searchItem.setSearchFieldHint(LocaleController.getString("Search", R.string.Search));
            ChatActivity.this.searchCalendarButton.setVisibility(0);
            ChatActivity.this.searchUserButton.setVisibility(0);
            ChatActivity.this.searchingUserMessages = null;
            ChatActivity.this.searchingChatMessages = null;
        }

        @Override // ir.eitaa.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public boolean forceShowClear() {
            return ChatActivity.this.searchingForUser;
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$13, reason: invalid class name */
    class AnonymousClass13 extends SizeNotifierFrameLayout {
        AdjustPanLayoutHelper adjustPanLayoutHelper;
        int backgroundColor;
        Paint backgroundPaint;
        ArrayList<ChatMessageCell> drawCaptionAfter;
        ArrayList<ChatMessageCell> drawNamesAfter;
        ArrayList<ChatMessageCell> drawTimeAfter;
        int inputFieldHeight;
        int lastHeight;
        int lastWidth;
        final /* synthetic */ Context val$context;

        /* JADX WARN: 'super' call moved to the top of the method (can break code semantics) */
        AnonymousClass13(Context context, ActionBarLayout layout, final Context val$context) {
            super(context, layout);
            this.val$context = val$context;
            this.inputFieldHeight = 0;
            this.drawTimeAfter = new ArrayList<>();
            this.drawNamesAfter = new ArrayList<>();
            this.drawCaptionAfter = new ArrayList<>();
            this.adjustPanLayoutHelper = new AdjustPanLayoutHelper(this) { // from class: ir.eitaa.ui.ChatActivity.13.1
                @Override // ir.eitaa.ui.ActionBar.AdjustPanLayoutHelper
                protected void onTransitionStart(boolean keyboardVisible, int contentHeight) {
                    ChatActivity.this.wasManualScroll = true;
                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                    if (chatActivityEnterView != null) {
                        chatActivityEnterView.onAdjustPanTransitionStart(keyboardVisible);
                    }
                }

                @Override // ir.eitaa.ui.ActionBar.AdjustPanLayoutHelper
                protected void onPanTranslationUpdate(float y, float progress, boolean keyboardVisible) {
                    if (ChatActivity.this.getParentLayout() == null || !ChatActivity.this.getParentLayout().isPreviewOpenAnimationInProgress()) {
                        ChatActivity.this.contentPanTranslation = y;
                        if (ChatActivity.this.chatAttachAlert == null || !ChatActivity.this.chatAttachAlert.isShowing()) {
                            ((BaseFragment) ChatActivity.this).actionBar.setTranslationY(y);
                            float f = y / 2.0f;
                            ChatActivity.this.emptyViewContainer.setTranslationY(f);
                            ChatActivity.this.progressView.setTranslationY(f);
                            int i = (int) y;
                            ChatActivity.this.contentView.setBackgroundTranslation(i);
                            ChatActivity.this.instantCameraView.onPanTranslationUpdate(y);
                            if (ChatActivity.this.blurredView != null) {
                                ChatActivity.this.blurredView.drawable.onPanTranslationUpdate(y);
                            }
                            ChatActivity.this.setFragmentPanTranslationOffset(i);
                            ChatActivity.this.invalidateChatListViewTopPadding();
                            ChatActivity.this.invalidateMessagesVisiblePart();
                        } else {
                            AnonymousClass13.this.setNonNoveTranslation(y);
                        }
                        ChatActivity.this.chatListView.invalidate();
                        ChatActivity.this.updateBulletinLayout();
                    }
                }

                @Override // ir.eitaa.ui.ActionBar.AdjustPanLayoutHelper
                protected boolean heightAnimationEnabled() {
                    ActionBarLayout parentLayout = ChatActivity.this.getParentLayout();
                    if (((BaseFragment) ChatActivity.this).inPreviewMode || ((BaseFragment) ChatActivity.this).inBubbleMode || AndroidUtilities.isInMultiwindow || parentLayout == null || ChatActivity.this.fixedKeyboardHeight > 0 || System.currentTimeMillis() - ChatActivity.this.activityResumeTime < 250) {
                        return false;
                    }
                    if ((ChatActivity.this != parentLayout.getLastFragment() || !parentLayout.isTransitionAnimationInProgress()) && !parentLayout.isPreviewOpenAnimationInProgress() && !((BaseFragment) ChatActivity.this).isPaused) {
                        ChatActivity chatActivity = ChatActivity.this;
                        if (chatActivity.openAnimationEnded && (chatActivity.chatAttachAlert == null || !ChatActivity.this.chatAttachAlert.isShowing())) {
                            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                            return chatActivityEnterView == null || chatActivityEnterView.getTrendingStickersAlert() == null || !ChatActivity.this.chatActivityEnterView.getTrendingStickersAlert().isShowing();
                        }
                    }
                    return false;
                }

                @Override // ir.eitaa.ui.ActionBar.AdjustPanLayoutHelper
                protected int startOffset() {
                    if (AnonymousClass13.this.getKeyboardHeight() > AndroidUtilities.dp(20.0f) || !ChatActivity.this.chatActivityEnterView.isPopupShowing()) {
                        return 0;
                    }
                    return ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                }
            };
        }

        @Override // android.view.ViewGroup, android.view.View
        protected void onAttachedToWindow() {
            super.onAttachedToWindow();
            this.adjustPanLayoutHelper.onAttach();
            ChatActivity.this.chatActivityEnterView.setAdjustPanLayoutHelper(this.adjustPanLayoutHelper);
            MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
            if (playingMessageObject != null && ((playingMessageObject.isRoundVideo() || playingMessageObject.isVideo()) && playingMessageObject.eventId == 0 && playingMessageObject.getDialogId() == ChatActivity.this.dialog_id)) {
                MediaController.getInstance().setTextureView(ChatActivity.this.createTextureView(false), ChatActivity.this.aspectRatioFrameLayout, ChatActivity.this.videoPlayerContainer, true);
            }
            if (ChatActivity.this.pullingDownDrawable != null) {
                ChatActivity.this.pullingDownDrawable.onAttach();
            }
            ChatActivity.this.emojiAnimationsOverlay.onAttachedToWindow();
        }

        @Override // android.view.ViewGroup, android.view.View
        protected void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            this.adjustPanLayoutHelper.onDetach();
            if (ChatActivity.this.pullingDownDrawable != null) {
                ChatActivity.this.pullingDownDrawable.onDetach();
                ChatActivity.this.pullingDownDrawable = null;
            }
            ChatActivity.this.emojiAnimationsOverlay.onDetachedFromWindow();
        }

        @Override // android.view.ViewGroup, android.view.View
        public boolean dispatchTouchEvent(MotionEvent ev) {
            float y;
            if (AndroidUtilities.isInMultiwindow || ChatActivity.this.isInBubbleMode()) {
                y = (ChatActivity.this.chatActivityEnterView.getEmojiView() != null ? ChatActivity.this.chatActivityEnterView.getEmojiView() : ChatActivity.this.chatActivityEnterView).getY();
            } else {
                y = ChatActivity.this.chatActivityEnterView.getY();
            }
            if (ChatActivity.this.scrimView != null) {
                return false;
            }
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null && chatActivityEnterView.isStickersExpanded() && ev.getY() < y) {
                return false;
            }
            ChatActivity.this.lastTouchY = ev.getY();
            TextSelectionHelper<Cell>.TextSelectionOverlay overlayView = ChatActivity.this.textSelectionHelper.getOverlayView(this.val$context);
            ev.offsetLocation(-overlayView.getX(), -overlayView.getY());
            if (ChatActivity.this.textSelectionHelper.isSelectionMode() && ChatActivity.this.textSelectionHelper.getOverlayView(this.val$context).onTouchEvent(ev)) {
                return true;
            }
            ev.offsetLocation(overlayView.getX(), overlayView.getY());
            if (overlayView.checkOnTap(ev)) {
                ev.setAction(3);
            }
            if (ev.getAction() != 0 || !ChatActivity.this.textSelectionHelper.isSelectionMode() || (ev.getY() >= ChatActivity.this.chatListView.getTop() && ev.getY() <= ChatActivity.this.chatListView.getBottom())) {
                if (ChatActivity.this.pinchToZoomHelper.isInOverlayMode()) {
                    return ChatActivity.this.pinchToZoomHelper.onTouchEvent(ev);
                }
                if (AvatarPreviewer.hasVisibleInstance()) {
                    AvatarPreviewer.getInstance().onTouchEvent(ev);
                    return true;
                }
                return super.dispatchTouchEvent(ev);
            }
            ev.offsetLocation(-overlayView.getX(), -overlayView.getY());
            if (!ChatActivity.this.textSelectionHelper.getOverlayView(this.val$context).onTouchEvent(ev)) {
                return true;
            }
            ev.offsetLocation(overlayView.getX(), overlayView.getY());
            return super.dispatchTouchEvent(ev);
        }

        @Override // ir.eitaa.ui.Components.SizeNotifierFrameLayout, android.view.View
        protected void onDraw(Canvas canvas) {
            if (getTag(67108867) != null) {
                return;
            }
            if (getTag(67108867) == null) {
                if (ChatActivity.this.instantCameraView.blurFullyDrawing()) {
                    return;
                }
                if (ChatActivity.this.blurredView != null && ChatActivity.this.blurredView.fullyDrawing() && ChatActivity.this.blurredView.getTag() != null) {
                    return;
                }
            }
            super.onDraw(canvas);
        }

        /* JADX WARN: Code restructure failed: missing block: B:39:0x0092, code lost:
        
            r0 = false;
         */
        /* JADX WARN: Removed duplicated region for block: B:105:0x0205  */
        /* JADX WARN: Removed duplicated region for block: B:136:0x02ff  */
        /* JADX WARN: Removed duplicated region for block: B:86:0x0133  */
        @Override // android.view.ViewGroup
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected boolean drawChild(android.graphics.Canvas r9, android.view.View r10, long r11) {
            /*
                Method dump skipped, instructions count: 810
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass13.drawChild(android.graphics.Canvas, android.view.View, long):boolean");
        }

        @Override // ir.eitaa.ui.Components.SizeNotifierFrameLayout
        protected boolean isActionBarVisible() {
            return ((BaseFragment) ChatActivity.this).actionBar.getVisibility() == 0;
        }

        private void drawChildElement(Canvas canvas, float listTop, ChatMessageCell cell, int type) {
            canvas.save();
            float left = ChatActivity.this.chatListView.getLeft() + cell.getLeft();
            float y = ChatActivity.this.chatListView.getY() + cell.getY();
            float alpha = cell.shouldDrawAlphaLayer() ? cell.getAlpha() : 1.0f;
            canvas.clipRect(ChatActivity.this.chatListView.getLeft(), listTop, ChatActivity.this.chatListView.getRight(), ChatActivity.this.chatListView.getY() + ChatActivity.this.chatListView.getMeasuredHeight());
            canvas.translate(left, y);
            cell.setInvalidatesParent(true);
            if (type == 0) {
                cell.drawTime(canvas, alpha, true);
            } else if (type == 1) {
                cell.drawNamesLayout(canvas, alpha);
            } else {
                cell.drawCaptionLayout(canvas, (cell.getCurrentPosition().flags & 1) == 0, alpha);
            }
            cell.setInvalidatesParent(false);
            canvas.restore();
        }

        @Override // android.view.ViewGroup, android.view.View
        protected void dispatchDraw(Canvas canvas) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            int top;
            int bottom;
            MessageObject.GroupedMessagePosition currentPosition;
            MessageObject.GroupedMessages currentMessagesGroup;
            ChatMessageCell chatMessageCell;
            MessageObject.GroupedMessagePosition groupedMessagePosition;
            ChatMessageCell chatMessageCell2;
            View view;
            int i;
            int i2;
            MessageObject.GroupedMessages groupedMessages;
            float f;
            boolean z;
            boolean z2;
            float f2;
            float f3;
            ChatMessageCell chatMessageCell3;
            MessageObject.GroupedMessagePosition groupedMessagePosition2;
            boolean z3;
            ChatActivity.this.chatActivityEnterView.checkAnimation();
            ChatActivity.this.updateChatListViewTopPadding();
            if (ChatActivity.this.invalidateMessagesVisiblePart || (ChatActivity.this.chatListItemAnimator != null && ChatActivity.this.chatListItemAnimator.isRunning())) {
                ChatActivity.this.invalidateMessagesVisiblePart = false;
                ChatActivity.this.updateMessagesVisiblePart(false);
            }
            ChatActivity.this.updateTextureViewPosition(false);
            super.dispatchDraw(canvas);
            float f4 = 0.0f;
            boolean z4 = true;
            if (ChatActivity.this.fragmentContextView != null && ChatActivity.this.fragmentContextView.isCallStyle()) {
                float alpha = (ChatActivity.this.blurredView == null || ChatActivity.this.blurredView.getVisibility() != 0) ? 1.0f : 1.0f - ChatActivity.this.blurredView.getAlpha();
                if (alpha > 0.0f) {
                    if (alpha != 1.0f) {
                        canvas.saveLayerAlpha(ChatActivity.this.fragmentContextView.getX(), ChatActivity.this.fragmentContextView.getY() - AndroidUtilities.dp(30.0f), ChatActivity.this.fragmentContextView.getX() + ChatActivity.this.fragmentContextView.getMeasuredWidth(), ChatActivity.this.fragmentContextView.getY() + ChatActivity.this.fragmentContextView.getMeasuredHeight(), (int) (alpha * 255.0f), 31);
                    } else {
                        canvas.save();
                    }
                    canvas.translate(ChatActivity.this.fragmentContextView.getX(), ChatActivity.this.fragmentContextView.getY());
                    ChatActivity.this.fragmentContextView.setDrawOverlay(true);
                    ChatActivity.this.fragmentContextView.draw(canvas);
                    ChatActivity.this.fragmentContextView.setDrawOverlay(false);
                    canvas.restore();
                }
            }
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null && chatActivityEnterView.pannelAniamationInProgress() && ChatActivity.this.chatActivityEnterView.getEmojiPadding() < ChatActivity.this.bottomPanelTranslationY) {
                int themedColor = ChatActivity.this.getThemedColor("chat_emojiPanelBackground");
                if (this.backgroundPaint == null) {
                    this.backgroundPaint = new Paint();
                }
                if (this.backgroundColor != themedColor) {
                    Paint paint = this.backgroundPaint;
                    this.backgroundColor = themedColor;
                    paint.setColor(themedColor);
                }
                canvas.drawRect(0.0f, getMeasuredHeight() - (((int) (ChatActivity.this.bottomPanelTranslationY - ChatActivity.this.chatActivityEnterView.getEmojiPadding())) + 3), getMeasuredWidth(), getMeasuredHeight(), this.backgroundPaint);
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.setFragmentPanTranslationOffset(chatActivity.chatActivityEnterView.getEmojiPadding());
            }
            int size = ChatActivity.this.animateSendingViews.size();
            for (int i3 = 0; i3 < size; i3++) {
                ChatMessageCell chatMessageCell4 = (ChatMessageCell) ChatActivity.this.animateSendingViews.get(i3);
                MessageObject.SendAnimationData sendAnimationData = chatMessageCell4.getMessageObject().sendAnimationData;
                if (sendAnimationData != null) {
                    canvas.save();
                    ImageReceiver photoImage = chatMessageCell4.getPhotoImage();
                    canvas.translate(sendAnimationData.currentX, sendAnimationData.currentY);
                    float f5 = sendAnimationData.currentScale;
                    canvas.scale(f5, f5);
                    canvas.translate(-photoImage.getCenterX(), -photoImage.getCenterY());
                    chatMessageCell4.setTimeAlpha(sendAnimationData.timeAlpha);
                    ((ChatMessageCell) ChatActivity.this.animateSendingViews.get(i3)).draw(canvas);
                    canvas.restore();
                }
            }
            if (ChatActivity.this.scrimView != null) {
                canvas.drawRect(0.0f, 0.0f, getMeasuredWidth(), getMeasuredHeight(), ChatActivity.this.scrimPaint);
                float y = ((ChatActivity.this.chatListView.getY() + ChatActivity.this.chatListViewPaddingTop) - ChatActivity.this.chatListViewPaddingVisibleOffset) - AndroidUtilities.dp(4.0f);
                MessageObject.GroupedMessages currentMessagesGroup2 = ChatActivity.this.scrimView instanceof ChatMessageCell ? ((ChatMessageCell) ChatActivity.this.scrimView).getCurrentMessagesGroup() : null;
                int childCount = ChatActivity.this.chatListView.getChildCount();
                boolean z5 = false;
                int i4 = 0;
                while (i4 < childCount) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(i4);
                    if (childAt instanceof ChatMessageCell) {
                        ChatMessageCell chatMessageCell5 = (ChatMessageCell) childAt;
                        currentMessagesGroup = chatMessageCell5.getCurrentMessagesGroup();
                        chatMessageCell = chatMessageCell5;
                        currentPosition = chatMessageCell5.getCurrentPosition();
                    } else {
                        currentPosition = null;
                        currentMessagesGroup = null;
                        chatMessageCell = null;
                    }
                    if ((childAt == ChatActivity.this.scrimView || (currentMessagesGroup2 != null && currentMessagesGroup2 == currentMessagesGroup)) && childAt.getAlpha() != f4) {
                        if (z5 || chatMessageCell == null || currentMessagesGroup2 == null || (chatMessageCell3 = currentMessagesGroup2.transitionParams.cell) == null) {
                            groupedMessagePosition = currentPosition;
                            chatMessageCell2 = chatMessageCell;
                            view = childAt;
                            i = i4;
                            i2 = childCount;
                            groupedMessages = currentMessagesGroup2;
                            f = y;
                            z = true;
                            z2 = z5;
                        } else {
                            float nonAnimationTranslationX = chatMessageCell3.getNonAnimationTranslationX(z4);
                            MessageObject.GroupedMessages.TransitionParams transitionParams = currentMessagesGroup2.transitionParams;
                            float f6 = transitionParams.left + nonAnimationTranslationX + transitionParams.offsetLeft;
                            float fDp = transitionParams.top + transitionParams.offsetTop;
                            float f7 = transitionParams.right + nonAnimationTranslationX + transitionParams.offsetRight;
                            float measuredHeight = transitionParams.bottom + transitionParams.offsetBottom;
                            if (!transitionParams.backgroundChangeBounds) {
                                fDp += transitionParams.cell.getTranslationY();
                                measuredHeight += currentMessagesGroup2.transitionParams.cell.getTranslationY();
                            }
                            if (fDp < (ChatActivity.this.chatListViewPaddingTop - ChatActivity.this.chatListViewPaddingVisibleOffset) - AndroidUtilities.dp(20.0f)) {
                                fDp = (ChatActivity.this.chatListViewPaddingTop - ChatActivity.this.chatListViewPaddingVisibleOffset) - AndroidUtilities.dp(20.0f);
                            }
                            if (measuredHeight > ChatActivity.this.chatListView.getMeasuredHeight() + AndroidUtilities.dp(20.0f)) {
                                measuredHeight = ChatActivity.this.chatListView.getMeasuredHeight() + AndroidUtilities.dp(20.0f);
                            }
                            int size2 = currentMessagesGroup2.messages.size();
                            int i5 = 0;
                            while (true) {
                                if (i5 >= size2) {
                                    groupedMessagePosition2 = currentPosition;
                                    z3 = true;
                                    break;
                                }
                                MessageObject messageObject = currentMessagesGroup2.messages.get(i5);
                                groupedMessagePosition2 = currentPosition;
                                int i6 = size2;
                                if (ChatActivity.this.selectedMessagesIds[messageObject.getDialogId() == ChatActivity.this.dialog_id ? (char) 0 : (char) 1].indexOfKey(messageObject.getId()) < 0) {
                                    z3 = false;
                                    break;
                                } else {
                                    i5++;
                                    size2 = i6;
                                    currentPosition = groupedMessagePosition2;
                                }
                            }
                            canvas.save();
                            canvas.clipRect(0.0f, y, getMeasuredWidth(), ChatActivity.this.chatListView.getY() + ChatActivity.this.chatListView.getHeight());
                            canvas.translate(0.0f, ChatActivity.this.chatListView.getY());
                            MessageObject.GroupedMessages.TransitionParams transitionParams2 = currentMessagesGroup2.transitionParams;
                            groupedMessagePosition = groupedMessagePosition2;
                            chatMessageCell2 = chatMessageCell;
                            i = i4;
                            i2 = childCount;
                            groupedMessages = currentMessagesGroup2;
                            f = y;
                            boolean z6 = z3;
                            view = childAt;
                            z = true;
                            transitionParams2.cell.drawBackground(canvas, (int) f6, (int) fDp, (int) f7, (int) measuredHeight, transitionParams2.pinnedTop, transitionParams2.pinnedBotton, z6, ChatActivity.this.contentView.getKeyboardHeight());
                            canvas.restore();
                            z2 = true;
                        }
                        if (chatMessageCell2 != null && chatMessageCell2.getPhotoImage().isAnimationRunning()) {
                            invalidate();
                        }
                        float fMax = Math.max(ChatActivity.this.chatListView.getLeft(), ChatActivity.this.chatListView.getLeft() + view.getX());
                        float fMax2 = Math.max(f, ChatActivity.this.chatListView.getTop() + view.getY());
                        float fMin = Math.min(ChatActivity.this.chatListView.getRight(), ChatActivity.this.chatListView.getLeft() + view.getX() + view.getMeasuredWidth());
                        float fMin2 = Math.min(ChatActivity.this.chatListView.getY() + ChatActivity.this.chatListView.getMeasuredHeight(), ChatActivity.this.chatListView.getY() + view.getY() + view.getMeasuredHeight());
                        if (fMax2 < fMin2) {
                            if (view.getAlpha() != 1.0f) {
                                f2 = fMin2;
                                f3 = fMin;
                                canvas.saveLayerAlpha(fMax, fMax2, fMin, fMin2, (int) (view.getAlpha() * 255.0f), 31);
                            } else {
                                f2 = fMin2;
                                f3 = fMin;
                                canvas.save();
                            }
                            if (chatMessageCell2 != null) {
                                chatMessageCell2.setInvalidatesParent(z);
                            }
                            canvas.clipRect(fMax, fMax2, f3, f2);
                            canvas.translate(ChatActivity.this.chatListView.getLeft() + view.getX(), ChatActivity.this.chatListView.getY() + view.getY());
                            view.draw(canvas);
                            canvas.restore();
                            if (chatMessageCell2 != null) {
                                chatMessageCell2.setInvalidatesParent(false);
                            }
                        }
                        MessageObject.GroupedMessagePosition groupedMessagePosition3 = groupedMessagePosition;
                        if (groupedMessagePosition3 != null || (chatMessageCell2 != null && chatMessageCell2.getTransitionParams().animateBackgroundBoundsInner)) {
                            if (groupedMessagePosition3 == null || groupedMessagePosition3.last || (groupedMessagePosition3.minX == 0 && groupedMessagePosition3.minY == 0)) {
                                if (groupedMessagePosition3 == null || groupedMessagePosition3.last) {
                                    this.drawTimeAfter.add(chatMessageCell2);
                                }
                                if (groupedMessagePosition3 == null || (groupedMessagePosition3.minX == 0 && groupedMessagePosition3.minY == 0 && chatMessageCell2.hasNameLayout())) {
                                    this.drawNamesAfter.add(chatMessageCell2);
                                }
                            }
                            if ((chatMessageCell2.hasCaptionLayout() || chatMessageCell2.hasCommentLayout()) && (groupedMessagePosition3 == null || (groupedMessagePosition3.flags & 8) != 0)) {
                                this.drawCaptionAfter.add(chatMessageCell2);
                            }
                        }
                        z5 = z2;
                    } else {
                        i = i4;
                        i2 = childCount;
                        groupedMessages = currentMessagesGroup2;
                        f = y;
                    }
                    i4 = i + 1;
                    y = f;
                    childCount = i2;
                    currentMessagesGroup2 = groupedMessages;
                    z4 = true;
                    f4 = 0.0f;
                }
                float f8 = y;
                int size3 = this.drawTimeAfter.size();
                if (size3 > 0) {
                    for (int i7 = 0; i7 < size3; i7++) {
                        drawChildElement(canvas, f8, this.drawTimeAfter.get(i7), 0);
                    }
                    this.drawTimeAfter.clear();
                }
                int size4 = this.drawNamesAfter.size();
                if (size4 > 0) {
                    for (int i8 = 0; i8 < size4; i8++) {
                        drawChildElement(canvas, f8, this.drawNamesAfter.get(i8), 1);
                    }
                    this.drawNamesAfter.clear();
                }
                int size5 = this.drawCaptionAfter.size();
                if (size5 > 0) {
                    for (int i9 = 0; i9 < size5; i9++) {
                        ChatMessageCell chatMessageCell6 = this.drawCaptionAfter.get(i9);
                        if (chatMessageCell6.getCurrentPosition() != null) {
                            drawChildElement(canvas, f8, chatMessageCell6, 2);
                        }
                    }
                    this.drawCaptionAfter.clear();
                }
                if (ChatActivity.this.pagedownButton != null && ChatActivity.this.pagedownButton.getTag() != null) {
                    super.drawChild(canvas, ChatActivity.this.pagedownButton, SystemClock.uptimeMillis());
                }
                if (ChatActivity.this.mentiondownButton != null && ChatActivity.this.mentiondownButton.getTag() != null) {
                    super.drawChild(canvas, ChatActivity.this.mentiondownButton, SystemClock.uptimeMillis());
                }
                if (ChatActivity.this.floatingDateView != null && ChatActivity.this.floatingDateView.getTag() != null) {
                    super.drawChild(canvas, ChatActivity.this.floatingDateView, SystemClock.uptimeMillis());
                }
                if (ChatActivity.this.fireworksOverlay != null) {
                    super.drawChild(canvas, ChatActivity.this.fireworksOverlay, SystemClock.uptimeMillis());
                }
            }
            if (ChatActivity.this.fixedKeyboardHeight > 0 && this.keyboardHeight < AndroidUtilities.dp(20.0f)) {
                int themedColor2 = ChatActivity.this.getThemedColor("windowBackgroundWhite");
                if (this.backgroundPaint == null) {
                    this.backgroundPaint = new Paint();
                }
                if (this.backgroundColor != themedColor2) {
                    Paint paint2 = this.backgroundPaint;
                    this.backgroundColor = themedColor2;
                    paint2.setColor(themedColor2);
                }
                canvas.drawRect(0.0f, getMeasuredHeight() - ChatActivity.this.fixedKeyboardHeight, getMeasuredWidth(), getMeasuredHeight(), this.backgroundPaint);
            }
            if (ChatActivity.this.pullingDownDrawable != null && ChatActivity.this.pullingDownDrawable.needDrawBottomPanel()) {
                ChatActivityEnterView chatActivityEnterView2 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView2 == null || chatActivityEnterView2.getVisibility() != 0) {
                    top = ChatActivity.this.bottomOverlayChat.getTop() + AndroidUtilities.dp2(2.0f);
                    bottom = ChatActivity.this.bottomOverlayChat.getBottom();
                } else {
                    top = ChatActivity.this.chatActivityEnterView.getTop() + AndroidUtilities.dp2(2.0f);
                    bottom = ChatActivity.this.chatActivityEnterView.getBottom();
                }
                ChatActivity.this.pullingDownDrawable.drawBottomPanel(canvas, top, bottom, getMeasuredWidth());
            }
            if (ChatActivity.this.pullingDownAnimateToActivity != null) {
                canvas.saveLayerAlpha(0.0f, 0.0f, getMeasuredWidth(), getMeasuredHeight(), (int) (ChatActivity.this.pullingDownAnimateProgress * 255.0f), 31);
                ((BaseFragment) ChatActivity.this.pullingDownAnimateToActivity).fragmentView.draw(canvas);
                canvas.restore();
            }
            ChatActivity.this.emojiAnimationsOverlay.draw(canvas);
        }

        /* JADX WARN: Removed duplicated region for block: B:259:0x06de  */
        /* JADX WARN: Type inference failed for: r9v13 */
        /* JADX WARN: Type inference failed for: r9v17, types: [boolean, int] */
        /* JADX WARN: Type inference failed for: r9v25 */
        /* JADX WARN: Type inference failed for: r9v51 */
        @Override // android.widget.FrameLayout, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void onMeasure(int r22, int r23) {
            /*
                Method dump skipped, instructions count: 1882
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass13.onMeasure(int, int):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onMeasure$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onMeasure$0$ChatActivity$13(int i) {
            ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(i, ChatActivity.this.scrollToOffsetOnRecreate);
        }

        @Override // android.view.View, android.view.ViewParent
        public void requestLayout() {
            if (ChatActivity.this.globalIgnoreLayout) {
                return;
            }
            super.requestLayout();
        }

        /* JADX WARN: Removed duplicated region for block: B:156:0x029b A[PHI: r8
          0x029b: PHI (r8v10 int) = (r8v8 int), (r8v13 int), (r8v17 int) binds: [B:155:0x0299, B:139:0x0262, B:125:0x0229] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:38:0x0091  */
        /* JADX WARN: Removed duplicated region for block: B:53:0x00da  */
        /* JADX WARN: Removed duplicated region for block: B:57:0x00f0  */
        /* JADX WARN: Removed duplicated region for block: B:58:0x00f3  */
        /* JADX WARN: Removed duplicated region for block: B:65:0x0104  */
        /* JADX WARN: Removed duplicated region for block: B:68:0x0116  */
        @Override // ir.eitaa.ui.Components.SizeNotifierFrameLayout, android.widget.FrameLayout, android.view.ViewGroup, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void onLayout(boolean r16, int r17, int r18, int r19, int r20) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.io.IOException, java.lang.NumberFormatException {
            /*
                Method dump skipped, instructions count: 732
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass13.onLayout(boolean, int, int, int, int):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public void setNonNoveTranslation(float y) {
            ChatActivity.this.contentView.setTranslationY(y);
            ((BaseFragment) ChatActivity.this).actionBar.setTranslationY(0.0f);
            ChatActivity.this.emptyViewContainer.setTranslationY(0.0f);
            ChatActivity.this.progressView.setTranslationY(0.0f);
            ChatActivity.this.contentPanTranslation = 0.0f;
            ChatActivity.this.contentView.setBackgroundTranslation(0);
            ChatActivity.this.instantCameraView.onPanTranslationUpdate(0.0f);
            if (ChatActivity.this.blurredView != null) {
                ChatActivity.this.blurredView.drawable.onPanTranslationUpdate(0.0f);
            }
            ChatActivity.this.setFragmentPanTranslationOffset(0);
            ChatActivity.this.invalidateChatListViewTopPadding();
        }

        @Override // android.view.View
        public void setPadding(int left, int top, int right, int bottom) {
            ChatActivity.this.contentPaddingTop = top;
            ChatActivity.this.invalidateChatListViewTopPadding();
            ChatActivity.this.invalidateMessagesVisiblePart();
        }

        @Override // android.view.ViewGroup, android.view.View
        public boolean dispatchKeyEvent(KeyEvent event) {
            ForwardingPreviewView forwardingPreviewView;
            if (event.getKeyCode() == 4 && event.getAction() == 1 && (forwardingPreviewView = ChatActivity.this.forwardingPreviewView) != null && forwardingPreviewView.isShowing()) {
                ChatActivity.this.forwardingPreviewView.dismiss(true);
                return true;
            }
            return super.dispatchKeyEvent(event);
        }

        @Override // ir.eitaa.ui.Components.SizeNotifierFrameLayout
        protected Drawable getNewDrawable() {
            Drawable wallpaperDrawable = ChatActivity.this.themeDelegate.getWallpaperDrawable();
            return wallpaperDrawable != null ? wallpaperDrawable : super.getNewDrawable();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$12, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$12$ChatActivity(TLRPC$Document tLRPC$Document) throws IOException {
        this.animatingDocuments.put(tLRPC$Document, 0);
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(tLRPC$Document, null, this.dialog_id, null, null, null, null, true, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$13, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$13$ChatActivity(TLRPC$Document tLRPC$Document) throws IOException {
        this.animatingDocuments.put(tLRPC$Document, 0);
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(tLRPC$Document, null, this.dialog_id, null, null, null, null, true, 0);
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$14, reason: invalid class name */
    class AnonymousClass14 extends RecyclerListView {
        private final ArrayList<ChatMessageCell> drawCaptionAfter;
        private final ArrayList<ChatMessageCell> drawNamesAfter;
        private final ArrayList<ChatMessageCell> drawTimeAfter;
        private final ArrayList<MessageObject.GroupedMessages> drawingGroups;
        private float endTrackingX;
        private boolean ignoreLayout;
        int lastH;
        private long lastReplyButtonAnimationTime;
        private long lastTrackingAnimationTime;
        private int lastWidth;
        private float replyButtonProgress;
        private int startedTrackingPointerId;
        private int startedTrackingX;
        private int startedTrackingY;
        private float trackAnimationProgress;
        private boolean wasTrackingVibrate;

        AnonymousClass14(Context context, Theme.ResourcesProvider resourcesProvider) {
            super(context, resourcesProvider);
            this.drawTimeAfter = new ArrayList<>();
            this.drawNamesAfter = new ArrayList<>();
            this.drawCaptionAfter = new ArrayList<>();
            this.drawingGroups = new ArrayList<>(10);
            this.lastH = 0;
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.View, android.view.ViewParent
        public void requestLayout() {
            if (this.ignoreLayout) {
                return;
            }
            super.requestLayout();
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, android.view.View
        public void setTranslationY(float translationY) {
            BotCommandsMenuContainer botCommandsMenuContainer;
            if (translationY != getTranslationY()) {
                super.setTranslationY(translationY);
                if (ChatActivity.this.emptyViewContainer != null) {
                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                    if (chatActivityEnterView == null || !chatActivityEnterView.pannelAniamationInProgress()) {
                        ChatActivity.this.emptyViewContainer.setTranslationY(translationY / 1.7f);
                    } else {
                        ChatActivity.this.emptyViewContainer.setTranslationY(translationY / 2.0f);
                    }
                }
                ChatActivityEnterView chatActivityEnterView2 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView2 != null && (botCommandsMenuContainer = chatActivityEnterView2.botCommandsMenuContainer) != null) {
                    botCommandsMenuContainer.setTranslationY(translationY);
                }
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.View
        protected void onLayout(boolean changed, int l, int t, int r, int b) {
            super.onLayout(changed, l, t, r, b);
            int i = r - l;
            if (this.lastWidth != i) {
                this.lastWidth = i;
                ChatActivity.this.hideHints(false);
            }
            int measuredHeight = getMeasuredHeight();
            if (this.lastH != measuredHeight) {
                this.ignoreLayout = true;
                if (ChatActivity.this.chatListItemAnimator != null) {
                    ChatActivity.this.chatListItemAnimator.endAnimations();
                }
                ChatActivity.this.chatScrollHelper.cancel();
                this.ignoreLayout = false;
                this.lastH = measuredHeight;
            }
            ChatActivity.this.forceScrollToTop = false;
            if (ChatActivity.this.textSelectionHelper == null || !ChatActivity.this.textSelectionHelper.isSelectionMode()) {
                return;
            }
            ChatActivity.this.textSelectionHelper.invalidate();
        }

        private void setGroupTranslationX(ChatMessageCell view, float dx) {
            MessageObject.GroupedMessages currentMessagesGroup = view.getCurrentMessagesGroup();
            if (currentMessagesGroup == null) {
                return;
            }
            int childCount = getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = getChildAt(i);
                if (childAt != view && (childAt instanceof ChatMessageCell)) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.getCurrentMessagesGroup() == currentMessagesGroup) {
                        chatMessageCell.setSlidingOffset(dx);
                        chatMessageCell.invalidate();
                    }
                }
            }
            invalidate();
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.ViewParent
        public boolean requestChildRectangleOnScreen(View child, Rect rect, boolean immediate) {
            if (ChatActivity.this.scrimPopupWindow != null) {
                return false;
            }
            return super.requestChildRectangleOnScreen(child, rect, immediate);
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup
        public boolean onInterceptTouchEvent(MotionEvent e) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            ChatActivity.this.textSelectionHelper.checkSelectionCancel(e);
            if (isFastScrollAnimationRunning()) {
                return false;
            }
            boolean zOnInterceptTouchEvent = super.onInterceptTouchEvent(e);
            if (!((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() && ChatActivity.this.reportType < 0) {
                processTouchEvent(e);
            }
            return zOnInterceptTouchEvent;
        }

        @Override // androidx.recyclerview.widget.RecyclerView
        public void setItemAnimator(RecyclerView.ItemAnimator animator) {
            if (isFastScrollAnimationRunning()) {
                return;
            }
            super.setItemAnimator(animator);
        }

        private void drawReplyButton(Canvas canvas) {
            float f;
            int iMin;
            float fMin;
            if (ChatActivity.this.slidingView == null) {
                return;
            }
            float nonAnimationTranslationX = ChatActivity.this.slidingView.getNonAnimationTranslationX(false);
            long jCurrentTimeMillis = System.currentTimeMillis();
            long jMin = Math.min(17L, jCurrentTimeMillis - this.lastReplyButtonAnimationTime);
            this.lastReplyButtonAnimationTime = jCurrentTimeMillis;
            boolean z = nonAnimationTranslationX <= ((float) (-AndroidUtilities.dp(50.0f)));
            if (z) {
                float f2 = this.replyButtonProgress;
                if (f2 < 1.0f) {
                    float f3 = f2 + (jMin / 180.0f);
                    this.replyButtonProgress = f3;
                    if (f3 > 1.0f) {
                        this.replyButtonProgress = 1.0f;
                    } else {
                        invalidate();
                    }
                }
            } else {
                float f4 = this.replyButtonProgress;
                if (f4 > 0.0f) {
                    float f5 = f4 - (jMin / 180.0f);
                    this.replyButtonProgress = f5;
                    if (f5 < 0.0f) {
                        this.replyButtonProgress = 0.0f;
                    } else {
                        invalidate();
                    }
                }
            }
            Paint themedPaint = getThemedPaint("paintChatActionBackground");
            int alpha = themedPaint.getAlpha();
            if (z) {
                float f6 = this.replyButtonProgress;
                f = f6 <= 0.8f ? (f6 / 0.8f) * 1.2f : 1.2f - (((f6 - 0.8f) / 0.2f) * 0.2f);
                iMin = (int) Math.min(255.0f, (f6 / 0.8f) * 255.0f);
                float f7 = alpha;
                fMin = Math.min(f7, (this.replyButtonProgress / 0.8f) * f7);
            } else {
                f = this.replyButtonProgress;
                iMin = (int) Math.min(255.0f, f * 255.0f);
                float f8 = alpha;
                fMin = Math.min(f8, this.replyButtonProgress * f8);
            }
            themedPaint.setAlpha((int) fMin);
            float measuredWidth = getMeasuredWidth() + (ChatActivity.this.slidingView.getNonAnimationTranslationX(false) / 2.0f);
            float top = ChatActivity.this.slidingView.getTop() + (ChatActivity.this.slidingView.getMeasuredHeight() / 2);
            RectF rectF = AndroidUtilities.rectTmp;
            rectF.set((int) (measuredWidth - (AndroidUtilities.dp(16.0f) * f)), (int) (top - (AndroidUtilities.dp(16.0f) * f)), (int) ((AndroidUtilities.dp(16.0f) * f) + measuredWidth), (int) ((AndroidUtilities.dp(16.0f) * f) + top));
            Theme.applyServiceShaderMatrix(getMeasuredWidth(), AndroidUtilities.displaySize.y, 0.0f, getY() + rectF.top);
            canvas.drawRoundRect(rectF, AndroidUtilities.dp(16.0f), AndroidUtilities.dp(16.0f), themedPaint);
            if (ChatActivity.this.themeDelegate.hasGradientService()) {
                canvas.drawRoundRect(rectF, AndroidUtilities.dp(16.0f), AndroidUtilities.dp(16.0f), Theme.chat_actionBackgroundGradientDarkenPaint);
            }
            themedPaint.setAlpha(alpha);
            Drawable themedDrawable = getThemedDrawable("drawableReplyIcon");
            themedDrawable.setAlpha(iMin);
            themedDrawable.setBounds((int) (measuredWidth - (AndroidUtilities.dp(7.0f) * f)), (int) (top - (AndroidUtilities.dp(6.0f) * f)), (int) (measuredWidth + (AndroidUtilities.dp(7.0f) * f)), (int) (top + (AndroidUtilities.dp(5.0f) * f)));
            themedDrawable.draw(canvas);
            themedDrawable.setAlpha(255);
        }

        private void processTouchEvent(MotionEvent e) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            TLRPC$Chat tLRPC$Chat;
            if (e != null) {
                ChatActivity.this.wasManualScroll = true;
            }
            if (e == null || e.getAction() != 0 || ChatActivity.this.startedTrackingSlidingView || ChatActivity.this.maybeStartTrackingSlidingView || ChatActivity.this.slidingView != null) {
                if (ChatActivity.this.slidingView == null || e == null || e.getAction() != 2 || e.getPointerId(0) != this.startedTrackingPointerId) {
                    if (ChatActivity.this.slidingView != null) {
                        if (e != null) {
                            if (e.getPointerId(0) != this.startedTrackingPointerId) {
                                return;
                            }
                            if (e.getAction() != 3 && e.getAction() != 1 && e.getAction() != 6) {
                                return;
                            }
                        }
                        if (e != null && e.getAction() != 3 && Math.abs(ChatActivity.this.slidingView.getNonAnimationTranslationX(false)) >= AndroidUtilities.dp(50.0f)) {
                            ChatActivity chatActivity = ChatActivity.this;
                            chatActivity.showFieldPanelForReply(chatActivity.slidingView.getMessageObject());
                        }
                        float slidingOffsetX = ChatActivity.this.slidingView.getSlidingOffsetX();
                        this.endTrackingX = slidingOffsetX;
                        if (slidingOffsetX == 0.0f) {
                            ChatActivity.this.slidingView = null;
                        }
                        this.lastTrackingAnimationTime = System.currentTimeMillis();
                        this.trackAnimationProgress = 0.0f;
                        invalidate();
                        ChatActivity.this.maybeStartTrackingSlidingView = false;
                        ChatActivity.this.startedTrackingSlidingView = false;
                        ChatActivity.this.chatLayoutManager.setCanScrollVertically(true);
                        return;
                    }
                    return;
                }
                int iMax = Math.max(AndroidUtilities.dp(-80.0f), Math.min(0, (int) (e.getX() - this.startedTrackingX)));
                int iAbs = Math.abs(((int) e.getY()) - this.startedTrackingY);
                if (getScrollState() != 0 || !ChatActivity.this.maybeStartTrackingSlidingView || ChatActivity.this.startedTrackingSlidingView || iMax > (-AndroidUtilities.getPixelsInCM(0.4f, true)) || Math.abs(iMax) / 3 <= iAbs) {
                    if (ChatActivity.this.startedTrackingSlidingView) {
                        if (Math.abs(iMax) >= AndroidUtilities.dp(50.0f)) {
                            if (!this.wasTrackingVibrate) {
                                try {
                                    performHapticFeedback(3, 2);
                                } catch (Exception unused) {
                                }
                                this.wasTrackingVibrate = true;
                            }
                        } else {
                            this.wasTrackingVibrate = false;
                        }
                        float f = iMax;
                        ChatActivity.this.slidingView.setSlidingOffset(f);
                        MessageObject messageObject = ChatActivity.this.slidingView.getMessageObject();
                        if (messageObject.isRoundVideo() || messageObject.isVideo()) {
                            ChatActivity.this.updateTextureViewPosition(false);
                        }
                        setGroupTranslationX(ChatActivity.this.slidingView, f);
                        invalidate();
                        return;
                    }
                    return;
                }
                MotionEvent motionEventObtain = MotionEvent.obtain(0L, 0L, 3, 0.0f, 0.0f, 0);
                ChatActivity.this.slidingView.onTouchEvent(motionEventObtain);
                super.onInterceptTouchEvent(motionEventObtain);
                motionEventObtain.recycle();
                ChatActivity.this.chatLayoutManager.setCanScrollVertically(false);
                ChatActivity.this.maybeStartTrackingSlidingView = false;
                ChatActivity.this.startedTrackingSlidingView = true;
                this.startedTrackingX = (int) e.getX();
                if (getParent() != null) {
                    getParent().requestDisallowInterceptTouchEvent(true);
                    return;
                }
                return;
            }
            View pressedChildView = getPressedChildView();
            if (pressedChildView instanceof ChatMessageCell) {
                if (ChatActivity.this.slidingView != null) {
                    ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                }
                ChatActivity.this.slidingView = (ChatMessageCell) pressedChildView;
                MessageObject messageObject2 = ChatActivity.this.slidingView.getMessageObject();
                if (ChatActivity.this.chatMode != 0 || ((ChatActivity.this.threadMessageObjects != null && ChatActivity.this.threadMessageObjects.contains(messageObject2)) || ((ChatActivity.this.getMessageType(messageObject2) == 1 && (messageObject2.getDialogId() == ChatActivity.this.mergeDialogId || messageObject2.needDrawBluredPreview())) || ((ChatActivity.this.currentEncryptedChat == null && messageObject2.getId() < 0) || ((ChatActivity.this.bottomOverlayChat != null && ChatActivity.this.bottomOverlayChat.getVisibility() == 0) || (((tLRPC$Chat = ChatActivity.this.currentChat) != null && ((ChatObject.isNotInChat(tLRPC$Chat) && !ChatActivity.this.isThreadChat()) || ((ChatObject.isChannel(ChatActivity.this.currentChat) && !ChatObject.canPost(ChatActivity.this.currentChat) && !ChatActivity.this.currentChat.megagroup) || !ChatObject.canSendMessages(ChatActivity.this.currentChat)))) || ChatActivity.this.textSelectionHelper.isSelectionMode())))))) {
                    ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                    ChatActivity.this.slidingView = null;
                } else {
                    this.startedTrackingPointerId = e.getPointerId(0);
                    ChatActivity.this.maybeStartTrackingSlidingView = true;
                    this.startedTrackingX = (int) e.getX();
                    this.startedTrackingY = (int) e.getY();
                }
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.View
        public boolean onTouchEvent(MotionEvent e) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            ChatActivity.this.textSelectionHelper.checkSelectionCancel(e);
            if (e.getAction() == 0) {
                ChatActivity.this.scrollByTouch = true;
            }
            if (ChatActivity.this.pullingDownOffset != 0.0f && (e.getAction() == 1 || e.getAction() == 3)) {
                float fMin = Math.min(1.0f, ChatActivity.this.pullingDownOffset / AndroidUtilities.dp(110.0f));
                if (e.getAction() != 1 || fMin != 1.0f || ChatActivity.this.pullingDownDrawable == null || ChatActivity.this.pullingDownDrawable.emptyStub) {
                    if (ChatActivity.this.pullingDownDrawable == null || !ChatActivity.this.pullingDownDrawable.emptyStub || System.currentTimeMillis() - ChatActivity.this.pullingDownDrawable.lastShowingReleaseTime >= 500 || !ChatActivity.this.pullingDownDrawable.animateSwipeToRelease) {
                        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, 0.0f);
                        ChatActivity.this.pullingDownBackAnimator = valueAnimatorOfFloat;
                        ChatActivity.this.pullingDownDrawable.showBottomPanel(false);
                        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$14$xeqs34llsuKnjFYVc_mTnfhhmoQ
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                this.f$0.lambda$onTouchEvent$4$ChatActivity$14(valueAnimator);
                            }
                        });
                        valueAnimatorOfFloat.setDuration(250L);
                        valueAnimatorOfFloat.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                        valueAnimatorOfFloat.start();
                    } else {
                        AnimatorSet animatorSet = new AnimatorSet();
                        ChatActivity.this.pullingDownBackAnimator = animatorSet;
                        ChatActivity.this.pullingDownDrawable.showBottomPanel(false);
                        ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, AndroidUtilities.dp(111.0f));
                        valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$14$s99uX-_rv5iyWRISESAAdE5Da8k
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                this.f$0.lambda$onTouchEvent$2$ChatActivity$14(valueAnimator);
                            }
                        });
                        valueAnimatorOfFloat2.setDuration(400L);
                        valueAnimatorOfFloat2.setInterpolator(CubicBezierInterpolator.DEFAULT);
                        ValueAnimator valueAnimatorOfFloat3 = ValueAnimator.ofFloat(AndroidUtilities.dp(111.0f), 0.0f);
                        valueAnimatorOfFloat3.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$14$ZtirLPDv930nCzhHXJEP6oU9GXM
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                this.f$0.lambda$onTouchEvent$3$ChatActivity$14(valueAnimator);
                            }
                        });
                        valueAnimatorOfFloat3.setStartDelay(600L);
                        valueAnimatorOfFloat3.setDuration(250L);
                        valueAnimatorOfFloat3.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                        animatorSet.playSequentially(valueAnimatorOfFloat2, valueAnimatorOfFloat3);
                        animatorSet.start();
                    }
                } else if (ChatActivity.this.pullingDownDrawable.animationIsRunning()) {
                    ValueAnimator valueAnimatorOfFloat4 = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, ChatActivity.this.pullingDownOffset + AndroidUtilities.dp(8.0f));
                    ChatActivity.this.pullingDownBackAnimator = valueAnimatorOfFloat4;
                    valueAnimatorOfFloat4.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$14$t7nJjR7GkQ62dTRG-AirH8KSiyw
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$onTouchEvent$0$ChatActivity$14(valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat4.setDuration(200L);
                    valueAnimatorOfFloat4.setInterpolator(CubicBezierInterpolator.DEFAULT);
                    valueAnimatorOfFloat4.start();
                    ChatActivity.this.pullingDownDrawable.runOnAnimationFinish(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$14$DTeaMqZvlkGcOCqPAVeZL7Ehacs
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$onTouchEvent$1$ChatActivity$14();
                        }
                    });
                } else {
                    ChatActivity.this.animateToNextChat();
                }
            }
            if (isFastScrollAnimationRunning()) {
                return false;
            }
            boolean zOnTouchEvent = super.onTouchEvent(e);
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) {
                return zOnTouchEvent;
            }
            processTouchEvent(e);
            return ChatActivity.this.startedTrackingSlidingView || zOnTouchEvent;
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onTouchEvent$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onTouchEvent$0$ChatActivity$14(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onTouchEvent$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onTouchEvent$1$ChatActivity$14() {
            ChatActivity.this.animateToNextChat();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onTouchEvent$2, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onTouchEvent$2$ChatActivity$14(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onTouchEvent$3, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onTouchEvent$3$ChatActivity$14(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onTouchEvent$4, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onTouchEvent$4$ChatActivity$14(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.ViewParent
        public void requestDisallowInterceptTouchEvent(boolean disallowIntercept) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            super.requestDisallowInterceptTouchEvent(disallowIntercept);
            if (ChatActivity.this.slidingView != null) {
                processTouchEvent(null);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView
        protected void onChildPressed(View child, float x, float y, boolean pressed) {
            MessageObject.GroupedMessages currentMessagesGroup;
            super.onChildPressed(child, x, y, pressed);
            if (child instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) child;
                MessageObject messageObject = chatMessageCell.getMessageObject();
                if (messageObject.isMusic() || messageObject.isDocument() || (currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup()) == null) {
                    return;
                }
                int childCount = getChildCount();
                for (int i = 0; i < childCount; i++) {
                    View childAt = getChildAt(i);
                    if (childAt != child && (childAt instanceof ChatMessageCell)) {
                        ChatMessageCell chatMessageCell2 = (ChatMessageCell) childAt;
                        if (chatMessageCell2.getCurrentMessagesGroup() == currentMessagesGroup) {
                            chatMessageCell2.setPressed(pressed);
                        }
                    }
                }
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.View
        public void onDraw(Canvas c) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            super.onDraw(c);
            if (ChatActivity.this.slidingView != null) {
                float slidingOffsetX = ChatActivity.this.slidingView.getSlidingOffsetX();
                if (!ChatActivity.this.maybeStartTrackingSlidingView && !ChatActivity.this.startedTrackingSlidingView && this.endTrackingX != 0.0f && slidingOffsetX != 0.0f) {
                    long jCurrentTimeMillis = System.currentTimeMillis();
                    float f = this.trackAnimationProgress + ((jCurrentTimeMillis - this.lastTrackingAnimationTime) / 180.0f);
                    this.trackAnimationProgress = f;
                    if (f > 1.0f) {
                        this.trackAnimationProgress = 1.0f;
                    }
                    this.lastTrackingAnimationTime = jCurrentTimeMillis;
                    float interpolation = this.endTrackingX * (1.0f - AndroidUtilities.decelerateInterpolator.getInterpolation(this.trackAnimationProgress));
                    if (interpolation == 0.0f) {
                        this.endTrackingX = 0.0f;
                    }
                    setGroupTranslationX(ChatActivity.this.slidingView, interpolation);
                    ChatActivity.this.slidingView.setSlidingOffset(interpolation);
                    MessageObject messageObject = ChatActivity.this.slidingView.getMessageObject();
                    if (messageObject.isRoundVideo() || messageObject.isVideo()) {
                        ChatActivity.this.updateTextureViewPosition(false);
                    }
                    float f2 = this.trackAnimationProgress;
                    if (f2 == 1.0f || f2 == 0.0f) {
                        ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                        ChatActivity.this.slidingView = null;
                    }
                    invalidate();
                }
                drawReplyButton(c);
            }
            if (ChatActivity.this.pullingDownOffset == 0.0f) {
                if (ChatActivity.this.pullingDownDrawable != null) {
                    ChatActivity.this.pullingDownDrawable.reset();
                    return;
                }
                return;
            }
            c.save();
            float measuredHeight = ChatActivity.this.pullingDownAnimateProgress != 0.0f ? (ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.pullingDownOffset) * ChatActivity.this.pullingDownAnimateProgress : 0.0f;
            c.translate(0.0f, getMeasuredHeight() - measuredHeight);
            if (ChatActivity.this.pullingDownDrawable == null) {
                ChatActivity chatActivity = ChatActivity.this;
                int i = ((BaseFragment) chatActivity).currentAccount;
                View view = ((BaseFragment) ChatActivity.this).fragmentView;
                long j = ChatActivity.this.dialog_id;
                ChatActivity chatActivity2 = ChatActivity.this;
                chatActivity.pullingDownDrawable = new ChatPullingDownDrawable(i, view, j, chatActivity2.dialogFolderId, chatActivity2.dialogFilterId, chatActivity2.themeDelegate);
                ChatActivity.this.pullingDownDrawable.showBottomPanel(true);
                ChatActivity.this.pullingDownDrawable.onAttach();
            }
            ChatActivity.this.pullingDownDrawable.setWidth(getMeasuredWidth());
            ChatActivity.this.pullingDownDrawable.draw(c, ChatActivity.this.chatListView, Math.min(1.0f, ChatActivity.this.pullingDownOffset / AndroidUtilities.dp(110.0f)), 1.0f - ChatActivity.this.pullingDownAnimateProgress);
            c.restore();
            if (ChatActivity.this.pullingDownAnimateToActivity != null) {
                c.saveLayerAlpha(0.0f, 0.0f, ChatActivity.this.pullingDownAnimateToActivity.chatListView.getMeasuredWidth(), ChatActivity.this.pullingDownAnimateToActivity.chatListView.getMeasuredHeight(), (int) (ChatActivity.this.pullingDownAnimateProgress * 255.0f), 31);
                c.translate(0.0f, (getMeasuredHeight() - ChatActivity.this.pullingDownOffset) - measuredHeight);
                ChatActivity.this.pullingDownAnimateToActivity.chatListView.draw(c);
                c.restore();
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerListView, android.view.ViewGroup, android.view.View
        protected void dispatchDraw(Canvas canvas) {
            ChatActivity.this.drawLaterRoundProgressCell = null;
            canvas.save();
            if (ChatActivity.this.fromPullingDownTransition && !ChatActivity.this.toPullingDownTransition) {
                canvas.clipRect(0.0f, (ChatActivity.this.chatListViewPaddingTop - ChatActivity.this.chatListViewPaddingVisibleOffset) - AndroidUtilities.dp(4.0f), getMeasuredWidth(), getMeasuredHeight());
            }
            this.selectorRect.setEmpty();
            if (ChatActivity.this.pullingDownOffset != 0.0f) {
                canvas.save();
                canvas.translate(0.0f, (-ChatActivity.this.pullingDownOffset) - (ChatActivity.this.pullingDownAnimateProgress != 0.0f ? (ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.pullingDownOffset) * ChatActivity.this.pullingDownAnimateProgress : 0.0f));
                drawChatBackgroundElements(canvas);
                super.dispatchDraw(canvas);
                canvas.restore();
            } else {
                drawChatBackgroundElements(canvas);
                super.dispatchDraw(canvas);
            }
            canvas.restore();
        }

        /* JADX WARN: Removed duplicated region for block: B:130:0x02da  */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        private void drawChatBackgroundElements(android.graphics.Canvas r29) {
            /*
                Method dump skipped, instructions count: 1189
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass14.drawChatBackgroundElements(android.graphics.Canvas):void");
        }

        /* JADX WARN: Removed duplicated region for block: B:132:0x02f2 A[PHI: r9
          0x02f2: PHI (r9v4 ir.eitaa.ui.Cells.ChatMessageCell) = (r9v3 ir.eitaa.ui.Cells.ChatMessageCell), (r9v21 ir.eitaa.ui.Cells.ChatMessageCell) binds: [B:86:0x0190, B:108:0x0226] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:34:0x0099  */
        /* JADX WARN: Removed duplicated region for block: B:36:0x00a0  */
        /* JADX WARN: Removed duplicated region for block: B:377:0x07d0  */
        /* JADX WARN: Removed duplicated region for block: B:44:0x00c1  */
        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean drawChild(android.graphics.Canvas r23, android.view.View r24, long r25) {
            /*
                Method dump skipped, instructions count: 2013
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.AnonymousClass14.drawChild(android.graphics.Canvas, android.view.View, long):boolean");
        }

        @Override // android.view.View
        public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo info) {
            AccessibilityNodeInfo.CollectionInfo collectionInfo;
            if (ChatActivity.this.currentEncryptedChat != null) {
                return;
            }
            super.onInitializeAccessibilityNodeInfo(info);
            if (Build.VERSION.SDK_INT < 19 || (collectionInfo = info.getCollectionInfo()) == null) {
                return;
            }
            info.setCollectionInfo(AccessibilityNodeInfo.CollectionInfo.obtain(collectionInfo.getRowCount(), 1, false));
        }

        @Override // android.view.View
        public AccessibilityNodeInfo createAccessibilityNodeInfo() {
            if (ChatActivity.this.currentEncryptedChat != null) {
                return null;
            }
            return super.createAccessibilityNodeInfo();
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$15, reason: invalid class name */
    class AnonymousClass15 extends ChatListItemAnimator {
        Runnable finishRunnable;

        AnonymousClass15(ChatActivity activity, RecyclerListView listView, Theme.ResourcesProvider resourcesProvider) {
            super(activity, listView, resourcesProvider);
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator
        public void onAnimationStart() {
            if (ChatActivity.this.scrollAnimationIndex == -1) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.scrollAnimationIndex = chatActivity.getNotificationCenter().setAnimationInProgress(ChatActivity.this.scrollAnimationIndex, ChatActivity.allowedNotificationsDuringChatListAnimations, false);
            }
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
                this.finishRunnable = null;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("chatItemAnimator disable notifications");
            }
            ChatActivity.this.chatActivityEnterView.getAdjustPanLayoutHelper().runDelayedAnimation();
            ChatActivity.this.chatActivityEnterView.runEmojiPanelAnimation();
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator, androidx.recyclerview.widget.DefaultItemAnimator
        protected void onAllAnimationsDone() {
            super.onAllAnimationsDone();
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
            }
            Runnable runnable2 = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$15$EM2YnVPW5UeWtr7yNQ1-dLIntNg
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAllAnimationsDone$0$ChatActivity$15();
                }
            };
            this.finishRunnable = runnable2;
            AndroidUtilities.runOnUIThread(runnable2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onAllAnimationsDone$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onAllAnimationsDone$0$ChatActivity$15() {
            if (ChatActivity.this.scrollAnimationIndex != -1) {
                ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollAnimationIndex);
                ChatActivity.this.scrollAnimationIndex = -1;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("chatItemAnimator enable notifications");
            }
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator, androidx.recyclerview.widget.DefaultItemAnimator, androidx.recyclerview.widget.RecyclerView.ItemAnimator
        public void endAnimations() {
            super.endAnimations();
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
            }
            Runnable runnable2 = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$15$dCoQlLCj-5S5Do_X3GJ7qTVUWP0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$endAnimations$1$ChatActivity$15();
                }
            };
            this.finishRunnable = runnable2;
            AndroidUtilities.runOnUIThread(runnable2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$endAnimations$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$endAnimations$1$ChatActivity$15() {
            if (ChatActivity.this.scrollAnimationIndex != -1) {
                ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollAnimationIndex);
                ChatActivity.this.scrollAnimationIndex = -1;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("chatItemAnimator enable notifications");
            }
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$16, reason: invalid class name */
    class AnonymousClass16 extends GridLayoutManagerFixed {
        boolean computingScroll;

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public boolean supportsPredictiveItemAnimations() {
            return true;
        }

        AnonymousClass16(Context context, int spanCount, int orientation, boolean reverseLayout) {
            super(context, spanCount, orientation, reverseLayout);
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager
        public int getStarForFixGap() {
            int i = (int) ChatActivity.this.chatListViewPaddingTop;
            return (ChatActivity.this.isThreadChat() && ChatActivity.this.pinnedMessageView != null && ChatActivity.this.pinnedMessageView.getVisibility() == 0) ? (int) (i - Math.max(0.0f, AndroidUtilities.dp(48.0f) + ChatActivity.this.pinnedMessageEnterOffset)) : i;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        protected int getParentStart() {
            if (this.computingScroll) {
                return (int) ChatActivity.this.chatListViewPaddingTop;
            }
            return 0;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int getStartAfterPadding() {
            if (this.computingScroll) {
                return (int) ChatActivity.this.chatListViewPaddingTop;
            }
            return super.getStartAfterPadding();
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int getTotalSpace() {
            if (this.computingScroll) {
                return (int) ((getHeight() - ChatActivity.this.chatListViewPaddingTop) - getPaddingBottom());
            }
            return super.getTotalSpace();
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollExtent(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollExtent = super.computeVerticalScrollExtent(state);
            this.computingScroll = false;
            return iComputeVerticalScrollExtent;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollOffset(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollOffset = super.computeVerticalScrollOffset(state);
            this.computingScroll = false;
            return iComputeVerticalScrollOffset;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollRange(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollRange = super.computeVerticalScrollRange(state);
            this.computingScroll = false;
            return iComputeVerticalScrollRange;
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager
        public void scrollToPositionWithOffset(int position, int offset, boolean bottom) {
            if (!bottom) {
                offset = (int) ((offset - getPaddingTop()) + ChatActivity.this.chatListViewPaddingTop);
            }
            super.scrollToPositionWithOffset(position, offset, bottom);
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public void smoothScrollToPosition(RecyclerView recyclerView, RecyclerView.State state, int position) {
            ChatActivity.this.scrollByTouch = false;
            LinearSmoothScrollerCustom linearSmoothScrollerCustom = new LinearSmoothScrollerCustom(recyclerView.getContext(), 0);
            linearSmoothScrollerCustom.setTargetPosition(position);
            startSmoothScroll(linearSmoothScrollerCustom);
        }

        @Override // androidx.recyclerview.widget.GridLayoutManagerFixed
        public boolean shouldLayoutChildFromOpositeSide(View child) {
            if (child instanceof ChatMessageCell) {
                return !((ChatMessageCell) child).getMessageObject().isOutOwner();
            }
            return false;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManagerFixed
        protected boolean hasSiblingChild(int position) {
            int i;
            byte b;
            if (position >= ChatActivity.this.chatAdapter.messagesStartRow && position < ChatActivity.this.chatAdapter.messagesEndRow && (i = position - ChatActivity.this.chatAdapter.messagesStartRow) >= 0 && i < ChatActivity.this.messages.size()) {
                MessageObject messageObject = ChatActivity.this.messages.get(i);
                MessageObject.GroupedMessages validGroupedMessage = ChatActivity.this.getValidGroupedMessage(messageObject);
                if (validGroupedMessage != null) {
                    MessageObject.GroupedMessagePosition groupedMessagePosition = validGroupedMessage.positions.get(messageObject);
                    if (groupedMessagePosition.minX != groupedMessagePosition.maxX && (b = groupedMessagePosition.minY) == groupedMessagePosition.maxY && b != 0) {
                        int size = validGroupedMessage.posArray.size();
                        for (int i2 = 0; i2 < size; i2++) {
                            MessageObject.GroupedMessagePosition groupedMessagePosition2 = validGroupedMessage.posArray.get(i2);
                            if (groupedMessagePosition2 != groupedMessagePosition) {
                                byte b2 = groupedMessagePosition2.minY;
                                byte b3 = groupedMessagePosition.minY;
                                if (b2 <= b3 && groupedMessagePosition2.maxY >= b3) {
                                    return true;
                                }
                            }
                        }
                    }
                }
            }
            return false;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {
            if (BuildVars.DEBUG_PRIVATE_VERSION) {
                super.onLayoutChildren(recycler, state);
                return;
            }
            try {
                super.onLayoutChildren(recycler, state);
            } catch (Exception e) {
                FileLog.e(e);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$16$FiRcbF21wQO5vjSpVu_fWWgNmk0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onLayoutChildren$0$ChatActivity$16();
                    }
                });
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onLayoutChildren$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onLayoutChildren$0$ChatActivity$16() {
            ChatActivity.this.chatAdapter.notifyDataSetChanged(false);
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int scrollVerticallyBy(int dy, RecyclerView.Recycler recycler, RecyclerView.State state) {
            int iScrollVerticallyBy;
            boolean z;
            float f;
            float f2;
            if (dy < 0 && ChatActivity.this.pullingDownOffset != 0.0f) {
                ChatActivity.access$12816(ChatActivity.this, dy);
                if (ChatActivity.this.pullingDownOffset < 0.0f) {
                    dy = (int) ChatActivity.this.pullingDownOffset;
                    ChatActivity.this.pullingDownOffset = 0.0f;
                    ChatActivity.this.chatListView.invalidate();
                } else {
                    dy = 0;
                }
            }
            int childCount = ChatActivity.this.chatListView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    iScrollVerticallyBy = 0;
                    z = false;
                    break;
                }
                View childAt = ChatActivity.this.chatListView.getChildAt(i);
                float fMax = ChatActivity.this.chatListViewPaddingTop;
                if (ChatActivity.this.isThreadChat() && ChatActivity.this.pinnedMessageView != null && ChatActivity.this.pinnedMessageView.getVisibility() == 0) {
                    fMax -= Math.max(0.0f, AndroidUtilities.dp(48.0f) + ChatActivity.this.pinnedMessageEnterOffset);
                }
                if (ChatActivity.this.chatListView.getChildAdapterPosition(childAt) == ChatActivity.this.chatAdapter.getItemCount() - 1) {
                    iScrollVerticallyBy = super.scrollVerticallyBy(((float) (childAt.getTop() - dy)) > fMax ? (int) (childAt.getTop() - fMax) : dy, recycler, state);
                    z = true;
                } else {
                    i++;
                }
            }
            if (!z) {
                iScrollVerticallyBy = super.scrollVerticallyBy(dy, recycler, state);
            }
            if (dy > 0 && iScrollVerticallyBy == 0 && ChatObject.isChannel(ChatActivity.this.currentChat)) {
                ChatActivity chatActivity = ChatActivity.this;
                if (!chatActivity.currentChat.megagroup && chatActivity.chatListView.getScrollState() == 1 && !ChatActivity.this.chatListView.isFastScrollAnimationRunning() && !ChatActivity.this.chatListView.isMultiselect()) {
                    if (ChatActivity.this.pullingDownOffset == 0.0f && ChatActivity.this.pullingDownDrawable != null) {
                        ChatActivity.this.pullingDownDrawable.updateDialog();
                    }
                    if (ChatActivity.this.pullingDownBackAnimator != null) {
                        ChatActivity.this.pullingDownBackAnimator.removeAllListeners();
                        ChatActivity.this.pullingDownBackAnimator.cancel();
                    }
                    float f3 = 0.05f;
                    if (ChatActivity.this.pullingDownOffset < AndroidUtilities.dp(110.0f)) {
                        float fDp = ChatActivity.this.pullingDownOffset / AndroidUtilities.dp(110.0f);
                        f = (1.0f - fDp) * 0.65f;
                        f2 = fDp * 0.45f;
                    } else {
                        if (ChatActivity.this.pullingDownOffset < AndroidUtilities.dp(160.0f)) {
                            float fDp2 = (ChatActivity.this.pullingDownOffset - AndroidUtilities.dp(110.0f)) / AndroidUtilities.dp(50.0f);
                            f = (1.0f - fDp2) * 0.45f;
                            f2 = fDp2 * 0.05f;
                        }
                        ChatActivity.access$12816(ChatActivity.this, dy * f3);
                        ChatActivity.this.chatListView.invalidate();
                    }
                    f3 = f + f2;
                    ChatActivity.access$12816(ChatActivity.this, dy * f3);
                    ChatActivity.this.chatListView.invalidate();
                }
            }
            if (ChatActivity.this.pullingDownOffset == 0.0f) {
                ChatActivity.this.chatListView.setOverScrollMode(0);
            } else {
                ChatActivity.this.chatListView.setOverScrollMode(2);
            }
            if (ChatActivity.this.pullingDownDrawable != null && ChatActivity.this.chatListView.getScrollState() == 1) {
                ChatActivity.this.pullingDownDrawable.showBottomPanel(ChatActivity.this.pullingDownOffset > 0.0f);
            }
            return iScrollVerticallyBy;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$14, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$14$ChatActivity(View view) throws Resources.NotFoundException, NumberFormatException {
        if (this.floatingDateView.getAlpha() == 0.0f || this.actionBar.isActionModeShowed() || this.reportType >= 0) {
            return;
        }
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(this.floatingDateView.getCustomDate() * 1000);
        int i = calendar.get(1);
        int i2 = calendar.get(2);
        int i3 = calendar.get(5);
        calendar.clear();
        calendar.set(i, i2, i3);
        jumpToDate((int) (calendar.getTime().getTime() / 1000));
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$21, reason: invalid class name */
    class AnonymousClass21 extends FrameLayout {
        float lastY;
        float startY;

        AnonymousClass21(Context context) {
            super(context);
            setOnLongClickListener(new View.OnLongClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$21$YxvLIk404kCHUNipzYIQaDg0bsE
                @Override // android.view.View.OnLongClickListener
                public final boolean onLongClick(View view) {
                    return this.f$0.lambda$new$0$ChatActivity$21(view);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$new$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ boolean lambda$new$0$ChatActivity$21(View view) {
            if (AndroidUtilities.isTablet() || ChatActivity.this.isThreadChat()) {
                return false;
            }
            this.startY = this.lastY;
            ChatActivity.this.openPinnedMessagesList(true);
            return true;
        }

        @Override // android.view.View
        public boolean onTouchEvent(MotionEvent event) {
            this.lastY = event.getY();
            if (event.getAction() == 1) {
                ChatActivity.this.finishPreviewFragment();
            } else if (event.getAction() == 2) {
                float f = this.startY - this.lastY;
                ChatActivity.this.movePreviewFragment(f);
                if (f < 0.0f) {
                    this.startY = this.lastY;
                }
            }
            return super.onTouchEvent(event);
        }

        @Override // android.widget.FrameLayout, android.view.View
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            if (ChatActivity.this.setPinnedTextTranslationX) {
                for (int i = 0; i < ChatActivity.this.pinnedNextAnimation.length; i++) {
                    if (ChatActivity.this.pinnedNextAnimation[i] != null) {
                        ChatActivity.this.pinnedNextAnimation[i].start();
                    }
                }
                ChatActivity.this.setPinnedTextTranslationX = false;
            }
        }

        @Override // android.view.ViewGroup
        protected boolean drawChild(Canvas canvas, View child, long drawingTime) {
            if (child == ChatActivity.this.pinnedLineView) {
                canvas.save();
                canvas.clipRect(0, 0, getMeasuredWidth(), AndroidUtilities.dp(48.0f));
            }
            if (child == ChatActivity.this.pinnedMessageTextView[0] || child == ChatActivity.this.pinnedMessageTextView[1]) {
                canvas.save();
                canvas.clipRect(0, 0, getMeasuredWidth() - AndroidUtilities.dp(38.0f), getMeasuredHeight());
                boolean zDrawChild = super.drawChild(canvas, child, drawingTime);
                canvas.restore();
                return zDrawChild;
            }
            boolean zDrawChild2 = super.drawChild(canvas, child, drawingTime);
            if (child != ChatActivity.this.pinnedLineView) {
                return zDrawChild2;
            }
            canvas.restore();
            return zDrawChild2;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$15, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$15$ChatActivity(View view) throws InterruptedException, Resources.NotFoundException, NumberFormatException, IOException {
        int iIntValue;
        this.wasManualScroll = true;
        if (isThreadChat()) {
            scrollToMessageId(this.threadMessageId, 0, true, 0, true, 0);
            return;
        }
        int i = this.currentPinnedMessageId;
        if (i != 0) {
            if (this.pinnedMessageIds.isEmpty()) {
                iIntValue = 0;
            } else {
                ArrayList<Integer> arrayList = this.pinnedMessageIds;
                if (i == arrayList.get(arrayList.size() - 1).intValue()) {
                    iIntValue = this.pinnedMessageIds.get(0).intValue() + 1;
                    this.forceScrollToFirst = true;
                } else {
                    iIntValue = i - 1;
                    this.forceScrollToFirst = false;
                }
            }
            this.forceNextPinnedMessageId = iIntValue;
            scrollToMessageId(i, 0, true, 0, true, !this.forceScrollToFirst ? -iIntValue : iIntValue);
            updateMessagesVisiblePart(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$16, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$16$ChatActivity(View view) {
        openPinnedMessagesList(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$18, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$18$ChatActivity(View view) {
        boolean zCanPinMessages;
        TLRPC$UserFull tLRPC$UserFull;
        if (getParentActivity() == null) {
            return;
        }
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat != null) {
            zCanPinMessages = ChatObject.canPinMessages(tLRPC$Chat);
        } else {
            zCanPinMessages = (this.currentEncryptedChat != null || (tLRPC$UserFull = this.userInfo) == null) ? false : tLRPC$UserFull.can_pin_message;
        }
        if (zCanPinMessages) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setTitle(LocaleController.getString("UnpinMessageAlertTitle", R.string.UnpinMessageAlertTitle));
            builder.setMessage(LocaleController.getString("UnpinMessageAlert", R.string.UnpinMessageAlert));
            builder.setPositiveButton(LocaleController.getString("UnpinMessage", R.string.UnpinMessage), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$s99pIkiBKVthv1qeWyqzZ3W-NRM
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i) {
                    this.f$0.lambda$createView$17$ChatActivity(dialogInterface, i);
                }
            });
            builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
            showDialog(builder.create());
            return;
        }
        if (this.pinnedMessageIds.isEmpty()) {
            return;
        }
        MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("pin_" + this.dialog_id, this.pinnedMessageIds.get(0).intValue()).commit();
        updatePinnedMessageView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$17, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$17$ChatActivity(DialogInterface dialogInterface, int i) {
        MessageObject messageObject = this.pinnedMessageObjects.get(Integer.valueOf(this.currentPinnedMessageId));
        if (messageObject == null) {
            messageObject = this.messagesDict[0].get(this.currentPinnedMessageId);
        }
        unpinMessage(messageObject);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$20, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$20$ChatActivity(View view) {
        AlertsCreator.showBlockReportSpamAlert(this, this.dialog_id, this.currentUser, this.currentChat, this.currentEncryptedChat, this.reportSpamButton.getTag(R.id.object_tag) != null, this.chatInfo, new MessagesStorage.IntCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$1hy7cCFUA-pE0KfacdiPNYB70CQ
            @Override // ir.eitaa.messenger.MessagesStorage.IntCallback
            public final void run(int i) {
                this.f$0.lambda$createView$19$ChatActivity(i);
            }
        }, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$19, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$19$ChatActivity(int i) {
        if (i == 0) {
            updateTopPanel(true);
        } else {
            finishFragment();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$23, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$23$ChatActivity(Context context, View view) {
        if (this.addToContactsButtonArchive) {
            getMessagesController().addDialogToFolder(this.dialog_id, 0, 0, 0L);
            this.undoView.showWithAction(this.dialog_id, 23, (Runnable) null);
            SharedPreferences.Editor editorEdit = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editorEdit.putBoolean("dialog_bar_archived" + this.dialog_id, false);
            editorEdit.putBoolean("dialog_bar_block" + this.dialog_id, false);
            editorEdit.putBoolean("dialog_bar_report" + this.dialog_id, false);
            editorEdit.commit();
            updateTopPanel(false);
            getNotificationsController().clearDialogNotificationsSettings(this.dialog_id);
            return;
        }
        if (this.addToContactsButton.getTag() != null && ((Integer) this.addToContactsButton.getTag()).intValue() == 4) {
            TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
            if (tLRPC$ChatFull == null || tLRPC$ChatFull.participants == null) {
                return;
            }
            LongSparseArray longSparseArray = new LongSparseArray();
            for (int i = 0; i < this.chatInfo.participants.participants.size(); i++) {
                longSparseArray.put(this.chatInfo.participants.participants.get(i).user_id, null);
            }
            final long j = this.chatInfo.id;
            InviteMembersBottomSheet inviteMembersBottomSheet = new InviteMembersBottomSheet(context, this.currentAccount, longSparseArray, this.chatInfo.id, this, this.themeDelegate);
            inviteMembersBottomSheet.setDelegate(new GroupCreateActivity.ContactsAddActivityDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$paPhUrBVwzk_wwRVYpMWSi_6U9w
                @Override // ir.eitaa.ui.GroupCreateActivity.ContactsAddActivityDelegate
                public final void didSelectUsers(ArrayList arrayList, int i2) {
                    this.f$0.lambda$createView$21$ChatActivity(j, arrayList, i2);
                }

                @Override // ir.eitaa.ui.GroupCreateActivity.ContactsAddActivityDelegate
                public /* synthetic */ void needAddBot(TLRPC$User tLRPC$User) {
                    GroupCreateActivity.ContactsAddActivityDelegate.CC.$default$needAddBot(this, tLRPC$User);
                }
            });
            inviteMembersBottomSheet.show();
            return;
        }
        if (this.addToContactsButton.getTag() != null) {
            shareMyContact(1, null);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putLong("user_id", this.currentUser.id);
        bundle.putBoolean("addContact", true);
        ContactAddActivity contactAddActivity = new ContactAddActivity(bundle);
        contactAddActivity.setDelegate(new ContactAddActivity.ContactAddActivityDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$C7H2pL0dIpI9Hg36-9yNY94TfzY
            @Override // ir.eitaa.ui.ContactAddActivity.ContactAddActivityDelegate
            public final void didAddToContacts() {
                this.f$0.lambda$createView$22$ChatActivity();
            }
        });
        presentFragment(contactAddActivity);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$21, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$21$ChatActivity(long j, ArrayList arrayList, int i) {
        int size = arrayList.size();
        for (int i2 = 0; i2 < size; i2++) {
            getMessagesController().addUserToChat(j, (TLRPC$User) arrayList.get(i2), i, null, this, null);
        }
        getMessagesController().hidePeerSettingsBar(this.dialog_id, this.currentUser, this.currentChat);
        updateTopPanel(true);
        updateInfoTopView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$22, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$22$ChatActivity() {
        this.undoView.showWithAction(this.dialog_id, 8, this.currentUser);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$24, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$24$ChatActivity(View view) {
        long j = this.dialog_id;
        if (this.currentEncryptedChat != null) {
            j = this.currentUser.id;
        }
        getMessagesController().hidePeerSettingsBar(j, this.currentUser, this.currentChat);
        updateTopPanel(true);
        updateInfoTopView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$25, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$25$ChatActivity(View view) {
        BaseFragment baseFragment;
        if (this.parentLayout.fragmentsStack.size() > 0) {
            ArrayList<BaseFragment> arrayList = this.parentLayout.fragmentsStack;
            baseFragment = arrayList.get(arrayList.size() - 1);
        } else {
            baseFragment = null;
        }
        ActionBarLayout actionBarLayout = this.parentLayout;
        if (baseFragment != null) {
            NotificationCenter.getInstance(this.currentAccount).removeObserver(baseFragment, NotificationCenter.closeChats);
        }
        NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.closeChats, new Object[0]);
        Bundle bundle = new Bundle();
        bundle.putLong("dialog_id", -this.currentChat.id);
        actionBarLayout.presentFragment(new MediaChannelActivity(bundle), true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$26, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$26$ChatActivity(View view) throws Resources.NotFoundException, NumberFormatException {
        this.wasManualScroll = true;
        this.textSelectionHelper.cancelTextSelectionRunnable();
        int i = this.createUnreadMessageAfterId;
        if (i != 0) {
            scrollToMessageId(i, 0, false, this.returnToLoadIndex, true, 0);
            return;
        }
        int i2 = this.returnToMessageId;
        if (i2 > 0) {
            scrollToMessageId(i2, 0, true, this.returnToLoadIndex, true, 0);
            return;
        }
        scrollToLastMessage();
        if (this.pinnedMessageIds.isEmpty()) {
            return;
        }
        this.forceScrollToFirst = true;
        this.forceNextPinnedMessageId = this.pinnedMessageIds.get(0).intValue();
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$25, reason: invalid class name */
    class AnonymousClass25 implements View.OnClickListener {
        AnonymousClass25() {
        }

        private void loadLastUnreadMention() {
            ChatActivity.this.wasManualScroll = true;
            if (ChatActivity.this.hasAllMentionsLocal) {
                ChatActivity.this.getMessagesStorage().getUnreadMention(ChatActivity.this.dialog_id, new MessagesStorage.IntCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$25$-eEb2ykUvhhc9d3AjGy-wQ-75Os
                    @Override // ir.eitaa.messenger.MessagesStorage.IntCallback
                    public final void run(int i) throws Resources.NotFoundException, NumberFormatException {
                        this.f$0.lambda$loadLastUnreadMention$0$ChatActivity$25(i);
                    }
                });
                return;
            }
            final MessagesStorage messagesStorage = ChatActivity.this.getMessagesStorage();
            TLRPC$TL_messages_getUnreadMentions tLRPC$TL_messages_getUnreadMentions = new TLRPC$TL_messages_getUnreadMentions();
            tLRPC$TL_messages_getUnreadMentions.peer = ChatActivity.this.getMessagesController().getInputPeer(ChatActivity.this.dialog_id);
            tLRPC$TL_messages_getUnreadMentions.limit = 1;
            tLRPC$TL_messages_getUnreadMentions.add_offset = ChatActivity.this.newMentionsCount - 1;
            ChatActivity.this.getConnectionsManager().sendRequest(tLRPC$TL_messages_getUnreadMentions, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$25$szQY52hQpvv8jcqdr76FT0Ow68U
                @Override // ir.eitaa.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                    this.f$0.lambda$loadLastUnreadMention$2$ChatActivity$25(messagesStorage, tLObject, tLRPC$TL_error);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$loadLastUnreadMention$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$loadLastUnreadMention$0$ChatActivity$25(int i) throws Resources.NotFoundException, NumberFormatException {
            if (i == 0) {
                ChatActivity.this.hasAllMentionsLocal = false;
                loadLastUnreadMention();
            } else {
                ChatActivity.this.scrollToMessageId(i, 0, false, 0, true, 0);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$loadLastUnreadMention$2, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$loadLastUnreadMention$2$ChatActivity$25(final MessagesStorage messagesStorage, final TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$25$3t6oVdaMPF2Rj25iwQ17Yt1SpVM
                @Override // java.lang.Runnable
                public final void run() throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$loadLastUnreadMention$1$ChatActivity$25(tLObject, tLRPC$TL_error, messagesStorage);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$loadLastUnreadMention$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$loadLastUnreadMention$1$ChatActivity$25(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error, MessagesStorage messagesStorage) throws Resources.NotFoundException, NumberFormatException {
            TLRPC$messages_Messages tLRPC$messages_Messages = (TLRPC$messages_Messages) tLObject;
            if (tLRPC$TL_error != null || tLRPC$messages_Messages.messages.isEmpty()) {
                if (tLRPC$messages_Messages != null) {
                    ChatActivity.this.newMentionsCount = tLRPC$messages_Messages.count;
                } else {
                    ChatActivity.this.newMentionsCount = 0;
                }
                messagesStorage.resetMentionsCount(ChatActivity.this.dialog_id, ChatActivity.this.newMentionsCount);
                if (ChatActivity.this.newMentionsCount == 0) {
                    ChatActivity.this.hasAllMentionsLocal = true;
                    ChatActivity.this.showMentionDownButton(false, true);
                    return;
                } else {
                    ChatActivity.this.mentiondownButtonCounter.setText(String.format("%d", Integer.valueOf(ChatActivity.this.newMentionsCount)));
                    loadLastUnreadMention();
                    return;
                }
            }
            int i = tLRPC$messages_Messages.messages.get(0).id;
            MessageObject messageObject = (MessageObject) ChatActivity.this.messagesDict[0].get(i);
            messagesStorage.markMessageAsMention(ChatActivity.this.dialog_id, i);
            if (messageObject != null) {
                TLRPC$Message tLRPC$Message = messageObject.messageOwner;
                tLRPC$Message.media_unread = true;
                tLRPC$Message.mentioned = true;
            }
            ChatActivity.this.scrollToMessageId(i, 0, false, 0, true, 0);
        }

        @Override // android.view.View.OnClickListener
        public void onClick(View view) {
            loadLastUnreadMention();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$27, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$27$ChatActivity(View view) {
        for (int i = 0; i < this.messages.size(); i++) {
            MessageObject messageObject = this.messages.get(i);
            if (messageObject.messageOwner.mentioned && !messageObject.isContentUnread()) {
                messageObject.setContentIsRead();
            }
        }
        this.newMentionsCount = 0;
        getMessagesController().markMentionsAsRead(this.dialog_id);
        this.hasAllMentionsLocal = true;
        showMentionDownButton(false, true);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$28, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$28$ChatActivity(ContentPreviewViewer.ContentPreviewViewerDelegate contentPreviewViewerDelegate, View view, MotionEvent motionEvent) {
        ContentPreviewViewer contentPreviewViewer = ContentPreviewViewer.getInstance();
        RecyclerListView recyclerListView = this.mentionListView;
        RecyclerListView.OnItemClickListener onItemClickListener = this.mentionsOnItemClickListener;
        if (!this.mentionsAdapter.isStickers()) {
            contentPreviewViewerDelegate = null;
        }
        return contentPreviewViewer.onTouch(motionEvent, recyclerListView, 0, onItemClickListener, contentPreviewViewerDelegate, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$32, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$32$ChatActivity(View view, int i) throws InterruptedException, Resources.NotFoundException, IOException {
        char c;
        if (this.mentionsAdapter.isBannedInline()) {
            return;
        }
        final Object item = this.mentionsAdapter.getItem(i);
        int resultStartPosition = this.mentionsAdapter.getResultStartPosition();
        int resultLength = this.mentionsAdapter.getResultLength();
        if (item instanceof TLRPC$TL_document) {
            if (this.chatMode == 0 && checkSlowMode(view)) {
                return;
            }
            MessageObject.SendAnimationData sendAnimationData = view instanceof StickerCell ? ((StickerCell) view).getSendAnimationData() : null;
            final TLRPC$TL_document tLRPC$TL_document = (TLRPC$TL_document) item;
            final Object itemParent = this.mentionsAdapter.getItemParent(i);
            if (this.chatMode == 1) {
                final String query = this.stickersAdapter.getQuery();
                AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$VDIbh1noud6crVt7lrHDQ_SA8Hg
                    @Override // ir.eitaa.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                    public final void didSelectDate(boolean z, int i2) throws IOException {
                        this.f$0.lambda$createView$29$ChatActivity(tLRPC$TL_document, query, itemParent, z, i2);
                    }
                }, this.themeDelegate);
            } else {
                getSendMessagesHelper().sendSticker(tLRPC$TL_document, this.stickersAdapter.getQuery(), this.dialog_id, this.replyingMessageObject, getThreadMessage(), itemParent, sendAnimationData, true, 0);
            }
            hideFieldPanel(false);
            this.chatActivityEnterView.addStickerToRecent(tLRPC$TL_document);
            this.chatActivityEnterView.setFieldText("");
            return;
        }
        if (item instanceof TLRPC$Chat) {
            TLRPC$Chat tLRPC$Chat = (TLRPC$Chat) item;
            if (this.searchingForUser && this.searchContainer.getVisibility() == 0) {
                searchUserMessages(null, tLRPC$Chat);
                return;
            }
            if (tLRPC$Chat.username != null) {
                this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, "@" + tLRPC$Chat.username + " ", false);
                return;
            }
            return;
        }
        if (item instanceof TLRPC$User) {
            TLRPC$User tLRPC$User = (TLRPC$User) item;
            if (this.searchingForUser && this.searchContainer.getVisibility() == 0) {
                searchUserMessages(tLRPC$User, null);
                return;
            }
            if (tLRPC$User.username != null) {
                this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, "@" + tLRPC$User.username + " ", false);
                return;
            }
            SpannableString spannableString = new SpannableString(UserObject.getFirstName(tLRPC$User, false) + " ");
            spannableString.setSpan(new URLSpanUserMention("" + tLRPC$User.id, 3), 0, spannableString.length(), 33);
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, spannableString, false);
            return;
        }
        if (item instanceof String) {
            if (this.mentionsAdapter.isBotCommands()) {
                if (this.chatMode == 1) {
                    AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$SksC_yyTS_jwu1OC8M1YKYu5a3M
                        @Override // ir.eitaa.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                        public final void didSelectDate(boolean z, int i2) {
                            this.f$0.lambda$createView$30$ChatActivity(item, z, i2);
                        }
                    }, this.themeDelegate);
                    return;
                } else {
                    if (checkSlowMode(view)) {
                        return;
                    }
                    getSendMessagesHelper().sendMessage((String) item, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, null, null, null, true, 0, null);
                    this.chatActivityEnterView.setFieldText("");
                    hideFieldPanel(false);
                    return;
                }
            }
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, item + " ", false);
            return;
        }
        if (item instanceof TLRPC$BotInlineResult) {
            if (this.chatActivityEnterView.getFieldText() != null) {
                if (this.chatMode == 1 || !checkSlowMode(view)) {
                    final TLRPC$BotInlineResult tLRPC$BotInlineResult = (TLRPC$BotInlineResult) item;
                    if (this.currentEncryptedChat != null) {
                        if ((tLRPC$BotInlineResult.send_message instanceof TLRPC$TL_botInlineMessageMediaAuto) && "game".equals(tLRPC$BotInlineResult.type)) {
                            c = 1;
                        } else {
                            c = tLRPC$BotInlineResult.send_message instanceof TLRPC$TL_botInlineMessageMediaInvoice ? (char) 2 : (char) 0;
                        }
                        if (c != 0) {
                            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                            builder.setTitle(LocaleController.getString("SendMessageTitle", R.string.SendMessageTitle));
                            if (c == 1) {
                                builder.setMessage(LocaleController.getString("GameCantSendSecretChat", R.string.GameCantSendSecretChat));
                            } else {
                                builder.setMessage(LocaleController.getString("InvoiceCantSendSecretChat", R.string.InvoiceCantSendSecretChat));
                            }
                            builder.setNegativeButton(LocaleController.getString("OK", R.string.OK), null);
                            showDialog(builder.create());
                            return;
                        }
                    }
                    if ((tLRPC$BotInlineResult.type.equals("photo") && (tLRPC$BotInlineResult.photo != null || tLRPC$BotInlineResult.content != null)) || ((tLRPC$BotInlineResult.type.equals("gif") && (tLRPC$BotInlineResult.document != null || tLRPC$BotInlineResult.content != null)) || (tLRPC$BotInlineResult.type.equals(MediaStreamTrack.VIDEO_TRACK_KIND) && tLRPC$BotInlineResult.document != null))) {
                        ArrayList<Object> arrayList = new ArrayList<>(this.mentionsAdapter.getSearchResultBotContext());
                        this.botContextResults = arrayList;
                        PhotoViewer.getInstance().setParentActivity(getParentActivity(), this.themeDelegate);
                        PhotoViewer.getInstance().openPhotoForSelect(arrayList, this.mentionsAdapter.getItemPosition(i), 3, false, this.botContextProvider, this);
                        return;
                    }
                    if (this.chatMode == 1) {
                        AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$9ps-naVCNziAHbAysWRwft13IVs
                            @Override // ir.eitaa.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                            public final void didSelectDate(boolean z, int i2) {
                                this.f$0.lambda$createView$31$ChatActivity(tLRPC$BotInlineResult, z, i2);
                            }
                        }, this.themeDelegate);
                        return;
                    } else {
                        lambda$createView$31(tLRPC$BotInlineResult, true, 0);
                        return;
                    }
                }
                return;
            }
            return;
        }
        if (item instanceof TLRPC$TL_inlineBotSwitchPM) {
            processInlineBotContextPM((TLRPC$TL_inlineBotSwitchPM) item);
        } else if (item instanceof MediaDataController.KeywordResult) {
            String str = ((MediaDataController.KeywordResult) item).emoji;
            this.chatActivityEnterView.addEmojiToRecent(str);
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, str, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$29, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$29$ChatActivity(TLRPC$TL_document tLRPC$TL_document, String str, Object obj, boolean z, int i) throws IOException {
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(tLRPC$TL_document, str, this.dialog_id, this.replyingMessageObject, getThreadMessage(), obj, null, z, i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$30, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$30$ChatActivity(Object obj, boolean z, int i) {
        getSendMessagesHelper().sendMessage((String) obj, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, null, null, null, z, i, null);
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$34, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$34$ChatActivity(View view, int i) {
        boolean z = false;
        if (getParentActivity() != null && this.mentionsAdapter.isLongClickEnabled()) {
            Object item = this.mentionsAdapter.getItem(i);
            if (item instanceof String) {
                if (this.mentionsAdapter.isBotCommands()) {
                    if (!URLSpanBotCommand.enabled) {
                        return false;
                    }
                    this.chatActivityEnterView.setFieldText("");
                    ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
                    String str = (String) item;
                    TLRPC$Chat tLRPC$Chat = this.currentChat;
                    if (tLRPC$Chat != null && tLRPC$Chat.megagroup) {
                        z = true;
                    }
                    chatActivityEnterView.setCommand(null, str, true, z);
                    return true;
                }
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                builder.setMessage(LocaleController.getString("ClearSearch", R.string.ClearSearch));
                builder.setPositiveButton(LocaleController.getString("ClearButton", R.string.ClearButton).toUpperCase(), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$dWutwT-E8FmBZueN0Zdg4GBjIvA
                    @Override // android.content.DialogInterface.OnClickListener
                    public final void onClick(DialogInterface dialogInterface, int i2) {
                        this.f$0.lambda$createView$33$ChatActivity(dialogInterface, i2);
                    }
                });
                builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
                showDialog(builder.create());
                return true;
            }
        }
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$33, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$33$ChatActivity(DialogInterface dialogInterface, int i) {
        this.mentionsAdapter.clearRecentHashtags();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$35, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$35$ChatActivity(View view, int i) {
        getMediaDataController().jumpToSearchedMessage(this.classGuid, i);
        showMessagesSearchListView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$36, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$36$ChatActivity(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == 0) {
            checkRecordLocked(false);
        }
        this.overlayView.getParent().requestDisallowInterceptTouchEvent(true);
        return true;
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$41, reason: invalid class name */
    class AnonymousClass41 extends ChatActivityEnterView {
        int lastContentViewHeight;
        int messageEditTextPredrawHeigth;
        int messageEditTextPredrawScrollY;

        AnonymousClass41(Activity context, SizeNotifierFrameLayout parent, ChatActivity fragment, final boolean isChat, Theme.ResourcesProvider resourcesProvider, boolean isMxb) {
            super(context, parent, fragment, isChat, resourcesProvider, isMxb);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView, android.view.ViewGroup
        public boolean onInterceptTouchEvent(MotionEvent ev) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.onInterceptTouchEvent(ev);
        }

        @Override // android.view.View
        public boolean onTouchEvent(MotionEvent event) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.onTouchEvent(event);
        }

        @Override // android.view.ViewGroup, android.view.View
        public boolean dispatchTouchEvent(MotionEvent ev) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.dispatchTouchEvent(ev);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView
        protected boolean pannelAnimationEnabled() {
            return ChatActivity.this.openAnimationEnded;
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView
        public void checkAnimation() {
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) {
                if (ChatActivity.this.messageEditTextAnimator != null) {
                    ChatActivity.this.messageEditTextAnimator.cancel();
                }
                if (ChatActivity.this.changeBoundAnimator != null) {
                    ChatActivity.this.changeBoundAnimator.cancel();
                }
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
                this.shouldAnimateEditTextWithBounds = false;
                return;
            }
            int backgroundTop = getBackgroundTop();
            if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0 && backgroundTop != ChatActivity.this.chatActivityEnterViewAnimateFromTop && this.lastContentViewHeight == ChatActivity.this.contentView.getMeasuredHeight()) {
                final int i = (this.animatedTop + ChatActivity.this.chatActivityEnterViewAnimateFromTop) - backgroundTop;
                this.animatedTop = i;
                if (ChatActivity.this.changeBoundAnimator != null) {
                    ChatActivity.this.changeBoundAnimator.removeAllListeners();
                    ChatActivity.this.changeBoundAnimator.cancel();
                }
                ChatActivity.this.chatListView.setTranslationY(i);
                View view = this.topView;
                if (view != null && view.getVisibility() == 0) {
                    this.topView.setTranslationY(this.animatedTop + ((1.0f - this.topViewEnterProgress) * r0.getLayoutParams().height));
                    View view2 = this.topLineView;
                    if (view2 != null) {
                        view2.setTranslationY(this.animatedTop);
                    }
                }
                ChatActivity.this.changeBoundAnimator = ValueAnimator.ofFloat(1.0f, 0.0f);
                ChatActivity.this.changeBoundAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$41$pjyZi4ubBfE2CPzSpmb0-qo95b4
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$checkAnimation$0$ChatActivity$41(i, valueAnimator);
                    }
                });
                ChatActivity.this.changeBoundAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.41.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        ((ChatActivityEnterView) AnonymousClass41.this).animatedTop = 0;
                        if (((ChatActivityEnterView) AnonymousClass41.this).topView == null || ((ChatActivityEnterView) AnonymousClass41.this).topView.getVisibility() != 0) {
                            ChatActivity.this.chatListView.setTranslationY(0.0f);
                        } else {
                            ((ChatActivityEnterView) AnonymousClass41.this).topView.setTranslationY(((ChatActivityEnterView) AnonymousClass41.this).animatedTop + ((1.0f - ((ChatActivityEnterView) AnonymousClass41.this).topViewEnterProgress) * ((ChatActivityEnterView) AnonymousClass41.this).topView.getLayoutParams().height));
                            if (((ChatActivityEnterView) AnonymousClass41.this).topLineView != null) {
                                ((ChatActivityEnterView) AnonymousClass41.this).topLineView.setTranslationY(((ChatActivityEnterView) AnonymousClass41.this).animatedTop);
                            }
                        }
                        ChatActivity.this.changeBoundAnimator = null;
                    }
                });
                ChatActivity.this.changeBoundAnimator.setDuration(250L);
                ChatActivity.this.changeBoundAnimator.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                if (!ChatActivity.this.waitingForSendingMessageLoad) {
                    ChatActivity.this.changeBoundAnimator.start();
                }
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
            } else if (this.lastContentViewHeight != ChatActivity.this.contentView.getMeasuredHeight()) {
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
            }
            if (this.shouldAnimateEditTextWithBounds) {
                float measuredHeight = (this.messageEditTextPredrawHeigth - this.messageEditText.getMeasuredHeight()) + (this.messageEditTextPredrawScrollY - this.messageEditText.getScrollY());
                EditTextCaption editTextCaption = this.messageEditText;
                editTextCaption.setOffsetY(editTextCaption.getOffsetY() - measuredHeight);
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.messageEditText.getOffsetY(), 0.0f);
                valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$41$AKrlI_ftg4Jjd6Ua_BL9pIt1R_8
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$checkAnimation$1$ChatActivity$41(valueAnimator);
                    }
                });
                if (ChatActivity.this.messageEditTextAnimator != null) {
                    ChatActivity.this.messageEditTextAnimator.cancel();
                }
                ChatActivity.this.messageEditTextAnimator = valueAnimatorOfFloat;
                valueAnimatorOfFloat.setDuration(250L);
                valueAnimatorOfFloat.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                valueAnimatorOfFloat.start();
                this.shouldAnimateEditTextWithBounds = false;
            }
            this.lastContentViewHeight = ChatActivity.this.contentView.getMeasuredHeight();
            ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = false;
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$checkAnimation$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$checkAnimation$0$ChatActivity$41(int i, ValueAnimator valueAnimator) {
            int iFloatValue = (int) (i * ((Float) valueAnimator.getAnimatedValue()).floatValue());
            this.animatedTop = iFloatValue;
            View view = this.topView;
            if (view == null || view.getVisibility() != 0) {
                if (ChatActivity.this.mentionContainer != null) {
                    ChatActivity.this.mentionContainer.setTranslationY(iFloatValue);
                }
                if (ChatActivity.this.mentiondownButton != null && ChatActivity.this.mentiondownButton.getTag() != null) {
                    ChatActivity.this.mentiondownButton.setTranslationY(ChatActivity.this.pagedownButton.getVisibility() != 0 ? iFloatValue : iFloatValue - AndroidUtilities.dp(72.0f));
                }
                if (ChatActivity.this.pagedownButton != null && ChatActivity.this.pagedownButton.getTag() != null) {
                    ChatActivity.this.pagedownButton.setTranslationY(iFloatValue);
                }
                ChatActivity.this.chatListView.setTranslationY(iFloatValue);
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
            } else {
                this.topView.setTranslationY(this.animatedTop + ((1.0f - this.topViewEnterProgress) * r3.getLayoutParams().height));
                View view2 = this.topLineView;
                if (view2 != null) {
                    view2.setTranslationY(this.animatedTop);
                }
            }
            invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$checkAnimation$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$checkAnimation$1$ChatActivity$41(ValueAnimator valueAnimator) {
            this.messageEditText.setOffsetY(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView
        protected void onLineCountChanged(int oldLineCount, int newLineCount) {
            if (ChatActivity.this.chatActivityEnterView != null) {
                this.shouldAnimateEditTextWithBounds = true;
                this.messageEditTextPredrawHeigth = this.messageEditText.getMeasuredHeight();
                this.messageEditTextPredrawScrollY = this.messageEditText.getScrollY();
                ChatActivity.this.contentView.invalidate();
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.chatActivityEnterViewAnimateFromTop = chatActivity.chatActivityEnterView.getBackgroundTop();
            }
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$42, reason: invalid class name */
    class AnonymousClass42 implements ChatActivityEnterView.ChatActivityEnterViewDelegate {
        int lastSize;

        AnonymousClass42() {
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onMessageSend(CharSequence message, boolean notify, int scheduleDate) {
            if (ChatActivity.this.chatListItemAnimator != null) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.chatActivityEnterViewAnimateFromTop = chatActivity.chatActivityEnterView.getBackgroundTop();
                if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0) {
                    ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = true;
                }
            }
            if (ChatActivity.this.mentionsAdapter != null) {
                ChatActivity.this.mentionsAdapter.addHashtagsFromMessage(message);
            }
            if (scheduleDate != 0) {
                if (ChatActivity.this.scheduledMessagesCount == -1) {
                    ChatActivity.this.scheduledMessagesCount = 0;
                }
                if (message != null) {
                    ChatActivity.access$28308(ChatActivity.this);
                }
                if (ChatActivity.this.forwardingMessages != null && !ChatActivity.this.forwardingMessages.messages.isEmpty()) {
                    ChatActivity chatActivity2 = ChatActivity.this;
                    ChatActivity.access$28312(chatActivity2, chatActivity2.forwardingMessages.messages.size());
                }
                ChatActivity.this.updateScheduledInterface(false);
            }
            ChatActivity.this.hideFieldPanel(notify, scheduleDate, true);
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView == null || chatActivityEnterView.getEmojiView() == null) {
                return;
            }
            ChatActivity.this.chatActivityEnterView.getEmojiView().onMessageSend();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onSwitchRecordMode(boolean video) {
            ChatActivity.this.showVoiceHint(false, video);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onPreAudioVideoRecord() {
            ChatActivity.this.showVoiceHint(true, false);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onUpdateSlowModeButton(View button, boolean show, CharSequence time) {
            ChatActivity.this.showSlowModeHint(button, show, time);
            if (ChatActivity.this.headerItem == null || ChatActivity.this.headerItem.getVisibility() == 0) {
                return;
            }
            ChatActivity.this.headerItem.setVisibility(0);
            if (ChatActivity.this.attachItem != null) {
                ChatActivity.this.attachItem.setVisibility(8);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextSelectionChanged(int start, int end) {
            if (ChatActivity.this.editTextItem == null) {
                return;
            }
            if (end - start > 0) {
                if (ChatActivity.this.editTextItem.getTag() == null) {
                    ChatActivity.this.editTextItem.setTag(1);
                    ChatActivity.this.editTextItem.setVisibility(0);
                    ChatActivity.this.headerItem.setVisibility(8);
                    ChatActivity.this.attachItem.setVisibility(8);
                }
                ChatActivity.this.editTextStart = start;
                ChatActivity.this.editTextEnd = end;
                return;
            }
            if (ChatActivity.this.editTextItem.getTag() != null) {
                ChatActivity.this.editTextItem.setTag(null);
                ChatActivity.this.editTextItem.setVisibility(8);
                if (!ChatActivity.this.chatActivityEnterView.hasText() || !TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer())) {
                    ChatActivity.this.headerItem.setVisibility(0);
                    ChatActivity.this.attachItem.setVisibility(8);
                } else {
                    ChatActivity.this.headerItem.setVisibility(8);
                    ChatActivity.this.attachItem.setVisibility(0);
                }
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextChanged(final CharSequence text, boolean bigChange) {
            ChatActivityEnterView chatActivityEnterView;
            MediaController.getInstance().setInputFieldHasText(!TextUtils.isEmpty(text) || ChatActivity.this.chatActivityEnterView.isEditingMessage());
            if (ChatActivity.this.stickersAdapter != null && (chatActivityEnterView = ChatActivity.this.chatActivityEnterView) != null && chatActivityEnterView.getVisibility() == 0 && (ChatActivity.this.bottomOverlay == null || ChatActivity.this.bottomOverlay.getVisibility() != 0)) {
                ChatActivity.this.stickersAdapter.searchEmojiByKeyword(text);
            }
            if (ChatActivity.this.mentionsAdapter != null) {
                ChatActivity.this.mentionsAdapter.searchUsernameOrHashtag(text.toString(), ChatActivity.this.chatActivityEnterView.getCursorPosition(), ChatActivity.this.messages, false, false);
            }
            if (ChatActivity.this.waitingForCharaterEnterRunnable != null) {
                AndroidUtilities.cancelRunOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable);
                ChatActivity.this.waitingForCharaterEnterRunnable = null;
            }
            TLRPC$Chat tLRPC$Chat = ChatActivity.this.currentChat;
            if ((tLRPC$Chat == null || ChatObject.canSendEmbed(tLRPC$Chat)) && ChatActivity.this.chatActivityEnterView.isMessageWebPageSearchEnabled()) {
                if (ChatActivity.this.chatActivityEnterView.isEditingMessage() && ChatActivity.this.chatActivityEnterView.isEditingCaption()) {
                    return;
                }
                if (bigChange) {
                    ChatActivity.this.searchLinks(text, true);
                } else {
                    ChatActivity.this.waitingForCharaterEnterRunnable = new Runnable() { // from class: ir.eitaa.ui.ChatActivity.42.1
                        @Override // java.lang.Runnable
                        public void run() {
                            if (this == ChatActivity.this.waitingForCharaterEnterRunnable) {
                                ChatActivity.this.searchLinks(text, false);
                                ChatActivity.this.waitingForCharaterEnterRunnable = null;
                            }
                        }
                    };
                    AndroidUtilities.runOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable, AndroidUtilities.WEB_URL == null ? 3000L : 1000L);
                }
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextSpansChanged(CharSequence text) {
            ChatActivity.this.searchLinks(text, true);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needSendTyping() {
            ChatActivity.this.getMessagesController().sendTyping(ChatActivity.this.dialog_id, ChatActivity.this.threadMessageId, 0, ((BaseFragment) ChatActivity.this).classGuid);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAttachButtonHidden() {
            if (((BaseFragment) ChatActivity.this).actionBar.isSearchFieldVisible()) {
                return;
            }
            if (ChatActivity.this.editTextItem != null) {
                ChatActivity.this.editTextItem.setVisibility(8);
            }
            if (TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer())) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(0);
                }
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAttachButtonShow() {
            if (((BaseFragment) ChatActivity.this).actionBar.isSearchFieldVisible()) {
                return;
            }
            if (ChatActivity.this.headerItem != null) {
                ChatActivity.this.headerItem.setVisibility(0);
            }
            if (ChatActivity.this.editTextItem != null) {
                ChatActivity.this.editTextItem.setVisibility(8);
            }
            if (ChatActivity.this.attachItem != null) {
                ChatActivity.this.attachItem.setVisibility(8);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onMessageEditEnd(boolean loading) throws Resources.NotFoundException, NumberFormatException {
            boolean z;
            if (ChatActivity.this.chatListItemAnimator != null) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.chatActivityEnterViewAnimateFromTop = chatActivity.chatActivityEnterView.getBackgroundTop();
                if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0) {
                    ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = true;
                }
            }
            if (loading) {
                return;
            }
            ChatActivity.this.mentionsAdapter.setNeedBotContext(true);
            if (ChatActivity.this.editingMessageObject != null) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$42$0Q1l0tPddziNcTqlJO2zWGKobfU
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onMessageEditEnd$0$ChatActivity$42();
                    }
                }, 30L);
            }
            if (ChatActivity.this.chatActivityEnterView.isPopupShowing()) {
                ChatActivity.this.chatActivityEnterView.setFieldFocused();
                z = true;
            } else {
                z = false;
            }
            ChatActivity.this.chatActivityEnterView.setAllowStickersAndGifs(true, true, z);
            if (ChatActivity.this.editingMessageObjectReqId != 0) {
                ChatActivity.this.getConnectionsManager().cancelRequest(ChatActivity.this.editingMessageObjectReqId, true);
                ChatActivity.this.editingMessageObjectReqId = 0;
            }
            ChatActivity.this.updatePinnedMessageView(true);
            ChatActivity.this.updateBottomOverlay();
            ChatActivity.this.updateVisibleRows();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onMessageEditEnd$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onMessageEditEnd$0$ChatActivity$42() {
            ChatActivity.this.hideFieldPanel(true);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onWindowSizeChanged(int size) {
            if (size < AndroidUtilities.dp(72.0f) + ActionBar.getCurrentActionBarHeight()) {
                ChatActivity.this.allowStickersPanel = false;
                if (ChatActivity.this.stickersPanel.getVisibility() == 0) {
                    ChatActivity.this.stickersPanel.setVisibility(4);
                }
                if (ChatActivity.this.mentionContainer != null && ChatActivity.this.mentionContainer.getVisibility() == 0) {
                    ChatActivity.this.mentionContainer.setVisibility(4);
                    ChatActivity.this.updateMessageListAccessibilityVisibility();
                }
            } else {
                ChatActivity.this.allowStickersPanel = true;
                if (ChatActivity.this.stickersPanel.getVisibility() == 4) {
                    ChatActivity.this.stickersPanel.setVisibility(0);
                }
                if (ChatActivity.this.mentionContainer != null && ChatActivity.this.mentionContainer.getVisibility() == 4 && (!ChatActivity.this.mentionsAdapter.isBotContext() || ChatActivity.this.allowContextBotPanel || ChatActivity.this.allowContextBotPanelSecond)) {
                    ChatActivity.this.mentionContainer.setVisibility(0);
                    ChatActivity.this.mentionContainer.setTag(null);
                    ChatActivity.this.updateMessageListAccessibilityVisibility();
                }
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.allowContextBotPanel = true ^ chatActivity.chatActivityEnterView.isPopupShowing();
            ChatActivity.this.checkContextBotPanel();
            int i = size + (ChatActivity.this.chatActivityEnterView.isPopupShowing() ? 65536 : 0);
            if (this.lastSize != i) {
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
                ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = false;
            }
            this.lastSize = i;
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onStickersTab(boolean opened) {
            if (ChatActivity.this.emojiButtonRed != null) {
                ChatActivity.this.emojiButtonRed.setVisibility(8);
            }
            ChatActivity.this.allowContextBotPanelSecond = !opened;
            ChatActivity.this.checkContextBotPanel();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void didPressAttachButton() {
            if (ChatActivity.this.chatAttachAlert != null) {
                ChatActivity.this.chatAttachAlert.setEditingMessageObject(null);
            }
            ChatActivity.this.openAttachMenu();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needStartRecordVideo(int state, boolean notify, int scheduleDate) {
            if (ChatActivity.this.instantCameraView != null) {
                if (state == 0) {
                    ChatActivity.this.instantCameraView.showCamera();
                    ChatActivity.this.chatListView.stopScroll();
                    ChatActivity.this.chatAdapter.updateRowsSafe();
                    return;
                }
                if (state == 1 || state == 3 || state == 4) {
                    ChatActivity.this.instantCameraView.send(state, notify, scheduleDate);
                } else if (state == 2 || state == 5) {
                    ChatActivity.this.instantCameraView.cancel(state == 2);
                }
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needChangeVideoPreviewState(int state, float seekProgress) {
            if (ChatActivity.this.instantCameraView != null) {
                ChatActivity.this.instantCameraView.changeVideoPreviewState(state, seekProgress);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needStartRecordAudio(int state) {
            int i = state == 0 ? 8 : 0;
            if (ChatActivity.this.overlayView.getVisibility() != i) {
                ChatActivity.this.overlayView.setVisibility(i);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needShowMediaBanHint() {
            ChatActivity.this.showMediaBannedHint();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onStickersExpandedChange() {
            ChatActivity.this.checkRaiseSensors();
            if (ChatActivity.this.chatActivityEnterView.isStickersExpanded()) {
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                if (Bulletin.getVisibleBulletin() == null || !Bulletin.getVisibleBulletin().isShowing()) {
                    return;
                }
                Bulletin.getVisibleBulletin().hide();
                return;
            }
            AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void scrollToSendingMessage() throws Resources.NotFoundException, NumberFormatException {
            int sendingMessageId = ChatActivity.this.getSendMessagesHelper().getSendingMessageId(ChatActivity.this.dialog_id);
            if (sendingMessageId != 0) {
                ChatActivity.this.scrollToMessageId(sendingMessageId, 0, true, 0, true, 0);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean hasScheduledMessages() {
            return ChatActivity.this.scheduledMessagesCount > 0 && ChatActivity.this.chatMode == 0;
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onSendLongClick() {
            if (ChatActivity.this.scheduledOrNoSoundHint != null) {
                ChatActivity.this.scheduledOrNoSoundHint.hide();
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void openScheduledMessages() {
            ChatActivity.this.openScheduledMessages();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAudioVideoInterfaceUpdated() {
            ChatActivity.this.updatePagedownButtonVisibility(true);
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void bottomPanelTranslationYChanged(float translation) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
            if (translation != 0.0f) {
                ChatActivity.this.wasManualScroll = true;
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.bottomPanelTranslationY = chatActivity.chatActivityEnterView.pannelAniamationInProgress() ? ChatActivity.this.chatActivityEnterView.getEmojiPadding() - translation : 0.0f;
            ChatActivity chatActivity2 = ChatActivity.this;
            chatActivity2.bottomPanelTranslationYReverse = chatActivity2.chatActivityEnterView.pannelAniamationInProgress() ? translation : 0.0f;
            ChatActivity.this.chatActivityEnterView.setTranslationY(translation);
            ChatActivity chatActivity3 = ChatActivity.this;
            chatActivity3.contentView.setEmojiOffset(chatActivity3.chatActivityEnterView.pannelAniamationInProgress(), ChatActivity.this.bottomPanelTranslationY);
            float topViewTranslation = translation + ChatActivity.this.chatActivityEnterView.getTopViewTranslation();
            ChatActivity.this.chatListView.setTranslationY(topViewTranslation);
            if (ChatActivity.this.pagedownButton != null) {
                ChatActivity.this.pagedownButton.setTranslationY(topViewTranslation);
                if (ChatActivity.this.mentiondownButton != null) {
                    FrameLayout frameLayout = ChatActivity.this.mentiondownButton;
                    if (ChatActivity.this.pagedownButton.getVisibility() == 0) {
                        topViewTranslation -= AndroidUtilities.dp(72.0f);
                    }
                    frameLayout.setTranslationY(topViewTranslation);
                }
            }
            ChatActivity.this.invalidateChatListViewTopPadding();
            ChatActivity.this.invalidateMessagesVisiblePart();
            ChatActivity.this.updateTextureViewPosition(false);
            ChatActivity.this.contentView.invalidate();
            ChatActivity.this.updateBulletinLayout();
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void prepareMessageSending() {
            ChatActivity.this.waitingForSendingMessageLoad = true;
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTrendingStickersShowed(boolean show) {
            if (show) {
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                ((BaseFragment) ChatActivity.this).fragmentView.requestLayout();
            } else {
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
            }
        }

        @Override // ir.eitaa.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean hasForwardingMessages() {
            return (ChatActivity.this.forwardingMessages == null || ChatActivity.this.forwardingMessages.messages.isEmpty()) ? false : true;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$38, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$38$ChatActivity(View view) throws Resources.NotFoundException, NumberFormatException {
        ForwardingMessagesParams forwardingMessagesParams = this.forwardingMessages;
        if (forwardingMessagesParams != null && !forwardingMessagesParams.messages.isEmpty()) {
            SharedConfig.forwardingOptionsHintHintShowed();
            openForwardingPreview();
            return;
        }
        if (this.replyingMessageObject != null && (!isThreadChat() || this.replyingMessageObject.getId() != this.threadMessageId)) {
            scrollToMessageId(this.replyingMessageObject.getId(), 0, true, 0, true, 0);
            return;
        }
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null) {
            if (messageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
                if (this.chatAttachAlert == null) {
                    createChatAttachView();
                }
                this.chatAttachAlert.setEditingMessageObject(this.editingMessageObject);
                openAttachMenu();
                return;
            }
            scrollToMessageId(this.editingMessageObject.getId(), 0, true, 0, true, 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$39, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$39$ChatActivity(View view) {
        ForwardingMessagesParams forwardingMessagesParams = this.forwardingMessages;
        if (forwardingMessagesParams == null || forwardingMessagesParams.messages.isEmpty()) {
            showFieldPanel(false, null, null, null, this.foundWebPage, true, 0, true, true);
        } else {
            openAnotherForward();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$40, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$40$ChatActivity(View view) throws Resources.NotFoundException, NumberFormatException {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null) {
            scrollToMessageId(messageObject.getId(), 0, true, 0, true, 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$41, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$41$ChatActivity(ChatActivityEnterTopView.EditViewButton editViewButton, FrameLayout frameLayout, View view) throws InterruptedException, Resources.NotFoundException {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null && messageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
            if (editViewButton.isEditButton()) {
                openEditingMessageInPhotoEditor();
            } else {
                frameLayout.callOnClick();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$42, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$42$ChatActivity(ContentPreviewViewer.ContentPreviewViewerDelegate contentPreviewViewerDelegate, View view, MotionEvent motionEvent) {
        return ContentPreviewViewer.getInstance().onTouch(motionEvent, this.stickersListView, 0, this.stickersOnItemClickListener, contentPreviewViewerDelegate, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$43, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ boolean lambda$createView$43$ChatActivity(View view, MotionEvent motionEvent) {
        return getMediaDataController().getFoundMessageObjects().size() <= 1;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$44, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$44$ChatActivity(View view) {
        if (getMediaDataController().getFoundMessageObjects().size() > 1) {
            HintView hintView = this.searchAsListHint;
            if (hintView != null) {
                hintView.hide();
            }
            toggleMesagesSearchListView();
            if (SharedConfig.searchMessagesAsListUsed) {
                return;
            }
            SharedConfig.setSearchMessagesAsListUsed(true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$45, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$45$ChatActivity(View view) {
        getMediaDataController().searchMessagesInChat(null, this.dialog_id, this.mergeDialogId, this.classGuid, 1, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages);
        showMessagesSearchListView(false);
        if (SharedConfig.searchMessagesAsListUsed || SharedConfig.searchMessagesAsListHintShows >= 3 || this.searchAsListHintShown || Math.random() > 0.25d) {
            return;
        }
        showSearchAsListHint();
        this.searchAsListHintShown = true;
        SharedConfig.increaseSearchAsListHintShows();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$46, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$46$ChatActivity(View view) {
        getMediaDataController().searchMessagesInChat(null, this.dialog_id, this.mergeDialogId, this.classGuid, 2, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages);
        showMessagesSearchListView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$47, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$47$ChatActivity(View view) {
        this.mentionLayoutManager.setReverseLayout(true);
        this.mentionsAdapter.setSearchingMentions(true);
        this.searchCalendarButton.setVisibility(8);
        this.searchUserButton.setVisibility(8);
        this.searchingForUser = true;
        this.searchingUserMessages = null;
        this.searchingChatMessages = null;
        this.searchItem.setSearchFieldHint(LocaleController.getString("SearchMembers", R.string.SearchMembers));
        this.searchItem.setSearchFieldCaption(LocaleController.getString("SearchFrom", R.string.SearchFrom));
        AndroidUtilities.showKeyboard(this.searchItem.getSearchField());
        this.searchItem.clearSearchText();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$48, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$48$ChatActivity(View view) {
        if (getParentActivity() == null) {
            return;
        }
        AndroidUtilities.hideKeyboard(this.searchItem.getSearchField());
        if (Locale.getDefault().getLanguage().toLowerCase().equals("fa")) {
            showDialog(AlertsCreator.createCalendarPickerDialog(getParentActivity(), 1490041801000L, new MessagesStorage.IntCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$y_zyv9d11LIA0ExpQs05_YrDw10
                @Override // ir.eitaa.messenger.MessagesStorage.IntCallback
                public final void run(int i) throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.jumpToDate(i);
                }
            }, this.themeDelegate).create());
        } else {
            showDialog(AlertsCreator.createCalendarPickerDialog(getParentActivity(), 1490041801000L, new MessagesStorage.IntCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$y_zyv9d11LIA0ExpQs05_YrDw10
                @Override // ir.eitaa.messenger.MessagesStorage.IntCallback
                public final void run(int i) throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.jumpToDate(i);
                }
            }, this.themeDelegate).create());
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$51, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$51$ChatActivity(View view) {
        String str;
        if (getParentActivity() == null || this.pullingDownOffset != 0.0f) {
            return;
        }
        if (this.reportType >= 0) {
            showDialog(new ReportAlert(getParentActivity(), this.reportType) { // from class: ir.eitaa.ui.ChatActivity.49
                @Override // ir.eitaa.ui.Components.ReportAlert
                protected void onSend(int type, String message) {
                    ArrayList arrayList = new ArrayList();
                    for (int i = 0; i < ChatActivity.this.selectedMessagesIds[0].size(); i++) {
                        arrayList.add(Integer.valueOf(ChatActivity.this.selectedMessagesIds[0].keyAt(i)));
                    }
                    ChatActivity chatActivity = ChatActivity.this;
                    TLRPC$User tLRPC$User = chatActivity.currentUser;
                    AlertsCreator.sendEitaaReport(tLRPC$User != null ? MessagesController.getInputPeer(tLRPC$User) : MessagesController.getInputPeer(chatActivity.currentChat), ChatActivity.this.reportType, message, arrayList);
                    ChatActivity.this.finishFragment();
                    ChatActivity.this.chatActivityDelegate.onReport();
                }
            });
            return;
        }
        if (this.chatMode == 2) {
            finishFragment();
            this.chatActivityDelegate.onUnpin(true, this.bottomOverlayChatText.getTag() == null);
            return;
        }
        TLRPC$User tLRPC$User = this.currentUser;
        if (tLRPC$User != null && this.userBlocked) {
            if (tLRPC$User.bot) {
                String str2 = this.botUser;
                this.botUser = null;
                getMessagesController().unblockPeer(this.currentUser.id);
                if (str2 != null && str2.length() != 0) {
                    getMessagesController().sendBotStart(this.currentUser, str2);
                    return;
                } else {
                    getSendMessagesHelper().sendMessage("/start", this.dialog_id, null, null, null, false, null, null, null, true, 0, null);
                    return;
                }
            }
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setMessage(LocaleController.getString("AreYouSureUnblockContact", R.string.AreYouSureUnblockContact));
            builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$-Dub334dkVHgGyK-JlgJ_T9KLds
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i) {
                    this.f$0.lambda$createView$49$ChatActivity(dialogInterface, i);
                }
            });
            builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
            builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
            showDialog(builder.create());
            return;
        }
        if (UserObject.isReplyUser(tLRPC$User)) {
            toggleMute(true);
            return;
        }
        TLRPC$User tLRPC$User2 = this.currentUser;
        if (tLRPC$User2 != null && tLRPC$User2.bot && (str = this.botUser) != null) {
            if (str.length() != 0) {
                getMessagesController().sendBotStart(this.currentUser, this.botUser);
            } else {
                getSendMessagesHelper().sendMessage("/start", this.dialog_id, null, null, null, false, null, null, null, true, 0, null);
            }
            this.botUser = null;
            updateBottomOverlay();
            return;
        }
        if (ChatObject.isChannel(this.currentChat)) {
            TLRPC$Chat tLRPC$Chat = this.currentChat;
            if (!(tLRPC$Chat instanceof TLRPC$TL_channelForbidden)) {
                if (ChatObject.isNotInChat(tLRPC$Chat)) {
                    Runnable runnable = this.chatInviteRunnable;
                    if (runnable != null) {
                        AndroidUtilities.cancelRunOnUIThread(runnable);
                        this.chatInviteRunnable = null;
                    }
                    showBottomOverlayProgress(true, true);
                    getMessagesController().addUserToChat(this.currentChat.id, getUserConfig().getCurrentUser(), 0, null, this, null);
                    NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.closeSearchByActiveAction, new Object[0]);
                    if (!hasReportSpam() || this.reportSpamButton.getTag(R.id.object_tag) == null) {
                        return;
                    }
                    MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_bar_vis3" + this.dialog_id, 3).commit();
                    getNotificationCenter().postNotificationName(NotificationCenter.peerSettingsDidLoad, Long.valueOf(this.dialog_id));
                    return;
                }
                toggleMute(true);
                return;
            }
        }
        AlertsCreator.createClearOrDeleteDialogAlert(this, false, this.currentChat, this.currentUser, this.currentEncryptedChat != null, true, new MessagesStorage.BooleanCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$qWA--K4moC9aLoVJhhTfTkppGmI
            @Override // ir.eitaa.messenger.MessagesStorage.BooleanCallback
            public final void run(boolean z) {
                this.f$0.lambda$createView$50$ChatActivity(z);
            }
        }, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$49, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$49$ChatActivity(DialogInterface dialogInterface, int i) {
        getMessagesController().unblockPeer(this.currentUser.id);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$50, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$50$ChatActivity(boolean z) {
        NotificationCenter notificationCenter = getNotificationCenter();
        int i = NotificationCenter.closeChats;
        notificationCenter.removeObserver(this, i);
        getNotificationCenter().postNotificationName(i, new Object[0]);
        finishFragment();
        getNotificationCenter().postNotificationName(NotificationCenter.needDeleteDialog, Long.valueOf(this.dialog_id), this.currentUser, this.currentChat, Boolean.valueOf(z));
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$52, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$52$ChatActivity(View view) {
        this.undoView.showWithAction(this.dialog_id, 18, LocaleController.getString("BroadcastGroupInfo", R.string.BroadcastGroupInfo));
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$53, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$53$ChatActivity(View view) throws Resources.NotFoundException, NumberFormatException {
        int i;
        MessageObject messageObject = null;
        for (int i2 = 1; i2 >= 0; i2--) {
            if (messageObject == null && this.selectedMessagesIds[i2].size() != 0) {
                messageObject = this.messagesDict[i2].get(this.selectedMessagesIds[i2].keyAt(0));
            }
            this.selectedMessagesIds[i2].clear();
            this.selectedMessagesCanCopyIds[i2].clear();
            this.selectedMessagesCanStarIds[i2].clear();
        }
        hideActionMode();
        if (messageObject != null && ((i = messageObject.messageOwner.id) > 0 || (i < 0 && this.currentEncryptedChat != null))) {
            showFieldPanelForReply(messageObject);
        }
        updatePinnedMessageView(true);
        updateVisibleRows();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$54, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$54$ChatActivity(View view) {
        openForward();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createView$55, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createView$55$ChatActivity(float[] fArr) {
        fArr[1] = this.chatListView.getBottom();
        fArr[0] = (this.chatListView.getTop() + this.chatListViewPaddingTop) - AndroidUtilities.dp(4.0f);
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$54, reason: invalid class name */
    class AnonymousClass54 extends ForwardingPreviewView {
        final /* synthetic */ boolean val$keyboardVisible;

        /* JADX WARN: 'super' call moved to the top of the method (can break code semantics) */
        AnonymousClass54(Context context, ForwardingMessagesParams params, TLRPC$User user, TLRPC$Chat chat, int currentAccount, ForwardingPreviewView.ResourcesDelegate resourcesProvider, final boolean val$keyboardVisible) {
            super(context, params, user, chat, currentAccount, resourcesProvider);
            this.val$keyboardVisible = val$keyboardVisible;
        }

        @Override // ir.eitaa.ui.Components.ForwardingPreviewView
        protected void onDismiss(boolean canShowKeyboard) {
            ChatActivity.this.checkShowBlur(true);
            if (ChatActivity.this.forwardingMessages != null) {
                ArrayList<MessageObject> arrayList = new ArrayList<>();
                ChatActivity.this.forwardingMessages.getSelectedMessages(arrayList);
                ChatActivity.this.showFieldPanelForForward(true, arrayList);
            }
            if (this.val$keyboardVisible && canShowKeyboard) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$54$IcM0AsCdh4dWBaWzdh674XeD_pI
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onDismiss$0$ChatActivity$54();
                    }
                }, 50L);
            }
            AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onDismiss$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onDismiss$0$ChatActivity$54() {
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.openKeyboard();
            }
        }

        @Override // ir.eitaa.ui.Components.ForwardingPreviewView
        protected void selectAnotherChat() {
            super.selectAnotherChat();
            dismiss(false);
            if (ChatActivity.this.forwardingMessages != null) {
                int size = ChatActivity.this.forwardingMessages.messages.size();
                int i = 0;
                boolean z = false;
                for (int i2 = 0; i2 < size; i2++) {
                    MessageObject messageObject = ChatActivity.this.forwardingMessages.messages.get(i2);
                    if (messageObject.isPoll()) {
                        if (i != 2) {
                            i = messageObject.isPublicPoll() ? 2 : 1;
                        }
                    } else if (messageObject.isInvoice()) {
                        z = true;
                    }
                    ChatActivity.this.selectedMessagesIds[0].put(messageObject.getId(), messageObject);
                }
                Bundle bundle = new Bundle();
                bundle.putBoolean("onlySelect", true);
                bundle.putInt("dialogsType", 3);
                bundle.putInt("hasPoll", i);
                bundle.putBoolean("hasInvoice", z);
                bundle.putInt("messagesCount", ChatActivity.this.forwardingMessages.messages.size());
                DialogsActivity dialogsActivity = new DialogsActivity(bundle);
                dialogsActivity.setDelegate(ChatActivity.this);
                ChatActivity.this.presentFragment(dialogsActivity);
            }
        }

        @Override // ir.eitaa.ui.Components.ForwardingPreviewView
        protected void didSendPressed() {
            super.didSendPressed();
            dismiss(true);
            ChatActivity.this.chatActivityEnterView.getSendButton().callOnClick();
        }
    }

    private void openForwardingPreview() {
        boolean zIsKeyboardVisible = this.chatActivityEnterView.isKeyboardVisible();
        this.forwardingPreviewView = new AnonymousClass54(this.contentView.getContext(), this.forwardingMessages, this.currentUser, this.currentChat, this.currentAccount, this.themeDelegate, zIsKeyboardVisible);
        checkShowBlur(true);
        this.contentView.addView(this.forwardingPreviewView);
        if (zIsKeyboardVisible) {
            this.chatActivityEnterView.showEmojiView();
            this.openKeyboardOnAttachMenuClose = true;
        }
        AndroidUtilities.setAdjustResizeToNothing(getParentActivity(), this.classGuid);
        this.fragmentView.requestLayout();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void animateToNextChat() {
        if (this.pullingDownDrawable == null) {
            return;
        }
        if (getParentLayout().fragmentsStack.size() > 1 && (getParentLayout().fragmentsStack.get(getParentLayout().fragmentsStack.size() - 2) instanceof ChatActivity)) {
            getParentLayout().fragmentsStack.remove(getParentLayout().fragmentsStack.size() - 2);
        }
        Bundle bundle = new Bundle();
        bundle.putLong("chat_id", this.pullingDownDrawable.getChatId());
        bundle.putInt("dialog_folder_id", this.pullingDownDrawable.dialogFolderId);
        bundle.putInt("dialog_filter_id", this.pullingDownDrawable.dialogFilterId);
        MessagesController.getNotificationsSettings(this.currentAccount).edit().remove("diditem" + this.pullingDownDrawable.nextDialogId).apply();
        ChatActivity chatActivity = new ChatActivity(bundle);
        chatActivity.setPullingDownTransition(true);
        presentFragment(chatActivity);
    }

    private void setPullingDownTransition(boolean fromPullingDownTransition) {
        this.fromPullingDownTransition = fromPullingDownTransition;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateBulletinLayout() {
        Bulletin visibleBulletin = Bulletin.getVisibleBulletin();
        if (visibleBulletin == null || this.bulletinDelegate == null) {
            return;
        }
        visibleBulletin.updatePosition();
    }

    private void searchUserMessages(TLRPC$User user, TLRPC$Chat chat) {
        String strSubstring;
        this.searchingUserMessages = user;
        this.searchingChatMessages = chat;
        if (this.searchItem != null) {
            if (user == null && chat == null) {
                return;
            }
            if (user != null) {
                strSubstring = user.first_name;
                if (TextUtils.isEmpty(strSubstring)) {
                    strSubstring = this.searchingUserMessages.last_name;
                }
            } else {
                strSubstring = chat.title;
            }
            if (strSubstring == null) {
                return;
            }
            if (strSubstring.length() > 10) {
                strSubstring = strSubstring.substring(0, 10);
            }
            this.searchingForUser = false;
            String string = LocaleController.getString("SearchFrom", R.string.SearchFrom);
            SpannableString spannableString = new SpannableString(string + " " + strSubstring);
            spannableString.setSpan(new ForegroundColorSpan(getThemedColor("actionBarDefaultSubtitle")), string.length() + 1, spannableString.length(), 33);
            this.searchItem.setSearchFieldCaption(spannableString);
            this.mentionsAdapter.searchUsernameOrHashtag(null, 0, null, false, true);
            this.searchItem.setSearchFieldHint(null);
            this.searchItem.clearSearchText();
            getMediaDataController().searchMessagesInChat("", this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages);
        }
    }

    private void updateInfoTopView(boolean animated) {
        int i;
        String str;
        TLRPC$User tLRPC$User;
        if (this.contentView == null) {
            return;
        }
        SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
        int i2 = notificationsSettings.getInt("dialog_bar_distance" + this.dialog_id, -1);
        this.distanceToPeer = i2;
        if (i2 >= 0 && (tLRPC$User = this.currentUser) != null) {
            LocaleController.formatString("ChatDistanceToPeer", R.string.ChatDistanceToPeer, tLRPC$User.first_name, LocaleController.formatDistance(i2, 0));
            $$Lambda$ChatActivity$4Q1pBnoUJtP4Ao5LmM458OnW1Pc __lambda_chatactivity_4q1pbnoujtp4ao5lmm458onw1pc = new View.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$4Q1pBnoUJtP4Ao5LmM458OnW1Pc
                @Override // android.view.View.OnClickListener
                public final void onClick(View view) {
                    ChatActivity.lambda$updateInfoTopView$56(view);
                }
            };
            return;
        }
        if (this.currentChat == null || this.chatInviterId == 0) {
            return;
        }
        StringBuilder sb = new StringBuilder();
        sb.append("dialog_bar_vis3");
        sb.append(this.dialog_id);
        boolean z = notificationsSettings.getInt(sb.toString(), 0) == 2;
        boolean z2 = notificationsSettings.getBoolean("dialog_bar_report" + this.dialog_id, false);
        boolean z3 = notificationsSettings.getBoolean("dialog_bar_block" + this.dialog_id, false);
        if (z && (z2 || z3)) {
            TLRPC$User user = getMessagesController().getUser(Long.valueOf(this.chatInviterId));
            if (user != null) {
                if (!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup) {
                    i = R.string.ActionUserInvitedToGroup;
                    str = "ActionUserInvitedToGroup";
                } else {
                    i = R.string.ActionUserInvitedToChannel;
                    str = "ActionUserInvitedToChannel";
                }
                MessageObject.replaceWithLink(LocaleController.getString(str, i), "un1", user);
                return;
            }
            return;
        }
        hideInfoView();
    }

    private void openAnotherForward() {
        ArrayList<MessageObject> arrayList;
        String string;
        ForwardingMessagesParams forwardingMessagesParams = this.forwardingMessages;
        if (forwardingMessagesParams == null || (arrayList = forwardingMessagesParams.messages) == null) {
            return;
        }
        int size = arrayList.size();
        long fromChatId = 0;
        long dialogId = 0;
        for (int i = 0; i < size; i++) {
            MessageObject messageObject = this.forwardingMessages.messages.get(i);
            if (fromChatId != 0) {
                if (fromChatId != messageObject.getFromChatId()) {
                    break;
                }
            } else {
                dialogId = messageObject.getDialogId();
                fromChatId = messageObject.getFromChatId();
            }
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setButtonsVertical(true);
        if (dialogId > 0) {
            TLRPC$User user = getMessagesController().getUser(Long.valueOf(dialogId));
            string = LocaleController.formatString("CancelForwardPrivate", R.string.CancelForwardPrivate, LocaleController.formatPluralString("MessagesBold", this.forwardingMessages.messages.size()), ContactsController.formatName(user.first_name, user.last_name));
        } else {
            TLRPC$Chat chat = getMessagesController().getChat(Long.valueOf(-dialogId));
            Object[] objArr = new Object[2];
            objArr[0] = LocaleController.formatPluralString("MessagesBold", this.forwardingMessages.messages.size());
            objArr[1] = chat == null ? "" : chat.title;
            string = LocaleController.formatString("CancelForwardChat", R.string.CancelForwardChat, objArr);
        }
        builder.setMessage(AndroidUtilities.replaceTags(string));
        builder.setTitle(LocaleController.formatPluralString("messages", this.forwardingMessages.messages.size()));
        builder.setPositiveButton(LocaleController.getString("CancelForwarding", R.string.CancelForwarding), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$qgcC8Q2YJkuXgJeCii0zqVESbWI
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i2) {
                this.f$0.lambda$openAnotherForward$59$ChatActivity(dialogInterface, i2);
            }
        });
        builder.setNegativeButton(LocaleController.getString("ShowForwardingOptions", R.string.ShowForwardingOptions), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$RBLqUfXFcv8yWJRUilH-nNKEeMI
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i2) {
                this.f$0.lambda$openAnotherForward$60$ChatActivity(dialogInterface, i2);
            }
        });
        AlertDialog alertDialogCreate = builder.create();
        showDialog(alertDialogCreate);
        TextView textView = (TextView) alertDialogCreate.getButton(-1);
        if (textView != null) {
            textView.setTextColor(getThemedColor("dialogTextRed2"));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openAnotherForward$59, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openAnotherForward$59$ChatActivity(DialogInterface dialogInterface, int i) {
        if (this.forwardingMessages != null) {
            this.forwardingMessages = null;
        }
        showFieldPanel(false, null, null, null, this.foundWebPage, true, 0, true, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openAnotherForward$60, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openAnotherForward$60$ChatActivity(DialogInterface dialogInterface, int i) {
        openForwardingPreview();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openPinnedMessagesList(boolean preview) {
        ActionBarLayout actionBarLayout;
        if (getParentActivity() == null || (actionBarLayout = this.parentLayout) == null || actionBarLayout.getLastFragment() != this || this.pinnedMessageIds.isEmpty()) {
            return;
        }
        Bundle bundle = new Bundle();
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat != null) {
            bundle.putLong("chat_id", tLRPC$Chat.id);
        } else {
            bundle.putLong("user_id", this.currentUser.id);
        }
        bundle.putInt("chatMode", 2);
        ChatActivity chatActivity = new ChatActivity(bundle);
        chatActivity.pinnedMessageIds = new ArrayList<>(this.pinnedMessageIds);
        chatActivity.pinnedMessageObjects = new HashMap<>(this.pinnedMessageObjects);
        int size = this.pinnedMessageIds.size();
        for (int i = 0; i < size; i++) {
            Integer num = this.pinnedMessageIds.get(i);
            MessageObject messageObject = this.pinnedMessageObjects.get(num);
            MessageObject messageObject2 = this.messagesDict[0].get(num.intValue());
            if (messageObject == null) {
                messageObject = messageObject2;
            } else if (messageObject2 != null) {
                messageObject.mediaExists = messageObject2.mediaExists;
                messageObject.attachPathExists = messageObject2.attachPathExists;
            }
            if (messageObject != null) {
                chatActivity.pinnedMessageObjects.put(num, messageObject);
            }
        }
        chatActivity.loadedPinnedMessagesCount = this.loadedPinnedMessagesCount;
        chatActivity.totalPinnedMessagesCount = this.totalPinnedMessagesCount;
        chatActivity.pinnedEndReached = this.pinnedEndReached;
        chatActivity.userInfo = this.userInfo;
        chatActivity.chatInfo = this.chatInfo;
        chatActivity.chatActivityDelegate = new AnonymousClass56();
        if (preview) {
            presentFragmentAsPreview(chatActivity);
            checkShowBlur(true);
        } else {
            presentFragment(chatActivity, false);
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$56, reason: invalid class name */
    class AnonymousClass56 implements ChatActivityDelegate {
        @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
        public /* synthetic */ void onReport() {
            ChatActivityDelegate.CC.$default$onReport(this);
        }

        AnonymousClass56() {
        }

        @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
        public void openReplyMessage(int mid) throws Resources.NotFoundException, NumberFormatException {
            ChatActivity.this.scrollToMessageId(mid, 0, true, 0, true, 0);
        }

        @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
        public void openSearch(String text) {
            ChatActivity.this.openSearchWithText(text);
        }

        @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
        public void onUnpin(boolean all, final boolean hide) {
            if (!all) {
                MessageObject messageObject = (MessageObject) ChatActivity.this.pinnedMessageObjects.get(Integer.valueOf(ChatActivity.this.currentPinnedMessageId));
                if (messageObject == null) {
                    messageObject = (MessageObject) ChatActivity.this.messagesDict[0].get(ChatActivity.this.currentPinnedMessageId);
                }
                ChatActivity.this.unpinMessage(messageObject);
                return;
            }
            final ArrayList arrayList = new ArrayList(ChatActivity.this.pinnedMessageIds);
            final ArrayList arrayList2 = new ArrayList(ChatActivity.this.pinnedMessageObjects.values());
            if (hide) {
                MessagesController.getNotificationsSettings(((BaseFragment) ChatActivity.this).currentAccount).edit().putInt("pin_" + ChatActivity.this.dialog_id, ((Integer) ChatActivity.this.pinnedMessageIds.get(0)).intValue()).commit();
                ChatActivity.this.updatePinnedMessageView(true);
            } else {
                ChatActivity.this.getNotificationCenter().postNotificationName(NotificationCenter.didLoadPinnedMessages, Long.valueOf(ChatActivity.this.dialog_id), arrayList, Boolean.FALSE, null, null, 0, 0, Boolean.TRUE);
            }
            if (ChatActivity.this.pinBulletin != null) {
                ChatActivity.this.pinBulletin.hide();
            }
            ChatActivity.this.showPinBulletin = true;
            final int iAccess$32704 = ChatActivity.access$32704(ChatActivity.this);
            final int pinnedMessagesCount = ChatActivity.this.getPinnedMessagesCount();
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.pinBulletin = BulletinFactory.createUnpinAllMessagesBulletin(chatActivity, pinnedMessagesCount, hide, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$56$NjvtAcsFS2ZSOe8lzByumn4DITw
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onUnpin$0$ChatActivity$56(hide, arrayList, arrayList2, pinnedMessagesCount, iAccess$32704);
                }
            }, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$56$69C1SWB8gedBmdfDA3r5RryB2aQ
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onUnpin$1$ChatActivity$56(hide, iAccess$32704);
                }
            }, chatActivity.themeDelegate);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onUnpin$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onUnpin$0$ChatActivity$56(boolean z, ArrayList arrayList, ArrayList arrayList2, int i, int i2) {
            if (z) {
                MessagesController.getNotificationsSettings(((BaseFragment) ChatActivity.this).currentAccount).edit().remove("pin_" + ChatActivity.this.dialog_id).commit();
                ChatActivity.this.updatePinnedMessageView(true);
            } else {
                ChatActivity.this.getNotificationCenter().postNotificationName(NotificationCenter.didLoadPinnedMessages, Long.valueOf(ChatActivity.this.dialog_id), arrayList, Boolean.TRUE, arrayList2, null, 0, Integer.valueOf(i), Boolean.valueOf(ChatActivity.this.pinnedEndReached));
            }
            if (i2 == ChatActivity.this.pinBullerinTag) {
                ChatActivity.this.pinBulletin = null;
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onUnpin$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onUnpin$1$ChatActivity$56(boolean z, int i) {
            if (!z) {
                MessagesController messagesController = ChatActivity.this.getMessagesController();
                ChatActivity chatActivity = ChatActivity.this;
                messagesController.unpinAllMessages(chatActivity.currentChat, chatActivity.currentUser);
            }
            if (i == ChatActivity.this.pinBullerinTag) {
                ChatActivity.this.pinBulletin = null;
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkShowBlur(boolean animated) {
        ForwardingPreviewView forwardingPreviewView;
        BluredView bluredView;
        BluredView bluredView2;
        ActionBarLayout actionBarLayout = this.parentLayout;
        boolean z = !(actionBarLayout == null || !actionBarLayout.isInPreviewMode() || this.inPreviewMode) || ((forwardingPreviewView = this.forwardingPreviewView) != null && forwardingPreviewView.isShowing());
        if (!z || ((bluredView2 = this.blurredView) != null && bluredView2.getTag() != null)) {
            if (z || (bluredView = this.blurredView) == null || bluredView.getTag() == null) {
                return;
            }
            this.blurredView.animate().setListener(null).cancel();
            this.blurredView.animate().setListener(new HideViewAfterAnimation(this.blurredView)).alpha(0.0f).start();
            this.blurredView.setTag(null);
            this.chatListView.invalidate();
            this.fragmentView.invalidate();
            return;
        }
        BluredView bluredView3 = this.blurredView;
        if (bluredView3 == null) {
            BluredView bluredView4 = new BluredView(this.fragmentView.getContext(), this.fragmentView, this.themeDelegate) { // from class: ir.eitaa.ui.ChatActivity.57
                @Override // android.view.View
                public void setAlpha(float alpha) {
                    super.setAlpha(alpha);
                    ((BaseFragment) ChatActivity.this).fragmentView.invalidate();
                }

                @Override // android.view.View
                public void setVisibility(int visibility) {
                    super.setVisibility(visibility);
                    ((BaseFragment) ChatActivity.this).fragmentView.invalidate();
                }
            };
            this.blurredView = bluredView4;
            this.contentView.addView(bluredView4, LayoutHelper.createFrame(-1, -1.0f));
        } else {
            if (this.contentView.indexOfChild(bluredView3) != this.contentView.getChildCount() - 1) {
                this.contentView.removeView(this.blurredView);
                this.contentView.addView(this.blurredView);
            }
            this.blurredView.update();
            this.blurredView.setVisibility(0);
        }
        this.blurredView.setAlpha(0.0f);
        this.blurredView.animate().setListener(null).cancel();
        this.blurredView.animate().alpha(1.0f).setListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.58
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animation) {
                super.onAnimationEnd(animation);
                ChatActivity.this.chatListView.invalidate();
                ((BaseFragment) ChatActivity.this).fragmentView.invalidate();
            }
        }).start();
        this.blurredView.setTag(1);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected int getPreviewHeight() {
        if (this.chatMode == 2 && this.messages.size() == 2) {
            return getHeightForMessage(this.messages.get(0)) + AndroidUtilities.dp(80.0f) + ActionBar.getCurrentActionBarHeight();
        }
        return super.getPreviewHeight();
    }

    private void showProgressView(boolean show) {
        FrameLayout frameLayout = this.progressView;
        if (frameLayout == null) {
            return;
        }
        if (this.fragmentOpened && BuildVars.DEBUG_VERSION) {
            if (show == this.animateTo) {
                return;
            }
            this.animateTo = show;
            if (show) {
                if (frameLayout.getVisibility() != 0) {
                    this.progressView.setVisibility(0);
                    this.progressView.setAlpha(0.0f);
                    this.progressView.setScaleX(0.3f);
                    this.progressView.setScaleY(0.3f);
                }
                this.progressView.animate().setListener(null).cancel();
                this.progressView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
                return;
            }
            frameLayout.animate().setListener(null).cancel();
            this.progressView.animate().alpha(0.0f).scaleX(0.3f).scaleY(0.3f).setDuration(150L).setListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.59
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animation) {
                    ChatActivity.this.progressView.setVisibility(4);
                }
            }).start();
            return;
        }
        this.animateTo = show;
        frameLayout.setVisibility(show ? 0 : 4);
    }

    private void hideInfoView() {
        if (this.distanceToPeer >= 0) {
            this.distanceToPeer = -1;
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_bar_distance" + this.dialog_id, -2).commit();
        }
        Animator animator = this.infoTopViewAnimator;
        if (animator != null) {
            animator.cancel();
        }
        ChatActionCell chatActionCell = this.infoTopView;
        if (chatActionCell == null || chatActionCell.getTag() == null) {
            return;
        }
        this.infoTopView.setTag(null);
        final ChatActionCell chatActionCell2 = this.infoTopView;
        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(1.0f, 0.0f);
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$_PEJZY1F6jiZhG8u8rRk80LlcvY
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                this.f$0.lambda$hideInfoView$61$ChatActivity(chatActionCell2, valueAnimator);
            }
        });
        valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.60
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animation) {
                ChatActivity.this.topViewOffset = 0.0f;
                if (animation == ChatActivity.this.infoTopViewAnimator) {
                    ViewGroup viewGroup = (ViewGroup) chatActionCell2.getParent();
                    if (viewGroup != null) {
                        viewGroup.removeView(chatActionCell2);
                    }
                    ChatActivity.this.infoTopView = null;
                    ChatActivity.this.infoTopViewAnimator = null;
                }
            }
        });
        valueAnimatorOfFloat.setDuration(150L);
        this.infoTopViewAnimator = valueAnimatorOfFloat;
        valueAnimatorOfFloat.start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$hideInfoView$61, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$hideInfoView$61$ChatActivity(View view, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.topViewOffset = AndroidUtilities.dp(30.0f) * fFloatValue;
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
        view.setAlpha(fFloatValue);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:78:0x01c3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateChatListViewTopPadding() {
        /*
            Method dump skipped, instructions count: 605
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.updateChatListViewTopPadding():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateChatListViewTopPadding() {
        MentionsAdapter mentionsAdapter;
        this.invalidateChatListViewTopPadding = true;
        SizeNotifierFrameLayout sizeNotifierFrameLayout = this.contentView;
        if (sizeNotifierFrameLayout != null) {
            sizeNotifierFrameLayout.invalidate();
        }
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            recyclerListView.invalidate();
        }
        float fDp = 0.0f;
        float fMax = Math.max(0.0f, AndroidUtilities.dp(48.0f) + this.topChatPanelViewOffset);
        FrameLayout frameLayout = this.pinnedMessageView;
        if (frameLayout != null) {
            frameLayout.setTranslationY(this.contentPanTranslation + this.pinnedMessageEnterOffset + this.contentPaddingTop + fMax);
        }
        if (this.fragmentContextView != null) {
            FragmentContextView fragmentContextView = this.fragmentLocationContextView;
            float fDp2 = (fragmentContextView == null || fragmentContextView.getVisibility() != 0) ? 0.0f : AndroidUtilities.dp(36.0f) + 0.0f;
            FragmentContextView fragmentContextView2 = this.fragmentContextView;
            fragmentContextView2.setTranslationY(this.contentPanTranslation + fDp2 + fragmentContextView2.getTopPadding());
        }
        if (this.fragmentLocationContextView != null) {
            FragmentContextView fragmentContextView3 = this.fragmentContextView;
            if (fragmentContextView3 != null && fragmentContextView3.getVisibility() == 0) {
                fDp = 0.0f + AndroidUtilities.dp(this.fragmentContextView.getStyleHeight()) + this.fragmentContextView.getTopPadding();
            }
            FragmentContextView fragmentContextView4 = this.fragmentLocationContextView;
            fragmentContextView4.setTranslationY(this.contentPanTranslation + fDp + fragmentContextView4.getTopPadding());
        }
        FrameLayout frameLayout2 = this.topChatPanelView;
        if (frameLayout2 != null) {
            frameLayout2.setTranslationY(this.contentPanTranslation + this.contentPaddingTop + this.topChatPanelViewOffset);
        }
        if (this.mentionListView != null && this.mentionLayoutManager != null && (mentionsAdapter = this.mentionsAdapter) != null && !mentionsAdapter.isBotCommands() && !this.mentionsAdapter.isStickers()) {
            if (this.mentionLayoutManager.getReverseLayout()) {
                this.mentionListView.setTranslationY(this.contentPanTranslation + this.contentPaddingTop);
            } else {
                this.mentionListView.setTranslationY(this.bottomPanelTranslationYReverse);
            }
        } else {
            RecyclerListView recyclerListView2 = this.mentionListView;
            if (recyclerListView2 != null) {
                recyclerListView2.setTranslationY(this.bottomPanelTranslationYReverse);
            }
        }
        FrameLayout frameLayout3 = this.alertView;
        if (frameLayout3 != null && frameLayout3.getVisibility() == 0) {
            this.alertView.setTranslationY((this.contentPanTranslation + this.contentPaddingTop) - (AndroidUtilities.dp(50.0f) * (1.0f - this.alertViewEnterProgress)));
        }
        FrameLayout frameLayout4 = this.bottomOverlayChat;
        if (frameLayout4 != null) {
            frameLayout4.setTranslationY(this.bottomPanelTranslationYReverse);
        }
        FrameLayout frameLayout5 = this.bottomMessagesActionContainer;
        if (frameLayout5 != null) {
            frameLayout5.setTranslationY(this.bottomPanelTranslationYReverse);
        }
        UndoView undoView = this.undoView;
        if (undoView != null) {
            undoView.setAdditionalTranslationY(this.chatActivityEnterView.getHeightWithTopView() - this.chatActivityEnterView.getAnimatedTop());
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public TextureView createTextureView(boolean add) {
        if (this.parentLayout == null) {
            return null;
        }
        AndroidUtilities.cancelRunOnUIThread(this.destroyTextureViewRunnable);
        if (this.videoPlayerContainer == null) {
            if (Build.VERSION.SDK_INT >= 21) {
                FrameLayout frameLayout = new FrameLayout(getParentActivity()) { // from class: ir.eitaa.ui.ChatActivity.61
                    @Override // android.view.View
                    public void setTranslationY(float translationY) {
                        super.setTranslationY(translationY);
                        ChatActivity.this.contentView.invalidate();
                    }
                };
                this.videoPlayerContainer = frameLayout;
                frameLayout.setOutlineProvider(new ViewOutlineProvider() { // from class: ir.eitaa.ui.ChatActivity.62
                    @Override // android.view.ViewOutlineProvider
                    @TargetApi(21)
                    public void getOutline(View view, Outline outline) {
                        ImageReceiver imageReceiver = (ImageReceiver) view.getTag(R.id.parent_tag);
                        if (imageReceiver != null) {
                            int[] roundRadius = imageReceiver.getRoundRadius();
                            int iMax = 0;
                            for (int i = 0; i < 4; i++) {
                                iMax = Math.max(iMax, roundRadius[i]);
                            }
                            outline.setRoundRect(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), iMax);
                            return;
                        }
                        int i2 = AndroidUtilities.roundPlayingMessageSize;
                        outline.setOval(0, 0, i2, i2);
                    }
                });
                this.videoPlayerContainer.setClipToOutline(true);
            } else {
                this.videoPlayerContainer = new FrameLayout(getParentActivity()) { // from class: ir.eitaa.ui.ChatActivity.63
                    RectF rect = new RectF();

                    @Override // android.view.View
                    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
                        super.onSizeChanged(w, h, oldw, oldh);
                        ChatActivity.this.aspectPath.reset();
                        ImageReceiver imageReceiver = (ImageReceiver) getTag(R.id.parent_tag);
                        if (imageReceiver == null) {
                            float f = w / 2;
                            ChatActivity.this.aspectPath.addCircle(f, h / 2, f, Path.Direction.CW);
                        } else {
                            int[] roundRadius = imageReceiver.getRoundRadius();
                            int iMax = 0;
                            for (int i = 0; i < 4; i++) {
                                iMax = Math.max(iMax, roundRadius[i]);
                            }
                            this.rect.set(0.0f, 0.0f, w, h);
                            ChatActivity.this.aspectPath.addRoundRect(this.rect, AndroidUtilities.dp(4.0f), AndroidUtilities.dp(4.0f), Path.Direction.CW);
                        }
                        ChatActivity.this.aspectPath.toggleInverseFillType();
                    }

                    @Override // android.view.View
                    public void setTranslationY(float translationY) {
                        super.setTranslationY(translationY);
                        ChatActivity.this.contentView.invalidate();
                    }

                    @Override // android.view.View
                    public void setVisibility(int visibility) {
                        super.setVisibility(visibility);
                        if (visibility == 0) {
                            setLayerType(2, null);
                        }
                    }

                    @Override // android.view.ViewGroup, android.view.View
                    protected void dispatchDraw(Canvas canvas) {
                        super.dispatchDraw(canvas);
                        if (getTag() == null) {
                            canvas.drawPath(ChatActivity.this.aspectPath, ChatActivity.this.aspectPaint);
                        }
                    }
                };
                this.aspectPath = new Path();
                Paint paint = new Paint(1);
                this.aspectPaint = paint;
                paint.setColor(-16777216);
                this.aspectPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
            }
            this.videoPlayerContainer.setWillNotDraw(false);
            AspectRatioFrameLayout aspectRatioFrameLayout = new AspectRatioFrameLayout(getParentActivity());
            this.aspectRatioFrameLayout = aspectRatioFrameLayout;
            aspectRatioFrameLayout.setBackgroundColor(0);
            if (add) {
                this.videoPlayerContainer.addView(this.aspectRatioFrameLayout, LayoutHelper.createFrame(-1, -1, 17));
            }
            TextureView textureView = new TextureView(getParentActivity());
            this.videoTextureView = textureView;
            textureView.setOpaque(false);
            this.aspectRatioFrameLayout.addView(this.videoTextureView, LayoutHelper.createFrame(-1, -1.0f));
        }
        ViewGroup viewGroup = (ViewGroup) this.videoPlayerContainer.getParent();
        if (viewGroup != null && viewGroup != this.contentView) {
            viewGroup.removeView(this.videoPlayerContainer);
            viewGroup = null;
        }
        if (viewGroup == null) {
            SizeNotifierFrameLayout sizeNotifierFrameLayout = this.contentView;
            FrameLayout frameLayout2 = this.videoPlayerContainer;
            int i = AndroidUtilities.roundPlayingMessageSize;
            sizeNotifierFrameLayout.addView(frameLayout2, 1, new FrameLayout.LayoutParams(i, i));
        }
        this.videoPlayerContainer.setTag(null);
        this.aspectRatioFrameLayout.setDrawingReady(false);
        return this.videoTextureView;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void destroyTextureView() {
        FrameLayout frameLayout = this.videoPlayerContainer;
        if (frameLayout == null || frameLayout.getParent() == null) {
            return;
        }
        this.chatListView.invalidateViews();
        this.aspectRatioFrameLayout.setDrawingReady(false);
        this.videoPlayerContainer.setTag(null);
        if (Build.VERSION.SDK_INT < 21) {
            this.videoPlayerContainer.setLayerType(0, null);
        }
        this.contentView.removeView(this.videoPlayerContainer);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openForward() {
        int i = 0;
        boolean z = false;
        for (int i2 = 0; i2 < 2; i2++) {
            for (int i3 = 0; i3 < this.selectedMessagesIds[i2].size(); i3++) {
                MessageObject messageObjectValueAt = this.selectedMessagesIds[i2].valueAt(i3);
                if (messageObjectValueAt.isPoll()) {
                    i = messageObjectValueAt.isPublicPoll() ? 2 : 1;
                    if (i == 2) {
                        break;
                    }
                } else if (messageObjectValueAt.isInvoice()) {
                    z = true;
                }
            }
            if (i == 2) {
                break;
            }
        }
        Bundle bundle = new Bundle();
        bundle.putBoolean("isForward", true);
        bundle.putBoolean("onlySelect", false);
        bundle.putInt("dialogsType", 0);
        bundle.putInt("messagesCount", this.canForwardMessagesCount);
        bundle.putInt("hasPoll", i);
        bundle.putBoolean("hasInvoice", z);
        DialogsActivity dialogsActivity = new DialogsActivity(bundle);
        dialogsActivity.setDelegate(this);
        SharedConfig.archiveHidden = false;
        presentFragment(dialogsActivity);
    }

    private void showBottomOverlayProgress(final boolean show, boolean animated) {
        if (!show || this.bottomOverlayProgress.getTag() == null) {
            if (show || this.bottomOverlayProgress.getTag() != null) {
                AnimatorSet animatorSet = this.bottomOverlayAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.bottomOverlayAnimation = null;
                }
                this.bottomOverlayProgress.setTag(show ? 1 : null);
                if (animated) {
                    this.bottomOverlayAnimation = new AnimatorSet();
                    if (show) {
                        this.bottomOverlayProgress.setVisibility(0);
                        this.bottomOverlayAnimation.playTogether(ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.SCALE_X, 0.1f), ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.SCALE_Y, 0.1f), ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.ALPHA, 0.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.SCALE_X, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.SCALE_Y, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.ALPHA, 1.0f));
                        this.bottomOverlayAnimation.setStartDelay(200L);
                    } else {
                        this.bottomOverlayChatText.setVisibility(0);
                        this.bottomOverlayAnimation.playTogether(ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.SCALE_X, 0.1f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.SCALE_Y, 0.1f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) View.ALPHA, 0.0f), ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.SCALE_X, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.SCALE_Y, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayChatText, (Property<UnreadCounterTextView, Float>) View.ALPHA, 1.0f));
                    }
                    this.bottomOverlayAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.64
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animation) {
                            if (ChatActivity.this.bottomOverlayAnimation == null || !ChatActivity.this.bottomOverlayAnimation.equals(animation)) {
                                return;
                            }
                            if (!show) {
                                ChatActivity.this.bottomOverlayProgress.setVisibility(4);
                            } else {
                                ChatActivity.this.bottomOverlayChatText.setVisibility(4);
                            }
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationCancel(Animator animation) {
                            if (ChatActivity.this.bottomOverlayAnimation == null || !ChatActivity.this.bottomOverlayAnimation.equals(animation)) {
                                return;
                            }
                            ChatActivity.this.bottomOverlayAnimation = null;
                        }
                    });
                    this.bottomOverlayAnimation.setDuration(150L);
                    this.bottomOverlayAnimation.start();
                    return;
                }
                this.bottomOverlayProgress.setVisibility(show ? 0 : 4);
                this.bottomOverlayProgress.setScaleX(show ? 1.0f : 0.1f);
                this.bottomOverlayProgress.setScaleY(show ? 1.0f : 0.1f);
                this.bottomOverlayProgress.setAlpha(1.0f);
                this.bottomOverlayChatText.setVisibility(show ? 4 : 0);
                this.bottomOverlayChatText.setScaleX(show ? 0.1f : 1.0f);
                this.bottomOverlayChatText.setScaleY(show ? 0.1f : 1.0f);
                this.bottomOverlayChatText.setAlpha(show ? 0.0f : 1.0f);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: sendBotInlineResult, reason: merged with bridge method [inline-methods] */
    public void lambda$createView$31$ChatActivity(TLRPC$BotInlineResult result, boolean notify, int scheduleDate) {
        long contextBotId = this.mentionsAdapter.getContextBotId();
        HashMap map = new HashMap();
        map.put("id", result.id);
        map.put("query_id", "" + result.query_id);
        map.put("bot", "" + contextBotId);
        map.put("bot_name", this.mentionsAdapter.getContextBotName());
        SendMessagesHelper.prepareSendingBotContextResult(getAccountInstance(), result, map, this.dialog_id, this.replyingMessageObject, getThreadMessage(), notify, scheduleDate);
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel(false);
        getMediaDataController().increaseInlineRaiting(contextBotId);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void mentionListViewUpdateLayout() {
        if (this.mentionListView.getChildCount() <= 0) {
            this.mentionListViewScrollOffsetY = 0;
            this.mentionListViewLastViewPosition = -1;
            return;
        }
        View childAt = this.mentionListView.getChildAt(r0.getChildCount() - 1);
        RecyclerListView.Holder holder = (RecyclerListView.Holder) this.mentionListView.findContainingViewHolder(childAt);
        if (this.mentionLayoutManager.getReverseLayout()) {
            if (holder != null) {
                this.mentionListViewLastViewPosition = holder.getAdapterPosition();
                this.mentionListViewLastViewTop = childAt.getBottom();
            } else {
                this.mentionListViewLastViewPosition = -1;
            }
            View childAt2 = this.mentionListView.getChildAt(0);
            RecyclerListView.Holder holder2 = (RecyclerListView.Holder) this.mentionListView.findContainingViewHolder(childAt2);
            int measuredHeight = (childAt2.getBottom() >= this.mentionListView.getMeasuredHeight() || holder2 == null || holder2.getAdapterPosition() != 0) ? this.mentionListView.getMeasuredHeight() : childAt2.getBottom();
            if (this.mentionListViewScrollOffsetY != measuredHeight) {
                RecyclerListView recyclerListView = this.mentionListView;
                this.mentionListViewScrollOffsetY = measuredHeight;
                recyclerListView.setBottomGlowOffset(measuredHeight);
                this.mentionListView.setTopGlowOffset(0);
                this.mentionListView.invalidate();
                this.mentionContainer.invalidate();
                return;
            }
            return;
        }
        if (holder != null) {
            this.mentionListViewLastViewPosition = holder.getAdapterPosition();
            this.mentionListViewLastViewTop = childAt.getTop();
        } else {
            this.mentionListViewLastViewPosition = -1;
        }
        View childAt3 = this.mentionListView.getChildAt(0);
        RecyclerListView.Holder holder3 = (RecyclerListView.Holder) this.mentionListView.findContainingViewHolder(childAt3);
        int top = (childAt3.getTop() <= 0 || holder3 == null || holder3.getAdapterPosition() != 0) ? 0 : childAt3.getTop();
        if (this.mentionListViewScrollOffsetY != top) {
            RecyclerListView recyclerListView2 = this.mentionListView;
            this.mentionListViewScrollOffsetY = top;
            recyclerListView2.setTopGlowOffset(top);
            this.mentionListView.setBottomGlowOffset(0);
            this.mentionListView.invalidate();
            this.mentionContainer.invalidate();
        }
    }

    private void checkBotCommands() {
        TLRPC$Chat tLRPC$Chat;
        z = false;
        z = false;
        boolean z = false;
        URLSpanBotCommand.enabled = false;
        TLRPC$User tLRPC$User = this.currentUser;
        if (tLRPC$User != null && tLRPC$User.bot) {
            URLSpanBotCommand.enabled = !UserObject.isReplyUser(tLRPC$User);
            return;
        }
        TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
        if (tLRPC$ChatFull instanceof TLRPC$TL_chatFull) {
            for (int i = 0; i < this.chatInfo.participants.participants.size(); i++) {
                TLRPC$User user = getMessagesController().getUser(Long.valueOf(this.chatInfo.participants.participants.get(i).user_id));
                if (user != null && user.bot) {
                    URLSpanBotCommand.enabled = true;
                    return;
                }
            }
            return;
        }
        if (tLRPC$ChatFull instanceof TLRPC$TL_channelFull) {
            if (!tLRPC$ChatFull.bot_info.isEmpty() && (tLRPC$Chat = this.currentChat) != null && tLRPC$Chat.megagroup) {
                z = true;
            }
            URLSpanBotCommand.enabled = z;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public MessageObject.GroupedMessages getValidGroupedMessage(MessageObject message) {
        if (message.getGroupId() == 0) {
            return null;
        }
        MessageObject.GroupedMessages groupedMessages = this.groupedMessagesMap.get(message.getGroupId());
        if (groupedMessages == null || (groupedMessages.messages.size() > 1 && groupedMessages.positions.get(message) != null)) {
            return groupedMessages;
        }
        return null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void jumpToDate(int date) throws Resources.NotFoundException, NumberFormatException {
        int i;
        TLRPC$Message tLRPC$Message;
        if (this.messages.isEmpty()) {
            return;
        }
        MessageObject messageObject = this.messages.get(0);
        ArrayList<MessageObject> arrayList = this.messages;
        MessageObject messageObject2 = arrayList.get(arrayList.size() - 1);
        if ((messageObject.messageOwner.date >= date && messageObject2.messageOwner.date <= date) || (messageObject2.messageOwner.date >= date && this.endReached[0])) {
            for (int size = this.messages.size() - 1; size >= 0; size--) {
                MessageObject messageObject3 = this.messages.get(size);
                if (messageObject3.messageOwner.date >= date && messageObject3.getId() != 0) {
                    scrollToMessageId(messageObject3.getId(), 0, false, messageObject3.getDialogId() != this.mergeDialogId ? 0 : 1, true, 0);
                    return;
                }
            }
            return;
        }
        if (DialogObject.isEncryptedDialog(this.dialog_id)) {
            return;
        }
        int iFindLastVisibleItemPosition = this.chatLayoutManager.findLastVisibleItemPosition();
        int iFindFirstVisibleItemPosition = this.chatLayoutManager.findFirstVisibleItemPosition();
        while (true) {
            if (iFindFirstVisibleItemPosition > iFindLastVisibleItemPosition) {
                i = -1;
                break;
            }
            if (iFindFirstVisibleItemPosition < this.chatAdapter.messagesStartRow || iFindFirstVisibleItemPosition > this.chatAdapter.messagesEndRow || (tLRPC$Message = this.messages.get(iFindFirstVisibleItemPosition - this.chatAdapter.messagesStartRow).messageOwner) == null) {
                iFindFirstVisibleItemPosition++;
            } else {
                int i2 = tLRPC$Message.date < date ? 1 : 0;
                if (isSecretChat()) {
                    i2 ^= 1;
                }
                i = i2 ^ 1;
            }
        }
        this.chatScrollHelper.setScrollDirection(i);
        AlertDialog alertDialog = this.progressDialog;
        if (alertDialog != null) {
            alertDialog.dismiss();
        }
        updatePinnedListButton(false);
        AlertDialog alertDialog2 = new AlertDialog(getParentActivity(), 3, this.themeDelegate);
        this.progressDialog = alertDialog2;
        alertDialog2.setOnCancelListener(this.postponedScrollCancelListener);
        this.progressDialog.showDelayed(1000L);
        int i3 = this.lastLoadIndex;
        this.postponedScrollToLastMessageQueryIndex = i3;
        this.waitingForLoad.add(Integer.valueOf(i3));
        this.postponedScrollMessageId = 0;
        this.postponedScrollIsCanceled = false;
        MessagesController messagesController = getMessagesController();
        long j = this.dialog_id;
        long j2 = this.mergeDialogId;
        int i4 = this.classGuid;
        int i5 = this.chatMode;
        int i6 = this.threadMessageId;
        int i7 = this.replyMaxReadId;
        int i8 = this.lastLoadIndex;
        this.lastLoadIndex = i8 + 1;
        messagesController.loadMessages(j, j2, false, 30, 0, date, true, 0, i4, 4, 0, i5, i6, i7, i8);
        this.floatingDateView.setAlpha(0.0f);
        this.floatingDateView.setTag(null);
    }

    public void processInlineBotContextPM(TLRPC$TL_inlineBotSwitchPM object) {
        TLRPC$User contextBotUser;
        if (object == null || (contextBotUser = this.mentionsAdapter.getContextBotUser()) == null) {
            return;
        }
        this.chatActivityEnterView.setFieldText("");
        long j = this.dialog_id;
        if (j == contextBotUser.id) {
            this.inlineReturn = j;
            getMessagesController().sendBotStart(this.currentUser, object.start_param);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putLong("user_id", contextBotUser.id);
        bundle.putString("inline_query", object.start_param);
        bundle.putLong("inline_return", this.dialog_id);
        if (getMessagesController().checkCanOpenChat(bundle, this)) {
            presentFragment(new ChatActivity(bundle));
        }
    }

    private void createChatAttachView() {
        if (getParentActivity() != null && this.chatAttachAlert == null) {
            ChatAttachAlert chatAttachAlert = new ChatAttachAlert(getParentActivity(), this, false, false, this.themeDelegate) { // from class: ir.eitaa.ui.ChatActivity.65
                @Override // ir.eitaa.ui.Components.ChatAttachAlert, ir.eitaa.ui.ActionBar.BottomSheet
                public void dismissInternal() {
                    if (ChatActivity.this.chatAttachAlert.isShowing()) {
                        AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                    }
                    super.dismissInternal();
                    ChatActivity.this.onEditTextDialogClose(false);
                }
            };
            this.chatAttachAlert = chatAttachAlert;
            chatAttachAlert.setDelegate(new ChatAttachAlert.ChatAttachViewDelegate() { // from class: ir.eitaa.ui.ChatActivity.66
                @Override // ir.eitaa.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
                public void didPressedButton(int button, boolean arg, boolean notify, int scheduleDate, boolean forceDocument) {
                    String str;
                    if (ChatActivity.this.getParentActivity() == null || ChatActivity.this.chatAttachAlert == null) {
                        return;
                    }
                    ChatActivity chatActivity = ChatActivity.this;
                    chatActivity.editingMessageObject = chatActivity.chatAttachAlert.getEditingMessageObject();
                    if (button == 8 || button == 7 || (button == 4 && !ChatActivity.this.chatAttachAlert.getPhotoLayout().getSelectedPhotos().isEmpty())) {
                        if (button != 8) {
                            ChatActivity.this.chatAttachAlert.dismiss();
                        }
                        HashMap<Object, Object> selectedPhotos = ChatActivity.this.chatAttachAlert.getPhotoLayout().getSelectedPhotos();
                        ArrayList<Object> selectedPhotosOrder = ChatActivity.this.chatAttachAlert.getPhotoLayout().getSelectedPhotosOrder();
                        if (!selectedPhotos.isEmpty()) {
                            ArrayList arrayList = new ArrayList();
                            for (int i = 0; i < selectedPhotosOrder.size(); i++) {
                                MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) selectedPhotos.get(selectedPhotosOrder.get(i));
                                SendMessagesHelper.SendingMediaInfo sendingMediaInfo = new SendMessagesHelper.SendingMediaInfo();
                                boolean z = photoEntry.isVideo;
                                if (!z && (str = photoEntry.imagePath) != null) {
                                    sendingMediaInfo.path = str;
                                } else {
                                    String str2 = photoEntry.path;
                                    if (str2 != null) {
                                        sendingMediaInfo.path = str2;
                                    }
                                }
                                sendingMediaInfo.thumbPath = photoEntry.thumbPath;
                                sendingMediaInfo.isVideo = z;
                                CharSequence charSequence = photoEntry.caption;
                                sendingMediaInfo.caption = charSequence != null ? charSequence.toString() : null;
                                sendingMediaInfo.entities = photoEntry.entities;
                                sendingMediaInfo.masks = photoEntry.stickers;
                                sendingMediaInfo.ttl = photoEntry.ttl;
                                sendingMediaInfo.videoEditedInfo = photoEntry.editedInfo;
                                sendingMediaInfo.canDeleteAfter = photoEntry.canDeleteAfter;
                                arrayList.add(sendingMediaInfo);
                                photoEntry.reset();
                            }
                            ChatActivity.this.fillEditingMediaWithCaption(((SendMessagesHelper.SendingMediaInfo) arrayList.get(0)).caption, ((SendMessagesHelper.SendingMediaInfo) arrayList.get(0)).entities);
                            SendMessagesHelper.prepareSendingMedia(ChatActivity.this.getAccountInstance(), arrayList, ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, ChatActivity.this.getThreadMessage(), null, button == 4 || forceDocument, arg, ChatActivity.this.editingMessageObject, notify, scheduleDate);
                            ChatActivity.this.afterMessageSend();
                        }
                        if (scheduleDate != 0) {
                            if (ChatActivity.this.scheduledMessagesCount == -1) {
                                ChatActivity.this.scheduledMessagesCount = 0;
                            }
                            ChatActivity.access$28312(ChatActivity.this, selectedPhotos.size());
                            ChatActivity.this.updateScheduledInterface(true);
                            return;
                        }
                        return;
                    }
                    if (ChatActivity.this.chatAttachAlert != null) {
                        ChatActivity.this.chatAttachAlert.dismissWithButtonClick(button);
                    }
                    ChatActivity.this.processSelectedAttach(button);
                }

                @Override // ir.eitaa.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
                public void didSelectBot(TLRPC$User user) {
                    if (ChatActivity.this.chatActivityEnterView == null || TextUtils.isEmpty(user.username)) {
                        return;
                    }
                    ChatActivity.this.chatActivityEnterView.setFieldText("@" + user.username + " ");
                    ChatActivity.this.chatActivityEnterView.openKeyboard();
                }

                @Override // ir.eitaa.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
                public void onCameraOpened() {
                    ChatActivity.this.chatActivityEnterView.closeKeyboard();
                }

                @Override // ir.eitaa.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
                public boolean needEnterComment() {
                    return ChatActivity.this.needEnterText();
                }

                @Override // ir.eitaa.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
                public void doOnIdle(Runnable runnable) {
                    ChatActivity.this.lambda$openDiscussionMessageChat$149(runnable);
                }
            });
        }
    }

    public boolean needEnterText() {
        boolean zIsKeyboardVisible = this.chatActivityEnterView.isKeyboardVisible();
        if (zIsKeyboardVisible) {
            this.chatActivityEnterView.showEmojiView();
            this.openKeyboardOnAttachMenuClose = true;
        }
        AndroidUtilities.setAdjustResizeToNothing(getParentActivity(), this.classGuid);
        this.fragmentView.requestLayout();
        return zIsKeyboardVisible;
    }

    public void onEditTextDialogClose(boolean resetAdjust) {
        if (this.openKeyboardOnAttachMenuClose) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$k-SI8vvPpARiadNqVLua860ctqc
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onEditTextDialogClose$62$ChatActivity();
                }
            }, 50L);
            this.openKeyboardOnAttachMenuClose = false;
        }
        if (resetAdjust) {
            AndroidUtilities.requestAdjustResize(getParentActivity(), this.classGuid);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onEditTextDialogClose$62, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onEditTextDialogClose$62$ChatActivity() {
        this.chatActivityEnterView.openKeyboard();
    }

    /* renamed from: doOnIdle, reason: merged with bridge method [inline-methods] and merged with bridge method [inline-methods] */
    public void lambda$openDiscussionMessageChat$149$ChatActivity(Runnable runnable) {
        NotificationCenter.getInstance(this.currentAccount).doOnIdle(runnable);
    }

    public void performHistoryClear(final boolean revoke) {
        this.clearingHistory = true;
        this.undoView.showWithAction(this.dialog_id, 0, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$4qti-5oZsiCLGMfgkCkcDy7MCo8
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$performHistoryClear$63$ChatActivity(revoke);
            }
        }, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Bwi73FppKwhYmOiYG4lwi8pvMzY
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$performHistoryClear$64$ChatActivity();
            }
        });
        this.chatAdapter.notifyDataSetChanged();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$performHistoryClear$63, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$performHistoryClear$63$ChatActivity(boolean z) {
        if (!this.pinnedMessageIds.isEmpty()) {
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("pin_" + this.dialog_id, this.pinnedMessageIds.get(0).intValue()).commit();
            this.pinnedMessageIds.clear();
            this.pinnedMessageObjects.clear();
            this.currentPinnedMessageId = 0;
            this.loadedPinnedMessagesCount = 0;
            this.totalPinnedMessagesCount = 0;
            updatePinnedMessageView(true);
        }
        getMessagesController().deleteDialog(this.dialog_id, 1, z);
        this.clearingHistory = false;
        clearHistory(false, null);
        this.chatAdapter.notifyDataSetChanged();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$performHistoryClear$64, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$performHistoryClear$64$ChatActivity() {
        this.clearingHistory = false;
        this.chatAdapter.notifyDataSetChanged();
    }

    public long getDialogId() {
        return this.dialog_id;
    }

    public UndoView getUndoView() {
        return this.undoView;
    }

    public long getMergeDialogId() {
        return this.mergeDialogId;
    }

    public boolean hasReportSpam() {
        FrameLayout frameLayout = this.topChatPanelView;
        return (frameLayout == null || frameLayout.getTag() != null || this.reportSpamButton.getVisibility() == 8) ? false : true;
    }

    public void setBotUser(String value) {
        if (this.inlineReturn != 0) {
            getMessagesController().sendBotStart(this.currentUser, value);
        } else {
            this.botUser = value;
            updateBottomOverlay();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void afterMessageSend() {
        hideFieldPanel(false);
        if (this.chatMode == 0) {
            getMediaDataController().cleanDraft(this.dialog_id, this.threadMessageId, true);
        }
    }

    private void toggleMesagesSearchListView() {
        RecyclerListView recyclerListView = this.messagesSearchListView;
        if (recyclerListView != null) {
            showMessagesSearchListView(recyclerListView.getTag() == null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showMessagesSearchListView(final boolean show) {
        RecyclerListView recyclerListView = this.messagesSearchListView;
        if (recyclerListView != null) {
            if (!show || recyclerListView.getTag() == null) {
                if (show || this.messagesSearchListView.getTag() != null) {
                    AnimatorSet animatorSet = this.messagesSearchListViewAnimation;
                    if (animatorSet != null) {
                        animatorSet.cancel();
                        this.messagesSearchListViewAnimation = null;
                    }
                    if (show) {
                        this.messagesSearchListView.setVisibility(0);
                    }
                    this.messagesSearchListView.setTag(show ? 1 : null);
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.messagesSearchListViewAnimation = animatorSet2;
                    Animator[] animatorArr = new Animator[1];
                    RecyclerListView recyclerListView2 = this.messagesSearchListView;
                    Property property = View.ALPHA;
                    float[] fArr = new float[1];
                    fArr[0] = show ? 1.0f : 0.0f;
                    animatorArr[0] = ObjectAnimator.ofFloat(recyclerListView2, (Property<RecyclerListView, Float>) property, fArr);
                    animatorSet2.playTogether(animatorArr);
                    this.messagesSearchListViewAnimation.setInterpolator(CubicBezierInterpolator.EASE_IN);
                    this.messagesSearchListViewAnimation.setDuration(180L);
                    this.messagesSearchListViewAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.67
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animation) {
                            if (animation.equals(ChatActivity.this.messagesSearchListViewAnimation)) {
                                ChatActivity.this.messagesSearchListViewAnimation = null;
                                if (show) {
                                    return;
                                }
                                ChatActivity.this.messagesSearchListView.setVisibility(8);
                            }
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationCancel(Animator animation) {
                            if (animation.equals(ChatActivity.this.messagesSearchListViewAnimation)) {
                                ChatActivity.this.messagesSearchListViewAnimation = null;
                            }
                        }
                    });
                    this.messagesSearchListViewAnimation.start();
                }
            }
        }
    }

    public boolean playFirstUnreadVoiceMessage() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.isRecordingAudioVideo()) {
            return true;
        }
        for (int size = this.messages.size() - 1; size >= 0; size--) {
            MessageObject messageObject = this.messages.get(size);
            if ((messageObject.isVoice() || messageObject.isRoundVideo()) && messageObject.isContentUnread() && !messageObject.isOut()) {
                MediaController.getInstance().setVoiceMessagesPlaylist(MediaController.getInstance().playMessage(messageObject) ? createVoiceMessagesPlaylist(messageObject, true) : null, true);
                return true;
            }
        }
        if (Build.VERSION.SDK_INT < 23 || getParentActivity() == null || getParentActivity().checkSelfPermission("android.permission.RECORD_AUDIO") == 0) {
            return false;
        }
        getParentActivity().requestPermissions(new String[]{"android.permission.RECORD_AUDIO"}, 3);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openScheduledMessages() {
        ActionBarLayout actionBarLayout = this.parentLayout;
        if (actionBarLayout == null || actionBarLayout.getLastFragment() != this) {
            return;
        }
        Bundle bundle = new Bundle();
        TLRPC$EncryptedChat tLRPC$EncryptedChat = this.currentEncryptedChat;
        if (tLRPC$EncryptedChat != null) {
            bundle.putInt("enc_id", tLRPC$EncryptedChat.id);
        } else {
            TLRPC$Chat tLRPC$Chat = this.currentChat;
            if (tLRPC$Chat != null) {
                bundle.putLong("chat_id", tLRPC$Chat.id);
            } else {
                bundle.putLong("user_id", this.currentUser.id);
            }
        }
        bundle.putInt("chatMode", 1);
        ChatActivity chatActivity = new ChatActivity(bundle);
        chatActivity.chatActivityDelegate = new ChatActivityDelegate() { // from class: ir.eitaa.ui.ChatActivity.68
            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void onReport() {
                ChatActivityDelegate.CC.$default$onReport(this);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void onUnpin(boolean z, boolean z2) {
                ChatActivityDelegate.CC.$default$onUnpin(this, z, z2);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public void openReplyMessage(int mid) throws Resources.NotFoundException, NumberFormatException {
                ChatActivity.this.scrollToMessageId(mid, 0, true, 0, true, 0);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public void openSearch(String text) {
                ChatActivity.this.openSearchWithText(text);
            }
        };
        presentFragment(chatActivity, false);
    }

    private void initStickers() {
        if (this.chatActivityEnterView == null || getParentActivity() == null || this.stickersAdapter != null) {
            return;
        }
        this.stickersListView.setPadding(AndroidUtilities.dp(18.0f), 0, AndroidUtilities.dp(18.0f), 0);
        RecyclerListView recyclerListView = this.stickersListView;
        StickersAdapter stickersAdapter = new StickersAdapter(getParentActivity(), new StickersAdapter.StickersAdapterDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$VYqEwIASJnqJkFvLxjO4YpD6Xyc
            @Override // ir.eitaa.ui.Adapters.StickersAdapter.StickersAdapterDelegate
            public final void needChangePanelVisibility(boolean z) {
                this.f$0.lambda$initStickers$65$ChatActivity(z);
            }
        }, this.themeDelegate);
        this.stickersAdapter = stickersAdapter;
        recyclerListView.setAdapter(stickersAdapter);
        RecyclerListView recyclerListView2 = this.stickersListView;
        RecyclerListView.OnItemClickListener onItemClickListener = new RecyclerListView.OnItemClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$T8eCkc0EnBxytNZRf88_OkVJpJ8
            @Override // ir.eitaa.ui.Components.RecyclerListView.OnItemClickListener
            public final void onItemClick(View view, int i) {
                this.f$0.lambda$initStickers$66$ChatActivity(view, i);
            }
        };
        this.stickersOnItemClickListener = onItemClickListener;
        recyclerListView2.setOnItemClickListener(onItemClickListener);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$initStickers$65, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$initStickers$65$ChatActivity(final boolean z) {
        if (z) {
            int iDp = this.stickersAdapter.isShowingKeywords() ? AndroidUtilities.dp(24.0f) : 0;
            if (iDp != this.stickersListView.getPaddingTop() || this.stickersPanel.getTag() == null) {
                this.stickersListView.setPadding(AndroidUtilities.dp(18.0f), iDp, AndroidUtilities.dp(18.0f), 0);
                this.stickersListView.scrollToPosition(0);
                ((FrameLayout.LayoutParams) this.stickersPanelArrow.getLayoutParams()).gravity = (this.chatActivityEnterView.isRtlText() ? 5 : 3) | 80;
                this.stickersPanelArrow.requestLayout();
            }
        }
        if (!z || this.stickersPanel.getTag() == null) {
            if (z || this.stickersPanel.getTag() != null) {
                if (z) {
                    this.stickersPanel.setVisibility(this.allowStickersPanel ? 0 : 4);
                    this.stickersPanel.setTag(1);
                } else {
                    this.stickersPanel.setTag(null);
                }
                AnimatorSet animatorSet = this.runningAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.runningAnimation = null;
                }
                if (this.stickersPanel.getVisibility() == 4) {
                    if (z) {
                        return;
                    }
                    this.stickersPanel.setVisibility(8);
                    return;
                }
                AnimatorSet animatorSet2 = new AnimatorSet();
                this.runningAnimation = animatorSet2;
                Animator[] animatorArr = new Animator[1];
                FrameLayout frameLayout = this.stickersPanel;
                Property property = View.ALPHA;
                float[] fArr = new float[2];
                fArr[0] = z ? 0.0f : 1.0f;
                fArr[1] = z ? 1.0f : 0.0f;
                animatorArr[0] = ObjectAnimator.ofFloat(frameLayout, (Property<FrameLayout, Float>) property, fArr);
                animatorSet2.playTogether(animatorArr);
                this.runningAnimation.setDuration(150L);
                this.runningAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.69
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.runningAnimation == null || !ChatActivity.this.runningAnimation.equals(animation)) {
                            return;
                        }
                        if (!z) {
                            ChatActivity.this.stickersAdapter.clearSearch();
                            ChatActivity.this.stickersPanel.setVisibility(8);
                            if (ContentPreviewViewer.getInstance().isVisible()) {
                                ContentPreviewViewer.getInstance().close();
                            }
                            ContentPreviewViewer.getInstance().reset();
                        }
                        ChatActivity.this.runningAnimation = null;
                    }

                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.runningAnimation == null || !ChatActivity.this.runningAnimation.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.runningAnimation = null;
                    }
                });
                this.runningAnimation.start();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$initStickers$66, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$initStickers$66$ChatActivity(View view, int i) {
        Object item = this.stickersAdapter.getItem(i);
        if (item instanceof String) {
            SpannableString spannableString = new SpannableString((String) item);
            Emoji.replaceEmoji(spannableString, this.chatActivityEnterView.getEditField().getPaint().getFontMetricsInt(), AndroidUtilities.dp(20.0f), false);
            this.chatActivityEnterView.setFieldText(spannableString, false);
        }
    }

    public void shareMyContact(final int type, final MessageObject messageObject) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString("ShareYouPhoneNumberTitle", R.string.ShareYouPhoneNumberTitle));
        TLRPC$User tLRPC$User = this.currentUser;
        if (tLRPC$User != null) {
            if (tLRPC$User.bot) {
                builder.setMessage(LocaleController.getString("AreYouSureShareMyContactInfoBot", R.string.AreYouSureShareMyContactInfoBot));
            } else {
                PhoneFormat phoneFormat = PhoneFormat.getInstance();
                TLRPC$User tLRPC$User2 = this.currentUser;
                builder.setMessage(AndroidUtilities.replaceTags(LocaleController.formatString("AreYouSureShareMyContactInfoUser", R.string.AreYouSureShareMyContactInfoUser, phoneFormat.format("+" + getUserConfig().getCurrentUser().phone), ContactsController.formatName(tLRPC$User2.first_name, tLRPC$User2.last_name))));
            }
        } else {
            builder.setMessage(LocaleController.getString("AreYouSureShareMyContactInfo", R.string.AreYouSureShareMyContactInfo));
        }
        builder.setPositiveButton(LocaleController.getString("ShareContact", R.string.ShareContact), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$mjRDE5Tro7-lIGnulwy3quhcnMw
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$shareMyContact$68$ChatActivity(type, messageObject, dialogInterface, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$shareMyContact$68, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$shareMyContact$68$ChatActivity(int i, MessageObject messageObject, DialogInterface dialogInterface, int i2) {
        if (i == 1) {
            TLRPC$TL_contacts_acceptContact tLRPC$TL_contacts_acceptContact = new TLRPC$TL_contacts_acceptContact();
            tLRPC$TL_contacts_acceptContact.id = getMessagesController().getInputUser(this.currentUser);
            getConnectionsManager().sendRequest(tLRPC$TL_contacts_acceptContact, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$y1qrWgJGobjbdWr6FQdInhZwc9s
                @Override // ir.eitaa.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                    this.f$0.lambda$shareMyContact$67$ChatActivity(tLObject, tLRPC$TL_error);
                }
            });
        } else {
            SendMessagesHelper.getInstance(this.currentAccount).sendMessage(getUserConfig().getCurrentUser(), this.dialog_id, messageObject, getThreadMessage(), (TLRPC$ReplyMarkup) null, (HashMap<String, String>) null, true, 0);
            if (this.chatMode == 0) {
                moveScrollToLastMessage();
            }
            hideFieldPanel(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$shareMyContact$67, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$shareMyContact$67$ChatActivity(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        if (tLRPC$TL_error != null) {
            return;
        }
        getMessagesController().processUpdates((TLRPC$Updates) tLObject, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showVoiceHint(boolean hide, boolean video) {
        ChatActivityEnterView chatActivityEnterView;
        int i;
        String str;
        if (getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        if ((hide && this.voiceHintTextView == null) || this.chatMode != 0 || (chatActivityEnterView = this.chatActivityEnterView) == null || chatActivityEnterView.getAudioVideoButtonContainer() == null || this.chatActivityEnterView.getAudioVideoButtonContainer().getVisibility() != 0) {
            return;
        }
        if (this.voiceHintTextView == null) {
            SizeNotifierFrameLayout sizeNotifierFrameLayout = (SizeNotifierFrameLayout) this.fragmentView;
            int iIndexOfChild = sizeNotifierFrameLayout.indexOfChild(this.chatActivityEnterView);
            if (iIndexOfChild == -1) {
                return;
            }
            HintView hintView = new HintView(getParentActivity(), 9, this.themeDelegate);
            this.voiceHintTextView = hintView;
            sizeNotifierFrameLayout.addView(hintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
        }
        if (hide) {
            this.voiceHintTextView.hide();
            return;
        }
        if (this.chatActivityEnterView.hasRecordVideo()) {
            HintView hintView2 = this.voiceHintTextView;
            if (video) {
                i = R.string.HoldToVideo;
                str = "HoldToVideo";
            } else {
                i = R.string.HoldToAudio;
                str = "HoldToAudio";
            }
            hintView2.setText(LocaleController.getString(str, i));
        } else {
            this.voiceHintTextView.setText(LocaleController.getString("HoldToAudioOnly", R.string.HoldToAudioOnly));
        }
        this.voiceHintTextView.showForView(this.chatActivityEnterView.getAudioVideoButtonContainer(), true);
    }

    public boolean checkSlowMode(View view) {
        CharSequence slowModeTimer = this.chatActivityEnterView.getSlowModeTimer();
        if (slowModeTimer == null) {
            return false;
        }
        showSlowModeHint(view, true, slowModeTimer);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideHints(boolean scroll) {
        if (!scroll) {
            HintView hintView = this.slowModeHint;
            if (hintView != null) {
                hintView.hide();
            }
            HintView hintView2 = this.searchAsListHint;
            if (hintView2 != null) {
                hintView2.hide();
            }
            HintView hintView3 = this.scheduledOrNoSoundHint;
            if (hintView3 != null) {
                hintView3.hide();
            }
        }
        HintView hintView4 = this.noSoundHintView;
        if (hintView4 != null) {
            hintView4.hide();
        }
        HintView hintView5 = this.forwardHintView;
        if (hintView5 != null) {
            hintView5.hide();
        }
        HintView hintView6 = this.pollHintView;
        if (hintView6 != null) {
            hintView6.hide();
        }
        HintView hintView7 = this.timerHintView;
        if (hintView7 != null) {
            hintView7.hide();
        }
        ChecksHintView checksHintView = this.checksHintView;
        if (checksHintView != null) {
            checksHintView.hide();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showSlowModeHint(View view, boolean show, CharSequence time) {
        HintView hintView;
        if (getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        if (show || ((hintView = this.slowModeHint) != null && hintView.getVisibility() == 0)) {
            this.slowModeHint.setText(AndroidUtilities.replaceTags(LocaleController.formatString("SlowModeHint", R.string.SlowModeHint, time)));
            if (show) {
                this.slowModeHint.showForView(view, true);
            }
        }
    }

    public void showTimerHint() {
        String pluralString;
        if (getParentActivity() == null || this.fragmentView == null || this.chatInfo == null) {
            return;
        }
        if (this.timerHintView == null) {
            HintView hintView = new HintView(getParentActivity(), 7, true, this.themeDelegate);
            this.timerHintView = hintView;
            hintView.setAlpha(0.0f);
            this.timerHintView.setVisibility(4);
            this.timerHintView.setShowingDuration(4000L);
            this.contentView.addView(this.timerHintView, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
        }
        int i = this.chatInfo.ttl_period;
        if (i > 86400) {
            pluralString = LocaleController.formatPluralString("Days", i / 86400);
        } else if (i >= 3600) {
            pluralString = LocaleController.formatPluralString("Hours", i / 3600);
        } else if (i >= 60) {
            pluralString = LocaleController.formatPluralString("Minutes", i / 60);
        } else {
            pluralString = LocaleController.formatPluralString("Seconds", i);
        }
        this.timerHintView.setText(LocaleController.formatString("AutoDeleteSetInfo", R.string.AutoDeleteSetInfo, pluralString));
        this.timerHintView.showForView(this.avatarContainer.getTimeItem(), true);
    }

    private void showSearchAsListHint() {
        if (getParentActivity() == null || this.fragmentView == null || this.searchCountText == null) {
            return;
        }
        if (this.searchAsListHint == null) {
            HintView hintView = new HintView(getParentActivity(), 3, this.themeDelegate);
            this.searchAsListHint = hintView;
            hintView.setAlpha(0.0f);
            this.searchAsListHint.setVisibility(4);
            this.searchAsListHint.setText(LocaleController.getString("TapToViewAsList", R.string.TapToViewAsList));
            this.contentView.addView(this.searchAsListHint, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
        }
        this.searchAsListHint.showForView(this.searchCountText, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showMediaBannedHint() {
        SizeNotifierFrameLayout sizeNotifierFrameLayout;
        int iIndexOfChild;
        if (getParentActivity() == null || this.currentChat == null || this.fragmentView == null) {
            return;
        }
        HintView hintView = this.mediaBanTooltip;
        if ((hintView == null || hintView.getVisibility() != 0) && (iIndexOfChild = (sizeNotifierFrameLayout = (SizeNotifierFrameLayout) this.fragmentView).indexOfChild(this.chatActivityEnterView)) != -1) {
            if (this.mediaBanTooltip == null) {
                HintView hintView2 = new HintView(getParentActivity(), 9, this.themeDelegate);
                this.mediaBanTooltip = hintView2;
                hintView2.setVisibility(8);
                sizeNotifierFrameLayout.addView(this.mediaBanTooltip, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
            }
            if (ChatObject.isActionBannedByDefault(this.currentChat, 7)) {
                this.mediaBanTooltip.setText(LocaleController.getString("GlobalAttachMediaRestricted", R.string.GlobalAttachMediaRestricted));
            } else {
                TLRPC$TL_chatBannedRights tLRPC$TL_chatBannedRights = this.currentChat.banned_rights;
                if (tLRPC$TL_chatBannedRights == null) {
                    return;
                }
                if (AndroidUtilities.isBannedForever(tLRPC$TL_chatBannedRights)) {
                    this.mediaBanTooltip.setText(LocaleController.getString("AttachMediaRestrictedForever", R.string.AttachMediaRestrictedForever));
                } else {
                    this.mediaBanTooltip.setText(LocaleController.formatString("AttachMediaRestricted", R.string.AttachMediaRestricted, LocaleController.formatDateForBan(this.currentChat.banned_rights.until_date)));
                }
            }
            this.mediaBanTooltip.showForView(this.chatActivityEnterView.getSendButton(), true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showNoSoundHint() {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        AnimatedFileDrawable animation;
        if (this.scrollingChatListView || SharedConfig.noSoundHintShowed || this.chatListView == null || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        HintView hintView = this.noSoundHintView;
        if (hintView == null || hintView.getTag() == null) {
            if (this.noSoundHintView == null) {
                SizeNotifierFrameLayout sizeNotifierFrameLayout = (SizeNotifierFrameLayout) this.fragmentView;
                int iIndexOfChild = sizeNotifierFrameLayout.indexOfChild(this.chatActivityEnterView);
                if (iIndexOfChild == -1) {
                    return;
                }
                HintView hintView2 = new HintView(getParentActivity(), 0, this.themeDelegate);
                this.noSoundHintView = hintView2;
                hintView2.setShowingDuration(10000L);
                sizeNotifierFrameLayout.addView(this.noSoundHintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                this.noSoundHintView.setAlpha(0.0f);
                this.noSoundHintView.setVisibility(4);
            }
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.isVideo() && (animation = chatMessageCell.getPhotoImage().getAnimation()) != null && animation.getCurrentProgressMs() >= 3000 && this.noSoundHintView.showForMessageCell(chatMessageCell, true)) {
                    SharedConfig.setNoSoundHintShowed(true);
                    return;
                }
            }
        }
    }

    private void checkChecksHint() {
        if (getMessagesController().pendingSuggestions.contains("NEWCOMER_TICKS")) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$n-sS0uGcqaJRH5ycYKDhA8XR5gI
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.showChecksHint();
                }
            }, 1000L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showChecksHint() {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        if (this.scrollingChatListView || this.chatListView == null || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        ChecksHintView checksHintView = this.checksHintView;
        if (checksHintView == null || checksHintView.getTag() == null) {
            if (this.checksHintView == null) {
                SizeNotifierFrameLayout sizeNotifierFrameLayout = (SizeNotifierFrameLayout) this.fragmentView;
                int iIndexOfChild = sizeNotifierFrameLayout.indexOfChild(this.chatActivityEnterView);
                if (iIndexOfChild == -1) {
                    return;
                }
                ChecksHintView checksHintView2 = new ChecksHintView(getParentActivity(), this.themeDelegate);
                this.checksHintView = checksHintView2;
                sizeNotifierFrameLayout.addView(checksHintView2, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
                this.checksHintView.setAlpha(0.0f);
                this.checksHintView.setVisibility(4);
            }
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.isOutOwner() && messageObject.isSent() && this.checksHintView.showForMessageCell(chatMessageCell, true)) {
                    getMessagesController().removeSuggestion(0L, "NEWCOMER_TICKS");
                    return;
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showForwardHint(ChatMessageCell cell) {
        View view;
        if (this.scrollingChatListView || this.chatListView == null || getParentActivity() == null || (view = this.fragmentView) == null) {
            return;
        }
        if (this.forwardHintView == null) {
            SizeNotifierFrameLayout sizeNotifierFrameLayout = (SizeNotifierFrameLayout) view;
            int iIndexOfChild = sizeNotifierFrameLayout.indexOfChild(this.chatActivityEnterView);
            if (iIndexOfChild == -1) {
                return;
            }
            HintView hintView = new HintView(getParentActivity(), 1, this.themeDelegate);
            this.forwardHintView = hintView;
            sizeNotifierFrameLayout.addView(hintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
            this.forwardHintView.setAlpha(0.0f);
            this.forwardHintView.setVisibility(4);
        }
        this.forwardHintView.showForMessageCell(cell, true);
    }

    /* JADX WARN: Removed duplicated region for block: B:18:0x002e  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void showTextSelectionHint(ir.eitaa.messenger.MessageObject r9) {
        /*
            r8 = this;
            android.app.Activity r0 = r8.getParentActivity()
            if (r0 != 0) goto L7
            return
        L7:
            java.util.ArrayList<ir.eitaa.messenger.MessageObject$TextLayoutBlock> r0 = r9.textLayoutBlocks
            r1 = 0
            r2 = 1
            if (r0 == 0) goto L1f
            boolean r0 = r0.isEmpty()
            if (r0 != 0) goto L1f
            java.lang.CharSequence r0 = r9.messageText
            java.util.ArrayList<ir.eitaa.messenger.MessageObject$TextLayoutBlock> r9 = r9.textLayoutBlocks
            int r9 = r9.size()
            if (r9 <= r2) goto L21
            r9 = 1
            goto L22
        L1f:
            java.lang.CharSequence r0 = r9.caption
        L21:
            r9 = 0
        L22:
            if (r9 != 0) goto L30
            if (r0 == 0) goto L30
            int r9 = r0.length()
            r0 = 200(0xc8, float:2.8E-43)
            if (r9 <= r0) goto L2f
            r1 = 1
        L2f:
            r9 = r1
        L30:
            if (r9 == 0) goto L80
            int r9 = ir.eitaa.messenger.SharedConfig.textSelectionHintShows
            r0 = 2
            if (r9 > r0) goto L80
            boolean r9 = r8.textSelectionHintWasShowed
            if (r9 != 0) goto L80
            float r9 = r8.lastTouchY
            ir.eitaa.ui.Components.ChatActivityEnterView r0 = r8.chatActivityEnterView
            int r0 = r0.getTop()
            r1 = 1114636288(0x42700000, float:60.0)
            int r1 = ir.eitaa.messenger.AndroidUtilities.dp(r1)
            int r0 = r0 - r1
            float r0 = (float) r0
            int r9 = (r9 > r0 ? 1 : (r9 == r0 ? 0 : -1))
            if (r9 <= 0) goto L50
            goto L80
        L50:
            r8.textSelectionHintWasShowed = r2
            ir.eitaa.messenger.SharedConfig.increaseTextSelectionHintShowed()
            ir.eitaa.ui.Components.TextSelectionHint r9 = r8.textSelectionHint
            if (r9 != 0) goto L7b
            ir.eitaa.ui.ChatActivity$70 r9 = new ir.eitaa.ui.ChatActivity$70
            android.app.Activity r0 = r8.getParentActivity()
            ir.eitaa.ui.ChatActivity$ThemeDelegate r1 = r8.themeDelegate
            r9.<init>(r0, r1)
            r8.textSelectionHint = r9
            ir.eitaa.ui.Components.SizeNotifierFrameLayout r0 = r8.contentView
            r1 = -2
            r2 = 1113587712(0x42600000, float:56.0)
            r3 = 83
            r4 = 1090519040(0x41000000, float:8.0)
            r5 = 0
            r6 = 1090519040(0x41000000, float:8.0)
            r7 = 1090519040(0x41000000, float:8.0)
            android.widget.FrameLayout$LayoutParams r1 = ir.eitaa.ui.Components.LayoutHelper.createFrame(r1, r2, r3, r4, r5, r6, r7)
            r0.addView(r9, r1)
        L7b:
            ir.eitaa.ui.Components.TextSelectionHint r9 = r8.textSelectionHint
            r9.show()
        L80:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.showTextSelectionHint(ir.eitaa.messenger.MessageObject):void");
    }

    private void showGifHint() {
        View view;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || chatActivityEnterView.getVisibility() != 0) {
            return;
        }
        SharedPreferences globalMainSettings = MessagesController.getGlobalMainSettings();
        if (globalMainSettings.getBoolean("gifhint", false)) {
            return;
        }
        globalMainSettings.edit().putBoolean("gifhint", true).commit();
        if (getParentActivity() == null || (view = this.fragmentView) == null || this.gifHintTextView != null) {
            return;
        }
        if (!this.allowContextBotPanelSecond) {
            ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
            if (chatActivityEnterView2 != null) {
                chatActivityEnterView2.setOpenGifsTabFirst();
                return;
            }
            return;
        }
        SizeNotifierFrameLayout sizeNotifierFrameLayout = (SizeNotifierFrameLayout) view;
        int iIndexOfChild = sizeNotifierFrameLayout.indexOfChild(this.chatActivityEnterView);
        if (iIndexOfChild == -1) {
            return;
        }
        this.chatActivityEnterView.setOpenGifsTabFirst();
        View view2 = new View(getParentActivity());
        this.emojiButtonRed = view2;
        view2.setBackgroundResource(R.drawable.redcircle);
        int i = iIndexOfChild + 1;
        sizeNotifierFrameLayout.addView(this.emojiButtonRed, i, LayoutHelper.createFrame(10, 10.0f, 83, 30.0f, 0.0f, 0.0f, 27.0f));
        TextView textView = new TextView(getParentActivity());
        this.gifHintTextView = textView;
        textView.setBackgroundDrawable(Theme.createRoundRectDrawable(AndroidUtilities.dp(3.0f), getThemedColor("chat_gifSaveHintBackground")));
        this.gifHintTextView.setTextColor(getThemedColor("chat_gifSaveHintText"));
        this.gifHintTextView.setTextSize(1, 14.0f);
        this.gifHintTextView.setTypeface(AndroidUtilities.getFontFamily(false));
        this.gifHintTextView.setPadding(AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f), AndroidUtilities.dp(8.0f), AndroidUtilities.dp(7.0f));
        this.gifHintTextView.setText(LocaleController.getString("TapHereGifs", R.string.TapHereGifs));
        this.gifHintTextView.setGravity(16);
        sizeNotifierFrameLayout.addView(this.gifHintTextView, i, LayoutHelper.createFrame(-2, -2.0f, 83, 5.0f, 0.0f, 5.0f, 3.0f));
        AnimatorSet animatorSet = new AnimatorSet();
        animatorSet.playTogether(ObjectAnimator.ofFloat(this.gifHintTextView, (Property<TextView, Float>) View.ALPHA, 0.0f, 1.0f), ObjectAnimator.ofFloat(this.emojiButtonRed, (Property<View, Float>) View.ALPHA, 0.0f, 1.0f));
        animatorSet.addListener(new AnonymousClass71());
        animatorSet.setDuration(300L);
        animatorSet.start();
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$71, reason: invalid class name */
    class AnonymousClass71 extends AnimatorListenerAdapter {
        AnonymousClass71() {
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationEnd(Animator animation) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$71$b86UlEVpFTQZD_e2PcTNKuuC3IA
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAnimationEnd$0$ChatActivity$71();
                }
            }, 2000L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onAnimationEnd$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onAnimationEnd$0$ChatActivity$71() {
            if (ChatActivity.this.gifHintTextView == null) {
                return;
            }
            AnimatorSet animatorSet = new AnimatorSet();
            animatorSet.playTogether(ObjectAnimator.ofFloat(ChatActivity.this.gifHintTextView, (Property<TextView, Float>) View.ALPHA, 0.0f));
            animatorSet.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.71.1
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animation) {
                    if (ChatActivity.this.gifHintTextView != null) {
                        ChatActivity.this.gifHintTextView.setVisibility(8);
                    }
                }
            });
            animatorSet.setDuration(300L);
            animatorSet.start();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openAttachMenu() {
        if (getParentActivity() != null) {
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView == null || TextUtils.isEmpty(chatActivityEnterView.getSlowModeTimer())) {
                createChatAttachView();
                this.chatAttachAlert.getPhotoLayout().loadGalleryPhotos();
                int i = Build.VERSION.SDK_INT;
                if (i == 21 || i == 22) {
                    this.chatActivityEnterView.closeKeyboard();
                }
                TLRPC$Chat tLRPC$Chat = this.currentChat;
                if (tLRPC$Chat != null && !ChatObject.hasAdminRights(tLRPC$Chat) && this.currentChat.slowmode_enabled) {
                    this.chatAttachAlert.setMaxSelectedPhotos(10, true);
                } else {
                    this.chatAttachAlert.setMaxSelectedPhotos(-1, true);
                }
                this.chatAttachAlert.init();
                showDialog(this.chatAttachAlert);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkContextBotPanel() {
        MentionsAdapter mentionsAdapter;
        if (this.allowStickersPanel && (mentionsAdapter = this.mentionsAdapter) != null && mentionsAdapter.isBotContext()) {
            if (!this.allowContextBotPanel && !this.allowContextBotPanelSecond) {
                if (this.mentionContainer.getVisibility() == 0 && this.mentionContainer.getTag() == null) {
                    AnimatorSet animatorSet = this.mentionListAnimation;
                    if (animatorSet != null) {
                        animatorSet.cancel();
                    }
                    this.mentionContainer.setTag(1);
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.mentionListAnimation = animatorSet2;
                    animatorSet2.playTogether(ObjectAnimator.ofFloat(this.mentionContainer, (Property<FrameLayout, Float>) View.ALPHA, 0.0f));
                    this.mentionListAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.72
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animation) {
                            if (ChatActivity.this.mentionListAnimation == null || !ChatActivity.this.mentionListAnimation.equals(animation)) {
                                return;
                            }
                            ChatActivity.this.mentionContainer.setVisibility(4);
                            ChatActivity.this.mentionListAnimation = null;
                            ChatActivity.this.updateMessageListAccessibilityVisibility();
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationCancel(Animator animation) {
                            if (ChatActivity.this.mentionListAnimation == null || !ChatActivity.this.mentionListAnimation.equals(animation)) {
                                return;
                            }
                            ChatActivity.this.mentionListAnimation = null;
                        }
                    });
                    this.mentionListAnimation.setDuration(200L);
                    this.mentionListAnimation.start();
                    return;
                }
                return;
            }
            if (this.mentionContainer.getVisibility() == 4 || this.mentionContainer.getTag() != null) {
                AnimatorSet animatorSet3 = this.mentionListAnimation;
                if (animatorSet3 != null) {
                    animatorSet3.cancel();
                }
                this.mentionContainer.setTag(null);
                this.mentionContainer.setVisibility(0);
                updateMessageListAccessibilityVisibility();
                AnimatorSet animatorSet4 = new AnimatorSet();
                this.mentionListAnimation = animatorSet4;
                animatorSet4.playTogether(ObjectAnimator.ofFloat(this.mentionContainer, (Property<FrameLayout, Float>) View.ALPHA, 0.0f, 1.0f));
                this.mentionListAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.73
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.mentionListAnimation == null || !ChatActivity.this.mentionListAnimation.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.mentionListAnimation = null;
                    }

                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.mentionListAnimation == null || !ChatActivity.this.mentionListAnimation.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.mentionListAnimation = null;
                    }
                });
                this.mentionListAnimation.setDuration(200L);
                this.mentionListAnimation.start();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkAutoDownloadMessages(boolean scrollUp) {
        TLRPC$Document document;
        int iCanDownloadMedia;
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView == null) {
            return;
        }
        int childCount = recyclerListView.getChildCount();
        int i = -1;
        int adapterPosition = -1;
        for (int i2 = 0; i2 < childCount; i2++) {
            View childAt = this.chatListView.getChildAt(i2);
            if (childAt instanceof ChatMessageCell) {
                RecyclerView.ViewHolder viewHolderFindContainingViewHolder = this.chatListView.findContainingViewHolder(childAt);
                if (viewHolderFindContainingViewHolder != null) {
                    adapterPosition = viewHolderFindContainingViewHolder.getAdapterPosition();
                    if (i == -1) {
                        i = adapterPosition;
                    }
                }
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                MessageObject messageObject = chatMessageCell.getMessageObject();
                if (messageObject != null && !messageObject.mediaExists && messageObject.isSent() && !messageObject.loadingCancelled && (document = messageObject.getDocument()) != null && !MessageObject.isStickerDocument(document) && !MessageObject.isAnimatedStickerDocument(document, true) && !MessageObject.isGifDocument(document) && !MessageObject.isRoundVideoDocument(document) && (iCanDownloadMedia = getDownloadController().canDownloadMedia(messageObject.messageOwner)) != 0) {
                    int i3 = 2;
                    if (iCanDownloadMedia == 2) {
                        if (this.currentEncryptedChat == null && !messageObject.shouldEncryptPhotoOrVideo() && messageObject.canStreamVideo()) {
                            getFileLoader().loadFile(document, messageObject, 0, 10);
                        }
                    } else {
                        if (messageObject.isWallpaper() || messageObject.isTheme()) {
                            i3 = 1;
                        } else if (!MessageObject.isVideoDocument(document) || !messageObject.shouldEncryptPhotoOrVideo()) {
                            i3 = 0;
                        }
                        getFileLoader().loadFile(document, messageObject, 0, i3);
                        chatMessageCell.updateButtonState(false, true, false);
                    }
                }
            }
        }
        if (i != -1) {
            if (scrollUp) {
                int iMin = Math.min(adapterPosition + 10, this.chatAdapter.messagesEndRow);
                int size = this.messages.size();
                while (adapterPosition < iMin) {
                    int i4 = adapterPosition - this.chatAdapter.messagesStartRow;
                    if (i4 >= 0 && i4 < size) {
                        checkAutoDownloadMessage(this.messages.get(i4));
                    }
                    adapterPosition++;
                }
            } else {
                int iMax = Math.max(i - 20, this.chatAdapter.messagesStartRow);
                int size2 = this.messages.size();
                for (int i5 = i - 1; i5 >= iMax; i5--) {
                    int i6 = i5 - this.chatAdapter.messagesStartRow;
                    if (i6 >= 0 && i6 < size2) {
                        checkAutoDownloadMessage(this.messages.get(i6));
                    }
                }
            }
        }
        showNoSoundHint();
    }

    private void checkAutoDownloadMessage(MessageObject object) {
        if (object.mediaExists) {
            return;
        }
        int iCanDownloadMedia = getDownloadController().canDownloadMedia(object.messageOwner);
        if (iCanDownloadMedia == 0) {
            return;
        }
        TLRPC$Document document = object.getDocument();
        TLRPC$PhotoSize closestPhotoSizeWithSize = document == null ? FileLoader.getClosestPhotoSizeWithSize(object.photoThumbs, AndroidUtilities.getPhotoSize()) : null;
        if (document == null && closestPhotoSizeWithSize == null) {
            return;
        }
        if (iCanDownloadMedia != 2 && (iCanDownloadMedia != 1 || !object.isVideo())) {
            if (document != null) {
                getFileLoader().loadFile(document, object, 0, (MessageObject.isVideoDocument(document) && object.shouldEncryptPhotoOrVideo()) ? 2 : 0);
                return;
            } else {
                getFileLoader().loadFile(ImageLocation.getForObject(closestPhotoSizeWithSize, object.photoThumbsObject), object, null, 0, object.shouldEncryptPhotoOrVideo() ? 2 : 0);
                return;
            }
        }
        if (document == null || this.currentEncryptedChat != null || object.shouldEncryptPhotoOrVideo() || !object.canStreamVideo()) {
            return;
        }
        getFileLoader().loadFile(document, object, 0, 10);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showFloatingDateView(boolean scroll) {
        ChatActionCell chatActionCell = this.floatingDateView;
        if (chatActionCell == null) {
            return;
        }
        if (chatActionCell.getTag() == null) {
            AnimatorSet animatorSet = this.floatingDateAnimation;
            if (animatorSet != null) {
                animatorSet.cancel();
            }
            this.floatingDateView.setTag(1);
            AnimatorSet animatorSet2 = new AnimatorSet();
            this.floatingDateAnimation = animatorSet2;
            animatorSet2.setDuration(150L);
            this.floatingDateAnimation.playTogether(ObjectAnimator.ofFloat(this.floatingDateView, (Property<ChatActionCell, Float>) View.ALPHA, 1.0f));
            this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.74
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animation) {
                    if (animation.equals(ChatActivity.this.floatingDateAnimation)) {
                        ChatActivity.this.floatingDateAnimation = null;
                    }
                }
            });
            this.floatingDateAnimation.start();
        }
        if (scroll) {
            return;
        }
        invalidateMessagesVisiblePart();
        this.hideDateDelay = 1000;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideFloatingDateView(boolean animated) {
        if (this.floatingDateView.getTag() == null || this.currentFloatingDateOnScreen) {
            return;
        }
        if (!this.scrollingFloatingDate || this.currentFloatingTopIsNotMessage) {
            this.floatingDateView.setTag(null);
            if (animated) {
                AnimatorSet animatorSet = new AnimatorSet();
                this.floatingDateAnimation = animatorSet;
                animatorSet.setDuration(150L);
                this.floatingDateAnimation.playTogether(ObjectAnimator.ofFloat(this.floatingDateView, (Property<ChatActionCell, Float>) View.ALPHA, 0.0f));
                this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.75
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        if (animation.equals(ChatActivity.this.floatingDateAnimation)) {
                            ChatActivity.this.floatingDateAnimation = null;
                        }
                    }
                });
                this.floatingDateAnimation.setStartDelay(this.hideDateDelay);
                this.floatingDateAnimation.start();
            } else {
                AnimatorSet animatorSet2 = this.floatingDateAnimation;
                if (animatorSet2 != null) {
                    animatorSet2.cancel();
                    this.floatingDateAnimation = null;
                }
                this.floatingDateView.setAlpha(0.0f);
            }
            this.hideDateDelay = 500;
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected void onRemoveFromParent() throws InterruptedException, IOException {
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (playingMessageObject != null && playingMessageObject.isVideo()) {
            MediaController.getInstance().cleanupPlayer(true, true);
        } else {
            MediaController.getInstance().setTextureView(this.videoTextureView, null, null, false);
        }
    }

    protected void setIgnoreAttachOnPause(boolean value) {
        this.ignoreAttachOnPause = value;
    }

    public ChatActivityEnterView getChatActivityEnterViewForStickers() {
        TLRPC$Chat tLRPC$Chat;
        if (this.bottomOverlayChat.getVisibility() == 0 || !((tLRPC$Chat = this.currentChat) == null || ChatObject.canSendStickers(tLRPC$Chat))) {
            return null;
        }
        return this.chatActivityEnterView;
    }

    public ChatActivityEnterView getChatActivityEnterView() {
        return this.chatActivityEnterView;
    }

    public boolean isKeyboardVisible() {
        return this.contentView.getKeyboardHeight() > AndroidUtilities.dp(20.0f);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkScrollForLoad(boolean scroll) {
        GridLayoutManagerFixed gridLayoutManagerFixed = this.chatLayoutManager;
        if (gridLayoutManagerFixed == null || this.paused) {
            return;
        }
        int iFindFirstVisibleItemPosition = gridLayoutManagerFixed.findFirstVisibleItemPosition();
        int iAbs = iFindFirstVisibleItemPosition == -1 ? 0 : Math.abs(this.chatLayoutManager.findLastVisibleItemPosition() - iFindFirstVisibleItemPosition) + 1;
        if ((this.chatAdapter.getItemCount() - iFindFirstVisibleItemPosition) - iAbs <= (scroll ? 25 : 5) && !this.loading) {
            boolean[] zArr = this.endReached;
            if (!zArr[0]) {
                this.loading = true;
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                if (this.messagesByDays.size() != 0) {
                    MessagesController messagesController = getMessagesController();
                    long j = this.dialog_id;
                    long j2 = this.mergeDialogId;
                    int i = this.maxMessageId[0];
                    boolean z = !this.cacheEndReached[0];
                    int i2 = this.minDate[0];
                    int i3 = this.classGuid;
                    int i4 = this.chatMode;
                    int i5 = this.threadMessageId;
                    int i6 = this.replyMaxReadId;
                    int i7 = this.lastLoadIndex;
                    this.lastLoadIndex = i7 + 1;
                    messagesController.loadMessages(j, j2, false, 50, i, 0, z, i2, i3, 0, 0, i4, i5, i6, i7);
                } else {
                    MessagesController messagesController2 = getMessagesController();
                    long j3 = this.dialog_id;
                    long j4 = this.mergeDialogId;
                    boolean z2 = !this.cacheEndReached[0];
                    int i8 = this.minDate[0];
                    int i9 = this.classGuid;
                    int i10 = this.chatMode;
                    int i11 = this.threadMessageId;
                    int i12 = this.replyMaxReadId;
                    int i13 = this.lastLoadIndex;
                    this.lastLoadIndex = i13 + 1;
                    messagesController2.loadMessages(j3, j4, false, 50, 0, 0, z2, i8, i9, 0, 0, i10, i11, i12, i13);
                }
            } else if (this.mergeDialogId != 0 && !zArr[1]) {
                this.loading = true;
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                MessagesController messagesController3 = getMessagesController();
                long j5 = this.mergeDialogId;
                int i14 = this.maxMessageId[1];
                boolean z3 = !this.cacheEndReached[1];
                int i15 = this.minDate[1];
                int i16 = this.classGuid;
                int i17 = this.chatMode;
                int i18 = this.threadMessageId;
                int i19 = this.replyMaxReadId;
                int i20 = this.lastLoadIndex;
                this.lastLoadIndex = i20 + 1;
                messagesController3.loadMessages(j5, 0L, false, 50, i14, 0, z3, i15, i16, 0, 0, i17, i18, i19, i20);
            }
        }
        if (iAbs <= 0 || this.loadingForward || iFindFirstVisibleItemPosition > 10) {
            return;
        }
        if (this.mergeDialogId != 0 && !this.forwardEndReached[1]) {
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            MessagesController messagesController4 = getMessagesController();
            long j6 = this.mergeDialogId;
            int i21 = this.minMessageId[1];
            int i22 = this.maxDate[1];
            int i23 = this.classGuid;
            int i24 = this.chatMode;
            int i25 = this.threadMessageId;
            int i26 = this.replyMaxReadId;
            int i27 = this.lastLoadIndex;
            this.lastLoadIndex = i27 + 1;
            messagesController4.loadMessages(j6, 0L, false, 50, i21, 0, true, i22, i23, 1, 0, i24, i25, i26, i27);
            this.loadingForward = true;
            return;
        }
        if (this.forwardEndReached[0]) {
            return;
        }
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        MessagesController messagesController5 = getMessagesController();
        long j7 = this.dialog_id;
        long j8 = this.mergeDialogId;
        int i28 = this.minMessageId[0];
        int i29 = this.maxDate[0];
        int i30 = this.classGuid;
        int i31 = this.chatMode;
        int i32 = this.threadMessageId;
        int i33 = this.replyMaxReadId;
        int i34 = this.lastLoadIndex;
        this.lastLoadIndex = i34 + 1;
        messagesController5.loadMessages(j7, j8, false, 50, i28, 0, true, i29, i30, 1, 0, i31, i32, i33, i34);
        this.loadingForward = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void processSelectedAttach(int which) {
        TLRPC$TL_chatBannedRights tLRPC$TL_chatBannedRights;
        if (which == 0) {
            int i = Build.VERSION.SDK_INT;
            if (i >= 23 && getParentActivity().checkSelfPermission("android.permission.CAMERA") != 0) {
                getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 19);
                return;
            }
            try {
                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                File fileGeneratePicturePath = AndroidUtilities.generatePicturePath();
                if (fileGeneratePicturePath != null) {
                    if (i >= 24) {
                        intent.putExtra("output", FileProvider.getUriForFile(getParentActivity(), "ir.eitaa.messenger.provider", fileGeneratePicturePath));
                        intent.addFlags(2);
                        intent.addFlags(1);
                    } else {
                        intent.putExtra("output", Uri.fromFile(fileGeneratePicturePath));
                    }
                    this.currentPicturePath = fileGeneratePicturePath.getAbsolutePath();
                }
                startActivityForResult(intent, 0);
                return;
            } catch (Exception e) {
                FileLog.e(e);
                return;
            }
        }
        if (which == 1) {
            if (Build.VERSION.SDK_INT >= 23 && getParentActivity().checkSelfPermission("android.permission.READ_EXTERNAL_STORAGE") != 0) {
                try {
                    getParentActivity().requestPermissions(new String[]{"android.permission.READ_EXTERNAL_STORAGE"}, 4);
                    return;
                } catch (Throwable unused) {
                    return;
                }
            }
            PhotoAlbumPickerActivity photoAlbumPickerActivity = new PhotoAlbumPickerActivity(PhotoAlbumPickerActivity.SELECT_TYPE_ALL, (ChatObject.isChannel(this.currentChat) && (tLRPC$TL_chatBannedRights = this.currentChat.banned_rights) != null && tLRPC$TL_chatBannedRights.send_gifs) ? false : true, true, this);
            TLRPC$Chat tLRPC$Chat = this.currentChat;
            if (tLRPC$Chat != null && !ChatObject.hasAdminRights(tLRPC$Chat) && this.currentChat.slowmode_enabled) {
                photoAlbumPickerActivity.setMaxSelectedPhotos(10, true);
            } else {
                MessageObject messageObject = this.editingMessageObject;
                photoAlbumPickerActivity.setMaxSelectedPhotos(messageObject != null ? 1 : 0, messageObject == null);
            }
            photoAlbumPickerActivity.setDelegate(new PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate() { // from class: ir.eitaa.ui.ChatActivity.76
                @Override // ir.eitaa.ui.PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate
                public void didSelectPhotos(ArrayList<SendMessagesHelper.SendingMediaInfo> photos, boolean notify, int scheduleDate) {
                }

                @Override // ir.eitaa.ui.PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate
                public void startPhotoSelectActivity() {
                    try {
                        Intent intent2 = new Intent();
                        intent2.setType("video/*");
                        intent2.setAction("android.intent.action.GET_CONTENT");
                        intent2.putExtra("android.intent.extra.sizeLimit", FileLoader.MAX_FILE_SIZE);
                        Intent intent3 = new Intent("android.intent.action.PICK");
                        intent3.setType("image/*");
                        Intent intentCreateChooser = Intent.createChooser(intent3, null);
                        intentCreateChooser.putExtra("android.intent.extra.INITIAL_INTENTS", new Intent[]{intent2});
                        ChatActivity.this.startActivityForResult(intentCreateChooser, 1);
                    } catch (Exception e2) {
                        FileLog.e(e2);
                    }
                }
            });
            presentFragment(photoAlbumPickerActivity);
            return;
        }
        if (which == 2) {
            int i2 = Build.VERSION.SDK_INT;
            if (i2 >= 23 && getParentActivity().checkSelfPermission("android.permission.CAMERA") != 0) {
                try {
                    getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 20);
                    return;
                } catch (Throwable unused2) {
                    return;
                }
            }
            try {
                Intent intent2 = new Intent("android.media.action.VIDEO_CAPTURE");
                File fileGenerateVideoPath = AndroidUtilities.generateVideoPath();
                if (fileGenerateVideoPath != null) {
                    if (i2 >= 24) {
                        intent2.putExtra("output", FileProvider.getUriForFile(getParentActivity(), "ir.eitaa.messenger.provider", fileGenerateVideoPath));
                        intent2.addFlags(2);
                        intent2.addFlags(1);
                    } else if (i2 >= 18) {
                        intent2.putExtra("output", Uri.fromFile(fileGenerateVideoPath));
                    }
                    intent2.putExtra("android.intent.extra.sizeLimit", FileLoader.MAX_FILE_SIZE);
                    this.currentPicturePath = fileGenerateVideoPath.getAbsolutePath();
                }
                startActivityForResult(intent2, 2);
                return;
            } catch (Exception e2) {
                FileLog.e(e2);
                return;
            }
        }
        if (which == 10) {
            long j = MessagesController.getInstance(this.currentAccount).liveStreamId;
            long j2 = MessagesController.getInstance(this.currentAccount).liveStreamAccessHash;
            final long j3 = MessagesController.getInstance(this.currentAccount).liveDialogId;
            final int i3 = MessagesController.getInstance(this.currentAccount).liveDialogMsgId;
            if (j3 != 0) {
                final AlertDialog alertDialog = new AlertDialog(getParentActivity(), 1);
                alertDialog.setMessage(LocaleController.getString("Loading", R.string.Loading));
                alertDialog.setCanceledOnTouchOutside(false);
                alertDialog.setCancelable(false);
                TLRPC$TL_Live_getMedia tLRPC$TL_Live_getMedia = new TLRPC$TL_Live_getMedia();
                tLRPC$TL_Live_getMedia.id = j;
                tLRPC$TL_Live_getMedia.access_hash = j2;
                tLRPC$TL_Live_getMedia.flags = 0;
                final int iSendRequest = ConnectionsManager.getInstance(this.currentAccount).sendRequest(tLRPC$TL_Live_getMedia, new RequestDelegate() { // from class: ir.eitaa.ui.ChatActivity.77
                    @Override // ir.eitaa.tgnet.RequestDelegate
                    public void run(TLObject response, TLRPC$TL_error error) {
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.ChatActivity.77.1
                            @Override // java.lang.Runnable
                            public void run() {
                                try {
                                    alertDialog.dismiss();
                                } catch (Exception e3) {
                                    FileLog.e(e3);
                                }
                            }
                        });
                        if (error == null) {
                            if (!((TLRPC$TL_messageMediaLiveStream) response).state.isBroadCasting) {
                                MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearLiveDialogId();
                                LiveHelper.startLive(ChatActivity.this.getParentActivity(), ChatActivity.this.dialog_id, 0);
                            } else {
                                AndroidUtilities.runOnUIThread(new AnonymousClass2());
                            }
                        }
                    }

                    /* renamed from: ir.eitaa.ui.ChatActivity$77$2, reason: invalid class name */
                    class AnonymousClass2 implements Runnable {
                        AnonymousClass2() {
                        }

                        @Override // java.lang.Runnable
                        public void run() {
                            AlertDialog.Builder builder = new AlertDialog.Builder(ChatActivity.this.getParentActivity());
                            builder.setTitle(LocaleController.getString("ChatLiveStream", R.string.ChatLiveStream));
                            builder.setMessage(LocaleController.getString("LiveStreamUnfinished", R.string.LiveStreamUnfinished));
                            builder.setNegativeButton(LocaleController.getString("OK", R.string.OK), null);
                            String string = LocaleController.getString("LiveGoToMessage", R.string.LiveGoToMessage);
                            AnonymousClass77 anonymousClass77 = AnonymousClass77.this;
                            final long j = j3;
                            final int i = i3;
                            builder.setPositiveButton(string, new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$77$2$b2bAeu6aeIYoF-io55qtaLkYOiA
                                @Override // android.content.DialogInterface.OnClickListener
                                public final void onClick(DialogInterface dialogInterface, int i2) {
                                    this.f$0.lambda$run$0$ChatActivity$77$2(j, i, dialogInterface, i2);
                                }
                            });
                            ChatActivity.this.showDialog(builder.create());
                        }

                        /* JADX INFO: Access modifiers changed from: private */
                        /* renamed from: lambda$run$0, reason: merged with bridge method [inline-methods] */
                        public /* synthetic */ void lambda$run$0$ChatActivity$77$2(long j, int i, DialogInterface dialogInterface, int i2) {
                            dialogInterface.dismiss();
                            Bundle bundle = new Bundle();
                            if (j > 0) {
                                bundle.putInt("user_id", (int) j);
                            } else {
                                bundle.putInt("chat_id", (int) (-j));
                            }
                            bundle.putInt("message_id", i);
                            ChatActivity.this.presentFragment(new ChatActivity(bundle));
                        }
                    }
                });
                alertDialog.setButton(-2, LocaleController.getString("Cancel", R.string.Cancel), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.ChatActivity.78
                    @Override // android.content.DialogInterface.OnClickListener
                    public void onClick(DialogInterface dialog, int which2) {
                        ConnectionsManager.getInstance(((BaseFragment) ChatActivity.this).currentAccount).cancelRequest(iSendRequest, true);
                        try {
                            dialog.dismiss();
                        } catch (Exception e3) {
                            FileLog.e(e3);
                        }
                    }
                });
                try {
                    alertDialog.show();
                } catch (Exception unused3) {
                }
            } else if (LiveVideoViewer.getPipInstance() != null || PhotoViewer.getPipInstance() != null) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity());
                builder.setTitle(LocaleController.getString("ChatLiveStream", R.string.ChatLiveStream));
                builder.setMessage("        ");
                builder.setNegativeButton(LocaleController.getString("OK", R.string.OK), null);
                showDialog(builder.create());
            } else if (Build.VERSION.SDK_INT < 18) {
                AlertDialog.Builder builder2 = new AlertDialog.Builder(getParentActivity());
                builder2.setTitle(LocaleController.getString("ChatLiveStream", R.string.ChatLiveStream));
                builder2.setMessage(LocaleController.getString("LiveStreamUnsupportedDevice", R.string.LiveStreamUnsupportedDevice));
                builder2.setNegativeButton(LocaleController.getString("OK", R.string.OK), null);
                showDialog(builder2.create());
            } else {
                LiveHelper.startLive(getParentActivity(), this.dialog_id, 0);
            }
            hideFieldPanel(false);
        }
    }

    public boolean allowSendGifs() {
        TLRPC$TL_chatBannedRights tLRPC$TL_chatBannedRights;
        return (ChatObject.isChannel(this.currentChat) && (tLRPC$TL_chatBannedRights = this.currentChat.banned_rights) != null && tLRPC$TL_chatBannedRights.send_gifs) ? false : true;
    }

    public void openPollCreate(Boolean quiz) {
        PollCreateActivity pollCreateActivity = new PollCreateActivity(this, quiz);
        pollCreateActivity.setDelegate(new PollCreateActivity.PollCreateActivityDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$6Uwc4hfFMxnJl_bUyP4SPGwcNas
            @Override // ir.eitaa.ui.PollCreateActivity.PollCreateActivityDelegate
            public final void sendPoll(TLRPC$TL_messageMediaPoll tLRPC$TL_messageMediaPoll, HashMap map, boolean z, int i) {
                this.f$0.lambda$openPollCreate$69$ChatActivity(tLRPC$TL_messageMediaPoll, map, z, i);
            }
        });
        presentFragment(pollCreateActivity);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openPollCreate$69, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openPollCreate$69$ChatActivity(TLRPC$TL_messageMediaPoll tLRPC$TL_messageMediaPoll, HashMap map, boolean z, int i) {
        getSendMessagesHelper().sendMessage(tLRPC$TL_messageMediaPoll, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC$ReplyMarkup) null, (HashMap<String, String>) map, z, i);
        afterMessageSend();
    }

    @Override // ir.eitaa.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void didSelectFiles(ArrayList<String> files, String caption, ArrayList<MessageObject> fmessages, boolean notify, int scheduleDate) {
        String str;
        fillEditingMediaWithCaption(caption, null);
        if (fmessages.isEmpty() || TextUtils.isEmpty(caption)) {
            str = caption;
        } else {
            SendMessagesHelper.getInstance(this.currentAccount).sendMessage(caption, this.dialog_id, null, null, null, true, null, null, null, true, 0, null);
            str = null;
        }
        getSendMessagesHelper().sendMessage(fmessages, this.dialog_id, false, false, true, 0);
        SendMessagesHelper.prepareSendingDocuments(getAccountInstance(), files, files, null, str, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.editingMessageObject, notify, scheduleDate);
        afterMessageSend();
    }

    @Override // ir.eitaa.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void didSelectPhotos(ArrayList<SendMessagesHelper.SendingMediaInfo> photos, boolean notify, int scheduleDate) {
        fillEditingMediaWithCaption(photos.get(0).caption, photos.get(0).entities);
        SendMessagesHelper.prepareSendingMedia(getAccountInstance(), photos, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, true, false, this.editingMessageObject, notify, scheduleDate);
        afterMessageSend();
        if (scheduleDate != 0) {
            if (this.scheduledMessagesCount == -1) {
                this.scheduledMessagesCount = 0;
            }
            this.scheduledMessagesCount += photos.size();
            updateScheduledInterface(true);
        }
    }

    @Override // ir.eitaa.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void startDocumentSelectActivity() {
        try {
            Intent intent = new Intent("android.intent.action.GET_CONTENT");
            if (Build.VERSION.SDK_INT >= 18) {
                intent.putExtra("android.intent.extra.ALLOW_MULTIPLE", true);
            }
            intent.setType("*/*");
            startActivityForResult(intent, 21);
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean dismissDialogOnPause(Dialog dialog) {
        return (dialog == this.chatAttachAlert || dialog == this.closeChatDialog || !super.dismissDialogOnPause(dialog)) ? false : true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:38:0x007e A[ADDED_TO_REGION] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void searchLinks(final java.lang.CharSequence r7, final boolean r8) {
        /*
            r6 = this;
            ir.eitaa.tgnet.TLRPC$EncryptedChat r0 = r6.currentEncryptedChat
            if (r0 == 0) goto Lc
            ir.eitaa.messenger.MessagesController r0 = r6.getMessagesController()
            int r0 = r0.secretWebpagePreview
            if (r0 == 0) goto L16
        Lc:
            ir.eitaa.messenger.MessageObject r0 = r6.editingMessageObject
            if (r0 == 0) goto L17
            boolean r0 = r0.isWebpage()
            if (r0 != 0) goto L17
        L16:
            return
        L17:
            if (r8 == 0) goto L9f
            ir.eitaa.tgnet.TLRPC$WebPage r0 = r6.foundWebPage
            if (r0 == 0) goto L9f
            java.lang.String r0 = r0.url
            r1 = 0
            if (r0 == 0) goto L95
            int r0 = android.text.TextUtils.indexOf(r7, r0)
            r2 = 1
            r3 = -1
            if (r0 != r3) goto L5c
            ir.eitaa.tgnet.TLRPC$WebPage r4 = r6.foundWebPage
            java.lang.String r4 = r4.display_url
            if (r4 == 0) goto L59
            int r0 = android.text.TextUtils.indexOf(r7, r4)
            if (r0 == r3) goto L46
            ir.eitaa.tgnet.TLRPC$WebPage r4 = r6.foundWebPage
            java.lang.String r4 = r4.display_url
            int r4 = r4.length()
            int r4 = r4 + r0
            int r5 = r7.length()
            if (r4 != r5) goto L46
            goto L47
        L46:
            r2 = 0
        L47:
            if (r0 == r3) goto L5a
            if (r2 != 0) goto L5a
            ir.eitaa.tgnet.TLRPC$WebPage r4 = r6.foundWebPage
            java.lang.String r4 = r4.display_url
            int r4 = r4.length()
            int r4 = r4 + r0
            char r4 = r7.charAt(r4)
            goto L7c
        L59:
            r2 = 0
        L5a:
            r4 = 0
            goto L7c
        L5c:
            ir.eitaa.tgnet.TLRPC$WebPage r4 = r6.foundWebPage
            java.lang.String r4 = r4.url
            int r4 = r4.length()
            int r4 = r4 + r0
            int r5 = r7.length()
            if (r4 != r5) goto L6c
            goto L6d
        L6c:
            r2 = 0
        L6d:
            if (r2 != 0) goto L5a
            ir.eitaa.tgnet.TLRPC$WebPage r4 = r6.foundWebPage
            java.lang.String r4 = r4.url
            int r4 = r4.length()
            int r4 = r4 + r0
            char r4 = r7.charAt(r4)
        L7c:
            if (r0 == r3) goto L95
            if (r2 != 0) goto L94
            r0 = 32
            if (r4 == r0) goto L94
            r0 = 44
            if (r4 == r0) goto L94
            r0 = 46
            if (r4 == r0) goto L94
            r0 = 33
            if (r4 == r0) goto L94
            r0 = 47
            if (r4 != r0) goto L95
        L94:
            return
        L95:
            r0 = 0
            r6.pendingLinkSearchString = r0
            r6.foundUrls = r0
            ir.eitaa.tgnet.TLRPC$WebPage r0 = r6.foundWebPage
            r6.showFieldPanelForWebPage(r1, r0, r1)
        L9f:
            ir.eitaa.messenger.MessagesController r0 = r6.getMessagesController()
            ir.eitaa.messenger.DispatchQueue r1 = ir.eitaa.messenger.Utilities.searchQueue
            ir.eitaa.ui.-$$Lambda$ChatActivity$CmNO9zQx40ojRVEkTpfC8ZCst0c r2 = new ir.eitaa.ui.-$$Lambda$ChatActivity$CmNO9zQx40ojRVEkTpfC8ZCst0c
            r2.<init>()
            r1.postRunnable(r2)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.searchLinks(java.lang.CharSequence, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$76, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$76$ChatActivity(final CharSequence charSequence, final MessagesController messagesController, final boolean z) {
        CharSequence charSequenceJoin;
        URLSpanReplacement[] uRLSpanReplacementArr;
        boolean z2 = true;
        if (this.linkSearchRequestId != 0) {
            getConnectionsManager().cancelRequest(this.linkSearchRequestId, true);
            this.linkSearchRequestId = 0;
        }
        ArrayList<CharSequence> arrayList = null;
        try {
            Matcher matcher = AndroidUtilities.WEB_URL.matcher(charSequence);
            while (matcher.find()) {
                if (matcher.start() <= 0 || charSequence.charAt(matcher.start() - 1) != '@') {
                    if (arrayList == null) {
                        arrayList = new ArrayList<>();
                    }
                    arrayList.add(charSequence.subSequence(matcher.start(), matcher.end()));
                }
            }
            if ((charSequence instanceof Spannable) && (uRLSpanReplacementArr = (URLSpanReplacement[]) ((Spannable) charSequence).getSpans(0, charSequence.length(), URLSpanReplacement.class)) != null && uRLSpanReplacementArr.length > 0) {
                if (arrayList == null) {
                    arrayList = new ArrayList<>();
                }
                for (URLSpanReplacement uRLSpanReplacement : uRLSpanReplacementArr) {
                    arrayList.add(uRLSpanReplacement.getURL());
                }
            }
            if (arrayList != null && this.foundUrls != null && arrayList.size() == this.foundUrls.size()) {
                for (int i = 0; i < arrayList.size(); i++) {
                    if (!TextUtils.equals(arrayList.get(i), this.foundUrls.get(i))) {
                        z2 = false;
                    }
                }
                if (z2) {
                    return;
                }
            }
            this.foundUrls = arrayList;
        } catch (Exception e) {
            FileLog.e(e);
            String lowerCase = charSequence.toString().toLowerCase();
            if (charSequence.length() < 13 || !(lowerCase.contains("http://") || lowerCase.contains("https://"))) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$t4qWbUEBD5GnkPw19Fg0tFkmTAQ
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$searchLinks$71$ChatActivity();
                    }
                });
                return;
            }
            charSequenceJoin = charSequence;
        }
        if (arrayList == null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$gO0EqgaTKmWT-NS7JZX5tMl3RNk
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$searchLinks$70$ChatActivity();
                }
            });
            return;
        }
        charSequenceJoin = TextUtils.join(" ", arrayList);
        if (this.currentEncryptedChat != null && messagesController.secretWebpagePreview == 2) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Ez5vTvSXq4YygK4FYih8YBG2jQE
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$searchLinks$73$ChatActivity(messagesController, charSequence, z);
                }
            });
            return;
        }
        final TLRPC$TL_messages_getWebPagePreview tLRPC$TL_messages_getWebPagePreview = new TLRPC$TL_messages_getWebPagePreview();
        if (charSequenceJoin instanceof String) {
            tLRPC$TL_messages_getWebPagePreview.message = (String) charSequenceJoin;
        } else {
            tLRPC$TL_messages_getWebPagePreview.message = charSequenceJoin.toString();
        }
        this.linkSearchRequestId = getConnectionsManager().sendRequest(tLRPC$TL_messages_getWebPagePreview, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$yTYTfkTvEWaJCAWSVFcYSD6SulI
            @Override // ir.eitaa.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                this.f$0.lambda$searchLinks$75$ChatActivity(tLRPC$TL_messages_getWebPagePreview, tLObject, tLRPC$TL_error);
            }
        });
        getConnectionsManager().bindRequestToGuid(this.linkSearchRequestId, this.classGuid);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$70, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$70$ChatActivity() {
        TLRPC$WebPage tLRPC$WebPage = this.foundWebPage;
        if (tLRPC$WebPage != null) {
            showFieldPanelForWebPage(false, tLRPC$WebPage, false);
            this.foundWebPage = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$71, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$71$ChatActivity() {
        TLRPC$WebPage tLRPC$WebPage = this.foundWebPage;
        if (tLRPC$WebPage != null) {
            showFieldPanelForWebPage(false, tLRPC$WebPage, false);
            this.foundWebPage = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$73, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$73$ChatActivity(final MessagesController messagesController, final CharSequence charSequence, final boolean z) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$jRmvmL_GLy1AjnkZ2gDhiPl1lpc
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$searchLinks$72$ChatActivity(messagesController, charSequence, z, dialogInterface, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
        builder.setMessage(LocaleController.getString("SecretLinkPreviewAlert", R.string.SecretLinkPreviewAlert));
        showDialog(builder.create());
        messagesController.secretWebpagePreview = 0;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", messagesController.secretWebpagePreview).commit();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$72, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$72$ChatActivity(MessagesController messagesController, CharSequence charSequence, boolean z, DialogInterface dialogInterface, int i) {
        messagesController.secretWebpagePreview = 1;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", getMessagesController().secretWebpagePreview).commit();
        this.foundUrls = null;
        searchLinks(charSequence, z);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$75, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$75$ChatActivity(final TLRPC$TL_messages_getWebPagePreview tLRPC$TL_messages_getWebPagePreview, final TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$TX7pVgBYwU4N8dZkOKsdFGE6MuI
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$searchLinks$74$ChatActivity(tLRPC$TL_error, tLObject, tLRPC$TL_messages_getWebPagePreview);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$searchLinks$74, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$searchLinks$74$ChatActivity(TLRPC$TL_error tLRPC$TL_error, TLObject tLObject, TLRPC$TL_messages_getWebPagePreview tLRPC$TL_messages_getWebPagePreview) {
        this.linkSearchRequestId = 0;
        if (tLRPC$TL_error == null) {
            if (tLObject instanceof TLRPC$TL_messageMediaWebPage) {
                TLRPC$WebPage tLRPC$WebPage = ((TLRPC$TL_messageMediaWebPage) tLObject).webpage;
                this.foundWebPage = tLRPC$WebPage;
                if (!(tLRPC$WebPage instanceof TLRPC$TL_webPage) && !(tLRPC$WebPage instanceof TLRPC$TL_webPagePending)) {
                    if (tLRPC$WebPage != null) {
                        showFieldPanelForWebPage(false, tLRPC$WebPage, false);
                        this.foundWebPage = null;
                        return;
                    }
                    return;
                }
                if (tLRPC$WebPage instanceof TLRPC$TL_webPagePending) {
                    this.pendingLinkSearchString = tLRPC$TL_messages_getWebPagePreview.message;
                }
                if (this.currentEncryptedChat != null && (tLRPC$WebPage instanceof TLRPC$TL_webPagePending)) {
                    tLRPC$WebPage.url = tLRPC$TL_messages_getWebPagePreview.message;
                }
                showFieldPanelForWebPage(true, tLRPC$WebPage, false);
                return;
            }
            TLRPC$WebPage tLRPC$WebPage2 = this.foundWebPage;
            if (tLRPC$WebPage2 != null) {
                showFieldPanelForWebPage(false, tLRPC$WebPage2, false);
                this.foundWebPage = null;
            }
        }
    }

    private void forwardMessages(ArrayList<MessageObject> arrayList, boolean fromMyName, boolean hideCaption, boolean notify, int scheduleDate) {
        if (arrayList == null || arrayList.isEmpty()) {
            return;
        }
        if ((scheduleDate != 0) == (this.chatMode == 1)) {
            this.waitingForSendingMessageLoad = true;
        }
        AlertsCreator.showSendMediaAlert(getSendMessagesHelper().sendMessage(arrayList, this.dialog_id, fromMyName, hideCaption, notify, scheduleDate), this, this.themeDelegate);
    }

    public boolean shouldShowImport() {
        return this.openImport;
    }

    public void setOpenImport() {
        this.openImport = true;
    }

    private void checkBotKeyboard() {
        MessageObject messageObject;
        if (this.chatActivityEnterView == null || (messageObject = this.botButtons) == null || this.userBlocked) {
            return;
        }
        if (messageObject.messageOwner.reply_markup instanceof TLRPC$TL_replyKeyboardForceReply) {
            if (MessagesController.getMainSettings(this.currentAccount).getInt("answered_" + this.dialog_id, 0) != this.botButtons.getId()) {
                if (this.replyingMessageObject == null || this.chatActivityEnterView.getFieldText() == null) {
                    MessageObject messageObject2 = this.botButtons;
                    this.botReplyButtons = messageObject2;
                    this.chatActivityEnterView.setButtons(messageObject2);
                    showFieldPanelForReply(this.botButtons);
                    return;
                }
                return;
            }
            return;
        }
        MessageObject messageObject3 = this.replyingMessageObject;
        if (messageObject3 != null && this.botReplyButtons == messageObject3) {
            this.botReplyButtons = null;
            hideFieldPanel(true);
        }
        this.chatActivityEnterView.setButtons(this.botButtons);
    }

    public void hideFieldPanel(boolean animated) {
        showFieldPanel(false, null, null, null, null, true, 0, false, animated);
    }

    public void hideFieldPanel(boolean notify, int scheduleDate, boolean animated) {
        showFieldPanel(false, null, null, null, null, notify, scheduleDate, false, animated);
    }

    public void showFieldPanelForWebPage(boolean show, TLRPC$WebPage webPage, boolean cancel) {
        showFieldPanel(show, null, null, null, webPage, true, 0, cancel, true);
    }

    public void showFieldPanelForForward(boolean show, ArrayList<MessageObject> messageObjectsToForward) {
        showFieldPanel(show, null, null, messageObjectsToForward, null, true, 0, false, true);
    }

    public void showFieldPanelForReply(MessageObject messageObjectToReply) {
        showFieldPanel(true, messageObjectToReply, null, null, null, true, 0, false, true);
    }

    public void showFieldPanelForEdit(boolean show, MessageObject messageObjectToEdit) {
        showFieldPanel(show, null, messageObjectToEdit, null, null, true, 0, false, true);
    }

    /* JADX WARN: Removed duplicated region for block: B:320:0x072f  */
    /* JADX WARN: Removed duplicated region for block: B:341:0x07af  */
    /* JADX WARN: Removed duplicated region for block: B:343:0x07b6  */
    /* JADX WARN: Removed duplicated region for block: B:361:0x082a  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void showFieldPanel(boolean r28, ir.eitaa.messenger.MessageObject r29, ir.eitaa.messenger.MessageObject r30, java.util.ArrayList<ir.eitaa.messenger.MessageObject> r31, ir.eitaa.tgnet.TLRPC$WebPage r32, boolean r33, int r34, boolean r35, boolean r36) {
        /*
            Method dump skipped, instructions count: 2403
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.showFieldPanel(boolean, ir.eitaa.messenger.MessageObject, ir.eitaa.messenger.MessageObject, java.util.ArrayList, ir.eitaa.tgnet.TLRPC$WebPage, boolean, int, boolean, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showFieldPanel$77, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showFieldPanel$77$ChatActivity() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.openKeyboard();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showFieldPanel$78, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showFieldPanel$78$ChatActivity() {
        this.showTapForForwardingOptionsHit = !this.showTapForForwardingOptionsHit;
        this.replyObjectTextView.setPivotX(0.0f);
        this.replyObjectHintTextView.setPivotX(0.0f);
        if (this.showTapForForwardingOptionsHit) {
            this.replyObjectTextView.animate().alpha(0.0f).scaleX(0.98f).scaleY(0.98f).setDuration(150L).start();
            this.replyObjectHintTextView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
        } else {
            this.replyObjectTextView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
            this.replyObjectHintTextView.animate().alpha(0.0f).scaleX(0.98f).scaleY(0.98f).setDuration(150L).start();
        }
        AndroidUtilities.runOnUIThread(this.tapForForwardingOptionsHitRunnable, 6000L);
    }

    private void moveScrollToLastMessage() {
        if (this.chatListView == null || this.messages.isEmpty() || this.pinchToZoomHelper.isInOverlayMode()) {
            return;
        }
        this.chatLayoutManager.scrollToPositionWithOffset(0, 0);
        this.chatListView.stopScroll();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Runnable sendSecretMessageRead(final MessageObject messageObject, boolean readNow) {
        int i;
        if (messageObject == null || messageObject.isOut() || !messageObject.isSecretMedia()) {
            return null;
        }
        TLRPC$Message tLRPC$Message = messageObject.messageOwner;
        if (tLRPC$Message.destroyTime != 0 || (i = tLRPC$Message.ttl) <= 0) {
            return null;
        }
        tLRPC$Message.destroyTime = i + getConnectionsManager().getCurrentTime();
        if (readNow) {
            if (this.currentEncryptedChat != null) {
                MessagesController messagesController = getMessagesController();
                long j = this.dialog_id;
                TLRPC$Message tLRPC$Message2 = messageObject.messageOwner;
                messagesController.markMessageAsRead(j, tLRPC$Message2.random_id, tLRPC$Message2.ttl);
            } else {
                getMessagesController().markMessageAsRead2(this.dialog_id, messageObject.getId(), null, messageObject.messageOwner.ttl, 0L);
            }
            return null;
        }
        return new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$WxLdTbrl0cEErdmOVS6Qq__1RP0
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$sendSecretMessageRead$79$ChatActivity(messageObject);
            }
        };
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$sendSecretMessageRead$79, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$sendSecretMessageRead$79$ChatActivity(MessageObject messageObject) {
        if (this.currentEncryptedChat != null) {
            MessagesController messagesController = getMessagesController();
            long j = this.dialog_id;
            TLRPC$Message tLRPC$Message = messageObject.messageOwner;
            messagesController.markMessageAsRead(j, tLRPC$Message.random_id, tLRPC$Message.ttl);
            return;
        }
        getMessagesController().markMessageAsRead2(this.dialog_id, messageObject.getId(), null, messageObject.messageOwner.ttl, 0L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void clearChatData() {
        this.messages.clear();
        this.messagesByDays.clear();
        this.waitingForLoad.clear();
        this.groupedMessagesMap.clear();
        this.threadMessageAdded = false;
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            showProgressView(chatActivityAdapter.botInfoRow < 0);
        }
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            recyclerListView.setEmptyView(null);
        }
        for (int i = 0; i < 2; i++) {
            this.messagesDict[i].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[i] = Integer.MAX_VALUE;
                this.minMessageId[i] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[i] = Integer.MIN_VALUE;
                this.minMessageId[i] = Integer.MAX_VALUE;
            }
            this.maxDate[i] = Integer.MIN_VALUE;
            this.minDate[i] = 0;
            this.endReached[i] = false;
            this.cacheEndReached[i] = false;
            this.forwardEndReached[i] = true;
        }
        this.first = true;
        this.firstLoading = true;
        this.loading = true;
        this.loadingForward = false;
        this.waitingForReplyMessageLoad = false;
        this.startLoadFromMessageId = 0;
        this.showScrollToMessageError = false;
        this.last_message_id = 0;
        this.unreadMessageObject = null;
        this.createUnreadMessageAfterId = 0;
        this.createUnreadMessageAfterIdLoading = false;
        this.needSelectFromMessageId = false;
        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
        if (chatActivityAdapter2 != null) {
            chatActivityAdapter2.notifyDataSetChanged(false);
        }
    }

    private void scrollToLastMessage() throws Resources.NotFoundException, NumberFormatException {
        if (this.chatListView.isFastScrollAnimationRunning()) {
            return;
        }
        this.forceNextPinnedMessageId = 0;
        this.nextScrollToMessageId = 0;
        this.forceScrollToFirst = false;
        this.chatScrollHelper.setScrollDirection(0);
        if (this.forwardEndReached[0] && this.first_unread_id == 0 && this.startLoadFromMessageId == 0) {
            if (this.chatLayoutManager.findFirstCompletelyVisibleItemPosition() == 0) {
                this.canShowPagedownButton = false;
                updatePagedownButtonVisibility(true);
                removeSelectedMessageHighlight();
                updateVisibleRows();
                return;
            }
            this.chatAdapter.updateRowsSafe();
            this.chatScrollHelperCallback.scrollTo = null;
            this.chatScrollHelper.scrollToPosition(0, 0, true, true);
            return;
        }
        AlertDialog alertDialog = this.progressDialog;
        if (alertDialog != null) {
            alertDialog.dismiss();
        }
        updatePinnedListButton(false);
        AlertDialog alertDialog2 = new AlertDialog(getParentActivity(), 3, this.themeDelegate);
        this.progressDialog = alertDialog2;
        alertDialog2.setOnCancelListener(this.postponedScrollCancelListener);
        this.progressDialog.showDelayed(1000L);
        this.postponedScrollToLastMessageQueryIndex = this.lastLoadIndex;
        this.postponedScrollMessageId = 0;
        this.postponedScrollIsCanceled = false;
        this.waitingForLoad.clear();
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        MessagesController messagesController = getMessagesController();
        long j = this.dialog_id;
        long j2 = this.mergeDialogId;
        int i = this.classGuid;
        int i2 = this.chatMode;
        int i3 = this.threadMessageId;
        int i4 = this.replyMaxReadId;
        int i5 = this.lastLoadIndex;
        this.lastLoadIndex = i5 + 1;
        messagesController.loadMessages(j, j2, false, 30, 0, 0, true, 0, i, 0, 0, i2, i3, i4, i5);
    }

    public void updateTextureViewPosition(boolean needScroll) throws InterruptedException, Resources.NotFoundException, IOException, NumberFormatException {
        boolean z;
        MessageObject playingMessageObject;
        if (this.fragmentView == null || this.paused) {
            return;
        }
        int childCount = this.chatListView.getChildCount();
        int i = 0;
        while (true) {
            if (i >= childCount) {
                z = false;
                break;
            }
            View childAt = this.chatListView.getChildAt(i);
            if (childAt instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                MessageObject messageObject = chatMessageCell.getMessageObject();
                if (this.videoPlayerContainer != null && ((messageObject.isRoundVideo() || messageObject.isVideo()) && MediaController.getInstance().isPlayingMessage(messageObject))) {
                    ImageReceiver photoImage = chatMessageCell.getPhotoImage();
                    this.videoPlayerContainer.setTranslationX(photoImage.getImageX() + chatMessageCell.getX());
                    this.videoPlayerContainer.setTranslationY(((chatMessageCell.getY() + photoImage.getImageY()) + this.chatListView.getY()) - this.videoPlayerContainer.getTop());
                    FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) this.videoPlayerContainer.getLayoutParams();
                    if (messageObject.isRoundVideo()) {
                        this.videoPlayerContainer.setTag(R.id.parent_tag, null);
                        int i2 = layoutParams.width;
                        int i3 = AndroidUtilities.roundPlayingMessageSize;
                        if (i2 != i3 || layoutParams.height != i3) {
                            layoutParams.height = i3;
                            layoutParams.width = i3;
                            this.aspectRatioFrameLayout.setResizeMode(0);
                            this.videoPlayerContainer.setLayoutParams(layoutParams);
                        }
                        float f = (AndroidUtilities.roundPlayingMessageSize + (AndroidUtilities.roundMessageInset * 2)) / AndroidUtilities.roundPlayingMessageSize;
                        float imageWidth = chatMessageCell.getPhotoImage().getImageWidth() / AndroidUtilities.roundPlayingMessageSize;
                        if (this.videoPlayerContainer.getScaleX() != imageWidth) {
                            this.videoPlayerContainer.invalidate();
                            this.fragmentView.invalidate();
                        }
                        this.videoPlayerContainer.setPivotX(0.0f);
                        this.videoPlayerContainer.setPivotY(0.0f);
                        this.videoPlayerContainer.setScaleX(imageWidth);
                        this.videoPlayerContainer.setScaleY(imageWidth);
                        this.videoTextureView.setScaleX(f);
                        this.videoTextureView.setScaleY(f);
                    } else {
                        this.videoPlayerContainer.setTag(R.id.parent_tag, photoImage);
                        if (layoutParams.width != photoImage.getImageWidth() || layoutParams.height != photoImage.getImageHeight()) {
                            this.aspectRatioFrameLayout.setResizeMode(3);
                            layoutParams.width = (int) photoImage.getImageWidth();
                            layoutParams.height = (int) photoImage.getImageHeight();
                            this.videoPlayerContainer.setLayoutParams(layoutParams);
                        }
                        this.videoTextureView.setScaleX(1.0f);
                        this.videoTextureView.setScaleY(1.0f);
                    }
                    this.fragmentView.invalidate();
                    this.videoPlayerContainer.invalidate();
                    z = true;
                }
            }
            i++;
        }
        if (!needScroll || this.videoPlayerContainer == null || (playingMessageObject = MediaController.getInstance().getPlayingMessageObject()) == null || playingMessageObject.eventId != 0) {
            return;
        }
        if (!z) {
            if (this.checkTextureViewPosition && playingMessageObject.isVideo()) {
                MediaController.getInstance().cleanupPlayer(true, true);
                return;
            }
            this.videoPlayerContainer.setTranslationY((-AndroidUtilities.roundPlayingMessageSize) - 100);
            this.fragmentView.invalidate();
            if (playingMessageObject.isRoundVideo() || playingMessageObject.isVideo()) {
                if (this.checkTextureViewPosition || PipRoundVideoView.getInstance() != null) {
                    MediaController.getInstance().setCurrentVideoVisible(false);
                    return;
                } else {
                    scrollToMessageId(playingMessageObject.getId(), 0, false, 0, true, 0);
                    return;
                }
            }
            return;
        }
        MediaController.getInstance().setCurrentVideoVisible(true);
        if (playingMessageObject.isRoundVideo() || this.scrollToVideo) {
            return;
        }
        this.chatListView.invalidate();
    }

    public void invalidateMessagesVisiblePart() {
        this.invalidateMessagesVisiblePart = true;
        View view = this.fragmentView;
        if (view != null) {
            view.invalidate();
        }
    }

    private Integer findClosest(ArrayList<Integer> arrayList, int target, int[] index) {
        if (arrayList.isEmpty()) {
            return 0;
        }
        Integer num = arrayList.get(0);
        if (target >= num.intValue()) {
            index[0] = 0;
            return num;
        }
        int size = arrayList.size();
        int i = size - 1;
        Integer num2 = arrayList.get(i);
        if (target <= num2.intValue()) {
            index[0] = i;
            return num2;
        }
        int i2 = 0;
        int i3 = 0;
        while (i2 < size) {
            i3 = (i2 + size) / 2;
            Integer num3 = arrayList.get(i3);
            if (num3.intValue() == target) {
                index[0] = i3;
                return num3;
            }
            if (target < num3.intValue()) {
                if (i3 > 0) {
                    int i4 = i3 - 1;
                    Integer num4 = arrayList.get(i4);
                    if (target > num4.intValue()) {
                        index[0] = i4;
                        return num4;
                    }
                }
                i2 = i3 + 1;
            } else {
                if (i3 > 0 && target < arrayList.get(i3 - 1).intValue()) {
                    index[0] = i3;
                    return num3;
                }
                size = i3;
            }
        }
        index[0] = i3;
        return arrayList.get(i3);
    }

    public void updateMessagesVisiblePart(boolean inLayout) throws InterruptedException, IOException {
        Integer numValueOf;
        int i;
        int i2;
        char c;
        boolean z;
        Object obj;
        Object obj2;
        MessageObject messageObject;
        int iIndexOf;
        int i3;
        int i4;
        int i5;
        int i6;
        boolean z2;
        int i7;
        MessageObject messageObject2;
        int i8;
        MessageObject messageObject3;
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView == null) {
            return;
        }
        int childCount = recyclerListView.getChildCount();
        int measuredHeight = this.chatListView.getMeasuredHeight();
        boolean z3 = this.threadMessageVisible;
        int i9 = this.currentPinnedMessageId;
        this.threadMessageVisible = this.firstLoading;
        int i10 = this.threadMessageId;
        if (i10 != 0 && this.currentChat != null) {
            numValueOf = Integer.valueOf(this.replyMaxReadId);
        } else {
            numValueOf = (Integer) getMessagesController().dialogs_read_inbox_max.get(Long.valueOf(this.dialog_id));
        }
        if (numValueOf == null) {
            numValueOf = 0;
        }
        int heightWithKeyboard = (this.contentView.getHeightWithKeyboard() - (this.inPreviewMode ? 0 : AndroidUtilities.dp(48.0f))) - this.chatListView.getTop();
        this.pollsToCheck.clear();
        this.livesToCheck.clear();
        float f = this.chatListViewPaddingTop;
        int id = Integer.MIN_VALUE;
        int i11 = ConnectionsManager.DEFAULT_DATACENTER_ID;
        int i12 = ConnectionsManager.DEFAULT_DATACENTER_ID;
        int iMin = ConnectionsManager.DEFAULT_DATACENTER_ID;
        int iMax = Integer.MIN_VALUE;
        int i13 = 0;
        int iMax2 = Integer.MIN_VALUE;
        MessageObject messageObject4 = null;
        View view = null;
        View view2 = null;
        View view3 = null;
        boolean z4 = false;
        while (i13 < childCount) {
            View childAt = this.chatListView.getChildAt(i13);
            int i14 = childCount;
            int y = (int) childAt.getY();
            int i15 = i9;
            float measuredHeight2 = y + childAt.getMeasuredHeight();
            boolean z5 = z3;
            if (measuredHeight2 <= f - this.chatListViewPaddingVisibleOffset || y > this.chatListView.getMeasuredHeight()) {
                i3 = measuredHeight;
                i4 = i13;
                i11 = i11;
                iMax = iMax;
                i12 = i12;
            } else {
                int i16 = y >= 0 ? 0 : -y;
                int measuredHeight3 = childAt.getMeasuredHeight();
                if (measuredHeight3 > measuredHeight) {
                    measuredHeight3 = i16 + measuredHeight;
                }
                i3 = measuredHeight;
                int keyboardHeight = this.contentView.getKeyboardHeight();
                i4 = i13;
                if ((keyboardHeight < AndroidUtilities.dp(20.0f) && this.chatActivityEnterView.isPopupShowing()) || this.chatActivityEnterView.pannelAniamationInProgress()) {
                    keyboardHeight = this.chatActivityEnterView.getEmojiPadding();
                }
                boolean z6 = childAt instanceof ChatMessageCell;
                if (z6) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    i5 = i11;
                    final MessageObject messageObject5 = chatMessageCell.getMessageObject();
                    i6 = iMax;
                    z2 = z6;
                    if (messageObject5.getDialogId() == this.dialog_id && messageObject5.getId() > id) {
                        id = messageObject5.getId();
                        messageObject4 = messageObject5;
                    }
                    chatMessageCell.setVisiblePart(i16, measuredHeight3 - i16, heightWithKeyboard, keyboardHeight, (childAt.getY() + (isKeyboardVisible() ? this.chatListView.getTop() : this.actionBar.getMeasuredHeight())) - this.contentView.getBackgroundTranslationY(), this.contentView.getMeasuredWidth(), this.contentView.getBackgroundSizeY());
                    if (messageObject5.isSponsored()) {
                        if ((childAt.getY() + (isKeyboardVisible() ? this.chatListView.getTop() : this.actionBar.getMeasuredHeight())) - this.contentView.getBackgroundTranslationY() <= heightWithKeyboard - this.bottomOverlayChatText.getHeight()) {
                            markSponsoredAsRead(messageObject5);
                        }
                    }
                    if (!this.threadMessageVisible && (messageObject3 = this.threadMessageObject) != null && messageObject5 == messageObject3 && chatMessageCell.getBottom() > this.chatListViewPaddingTop) {
                        this.threadMessageVisible = true;
                    }
                    if (this.videoPlayerContainer != null && ((messageObject5.isVideo() || messageObject5.isRoundVideo()) && MediaController.getInstance().isPlayingMessage(messageObject5))) {
                        ImageReceiver photoImage = chatMessageCell.getPhotoImage();
                        if (y + photoImage.getImageY2() < 0.0f) {
                            z4 = false;
                        } else {
                            this.videoPlayerContainer.setTranslationX(photoImage.getImageX() + chatMessageCell.getX());
                            this.videoPlayerContainer.setTranslationY(((chatMessageCell.getY() + photoImage.getImageY()) + this.chatListView.getY()) - this.videoPlayerContainer.getTop());
                            this.fragmentView.invalidate();
                            this.videoPlayerContainer.invalidate();
                            z4 = true;
                        }
                    }
                    if (this.startFromVideoTimestamp >= 0 && this.fragmentOpened && !this.chatListView.isFastScrollAnimationRunning() && this.startFromVideoMessageId == messageObject5.getId() && (messageObject5.isVideo() || messageObject5.isRoundVideo() || messageObject5.isVoice() || messageObject5.isMusic())) {
                        messageObject5.forceSeekTo = this.startFromVideoTimestamp / messageObject5.getDuration();
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$bYYG9rVmvuT4GXwg1BWZiv824DU
                            @Override // java.lang.Runnable
                            public final void run() throws InterruptedException, Resources.NotFoundException, IOException {
                                this.f$0.lambda$updateMessagesVisiblePart$80$ChatActivity(messageObject5);
                            }
                        }, 40L);
                        this.startFromVideoTimestamp = -1;
                    }
                    messageObject2 = messageObject5;
                    i7 = i12;
                } else {
                    i5 = i11;
                    i6 = iMax;
                    z2 = z6;
                    if (childAt instanceof ChatActionCell) {
                        ChatActionCell chatActionCell = (ChatActionCell) childAt;
                        messageObject2 = chatActionCell.getMessageObject();
                        if (messageObject2 != null) {
                            i7 = i12;
                            if (messageObject2.getDialogId() == this.dialog_id && messageObject2.getId() > id) {
                                id = Math.max(id, messageObject2.getId());
                            }
                        } else {
                            i7 = i12;
                        }
                        chatActionCell.setVisiblePart((childAt.getY() + (isKeyboardVisible() ? this.chatListView.getTop() : this.actionBar.getMeasuredHeight())) - this.contentView.getBackgroundTranslationY(), this.contentView.getBackgroundSizeY());
                    } else {
                        i7 = i12;
                        if (childAt instanceof BotHelpCell) {
                            childAt.invalidate();
                        }
                        messageObject2 = null;
                    }
                }
                if (this.chatMode == 1 || messageObject2 == null) {
                    iMax = i6;
                } else {
                    int id2 = messageObject2.getId();
                    if ((isThreadChat() || ((messageObject2.isOut() || !messageObject2.isUnread()) && (!messageObject2.messageOwner.from_scheduled || id2 <= numValueOf.intValue()))) && (id2 <= 0 || !isThreadChat() || id2 <= numValueOf.intValue() || id2 <= this.replyMaxReadId)) {
                        iMax = i6;
                    } else {
                        if (id2 > 0) {
                            iMax2 = Math.max(iMax2, messageObject2.getId());
                        }
                        if (id2 < 0 && !isThreadChat()) {
                            iMin = Math.min(iMin, messageObject2.getId());
                        }
                        iMax = Math.max(i6, messageObject2.messageOwner.date);
                    }
                    if (messageObject2.type == 17 && messageObject2.getId() > 0) {
                        this.pollsToCheck.add(messageObject2);
                    }
                }
                if (messageObject2 != null && messageObject2.type == 72) {
                    this.livesToCheck.add(messageObject2);
                }
                if (measuredHeight2 <= f) {
                    if ((childAt instanceof ChatActionCell) && messageObject2.isDateObject) {
                        childAt.setAlpha(0.0f);
                    }
                    i12 = i7;
                    i11 = i5;
                } else {
                    int bottom = childAt.getBottom();
                    if (bottom < i7) {
                        if (z2 || (childAt instanceof ChatActionCell)) {
                            view3 = childAt;
                        }
                        i12 = bottom;
                        view2 = childAt;
                    } else {
                        i12 = i7;
                    }
                    ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
                    if ((chatListItemAnimator == null || !(chatListItemAnimator.willRemoved(childAt) || this.chatListItemAnimator.willAddedFromAlpha(childAt))) && (childAt instanceof ChatActionCell) && messageObject2.isDateObject) {
                        if (childAt.getAlpha() != 1.0f) {
                            childAt.setAlpha(1.0f);
                        }
                        i8 = i5;
                        if (bottom < i8) {
                            i11 = bottom;
                            view = childAt;
                        }
                    } else {
                        i8 = i5;
                    }
                    i11 = i8;
                }
            }
            i13 = i4 + 1;
            childCount = i14;
            i9 = i15;
            z3 = z5;
            measuredHeight = i3;
        }
        boolean z7 = z3;
        int i17 = i9;
        int i18 = iMax;
        this.currentPinnedMessageId = 0;
        if (!this.pinnedMessageIds.isEmpty()) {
            if (id == Integer.MIN_VALUE) {
                int i19 = this.startLoadFromMessageId;
                if (i19 != 0) {
                    id = i19;
                } else if (!this.pinnedMessageIds.isEmpty()) {
                    id = this.pinnedMessageIds.get(0).intValue() + 1;
                }
            } else if (id < 0 && (iIndexOf = this.messages.indexOf(messageObject4)) >= 0) {
                int i20 = iIndexOf - 1;
                while (true) {
                    if (i20 < 0) {
                        break;
                    }
                    MessageObject messageObject6 = this.messages.get(i20);
                    if (messageObject6.getId() > 0) {
                        id = messageObject6.getId();
                        break;
                    }
                    i20--;
                }
                if (id < 0) {
                    int i21 = iIndexOf + 1;
                    int size = this.messages.size();
                    while (true) {
                        if (i21 >= size) {
                            break;
                        }
                        MessageObject messageObject7 = this.messages.get(i21);
                        if (messageObject7.getId() > 0) {
                            id = messageObject7.getId();
                            break;
                        }
                        i21++;
                    }
                }
            }
            ArrayList<Integer> arrayList = this.pinnedMessageIds;
            int i22 = this.forceNextPinnedMessageId;
            if (i22 != 0) {
                id = i22;
            }
            this.currentPinnedMessageId = findClosest(arrayList, id, this.currentPinnedMessageIndex).intValue();
            if (!this.loadingPinnedMessagesList && !this.pinnedEndReached && !this.pinnedMessageIds.isEmpty() && this.currentPinnedMessageIndex[0] > this.pinnedMessageIds.size() - 2) {
                MediaDataController mediaDataController = getMediaDataController();
                long j = this.dialog_id;
                ArrayList<Integer> arrayList2 = this.pinnedMessageIds;
                mediaDataController.loadPinnedMessages(j, arrayList2.get(arrayList2.size() - 1).intValue(), 0);
                this.loadingPinnedMessagesList = true;
            }
        }
        getMessagesController().addToPollsQueue(this.dialog_id, this.pollsToCheck);
        MessagesController.getInstance(this.currentAccount).addToLivesQueue(this.dialog_id, this.livesToCheck);
        if (this.videoPlayerContainer != null) {
            if (!z4) {
                MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
                if (playingMessageObject != null) {
                    if (this.checkTextureViewPosition && playingMessageObject.isVideo()) {
                        MediaController.getInstance().cleanupPlayer(true, true);
                    } else {
                        this.videoPlayerContainer.setTranslationY((-AndroidUtilities.roundPlayingMessageSize) - 100);
                        this.fragmentView.invalidate();
                        if ((playingMessageObject.isRoundVideo() || playingMessageObject.isVideo()) && playingMessageObject.eventId == 0 && this.checkTextureViewPosition && !this.chatListView.isFastScrollAnimationRunning()) {
                            MediaController.getInstance().setCurrentVideoVisible(false);
                        }
                    }
                }
            } else {
                MediaController.getInstance().setCurrentVideoVisible(true);
            }
        }
        View view4 = view3;
        if (view4 != null) {
            if (view4 instanceof ChatMessageCell) {
                messageObject = ((ChatMessageCell) view4).getMessageObject();
            } else {
                messageObject = ((ChatActionCell) view4).getMessageObject();
            }
            this.floatingDateView.setCustomDate(messageObject.messageOwner.date, this.chatMode == 1, true);
        }
        this.currentFloatingDateOnScreen = false;
        View view5 = view2;
        this.currentFloatingTopIsNotMessage = ((view5 instanceof ChatMessageCell) || (view5 instanceof ChatActionCell)) ? false : true;
        View view6 = view;
        if (view6 != null) {
            if (view6.getY() > f || this.currentFloatingTopIsNotMessage) {
                if (view6.getAlpha() != 1.0f) {
                    view6.setAlpha(1.0f);
                }
                if (this.chatListView.getChildAdapterPosition(view6) == (this.chatAdapter.messagesStartRow + this.messages.size()) - 1) {
                    if (view6.getAlpha() != 1.0f) {
                        view6.setAlpha(1.0f);
                    }
                    AnimatorSet animatorSet = this.floatingDateAnimation;
                    if (animatorSet != null) {
                        animatorSet.cancel();
                        obj = null;
                        this.floatingDateAnimation = null;
                    } else {
                        obj = null;
                    }
                    this.floatingDateView.setTag(obj);
                    this.floatingDateView.setAlpha(0.0f);
                    this.currentFloatingDateOnScreen = false;
                } else {
                    hideFloatingDateView(!this.currentFloatingTopIsNotMessage);
                }
                z = false;
            } else {
                if (view6.getAlpha() != 0.0f) {
                    view6.setAlpha(0.0f);
                }
                z = true;
            }
            float y2 = (view6.getY() + view6.getMeasuredHeight()) - f;
            if (y2 <= this.floatingDateView.getMeasuredHeight() || y2 >= this.floatingDateView.getMeasuredHeight() * 2) {
                this.floatingDateViewOffset = 0.0f;
            } else if (this.chatListView.getChildAdapterPosition(view6) == (this.chatAdapter.messagesStartRow + this.messages.size()) - 1) {
                if (view6.getAlpha() != 1.0f) {
                    view6.setAlpha(1.0f);
                }
                AnimatorSet animatorSet2 = this.floatingDateAnimation;
                if (animatorSet2 != null) {
                    animatorSet2.cancel();
                    obj2 = null;
                    this.floatingDateAnimation = null;
                } else {
                    obj2 = null;
                }
                this.floatingDateView.setTag(obj2);
                this.floatingDateView.setAlpha(0.0f);
                z = false;
            } else {
                this.floatingDateViewOffset = ((-this.floatingDateView.getMeasuredHeight()) * 2) + y2;
            }
            if (z) {
                AnimatorSet animatorSet3 = this.floatingDateAnimation;
                if (animatorSet3 != null) {
                    animatorSet3.cancel();
                    this.floatingDateAnimation = null;
                }
                if (this.floatingDateView.getTag() == null) {
                    this.floatingDateView.setTag(1);
                }
                if (this.floatingDateView.getAlpha() != 1.0f) {
                    this.floatingDateView.setAlpha(1.0f);
                }
                this.currentFloatingDateOnScreen = true;
            }
        } else {
            hideFloatingDateView(true);
            this.floatingDateViewOffset = 0.0f;
        }
        if (isThreadChat()) {
            if (z7 != this.threadMessageVisible) {
                updatePinnedMessageView(this.openAnimationStartTime != 0 && SystemClock.elapsedRealtime() >= this.openAnimationStartTime + 150);
            }
        } else {
            int i23 = this.currentPinnedMessageId;
            if (i23 != 0) {
                MessageObject messageObject8 = this.pinnedMessageObjects.get(Integer.valueOf(i23));
                if (messageObject8 == null) {
                    messageObject8 = this.messagesDict[0].get(this.currentPinnedMessageId);
                }
                if (messageObject8 == null) {
                    if (this.loadingPinnedMessages.indexOfKey(this.currentPinnedMessageId) < 0) {
                        this.loadingPinnedMessages.put(this.currentPinnedMessageId, Boolean.TRUE);
                        ArrayList<Integer> arrayList3 = new ArrayList<>();
                        arrayList3.add(Integer.valueOf(this.currentPinnedMessageId));
                        getMediaDataController().loadPinnedMessages(this.dialog_id, ChatObject.isChannel(this.currentChat) ? this.currentChat.id : 0L, arrayList3, true);
                    }
                    i = i17;
                    this.currentPinnedMessageId = i;
                } else {
                    i = i17;
                }
            } else {
                i = i17;
                if (i != 0 && !this.pinnedMessageIds.isEmpty()) {
                    this.currentPinnedMessageId = i;
                }
            }
            boolean z8 = (this.fromPullingDownTransition && this.fragmentView.getVisibility() == 0) || (this.openAnimationStartTime != 0 && SystemClock.elapsedRealtime() >= this.openAnimationStartTime + 150);
            int i24 = this.currentPinnedMessageId;
            if (i != i24) {
                updatePinnedMessageView(z8, i == 0 ? 0 : i > i24 ? 1 : 2);
            } else {
                updatePinnedListButton(z8);
            }
        }
        ChatActionCell chatActionCell2 = this.floatingDateView;
        if (chatActionCell2 != null) {
            chatActionCell2.setTranslationY(((this.chatListView.getTranslationY() + this.chatListViewPaddingTop) + this.floatingDateViewOffset) - AndroidUtilities.dp(4.0f));
        }
        invalidateChatListViewTopPadding();
        if (this.firstLoading || this.paused || this.inPreviewMode || this.chatMode != 0 || getMessagesController().ignoreSetOnline) {
            return;
        }
        int i25 = 0;
        if (iMax2 != Integer.MIN_VALUE || iMin != Integer.MAX_VALUE) {
            i2 = iMax2;
            c = 0;
            int i26 = 0;
            for (int i27 = 0; i27 < this.messages.size(); i27++) {
                MessageObject messageObject9 = this.messages.get(i27);
                int id3 = messageObject9.getId();
                if (i2 != Integer.MIN_VALUE && id3 > 0 && id3 <= i2 && ((messageObject9.messageOwner.from_scheduled && id3 > numValueOf.intValue()) || (messageObject9.isUnread() && !messageObject9.isOut()))) {
                    if (messageObject9.messageOwner.from_scheduled) {
                        i25++;
                    } else {
                        messageObject9.setIsRead();
                    }
                    i26++;
                }
                if (iMin != Integer.MAX_VALUE && id3 < 0 && id3 >= iMin && messageObject9.isUnread()) {
                    messageObject9.setIsRead();
                    i26++;
                }
            }
            if ((this.forwardEndReached[0] && i2 == this.minMessageId[0]) || iMin == this.minMessageId[0]) {
                this.newUnreadMessageCount = 0;
            } else {
                int i28 = this.newUnreadMessageCount - i26;
                this.newUnreadMessageCount = i28;
                if (i28 < 0) {
                    this.newUnreadMessageCount = 0;
                }
            }
            if (inLayout) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$oyoyGmnqXH65egcQJyikWGSyrvw
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.inlineUpdate1();
                    }
                });
            } else {
                inlineUpdate1();
            }
            MessagesController messagesController = getMessagesController();
            long j2 = this.dialog_id;
            int[] iArr = this.minMessageId;
            messagesController.markDialogAsRead(j2, i2, iMin, i18, false, i10, i26, i2 == iArr[0] || iMin == iArr[0], i25);
            this.firstUnreadSent = true;
        } else if (!this.firstUnreadSent && this.currentEncryptedChat == null && this.chatLayoutManager.findFirstVisibleItemPosition() == 0) {
            c = 0;
            this.newUnreadMessageCount = 0;
            if (inLayout) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$l9CWk_nzb4ZoK7OoYeq4oWgMMYM
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.inlineUpdate2();
                    }
                });
            } else {
                inlineUpdate2();
            }
            MessagesController messagesController2 = getMessagesController();
            long j3 = this.dialog_id;
            int[] iArr2 = this.minMessageId;
            i2 = iMax2;
            messagesController2.markDialogAsRead(j3, iArr2[0], iArr2[0], this.maxDate[0], false, i10, 0, true, 0);
            this.firstUnreadSent = true;
        } else {
            i2 = iMax2;
            c = 0;
        }
        if (i10 == 0 || i2 <= 0 || this.replyMaxReadId == i2) {
            return;
        }
        this.replyMaxReadId = i2;
        getMessagesStorage().updateRepliesMaxReadId(this.replyOriginalChat.id, this.replyOriginalMessageId, this.replyMaxReadId, true);
        NotificationCenter notificationCenter = getNotificationCenter();
        int i29 = NotificationCenter.commentsRead;
        Object[] objArr = new Object[3];
        objArr[c] = Long.valueOf(this.replyOriginalChat.id);
        objArr[1] = Integer.valueOf(this.replyOriginalMessageId);
        objArr[2] = Integer.valueOf(this.replyMaxReadId);
        notificationCenter.postNotificationName(i29, objArr);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$updateMessagesVisiblePart$80, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$updateMessagesVisiblePart$80$ChatActivity(MessageObject messageObject) throws InterruptedException, Resources.NotFoundException, IOException {
        if (messageObject.isVideo()) {
            openPhotoViewerForMessage(null, messageObject);
        } else {
            MediaController.getInstance().playMessage(messageObject);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void inlineUpdate1() {
        int i = this.prevSetUnreadCount;
        int i2 = this.newUnreadMessageCount;
        if (i != i2) {
            this.prevSetUnreadCount = i2;
            this.pagedownButtonCounter.setCount(i2, this.openAnimationEnded);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void inlineUpdate2() {
        int i = this.prevSetUnreadCount;
        int i2 = this.newUnreadMessageCount;
        if (i != i2) {
            this.prevSetUnreadCount = i2;
            this.pagedownButtonCounter.setCount(i2, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void toggleMute(boolean instant) {
        if (getMessagesController().isDialogMuted(this.dialog_id)) {
            SharedPreferences.Editor editorEdit = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editorEdit.putInt("notify2_" + this.dialog_id, 0);
            getMessagesStorage().setDialogNotificationFlags(this.dialog_id, 0L);
            editorEdit.commit();
            TLRPC$Dialog tLRPC$Dialog = getMessagesController().dialogs_dict.get(this.dialog_id);
            if (tLRPC$Dialog != null) {
                tLRPC$Dialog.notify_settings = new TLRPC$TL_peerNotifySettings();
            }
            getNotificationsController().updateServerNotificationsSettings(this.dialog_id);
            if (instant) {
                return;
            }
            BulletinFactory.createMuteBulletin((BaseFragment) this, false, (Theme.ResourcesProvider) this.themeDelegate).show();
            return;
        }
        if (instant) {
            SharedPreferences.Editor editorEdit2 = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editorEdit2.putInt("notify2_" + this.dialog_id, 2);
            getMessagesStorage().setDialogNotificationFlags(this.dialog_id, 1L);
            editorEdit2.commit();
            TLRPC$Dialog tLRPC$Dialog2 = getMessagesController().dialogs_dict.get(this.dialog_id);
            if (tLRPC$Dialog2 != null) {
                TLRPC$TL_peerNotifySettings tLRPC$TL_peerNotifySettings = new TLRPC$TL_peerNotifySettings();
                tLRPC$Dialog2.notify_settings = tLRPC$TL_peerNotifySettings;
                tLRPC$TL_peerNotifySettings.mute_until = ConnectionsManager.DEFAULT_DATACENTER_ID;
            }
            getNotificationsController().updateServerNotificationsSettings(this.dialog_id);
            getNotificationsController().removeNotificationsForDialog(this.dialog_id);
            return;
        }
        BottomSheet bottomSheetCreateMuteAlert = AlertsCreator.createMuteAlert(this, this.dialog_id, this.themeDelegate);
        bottomSheetCreateMuteAlert.setCalcMandatoryInsets(isKeyboardVisible());
        showDialog(bottomSheetCreateMuteAlert);
    }

    private int getScrollOffsetForMessage(MessageObject object) {
        return (int) Math.max(-AndroidUtilities.dp(2.0f), ((this.chatListView.getMeasuredHeight() - this.chatListViewPaddingTop) - getHeightForMessage(object)) / 2.0f);
    }

    private int getHeightForMessage(MessageObject object) {
        if (this.dummyMessageCell == null) {
            this.dummyMessageCell = new ChatMessageCell(getParentActivity(), this.themeDelegate);
        }
        boolean z = false;
        this.dummyMessageCell.isChat = this.currentChat != null || UserObject.isUserSelf(this.currentUser);
        ChatMessageCell chatMessageCell = this.dummyMessageCell;
        TLRPC$User tLRPC$User = this.currentUser;
        chatMessageCell.isBot = tLRPC$User != null && tLRPC$User.bot;
        if (ChatObject.isChannel(this.currentChat) && this.currentChat.megagroup) {
            z = true;
        }
        chatMessageCell.isMegagroup = z;
        return this.dummyMessageCell.computeHeight(object, this.groupedMessagesMap.get(object.getGroupId()));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startMessageUnselect() {
        Runnable runnable = this.unselectRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        Runnable runnable2 = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$HLftNMYo1dHw1-ypWZyUgrOAwt0
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$startMessageUnselect$81$ChatActivity();
            }
        };
        this.unselectRunnable = runnable2;
        AndroidUtilities.runOnUIThread(runnable2, 1000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$startMessageUnselect$81, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$startMessageUnselect$81$ChatActivity() throws Resources.NotFoundException, NumberFormatException {
        this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
        updateVisibleRows();
        this.unselectRunnable = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void removeSelectedMessageHighlight() {
        Runnable runnable = this.unselectRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
            this.unselectRunnable = null;
        }
        this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
    }

    /* JADX WARN: Removed duplicated region for block: B:125:0x0288  */
    /* JADX WARN: Removed duplicated region for block: B:137:0x0158 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:51:0x00bf  */
    /* JADX WARN: Removed duplicated region for block: B:92:0x0192 A[LOOP:0: B:68:0x0116->B:92:0x0192, LOOP_END] */
    /* JADX WARN: Removed duplicated region for block: B:96:0x01c6  */
    /* JADX WARN: Removed duplicated region for block: B:98:0x01c9  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void scrollToMessageId(int r25, int r26, boolean r27, int r28, boolean r29, int r30) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 712
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.scrollToMessageId(int, int, boolean, int, boolean, int):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$scrollToMessageId$82, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$scrollToMessageId$82$ChatActivity() throws Resources.NotFoundException, NumberFormatException {
        int i = this.nextScrollToMessageId;
        if (i != 0) {
            scrollToMessageId(i, this.nextScrollFromMessageId, this.nextScrollSelect, this.nextScrollLoadIndex, this.nextScrollForce, this.nextScrollForcePinnedMessageId);
            this.nextScrollToMessageId = 0;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$scrollToMessageId$83, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$scrollToMessageId$83$ChatActivity(DialogInterface dialogInterface) {
        showPinnedProgress(false);
    }

    private void showPinnedProgress(boolean show) {
        if (show) {
            if (this.updatePinnedProgressRunnable == null) {
                Runnable runnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$6AnjFtthMPVXT2oszNR11zZpXEg
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$showPinnedProgress$84$ChatActivity();
                    }
                };
                this.updatePinnedProgressRunnable = runnable;
                AndroidUtilities.runOnUIThread(runnable, 100L);
                return;
            }
            return;
        }
        Runnable runnable2 = this.updatePinnedProgressRunnable;
        if (runnable2 != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable2);
        }
        this.updatePinnedProgressRunnable = null;
        this.pinnedPorgressIsShowing = false;
        updatePinnedListButton(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showPinnedProgress$84, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showPinnedProgress$84$ChatActivity() {
        this.pinnedPorgressIsShowing = true;
        updatePinnedListButton(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updatePagedownButtonVisibility(boolean animated) {
        if (this.pagedownButton == null) {
            return;
        }
        if ((!this.canShowPagedownButton || this.textSelectionHelper.isSelectionMode() || this.chatActivityEnterView.isRecordingAudioVideo()) ? false : true) {
            boolean z = (!animated || (this.openAnimationStartTime != 0 && SystemClock.elapsedRealtime() >= this.openAnimationStartTime + 150)) ? animated : false;
            this.pagedownButtonShowedByScroll = false;
            if (this.pagedownButton.getTag() == null) {
                AnimatorSet animatorSet = this.pagedownButtonAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.pagedownButtonAnimation = null;
                }
                this.pagedownButton.setTag(1);
                if (z) {
                    if (this.pagedownButton.getTranslationY() == 0.0f) {
                        this.pagedownButton.setTranslationY(AndroidUtilities.dp(100.0f));
                        this.switchMediaChannelButton.setTranslationY(AndroidUtilities.dp(200.0f));
                    }
                    if (this.showSwitchMediaChannelButton) {
                        this.switchMediaChannelButton.setVisibility(0);
                    }
                    this.pagedownButton.setVisibility(0);
                    this.pagedownButtonAnimation = new AnimatorSet();
                    if (this.mentiondownButton.getVisibility() == 0) {
                        this.pagedownButtonAnimation.playTogether(ObjectAnimator.ofFloat(this.switchMediaChannelButton, "translationY", 0.0f), ObjectAnimator.ofFloat(this.pagedownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, 0.0f), ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, -AndroidUtilities.dp(72.0f)));
                    } else {
                        this.pagedownButtonAnimation.playTogether(ObjectAnimator.ofFloat(this.pagedownButton, "translationY", 0.0f), ObjectAnimator.ofFloat(this.switchMediaChannelButton, "translationY", 0.0f));
                    }
                    this.pagedownButtonAnimation.setDuration(200L);
                    this.pagedownButtonAnimation.start();
                    return;
                }
                this.mentiondownButton.setTranslationY(-AndroidUtilities.dp(72.0f));
                this.pagedownButton.setTranslationY(0.0f);
                this.pagedownButton.setVisibility(0);
                if (this.showSwitchMediaChannelButton) {
                    this.switchMediaChannelButton.setTranslationY(0.0f);
                    this.switchMediaChannelButton.setVisibility(0);
                    return;
                }
                return;
            }
            return;
        }
        this.returnToMessageId = 0;
        this.newUnreadMessageCount = 0;
        if (this.pagedownButton.getTag() != null) {
            this.pagedownButton.setTag(null);
            AnimatorSet animatorSet2 = this.pagedownButtonAnimation;
            if (animatorSet2 != null) {
                animatorSet2.cancel();
                this.pagedownButtonAnimation = null;
            }
            if (animated) {
                this.pagedownButtonAnimation = new AnimatorSet();
                if (this.mentiondownButton.getVisibility() == 0) {
                    this.pagedownButtonAnimation.playTogether(ObjectAnimator.ofFloat(this.switchMediaChannelButton, "translationY", AndroidUtilities.dp(200.0f)), ObjectAnimator.ofFloat(this.pagedownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, AndroidUtilities.dp(100.0f)), ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, 0.0f));
                } else {
                    this.pagedownButtonAnimation.playTogether(ObjectAnimator.ofFloat(this.pagedownButton, "translationY", AndroidUtilities.dp(100.0f)), ObjectAnimator.ofFloat(this.switchMediaChannelButton, "translationY", AndroidUtilities.dp(200.0f)));
                }
                this.pagedownButtonAnimation.setDuration(200L);
                this.pagedownButtonAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.79
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        ChatActivity.this.pagedownButtonCounter.setVisibility(4);
                        ChatActivity.this.pagedownButton.setVisibility(4);
                        ChatActivity.this.switchMediaChannelButton.setVisibility(4);
                    }
                });
                this.pagedownButtonAnimation.start();
                return;
            }
            this.pagedownButton.setVisibility(4);
            this.switchMediaChannelButton.setVisibility(4);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showMentionDownButton(boolean show, boolean animated) {
        FrameLayout frameLayout = this.mentiondownButton;
        if (frameLayout == null) {
            return;
        }
        if (show) {
            if (frameLayout.getTag() == null) {
                ObjectAnimator objectAnimator = this.mentiondownButtonAnimation;
                if (objectAnimator != null) {
                    objectAnimator.cancel();
                    this.mentiondownButtonAnimation = null;
                }
                if (animated) {
                    this.mentiondownButton.setVisibility(0);
                    this.mentiondownButton.setTag(1);
                    if (this.pagedownButton.getVisibility() == 0) {
                        this.mentiondownButton.setTranslationY(-AndroidUtilities.dp(72.0f));
                        this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.ALPHA, 0.0f, 1.0f).setDuration(200L);
                    } else {
                        if (this.mentiondownButton.getTranslationY() == 0.0f) {
                            this.mentiondownButton.setTranslationY(AndroidUtilities.dp(100.0f));
                        }
                        this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, 0.0f).setDuration(200L);
                    }
                    this.mentiondownButtonAnimation.start();
                    return;
                }
                this.mentiondownButton.setVisibility(0);
                return;
            }
            return;
        }
        this.returnToMessageId = 0;
        if (frameLayout.getTag() != null) {
            this.mentiondownButton.setTag(null);
            ObjectAnimator objectAnimator2 = this.mentiondownButtonAnimation;
            if (objectAnimator2 != null) {
                objectAnimator2.cancel();
                this.mentiondownButtonAnimation = null;
            }
            if (animated) {
                if (this.pagedownButton.getVisibility() == 0) {
                    this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.ALPHA, 1.0f, 0.0f).setDuration(200L);
                } else {
                    this.mentiondownButtonAnimation = ObjectAnimator.ofFloat(this.mentiondownButton, (Property<FrameLayout, Float>) View.TRANSLATION_Y, AndroidUtilities.dp(100.0f)).setDuration(200L);
                }
                this.mentiondownButtonAnimation.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.80
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        ChatActivity.this.mentiondownButtonCounter.setVisibility(4);
                        ChatActivity.this.mentiondownButton.setVisibility(4);
                    }
                });
                this.mentiondownButtonAnimation.start();
                return;
            }
            this.mentiondownButton.setVisibility(4);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:33:0x00bc  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void updateSecretStatus() {
        /*
            Method dump skipped, instructions count: 403
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.updateSecretStatus():void");
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onRequestPermissionsResultFragment(int requestCode, String[] permissions, int[] grantResults) {
        ChatAttachAlert chatAttachAlert;
        ChatAttachAlert chatAttachAlert2;
        boolean z;
        ChatAttachAlert chatAttachAlert3;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.onRequestPermissionsResultFragment(requestCode, permissions, grantResults);
        }
        MentionsAdapter mentionsAdapter = this.mentionsAdapter;
        if (mentionsAdapter != null) {
            mentionsAdapter.onRequestPermissionsResultFragment(requestCode, permissions, grantResults);
        }
        if (requestCode == 4 && (chatAttachAlert3 = this.chatAttachAlert) != null) {
            chatAttachAlert3.getPhotoLayout().checkStorage();
            return;
        }
        if ((requestCode == 5 || requestCode == 30) && (chatAttachAlert = this.chatAttachAlert) != null) {
            chatAttachAlert.onRequestPermissionsResultFragment(requestCode, permissions, grantResults);
            return;
        }
        if ((requestCode == 17 || requestCode == 18) && (chatAttachAlert2 = this.chatAttachAlert) != null) {
            chatAttachAlert2.getPhotoLayout().checkCamera(grantResults.length > 0 && grantResults[0] == 0);
            return;
        }
        if (requestCode == 21) {
            if (getParentActivity() == null || grantResults == null || grantResults.length == 0 || grantResults[0] == 0) {
                return;
            }
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
            builder.setMessage(LocaleController.getString("PermissionNoAudioVideo", R.string.PermissionNoAudioVideo));
            builder.setNegativeButton(LocaleController.getString("PermissionOpenSettings", R.string.PermissionOpenSettings), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$gfzUrKjzu-r94UArc7XqH3NbVVc
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i) {
                    this.f$0.lambda$onRequestPermissionsResultFragment$85$ChatActivity(dialogInterface, i);
                }
            });
            builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), null);
            builder.show();
            return;
        }
        if (requestCode == 19 && grantResults != null && grantResults.length > 0 && grantResults[0] == 0) {
            processSelectedAttach(0);
            return;
        }
        if (requestCode == 20 && grantResults != null && grantResults.length > 0 && grantResults[0] == 0) {
            processSelectedAttach(2);
            return;
        }
        if (((requestCode == 101 || requestCode == 102) && this.currentUser != null) || (requestCode == 103 && this.currentChat != null)) {
            int i = 0;
            while (true) {
                if (i >= grantResults.length) {
                    z = true;
                    break;
                } else {
                    if (grantResults[i] != 0) {
                        z = false;
                        break;
                    }
                    i++;
                }
            }
            if (grantResults.length <= 0 || !z) {
                VoIPHelper.permissionDenied(getParentActivity(), null, requestCode);
                return;
            }
            if (requestCode == 103) {
                VoIPHelper.startCall(this.currentChat, null, null, this.createGroupCall, getParentActivity(), this, getAccountInstance());
                return;
            }
            TLRPC$User tLRPC$User = this.currentUser;
            boolean z2 = requestCode == 102;
            TLRPC$UserFull tLRPC$UserFull = this.userInfo;
            VoIPHelper.startCall(tLRPC$User, z2, tLRPC$UserFull != null && tLRPC$UserFull.video_calls_available, getParentActivity(), getMessagesController().getUserFull(this.currentUser.id), getAccountInstance());
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onRequestPermissionsResultFragment$85, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onRequestPermissionsResultFragment$85$ChatActivity(DialogInterface dialogInterface, int i) {
        try {
            Intent intent = new Intent("android.settings.APPLICATION_DETAILS_SETTINGS");
            intent.setData(Uri.parse("package:" + ApplicationLoader.applicationContext.getPackageName()));
            getParentActivity().startActivity(intent);
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    private void checkActionBarMenu(boolean animated) {
        TLRPC$User tLRPC$User;
        TLRPC$UserFull tLRPC$UserFull;
        TLRPC$ChatFull tLRPC$ChatFull;
        TLRPC$EncryptedChat tLRPC$EncryptedChat = this.currentEncryptedChat;
        if ((tLRPC$EncryptedChat != null && !(tLRPC$EncryptedChat instanceof TLRPC$TL_encryptedChat)) || ((this.currentChat != null && (this.chatMode != 0 || this.threadMessageId != 0 || (tLRPC$ChatFull = this.chatInfo) == null || tLRPC$ChatFull.ttl_period == 0)) || ((tLRPC$User = this.currentUser) != null && (UserObject.isDeleted(tLRPC$User) || (this.currentEncryptedChat == null && ((tLRPC$UserFull = this.userInfo) == null || tLRPC$UserFull.ttl_period == 0)))))) {
            View view = this.timeItem2;
            if (view != null) {
                view.setVisibility(8);
            }
            ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
            if (chatAvatarContainer != null) {
                chatAvatarContainer.hideTimeItem(animated);
            }
        } else {
            View view2 = this.timeItem2;
            if (view2 != null) {
                view2.setVisibility(0);
            }
            ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
            if (chatAvatarContainer2 != null) {
                chatAvatarContainer2.showTimeItem(animated);
            }
        }
        ChatAvatarContainer chatAvatarContainer3 = this.avatarContainer;
        if (chatAvatarContainer3 != null) {
            TLRPC$EncryptedChat tLRPC$EncryptedChat2 = this.currentEncryptedChat;
            if (tLRPC$EncryptedChat2 != null) {
                chatAvatarContainer3.setTime(tLRPC$EncryptedChat2.ttl);
            } else {
                TLRPC$UserFull tLRPC$UserFull2 = this.userInfo;
                if (tLRPC$UserFull2 != null) {
                    chatAvatarContainer3.setTime(tLRPC$UserFull2.ttl_period);
                } else {
                    TLRPC$ChatFull tLRPC$ChatFull2 = this.chatInfo;
                    if (tLRPC$ChatFull2 != null) {
                        chatAvatarContainer3.setTime(tLRPC$ChatFull2.ttl_period);
                    }
                }
            }
        }
        checkAndUpdateAvatar();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getMessageType(MessageObject messageObject) {
        String str;
        String str2;
        if (messageObject == null) {
            return -1;
        }
        boolean z = false;
        if (this.currentEncryptedChat == null) {
            if (messageObject.isEditing()) {
                return -1;
            }
            if (messageObject.getId() <= 0 && messageObject.isOut()) {
                if (messageObject.isSendError()) {
                    return !messageObject.isMediaEmpty() ? 0 : 20;
                }
                return -1;
            }
            if (messageObject.isAnimatedEmoji()) {
                return 2;
            }
            int i = messageObject.type;
            if (i == 6) {
                return -1;
            }
            if (i == 10 || i == 11) {
                return messageObject.getId() == 0 ? -1 : 1;
            }
            if (messageObject.isVoice()) {
                return 2;
            }
            if (messageObject.isSticker() || messageObject.isAnimatedSticker()) {
                TLRPC$InputStickerSet inputStickerSet = messageObject.getInputStickerSet();
                return inputStickerSet instanceof TLRPC$TL_inputStickerSetID ? !getMediaDataController().isStickerPackInstalled(inputStickerSet.id) ? 7 : 9 : (!(inputStickerSet instanceof TLRPC$TL_inputStickerSetShortName) || getMediaDataController().isStickerPackInstalled(inputStickerSet.short_name)) ? 9 : 7;
            }
            if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TLRPC$TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
                if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                    z = true;
                }
                if ((z || !FileLoader.getPathToMessage(messageObject.messageOwner).exists()) ? z : true) {
                    if (messageObject.getDocument() != null && !messageObject.isMusic() && (str2 = messageObject.getDocument().mime_type) != null) {
                        if (messageObject.getDocumentName().toLowerCase().endsWith("attheme")) {
                            return 10;
                        }
                        if (str2.endsWith("/xml")) {
                            return 5;
                        }
                        if ((!messageObject.isNewGif() && str2.endsWith("/mp4")) || str2.endsWith("/png") || str2.endsWith("/jpg") || str2.endsWith("/jpeg")) {
                            return 6;
                        }
                    }
                    return 4;
                }
            } else {
                if (messageObject.type == 12) {
                    return 8;
                }
                if (messageObject.isMediaEmpty()) {
                    return 3;
                }
            }
            return 2;
        }
        if (messageObject.isSending()) {
            return -1;
        }
        if (messageObject.isAnimatedEmoji()) {
            return 2;
        }
        if (messageObject.type == 6) {
            return -1;
        }
        if (messageObject.isSendError()) {
            return !messageObject.isMediaEmpty() ? 0 : 20;
        }
        int i2 = messageObject.type;
        if (i2 == 10 || i2 == 11) {
            return (messageObject.getId() == 0 || messageObject.isSending()) ? -1 : 1;
        }
        if (messageObject.isVoice()) {
            return 2;
        }
        if (!messageObject.isAnimatedEmoji() && (messageObject.isSticker() || messageObject.isAnimatedSticker())) {
            TLRPC$InputStickerSet inputStickerSet2 = messageObject.getInputStickerSet();
            if ((inputStickerSet2 instanceof TLRPC$TL_inputStickerSetShortName) && !getMediaDataController().isStickerPackInstalled(inputStickerSet2.short_name)) {
                return 7;
            }
        } else if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TLRPC$TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
            if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                z = true;
            }
            if ((z || !FileLoader.getPathToMessage(messageObject.messageOwner).exists()) ? z : true) {
                if (messageObject.getDocument() != null && (str = messageObject.getDocument().mime_type) != null && str.endsWith("text/xml")) {
                    return 5;
                }
                if (messageObject.messageOwner.ttl <= 0) {
                    return 4;
                }
            }
        } else {
            if (messageObject.type == 12) {
                return 8;
            }
            if (messageObject.isMediaEmpty()) {
                return 3;
            }
        }
        return 2;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void addToSelectedMessages(MessageObject messageObject, boolean outside) {
        addToSelectedMessages(messageObject, outside, true);
    }

    /* JADX WARN: Removed duplicated region for block: B:240:0x045c  */
    /* JADX WARN: Removed duplicated region for block: B:265:0x04b6  */
    /* JADX WARN: Removed duplicated region for block: B:384:0x0732  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void addToSelectedMessages(ir.eitaa.messenger.MessageObject r26, boolean r27, boolean r28) {
        /*
            Method dump skipped, instructions count: 1946
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.addToSelectedMessages(ir.eitaa.messenger.MessageObject, boolean, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void processRowSelect(View view, boolean outside, float touchX, float touchY) throws Resources.NotFoundException, NumberFormatException {
        MessageObject messageObject;
        if (view instanceof ChatMessageCell) {
            ChatMessageCell chatMessageCell = (ChatMessageCell) view;
            messageObject = chatMessageCell.getMessageObject();
            chatMessageCell.setLastTouchCoords(touchX, touchY);
        } else {
            messageObject = view instanceof ChatActionCell ? ((ChatActionCell) view).getMessageObject() : null;
        }
        int messageType = getMessageType(messageObject);
        if (messageType < 2 || messageType == 20) {
            return;
        }
        addToSelectedMessages(messageObject, outside);
        updateActionModeTitle();
        updateVisibleRows();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateActionModeTitle() {
        if (this.reportType < 0) {
            if (this.actionBar.isActionModeShowed()) {
                if (this.selectedMessagesIds[0].size() == 0 && this.selectedMessagesIds[1].size() == 0) {
                    return;
                }
                this.selectedMessagesCountTextView.setNumber(this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size(), true);
                return;
            }
            return;
        }
        int size = this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size();
        if (size == 0) {
            this.bottomOverlayChatText.setText(LocaleController.getString("ReportMessages", R.string.ReportMessages));
            this.bottomOverlayChatText.setAlpha(0.5f);
            this.bottomOverlayChatText.setEnabled(false);
        } else {
            this.bottomOverlayChatText.setText(LocaleController.formatString("ReportMessagesCount", R.string.ReportMessagesCount, LocaleController.formatPluralString("messages", size)).toUpperCase());
            this.bottomOverlayChatText.setAlpha(1.0f);
            this.bottomOverlayChatText.setEnabled(true);
        }
    }

    private void updateTitle() {
        if (this.avatarContainer == null) {
            return;
        }
        if (isThreadChat()) {
            if (this.isComments) {
                if (this.threadMessageObject.hasReplies()) {
                    this.avatarContainer.setTitle(LocaleController.formatPluralString("Comments", this.threadMessageObject.getRepliesCount()));
                } else {
                    this.avatarContainer.setTitle(LocaleController.getString("CommentsTitle", R.string.CommentsTitle));
                }
            } else {
                this.avatarContainer.setTitle(LocaleController.formatPluralString("Replies", this.threadMessageObject.getRepliesCount()));
            }
        } else if (UserObject.isReplyUser(this.currentUser)) {
            this.avatarContainer.setTitle(LocaleController.getString("RepliesTitle", R.string.RepliesTitle));
        } else {
            int i = this.chatMode;
            if (i == 1) {
                if (UserObject.isUserSelf(this.currentUser)) {
                    this.avatarContainer.setTitle(LocaleController.getString("Reminders", R.string.Reminders));
                } else {
                    this.avatarContainer.setTitle(LocaleController.getString("ScheduledMessages", R.string.ScheduledMessages));
                }
            } else if (i == 2) {
                this.avatarContainer.setTitle(LocaleController.formatPluralString("PinnedMessagesCount", getPinnedMessagesCount()));
            } else {
                TLRPC$Chat tLRPC$Chat = this.currentChat;
                if (tLRPC$Chat != null) {
                    this.avatarContainer.setTitle(tLRPC$Chat.title, tLRPC$Chat.trusty, tLRPC$Chat.fake, tLRPC$Chat.shop, tLRPC$Chat.verified);
                } else {
                    TLRPC$User tLRPC$User = this.currentUser;
                    if (tLRPC$User != null) {
                        if (tLRPC$User.self) {
                            this.avatarContainer.setTitle(LocaleController.getString("SavedMessages", R.string.SavedMessages));
                        } else if (!MessagesController.isSupportUser(tLRPC$User) && getContactsController().contactsDict.get(Long.valueOf(this.currentUser.id)) == null && (getContactsController().contactsDict.size() != 0 || !getContactsController().isLoadingContacts())) {
                            String userName = UserObject.getUserName(this.currentUser);
                            if (userName != null && userName.length() > 0) {
                                userName = UserObject.getUserName(this.currentUser);
                            } else {
                                String str = this.currentUser.phone;
                                if (str != null && str.length() != 0) {
                                    userName = PhoneFormat.getInstance().format("+" + this.currentUser.phone);
                                }
                            }
                            this.avatarContainer.setTitle(userName);
                        } else {
                            ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
                            String userName2 = UserObject.getUserName(this.currentUser);
                            TLRPC$User tLRPC$User2 = this.currentUser;
                            chatAvatarContainer.setTitle(userName2, tLRPC$User2.trusty, tLRPC$User2.fake, tLRPC$User2.shop, tLRPC$User2.verified);
                        }
                    }
                }
            }
        }
        setParentActivityTitle(this.avatarContainer.getTitleTextView().getText());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getPinnedMessagesCount() {
        return Math.max(this.loadedPinnedMessagesCount, this.totalPinnedMessagesCount);
    }

    private void updateBotButtons() {
        TLRPC$User tLRPC$User;
        boolean z;
        int i;
        if (this.headerItem == null || (tLRPC$User = this.currentUser) == null || this.currentEncryptedChat != null || !tLRPC$User.bot) {
            return;
        }
        boolean z2 = false;
        if (this.botInfo.size() != 0) {
            boolean z3 = false;
            z = false;
            for (int i2 = 0; i2 < this.botInfo.size(); i2++) {
                TLRPC$BotInfo tLRPC$BotInfoValueAt = this.botInfo.valueAt(i2);
                while (i < tLRPC$BotInfoValueAt.commands.size()) {
                    TLRPC$TL_botCommand tLRPC$TL_botCommand = tLRPC$BotInfoValueAt.commands.get(i);
                    if (tLRPC$TL_botCommand.command.toLowerCase().equals("help")) {
                        z3 = true;
                    } else if (tLRPC$TL_botCommand.command.toLowerCase().equals("settings")) {
                        z = true;
                    }
                    i = (z && z3) ? 0 : i + 1;
                }
            }
            z2 = z3;
        } else {
            z = false;
        }
        if (z2) {
            this.headerItem.showSubItem(30);
        } else {
            this.headerItem.hideSubItem(30);
        }
        if (z) {
            this.headerItem.showSubItem(31);
        } else {
            this.headerItem.hideSubItem(31);
        }
    }

    private void updateTitleIcons() {
        if (this.avatarContainer == null || this.chatMode != 0) {
            return;
        }
        Drawable drawable = null;
        Drawable themedDrawable = getMessagesController().isDialogMuted(this.dialog_id) ? getThemedDrawable("drawableMuteIcon") : null;
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        Drawable themedDrawable2 = this.currentEncryptedChat != null ? getThemedDrawable("drawableLockIcon") : null;
        if (!UserObject.isReplyUser(this.currentUser) && !isThreadChat()) {
            drawable = themedDrawable;
        }
        chatAvatarContainer.setTitleIcons(themedDrawable2, drawable);
        ActionBarMenuSubItem actionBarMenuSubItem = this.muteItem;
        if (actionBarMenuSubItem != null) {
            if (themedDrawable != null) {
                actionBarMenuSubItem.setTextAndIcon(LocaleController.getString("UnmuteNotifications", R.string.UnmuteNotifications), R.drawable.msg_unmute);
            } else {
                actionBarMenuSubItem.setTextAndIcon(LocaleController.getString("MuteNotifications", R.string.MuteNotifications), R.drawable.msg_mute);
            }
        }
    }

    private void checkAndUpdateAvatar() {
        if (this.currentUser != null) {
            TLRPC$User user = getMessagesController().getUser(Long.valueOf(this.currentUser.id));
            if (user == null) {
                return;
            } else {
                this.currentUser = user;
            }
        } else if (this.currentChat != null) {
            TLRPC$Chat chat = getMessagesController().getChat(Long.valueOf(this.currentChat.id));
            if (chat == null) {
                return;
            }
            this.currentChat = chat;
            updateBottomOverlay();
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.checkAndUpdateAvatar();
        }
    }

    public void openVideoEditor(String videoPath, String caption) {
        if (getParentActivity() != null) {
            final Bitmap bitmapCreateVideoThumbnail = SendMessagesHelper.createVideoThumbnail(videoPath, 1);
            PhotoViewer.getInstance().setParentActivity(getParentActivity(), this.themeDelegate);
            final ArrayList<Object> arrayList = new ArrayList<>();
            MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, 0, 0L, videoPath, 0, true, 0, 0, 0L);
            photoEntry.caption = caption;
            arrayList.add(photoEntry);
            PhotoViewer.getInstance().openPhotoForSelect(arrayList, 0, 2, false, new PhotoViewer.EmptyPhotoViewerProvider() { // from class: ir.eitaa.ui.ChatActivity.84
                @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                public boolean canScrollAway() {
                    return false;
                }

                @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC$FileLocation fileLocation, int index) {
                    return new ImageReceiver.BitmapHolder(bitmapCreateVideoThumbnail, (String) null, 0);
                }

                @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
                    ChatActivity.this.sendMedia((MediaController.PhotoEntry) arrayList.get(0), videoEditedInfo, notify, scheduleDate, forceDocument);
                }
            }, this);
            return;
        }
        fillEditingMediaWithCaption(caption, null);
        SendMessagesHelper.prepareSendingVideo(getAccountInstance(), videoPath, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, null, 0, this.editingMessageObject, true, 0, false);
        afterMessageSend();
    }

    private void openEditingMessageInPhotoEditor() throws InterruptedException, Resources.NotFoundException {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null && messageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
            if (this.editingMessageObject.isPhoto() || this.editingMessageObject.isVideo()) {
                final MessageObject messageObject2 = this.editingMessageObject;
                File pathToMessage = null;
                if (!TextUtils.isEmpty(messageObject2.messageOwner.attachPath)) {
                    File file = new File(messageObject2.messageOwner.attachPath);
                    if (file.exists()) {
                        pathToMessage = file;
                    }
                }
                if (pathToMessage == null) {
                    pathToMessage = FileLoader.getPathToMessage(messageObject2.messageOwner);
                }
                if (pathToMessage.exists()) {
                    PhotoViewer.getInstance().setParentActivity(getParentActivity(), this.themeDelegate);
                    ArrayList<Object> arrayList = new ArrayList<>();
                    final MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, 0, 0L, pathToMessage.getAbsolutePath(), 0, messageObject2.isVideo(), 0, 0, 0L);
                    photoEntry.caption = this.chatActivityEnterView.getFieldText();
                    arrayList.add(photoEntry);
                    PhotoViewer.getInstance().openPhotoForSelect(arrayList, 0, 2, false, new PhotoViewer.EmptyPhotoViewerProvider() { // from class: ir.eitaa.ui.ChatActivity.85
                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public boolean allowSendingSubmenu() {
                            return false;
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public boolean canCaptureMorePhotos() {
                            return false;
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public PhotoViewer.PlaceProviderObject getPlaceForPhoto(MessageObject messageObject3, TLRPC$FileLocation fileLocation, int index, boolean needPreview) {
                            return ChatActivity.this.getPlaceForPhoto(messageObject2, null, needPreview, true);
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public void sendButtonPressed(int index, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
                            if (ChatActivity.this.editingMessageObject != messageObject2) {
                                return;
                            }
                            MediaController.PhotoEntry photoEntry2 = photoEntry;
                            if (photoEntry2.isCropped || photoEntry2.isPainted || photoEntry2.isFiltered || videoEditedInfo != null) {
                                ChatActivity.this.sendMedia(photoEntry2, videoEditedInfo, notify, scheduleDate, forceDocument);
                            } else {
                                ChatActivity.this.chatActivityEnterView.doneEditingMessage();
                            }
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public MessageObject getEditingMessageObject() {
                            MessageObject messageObject3 = ChatActivity.this.editingMessageObject;
                            MessageObject messageObject4 = messageObject2;
                            if (messageObject3 == messageObject4) {
                                return messageObject4;
                            }
                            return null;
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public void onCaptionChanged(CharSequence caption) {
                            if (ChatActivity.this.editingMessageObject == messageObject2) {
                                ChatActivity.this.chatActivityEnterView.setFieldText(caption, true);
                            }
                        }

                        @Override // ir.eitaa.ui.PhotoViewer.EmptyPhotoViewerProvider, ir.eitaa.ui.PhotoViewer.PhotoViewerProvider
                        public boolean closeKeyboard() {
                            ChatActivity chatActivity = ChatActivity.this;
                            if (chatActivity.chatActivityEnterView == null || !chatActivity.isKeyboardVisible()) {
                                return false;
                            }
                            ChatActivity.this.chatActivityEnterView.closeKeyboard();
                            return true;
                        }
                    }, this);
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:35:0x0082  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public ir.eitaa.ui.PhotoViewer.PlaceProviderObject getPlaceForPhoto(ir.eitaa.messenger.MessageObject r17, ir.eitaa.tgnet.TLRPC$FileLocation r18, boolean r19, boolean r20) {
        /*
            Method dump skipped, instructions count: 265
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.getPlaceForPhoto(ir.eitaa.messenger.MessageObject, ir.eitaa.tgnet.TLRPC$FileLocation, boolean, boolean):ir.eitaa.ui.PhotoViewer$PlaceProviderObject");
    }

    private void showAttachmentError() {
        if (getParentActivity() == null) {
            return;
        }
        BulletinFactory.of(this).createErrorBulletin(LocaleController.getString("UnsupportedAttachment", R.string.UnsupportedAttachment), this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void fillEditingMediaWithCaption(CharSequence caption, ArrayList<TLRPC$MessageEntity> entities) {
        if (this.editingMessageObject == null) {
            return;
        }
        if (!TextUtils.isEmpty(caption)) {
            MessageObject messageObject = this.editingMessageObject;
            messageObject.editingMessage = caption;
            messageObject.editingMessageEntities = entities;
            return;
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            this.editingMessageObject.editingMessage = chatActivityEnterView.getFieldText();
            MessageObject messageObject2 = this.editingMessageObject;
            if (messageObject2.editingMessage != null || TextUtils.isEmpty(messageObject2.messageOwner.message)) {
                return;
            }
            this.editingMessageObject.editingMessage = "";
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:13:0x0037  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void sendUriAsDocument(android.net.Uri r19) {
        /*
            r18 = this;
            r1 = r18
            if (r19 != 0) goto L5
            return
        L5:
            java.lang.String r0 = r19.toString()
            java.lang.String r2 = "com.google.android.apps.photos.contentprovider"
            boolean r2 = r0.contains(r2)
            r3 = 0
            if (r2 == 0) goto L37
            java.lang.String r2 = "/1/"
            java.lang.String[] r0 = r0.split(r2)     // Catch: java.lang.Exception -> L33
            r2 = 1
            r0 = r0[r2]     // Catch: java.lang.Exception -> L33
            java.lang.String r2 = "/ACTUAL"
            int r2 = r0.indexOf(r2)     // Catch: java.lang.Exception -> L33
            r4 = -1
            if (r2 == r4) goto L37
            java.lang.String r0 = r0.substring(r3, r2)     // Catch: java.lang.Exception -> L33
            java.lang.String r2 = "UTF-8"
            java.lang.String r0 = java.net.URLDecoder.decode(r0, r2)     // Catch: java.lang.Exception -> L33
            android.net.Uri r0 = android.net.Uri.parse(r0)     // Catch: java.lang.Exception -> L33
            goto L39
        L33:
            r0 = move-exception
            ir.eitaa.messenger.FileLog.e(r0)
        L37:
            r0 = r19
        L39:
            java.lang.String r2 = ir.eitaa.messenger.AndroidUtilities.getPath(r0)
            if (r2 != 0) goto L4c
            java.lang.String r2 = r0.toString()
            java.lang.String r4 = "file"
            java.lang.String r0 = ir.eitaa.messenger.MediaController.copyFileToCache(r0, r4)
            r5 = r0
            r6 = r2
            goto L4e
        L4c:
            r5 = r2
            r6 = r5
        L4e:
            if (r5 != 0) goto L54
            r18.showAttachmentError()
            return
        L54:
            r0 = 0
            r1.fillEditingMediaWithCaption(r0, r0)
            ir.eitaa.messenger.AccountInstance r4 = r18.getAccountInstance()
            r7 = 0
            r8 = 0
            r9 = 0
            long r10 = r1.dialog_id
            ir.eitaa.messenger.MessageObject r12 = r1.replyingMessageObject
            ir.eitaa.messenger.MessageObject r13 = r18.getThreadMessage()
            r14 = 0
            ir.eitaa.messenger.MessageObject r15 = r1.editingMessageObject
            r16 = 1
            r17 = 0
            ir.eitaa.messenger.SendMessagesHelper.prepareSendingDocument(r4, r5, r6, r7, r8, r9, r10, r12, r13, r14, r15, r16, r17)
            r1.hideFieldPanel(r3)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.sendUriAsDocument(android.net.Uri):void");
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onActivityResultFragment(int requestCode, int resultCode, Intent data) {
        String path;
        if (resultCode == -1) {
            if (requestCode == 0 || requestCode == 2) {
                createChatAttachView();
                ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
                if (chatAttachAlert != null) {
                    chatAttachAlert.getPhotoLayout().onActivityResultFragment(requestCode, data, this.currentPicturePath);
                }
                this.currentPicturePath = null;
                return;
            }
            if (requestCode != 1) {
                if (requestCode == 21) {
                    if (data == null) {
                        showAttachmentError();
                        return;
                    }
                    if (data.getData() != null) {
                        sendUriAsDocument(data.getData());
                    } else if (data.getClipData() != null) {
                        ClipData clipData = data.getClipData();
                        for (int i = 0; i < clipData.getItemCount(); i++) {
                            sendUriAsDocument(clipData.getItemAt(i).getUri());
                        }
                    } else {
                        showAttachmentError();
                    }
                    afterMessageSend();
                    return;
                }
                return;
            }
            if (data == null || data.getData() == null) {
                showAttachmentError();
                return;
            }
            final Uri data2 = data.getData();
            if (data2.toString().contains(MediaStreamTrack.VIDEO_TRACK_KIND)) {
                try {
                    path = AndroidUtilities.getPath(data2);
                } catch (Exception e) {
                    FileLog.e(e);
                    path = null;
                }
                if (path == null) {
                    showAttachmentError();
                }
                if (this.paused) {
                    this.startVideoEdit = path;
                } else {
                    openVideoEditor(path, null);
                }
            } else if (this.editingMessageObject == null && this.chatMode == 1) {
                AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$a6EOMuocQgqAZe7DYhpVNDhdT8c
                    @Override // ir.eitaa.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                    public final void didSelectDate(boolean z, int i2) {
                        this.f$0.lambda$onActivityResultFragment$86$ChatActivity(data2, z, i2);
                    }
                }, this.themeDelegate);
            } else {
                fillEditingMediaWithCaption(null, null);
                SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), null, data2, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, null, null, null, 0, this.editingMessageObject, true, 0);
            }
            afterMessageSend();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onActivityResultFragment$86, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onActivityResultFragment$86$ChatActivity(Uri uri, boolean z, int i) {
        fillEditingMediaWithCaption(null, null);
        SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), null, uri, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, null, null, null, 0, this.editingMessageObject, z, i);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void saveSelfArgs(Bundle args) {
        String str = this.currentPicturePath;
        if (str != null) {
            args.putString("path", str);
        }
    }

    public void restoreSelfArgs(Bundle args) {
        this.currentPicturePath = args.getString("path");
    }

    private void removeUnreadPlane(boolean scrollToEnd) {
        MessageObject messageObject = this.unreadMessageObject;
        if (messageObject != null) {
            if (scrollToEnd) {
                boolean[] zArr = this.forwardEndReached;
                zArr[1] = true;
                zArr[0] = true;
                this.first_unread_id = 0;
                this.last_message_id = 0;
            }
            this.createUnreadMessageAfterId = 0;
            this.createUnreadMessageAfterIdLoading = false;
            removeMessageObject(messageObject);
            this.unreadMessageObject = null;
        }
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:1380:0x1997  */
    /* JADX WARN: Removed duplicated region for block: B:1402:0x19d9  */
    /* JADX WARN: Removed duplicated region for block: B:1406:0x19ed  */
    /* JADX WARN: Removed duplicated region for block: B:1410:0x1a08  */
    /* JADX WARN: Removed duplicated region for block: B:1417:0x1a28  */
    /* JADX WARN: Removed duplicated region for block: B:1420:0x1a30  */
    /* JADX WARN: Removed duplicated region for block: B:1423:0x1a5f  */
    /* JADX WARN: Removed duplicated region for block: B:1426:0x1a7b  */
    /* JADX WARN: Removed duplicated region for block: B:1433:0x1a95  */
    /* JADX WARN: Removed duplicated region for block: B:1567:0x1d0e  */
    /* JADX WARN: Removed duplicated region for block: B:161:0x03ea  */
    /* JADX WARN: Removed duplicated region for block: B:163:0x03f0  */
    /* JADX WARN: Removed duplicated region for block: B:183:0x0436  */
    /* JADX WARN: Removed duplicated region for block: B:195:0x0456  */
    /* JADX WARN: Removed duplicated region for block: B:199:0x0460  */
    /* JADX WARN: Removed duplicated region for block: B:210:0x047c  */
    /* JADX WARN: Removed duplicated region for block: B:2110:0x27b3  */
    /* JADX WARN: Removed duplicated region for block: B:2115:0x27e1  */
    /* JADX WARN: Removed duplicated region for block: B:213:0x0480  */
    /* JADX WARN: Removed duplicated region for block: B:215:0x0483 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:219:0x0499  */
    /* JADX WARN: Removed duplicated region for block: B:222:0x04ab  */
    /* JADX WARN: Removed duplicated region for block: B:227:0x04bc  */
    /* JADX WARN: Removed duplicated region for block: B:2326:0x2bc6  */
    /* JADX WARN: Removed duplicated region for block: B:2330:0x2bd4  */
    /* JADX WARN: Removed duplicated region for block: B:2354:0x2c2b  */
    /* JADX WARN: Removed duplicated region for block: B:240:0x051b  */
    /* JADX WARN: Removed duplicated region for block: B:2410:0x2d37  */
    /* JADX WARN: Removed duplicated region for block: B:2697:0x199a A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:2730:0x0cd1 A[EDGE_INSN: B:2730:0x0cd1->B:662:0x0cd1 BREAK  A[LOOP:7: B:371:0x0756->B:661:0x0cc0], SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:2732:0x0cc0 A[ADDED_TO_REGION, REMOVE, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:274:0x057c  */
    /* JADX WARN: Removed duplicated region for block: B:277:0x0584  */
    /* JADX WARN: Removed duplicated region for block: B:279:0x058a  */
    /* JADX WARN: Removed duplicated region for block: B:285:0x05a0  */
    /* JADX WARN: Removed duplicated region for block: B:2885:0x2bd8 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:291:0x05cd  */
    /* JADX WARN: Removed duplicated region for block: B:313:0x064d  */
    /* JADX WARN: Removed duplicated region for block: B:332:0x06d2  */
    /* JADX WARN: Removed duplicated region for block: B:334:0x06d5  */
    /* JADX WARN: Removed duplicated region for block: B:337:0x06dc  */
    /* JADX WARN: Removed duplicated region for block: B:344:0x06f8  */
    /* JADX WARN: Removed duplicated region for block: B:354:0x070e  */
    /* JADX WARN: Removed duplicated region for block: B:357:0x071d  */
    /* JADX WARN: Removed duplicated region for block: B:373:0x075e  */
    /* JADX WARN: Removed duplicated region for block: B:406:0x07d8  */
    /* JADX WARN: Removed duplicated region for block: B:419:0x0809  */
    /* JADX WARN: Removed duplicated region for block: B:422:0x0812  */
    /* JADX WARN: Removed duplicated region for block: B:438:0x0856  */
    /* JADX WARN: Removed duplicated region for block: B:439:0x086b  */
    /* JADX WARN: Removed duplicated region for block: B:444:0x0889  */
    /* JADX WARN: Removed duplicated region for block: B:455:0x08b7  */
    /* JADX WARN: Removed duplicated region for block: B:571:0x0b55 A[PHI: r1
      0x0b55: PHI (r1v632 java.util.ArrayList<ir.eitaa.messenger.MessageObject>) = 
      (r1v630 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v630 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v630 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v630 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v630 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v633 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v635 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
      (r1v635 java.util.ArrayList<ir.eitaa.messenger.MessageObject>)
     binds: [B:560:0x0b32, B:562:0x0b35, B:564:0x0b39, B:570:0x0b53, B:568:0x0b4b, B:558:0x0b2b, B:556:0x0b28, B:554:0x0b20] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:574:0x0b59 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:594:0x0bd9  */
    /* JADX WARN: Removed duplicated region for block: B:607:0x0bfa  */
    /* JADX WARN: Removed duplicated region for block: B:612:0x0c04  */
    /* JADX WARN: Removed duplicated region for block: B:617:0x0c22  */
    /* JADX WARN: Removed duplicated region for block: B:620:0x0c31  */
    /* JADX WARN: Removed duplicated region for block: B:623:0x0c38  */
    /* JADX WARN: Removed duplicated region for block: B:664:0x0cd7  */
    /* JADX WARN: Removed duplicated region for block: B:666:0x0cdc A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:668:0x0ce5  */
    /* JADX WARN: Removed duplicated region for block: B:671:0x0cec A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:674:0x0cf7  */
    /* JADX WARN: Removed duplicated region for block: B:702:0x0d85  */
    /* JADX WARN: Removed duplicated region for block: B:708:0x0da6  */
    /* JADX WARN: Removed duplicated region for block: B:762:0x0e7d  */
    /* JADX WARN: Removed duplicated region for block: B:817:0x0f74  */
    /* JADX WARN: Removed duplicated region for block: B:822:0x0f97  */
    /* JADX WARN: Removed duplicated region for block: B:852:0x1021  */
    /* JADX WARN: Removed duplicated region for block: B:869:0x1075  */
    /* JADX WARN: Removed duplicated region for block: B:873:0x1086  */
    /* JADX WARN: Removed duplicated region for block: B:876:0x1091  */
    /* JADX WARN: Removed duplicated region for block: B:886:0x10a8  */
    /* JADX WARN: Removed duplicated region for block: B:903:0x10d5  */
    /* JADX WARN: Removed duplicated region for block: B:905:0x10db  */
    /* JADX WARN: Removed duplicated region for block: B:911:0x1128  */
    /* JADX WARN: Removed duplicated region for block: B:914:0x1136  */
    /* JADX WARN: Removed duplicated region for block: B:946:0x11f4  */
    /* JADX WARN: Type inference failed for: r2v202 */
    /* JADX WARN: Type inference failed for: r2v203, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r2v220 */
    /* JADX WARN: Type inference failed for: r2v511 */
    @Override // ir.eitaa.ui.ActionBar.BaseFragment, ir.eitaa.messenger.NotificationCenter.NotificationCenterDelegate
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didReceivedNotification(int r53, int r54, java.lang.Object... r55) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException, java.io.IOException {
        /*
            Method dump skipped, instructions count: 13028
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.didReceivedNotification(int, int, java.lang.Object[]):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didReceivedNotification$87, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didReceivedNotification$87$ChatActivity() {
        getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didReceivedNotification$88, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didReceivedNotification$88$ChatActivity() {
        getNotificationCenter().runDelayedNotifications();
        resumeDelayedFragmentAnimation();
        AndroidUtilities.cancelRunOnUIThread(this.fragmentTransitionRunnable);
        this.fragmentTransitionRunnable.run();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didReceivedNotification$89, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didReceivedNotification$89$ChatActivity(MessageObject messageObject, int i) {
        this.delayedReadRunnable = null;
        messageObject.messageOwner.replies.read_max_id = i;
    }

    static /* synthetic */ void lambda$didReceivedNotification$91(Theme.ThemeAccent themeAccent, Theme.ThemeInfo themeInfo, boolean z) {
        if (themeAccent != null) {
            Theme.ThemeAccent accent = themeInfo.getAccent(false);
            NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.needSetDayNightTheme, themeInfo, Boolean.FALSE, null, Integer.valueOf(themeAccent.id));
            if (z) {
                Theme.deleteThemeAccent(themeInfo, accent, true);
                return;
            }
            return;
        }
        NotificationCenter.getGlobalInstance().postNotificationName(NotificationCenter.needSetDayNightTheme, themeInfo, Boolean.FALSE, null, -1);
    }

    private void checkSecretMessageForLocation(MessageObject messageObject) {
        if (messageObject.type != 4 || this.locationAlertShown || SharedConfig.isSecretMapPreviewSet()) {
            return;
        }
        this.locationAlertShown = true;
        AlertsCreator.showSecretLocationAlert(getParentActivity(), this.currentAccount, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$e9Xk1EGWQHCqlj8M5wzIAhM0KWk
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$checkSecretMessageForLocation$92$ChatActivity();
            }
        }, true, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$checkSecretMessageForLocation$92, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$checkSecretMessageForLocation$92$ChatActivity() throws Resources.NotFoundException, NumberFormatException {
        int childCount = this.chatListView.getChildCount();
        for (int i = 0; i < childCount; i++) {
            View childAt = this.chatListView.getChildAt(i);
            if (childAt instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                if (chatMessageCell.getMessageObject().type == 4) {
                    chatMessageCell.forceResetMessageObject();
                }
            }
        }
    }

    private void addSponsoredMessages(boolean animated) throws Resources.NotFoundException, NumberFormatException {
        ArrayList<MessageObject> sponsoredMessages;
        if (!this.sponsoredMessagesAdded && this.chatMode == 0 && ChatObject.isChannel(this.currentChat)) {
            TLRPC$Chat tLRPC$Chat = this.currentChat;
            if (tLRPC$Chat.megagroup || tLRPC$Chat.gigagroup || !this.forwardEndReached[0] || (sponsoredMessages = getMessagesController().getSponsoredMessages(this.dialog_id)) == null) {
                return;
            }
            this.sponsoredMessagesAdded = true;
            processNewMessages(sponsoredMessages);
        }
    }

    private void checkGroupCallJoin(boolean fromServer) {
        TLRPC$ChatFull tLRPC$ChatFull;
        String str;
        if (this.groupCall == null || (str = this.voiceChatHash) == null || !this.openAnimationEnded) {
            if (this.voiceChatHash != null && fromServer && (tLRPC$ChatFull = this.chatInfo) != null && tLRPC$ChatFull.call == null && this.fragmentView != null && getParentActivity() != null) {
                BulletinFactory.of(this).createSimpleBulletin(R.raw.linkbroken, LocaleController.getString("LinkHashExpired", R.string.LinkHashExpired)).show();
                this.voiceChatHash = null;
            }
            this.lastCallCheckFromServer = !this.openAnimationEnded;
            return;
        }
        VoIPHelper.startCall(this.currentChat, null, str, this.createGroupCall, getParentActivity(), this, getAccountInstance());
        this.voiceChatHash = null;
    }

    private void checkWaitingForReplies() {
        TLRPC$MessageFwdHeader tLRPC$MessageFwdHeader;
        int i;
        MessageObject messageObject;
        TLRPC$MessageReplies tLRPC$MessageReplies;
        int iIndexOf;
        if (this.waitingForReplies.size() == 0) {
            return;
        }
        int size = this.waitingForReplies.size();
        ArrayList arrayList = null;
        LongSparseArray longSparseArray = null;
        ArrayList arrayList2 = null;
        for (int i2 = 0; i2 < size; i2++) {
            MessageObject messageObjectValueAt = this.waitingForReplies.valueAt(i2);
            if (messageObjectValueAt.replyMessageObject != null) {
                if (arrayList == null) {
                    arrayList = new ArrayList();
                }
                arrayList.add(Integer.valueOf(this.waitingForReplies.keyAt(i2)));
                if (!(messageObjectValueAt.messageOwner.action instanceof TLRPC$TL_messageActionPinMessage) && (tLRPC$MessageFwdHeader = messageObjectValueAt.replyMessageObject.messageOwner.fwd_from) != null && MessageObject.getPeerId(tLRPC$MessageFwdHeader.saved_from_peer) == this.dialog_id && (i = messageObjectValueAt.replyMessageObject.messageOwner.fwd_from.channel_post) != 0 && (messageObject = this.messagesDict[0].get(i)) != null && (tLRPC$MessageReplies = messageObject.messageOwner.replies) != null) {
                    tLRPC$MessageReplies.replies++;
                    messageObject.animateComments = true;
                    TLRPC$Message tLRPC$Message = messageObjectValueAt.messageOwner;
                    TLRPC$Peer tLRPC$Peer = tLRPC$Message.from_id;
                    if (tLRPC$Peer == null) {
                        tLRPC$Peer = tLRPC$Message.peer_id;
                    }
                    int size2 = tLRPC$MessageReplies.recent_repliers.size();
                    int i3 = 0;
                    while (true) {
                        if (i3 >= size2) {
                            break;
                        }
                        if (MessageObject.getPeerId(messageObject.messageOwner.replies.recent_repliers.get(i3)) == MessageObject.getPeerId(tLRPC$Peer)) {
                            messageObject.messageOwner.replies.recent_repliers.remove(i3);
                            break;
                        }
                        i3++;
                    }
                    messageObject.messageOwner.replies.recent_repliers.add(0, tLRPC$Peer);
                    if (!messageObjectValueAt.isOut()) {
                        messageObject.messageOwner.replies.max_id = messageObjectValueAt.getId();
                    }
                    MessagesStorage messagesStorage = getMessagesStorage();
                    long j = this.currentChat.id;
                    int id = messageObject.getId();
                    TLRPC$MessageReplies tLRPC$MessageReplies2 = messageObject.messageOwner.replies;
                    messagesStorage.updateRepliesCount(j, id, tLRPC$MessageReplies2.recent_repliers, tLRPC$MessageReplies2.max_id, 1);
                    if (messageObject.hasValidGroupId()) {
                        MessageObject.GroupedMessages groupedMessages = this.groupedMessagesMap.get(messageObject.getGroupId());
                        if (groupedMessages != null) {
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                            int size3 = groupedMessages.messages.size();
                            for (int i4 = 0; i4 < size3; i4++) {
                                groupedMessages.messages.get(i4).animateComments = true;
                            }
                        }
                    } else if (this.chatAdapter != null && (iIndexOf = this.messages.indexOf(messageObject)) >= 0) {
                        if (arrayList2 == null) {
                            arrayList2 = new ArrayList();
                        }
                        arrayList2.add(Integer.valueOf(iIndexOf + this.chatAdapter.messagesStartRow));
                    }
                }
            }
        }
        if (arrayList != null) {
            int size4 = arrayList.size();
            for (int i5 = 0; i5 < size4; i5++) {
                this.waitingForReplies.remove(((Integer) arrayList.get(i5)).intValue());
            }
        }
        if (this.chatAdapter != null) {
            if (longSparseArray != null) {
                int size5 = longSparseArray.size();
                for (int i6 = 0; i6 < size5; i6++) {
                    MessageObject.GroupedMessages groupedMessages2 = (MessageObject.GroupedMessages) longSparseArray.valueAt(i6);
                    ArrayList<MessageObject> arrayList3 = groupedMessages2.messages;
                    int iIndexOf2 = this.messages.indexOf(arrayList3.get(arrayList3.size() - 1));
                    if (iIndexOf2 >= 0) {
                        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                        chatActivityAdapter.notifyItemRangeChanged(iIndexOf2 + chatActivityAdapter.messagesStartRow, groupedMessages2.messages.size());
                    }
                }
            }
            if (arrayList2 != null) {
                int size6 = arrayList2.size();
                for (int i7 = 0; i7 < size6; i7++) {
                    this.chatAdapter.notifyItemChanged(((Integer) arrayList2.get(i7)).intValue());
                }
            }
        }
    }

    private void clearHistory(boolean overwrite, TLRPC$TL_updates_channelDifferenceTooLong differenceTooLong) {
        TLRPC$User tLRPC$User;
        if (overwrite) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("clear history by overwrite firstLoading=" + this.firstLoading + " minMessage=" + this.minMessageId[0] + " topMessage=" + differenceTooLong.dialog.top_message);
            }
            if (this.firstLoading) {
                this.waitingForLoad.clear();
                this.chatWasReset = true;
                this.last_message_id = differenceTooLong.dialog.top_message;
                this.createUnreadMessageAfterId = 0;
            } else {
                TLRPC$Dialog tLRPC$Dialog = differenceTooLong.dialog;
                int i = tLRPC$Dialog.top_message;
                int[] iArr = this.minMessageId;
                if (i > iArr[0]) {
                    this.createUnreadMessageAfterId = Math.max(iArr[0] + 1, tLRPC$Dialog.read_inbox_max_id);
                }
            }
            this.forwardEndReached[0] = false;
            ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
            if (chatActivityAdapter != null && chatActivityAdapter.loadingDownRow < 0) {
                this.chatAdapter.notifyItemInserted(0);
            }
            TLRPC$Dialog tLRPC$Dialog2 = differenceTooLong.dialog;
            int i2 = tLRPC$Dialog2.unread_count;
            this.newUnreadMessageCount = i2;
            this.newMentionsCount = tLRPC$Dialog2.unread_mentions_count;
            if (this.prevSetUnreadCount != i2) {
                CounterView counterView = this.pagedownButtonCounter;
                if (counterView != null) {
                    counterView.setCount(i2, this.openAnimationEnded);
                }
                this.prevSetUnreadCount = this.newUnreadMessageCount;
                updatePagedownButtonVisibility(true);
            }
            int i3 = this.newMentionsCount;
            int i4 = differenceTooLong.dialog.unread_mentions_count;
            if (i3 != i4) {
                this.newMentionsCount = i4;
                if (i4 <= 0) {
                    this.newMentionsCount = 0;
                    this.hasAllMentionsLocal = true;
                    showMentionDownButton(false, true);
                } else {
                    SimpleTextView simpleTextView = this.mentiondownButtonCounter;
                    if (simpleTextView != null) {
                        simpleTextView.setText(String.format("%d", Integer.valueOf(i4)));
                    }
                    showMentionDownButton(true, true);
                }
            }
            checkScrollForLoad(false);
            return;
        }
        this.messages.clear();
        this.waitingForLoad.clear();
        this.messagesByDays.clear();
        this.groupedMessagesMap.clear();
        this.threadMessageAdded = false;
        for (int i5 = 1; i5 >= 0; i5--) {
            this.messagesDict[i5].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[i5] = Integer.MAX_VALUE;
                this.minMessageId[i5] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[i5] = Integer.MIN_VALUE;
                this.minMessageId[i5] = Integer.MAX_VALUE;
            }
            this.maxDate[i5] = Integer.MIN_VALUE;
            this.minDate[i5] = 0;
            this.selectedMessagesIds[i5].clear();
            this.selectedMessagesCanCopyIds[i5].clear();
            this.selectedMessagesCanStarIds[i5].clear();
        }
        hideActionMode();
        updatePinnedMessageView(true);
        if (this.botButtons != null) {
            this.botButtons = null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setButtons(null, false);
            }
        }
        if (this.progressView != null) {
            showProgressView(false);
            this.chatListView.setEmptyView(this.emptyViewContainer);
        }
        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
        if (chatActivityAdapter2 != null) {
            chatActivityAdapter2.notifyDataSetChanged(false);
        }
        if (this.currentEncryptedChat == null && (tLRPC$User = this.currentUser) != null && tLRPC$User.bot && this.botUser == null) {
            this.botUser = "";
            updateBottomOverlay();
        }
    }

    public boolean processSwitchButton(TLRPC$TL_keyboardButtonSwitchInline button) {
        if (this.inlineReturn == 0 || button.same_peer || this.parentLayout == null) {
            return false;
        }
        String str = "@" + this.currentUser.username + " " + button.query;
        if (this.inlineReturn == this.dialog_id) {
            this.inlineReturn = 0L;
            this.chatActivityEnterView.setFieldText(str);
        } else {
            getMediaDataController().saveDraft(this.inlineReturn, 0, str, null, null, false);
            if (this.parentLayout.fragmentsStack.size() > 1) {
                BaseFragment baseFragment = this.parentLayout.fragmentsStack.get(r0.size() - 2);
                if ((baseFragment instanceof ChatActivity) && ((ChatActivity) baseFragment).dialog_id == this.inlineReturn) {
                    finishFragment();
                } else {
                    Bundle bundle = new Bundle();
                    if (DialogObject.isEncryptedDialog(this.inlineReturn)) {
                        bundle.putInt("enc_id", DialogObject.getEncryptedChatId(this.inlineReturn));
                    } else if (DialogObject.isUserDialog(this.inlineReturn)) {
                        bundle.putLong("user_id", this.inlineReturn);
                    } else {
                        bundle.putLong("chat_id", -this.inlineReturn);
                    }
                    presentFragment(new ChatActivity(bundle), true);
                }
            }
        }
        return true;
    }

    private void showGigagroupConvertAlert() {
        TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
        if (tLRPC$ChatFull == null || this.paused) {
            return;
        }
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat.creator && tLRPC$Chat.megagroup && !tLRPC$Chat.gigagroup && tLRPC$ChatFull.pending_suggestions.contains("CONVERT_GIGAGROUP") && this.visibleDialog == null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$EhbsyWP1myQLZrpSwqJRftBuxho
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$showGigagroupConvertAlert$95$ChatActivity();
                }
            }, 1000L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showGigagroupConvertAlert$95, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$95$ChatActivity() {
        TLRPC$ChatFull tLRPC$ChatFull = this.chatInfo;
        if (tLRPC$ChatFull == null || this.paused) {
            return;
        }
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat.creator && tLRPC$Chat.megagroup && !tLRPC$Chat.gigagroup && tLRPC$ChatFull.pending_suggestions.contains("CONVERT_GIGAGROUP") && this.visibleDialog == null) {
            SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
            int i = notificationsSettings.getInt("group_convert_time", 0);
            int i2 = BuildVars.DEBUG_PRIVATE_VERSION ? R.styleable.AppCompatTheme_windowNoTitle : 604800;
            int currentTime = getConnectionsManager().getCurrentTime();
            if (Math.abs(currentTime - i) < i2 || this.visibleDialog != null || getParentActivity() == null) {
                return;
            }
            notificationsSettings.edit().putInt("group_convert_time", currentTime).commit();
            showDialog(AlertsCreator.createGigagroupConvertAlert(getParentActivity(), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$CfZB9wl03cA4m5CSkUijcKr2i4k
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i3) {
                    this.f$0.lambda$showGigagroupConvertAlert$93$ChatActivity(dialogInterface, i3);
                }
            }, new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$DL6vQ0wmPYT09_DE6SQMTHV9r_E
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i3) {
                    this.f$0.lambda$showGigagroupConvertAlert$94$ChatActivity(dialogInterface, i3);
                }
            }).create());
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$86, reason: invalid class name */
    class AnonymousClass86 extends GigagroupConvertAlert {
        AnonymousClass86(final Context context, BaseFragment parentFragment) {
            super(context, parentFragment);
        }

        @Override // ir.eitaa.ui.Components.GigagroupConvertAlert
        protected void onCovert() {
            MessagesController messagesController = ChatActivity.this.getMessagesController();
            Activity parentActivity = ChatActivity.this.getParentActivity();
            ChatActivity chatActivity = ChatActivity.this;
            messagesController.convertToGigaGroup(parentActivity, chatActivity.currentChat, chatActivity, new MessagesStorage.BooleanCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$86$IA1u-PXKiNean_PPLCCcoUkWol8
                @Override // ir.eitaa.messenger.MessagesStorage.BooleanCallback
                public final void run(boolean z) {
                    this.f$0.lambda$onCovert$0$ChatActivity$86(z);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onCovert$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onCovert$0$ChatActivity$86(boolean z) {
            if (z) {
                ChatActivity.this.undoView.showWithAction(0L, 76, (Runnable) null);
            }
        }

        @Override // ir.eitaa.ui.Components.GigagroupConvertAlert
        protected void onCancel() {
            ChatActivity.this.undoView.showWithAction(0L, 75, (Runnable) null);
            ChatActivity.this.getMessagesController().removeSuggestion(ChatActivity.this.dialog_id, "CONVERT_GIGAGROUP");
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showGigagroupConvertAlert$93, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$93$ChatActivity(DialogInterface dialogInterface, int i) {
        showDialog(new AnonymousClass86(getParentActivity(), this));
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showGigagroupConvertAlert$94, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$94$ChatActivity(DialogInterface dialogInterface, int i) {
        this.undoView.showWithAction(0L, 75, (Runnable) null);
    }

    private void addReplyMessageOwner(MessageObject obj, Integer oldId) {
        MessageObject messageObject = obj.replyMessageObject;
        if (messageObject == null) {
            return;
        }
        int id = messageObject.getId();
        ArrayList<Integer> arrayList = this.replyMessageOwners.get(id);
        if (arrayList == null) {
            arrayList = new ArrayList<>();
            this.replyMessageOwners.put(id, arrayList);
        }
        int id2 = obj.getId();
        if (!arrayList.contains(Integer.valueOf(id2))) {
            arrayList.add(Integer.valueOf(id2));
        }
        if (oldId.intValue() != 0) {
            arrayList.remove(oldId);
        }
    }

    private void updateReplyMessageOwners(int id, MessageObject update) throws Resources.NotFoundException, NumberFormatException {
        ArrayList<Integer> arrayList = this.replyMessageOwners.get(id);
        if (arrayList == null) {
            return;
        }
        MessageObject messageObject = update == null ? new MessageObject(this.currentAccount, new TLRPC$TL_messageEmpty(), false, false) : null;
        int size = arrayList.size();
        for (int i = 0; i < size; i++) {
            MessageObject messageObject2 = this.messagesDict[0].get(arrayList.get(i).intValue());
            if (messageObject2 != null) {
                if (update == null) {
                    messageObject2.replyMessageObject = messageObject;
                } else {
                    messageObject2.replyMessageObject = update;
                }
                this.chatAdapter.updateRowWithMessageObject(messageObject2, true);
            }
        }
        if (update == null) {
            this.replyMessageOwners.remove(id);
        }
    }

    private void rotateMotionBackgroundDrawable() {
        MotionBackgroundDrawable motionBackgroundDrawable;
        Drawable wallpaperDrawable = this.themeDelegate.getWallpaperDrawable();
        View view = this.fragmentView;
        if (view != null) {
            wallpaperDrawable = ((SizeNotifierFrameLayout) view).getBackgroundImage();
        }
        if (wallpaperDrawable instanceof MotionBackgroundDrawable) {
            ((MotionBackgroundDrawable) wallpaperDrawable).switchToNextPosition();
        }
        Drawable themedDrawable = getThemedDrawable("drawableMsgOut");
        if (!(themedDrawable instanceof Theme.MessageDrawable) || (motionBackgroundDrawable = ((Theme.MessageDrawable) themedDrawable).getMotionBackgroundDrawable()) == null) {
            return;
        }
        motionBackgroundDrawable.switchToNextPosition();
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:258:0x03d9  */
    /* JADX WARN: Removed duplicated region for block: B:396:0x0636  */
    /* JADX WARN: Removed duplicated region for block: B:399:0x063a  */
    /* JADX WARN: Removed duplicated region for block: B:431:0x06ac  */
    /* JADX WARN: Removed duplicated region for block: B:432:0x06ae  */
    /* JADX WARN: Removed duplicated region for block: B:438:0x06db  */
    /* JADX WARN: Removed duplicated region for block: B:440:0x06e3  */
    /* JADX WARN: Removed duplicated region for block: B:442:0x06eb  */
    /* JADX WARN: Removed duplicated region for block: B:446:0x06f4  */
    /* JADX WARN: Removed duplicated region for block: B:465:0x074d  */
    /* JADX WARN: Removed duplicated region for block: B:527:0x08f9  */
    /* JADX WARN: Removed duplicated region for block: B:531:0x0902  */
    /* JADX WARN: Removed duplicated region for block: B:544:0x0956  */
    /* JADX WARN: Removed duplicated region for block: B:549:0x0962  */
    /* JADX WARN: Removed duplicated region for block: B:552:0x0970  */
    /* JADX WARN: Removed duplicated region for block: B:556:0x097f  */
    /* JADX WARN: Removed duplicated region for block: B:559:0x0989  */
    /* JADX WARN: Removed duplicated region for block: B:562:0x0990  */
    /* JADX WARN: Removed duplicated region for block: B:569:0x09a9  */
    /* JADX WARN: Removed duplicated region for block: B:571:0x09ac  */
    /* JADX WARN: Removed duplicated region for block: B:575:0x09bb  */
    /* JADX WARN: Removed duplicated region for block: B:578:0x09c5  */
    /* JADX WARN: Removed duplicated region for block: B:708:0x0734 A[SYNTHETIC] */
    /* JADX WARN: Type inference failed for: r4v63 */
    /* JADX WARN: Type inference failed for: r4v64, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r4v69 */
    /* JADX WARN: Type inference failed for: r4v70 */
    /* JADX WARN: Type inference failed for: r4v86 */
    /* JADX WARN: Type inference failed for: r4v89 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processNewMessages(java.util.ArrayList<ir.eitaa.messenger.MessageObject> r31) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 2991
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.processNewMessages(java.util.ArrayList):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processNewMessages$96, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processNewMessages$96$ChatActivity(int i) throws Resources.NotFoundException, NumberFormatException {
        scrollToMessageId(i, 0, false, 0, true, 0);
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:120:0x0226  */
    /* JADX WARN: Removed duplicated region for block: B:128:0x0258  */
    /* JADX WARN: Removed duplicated region for block: B:129:0x025f  */
    /* JADX WARN: Removed duplicated region for block: B:134:0x027a  */
    /* JADX WARN: Removed duplicated region for block: B:137:0x0282  */
    /* JADX WARN: Removed duplicated region for block: B:139:0x02c1  */
    /* JADX WARN: Removed duplicated region for block: B:143:0x02ce  */
    /* JADX WARN: Removed duplicated region for block: B:164:0x0346  */
    /* JADX WARN: Removed duplicated region for block: B:192:0x040e  */
    /* JADX WARN: Removed duplicated region for block: B:217:0x0489  */
    /* JADX WARN: Removed duplicated region for block: B:221:0x049e  */
    /* JADX WARN: Removed duplicated region for block: B:237:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:35:0x0070  */
    /* JADX WARN: Removed duplicated region for block: B:38:0x007f  */
    /* JADX WARN: Removed duplicated region for block: B:53:0x00c5  */
    /* JADX WARN: Removed duplicated region for block: B:64:0x0109  */
    /* JADX WARN: Removed duplicated region for block: B:88:0x0167  */
    /* JADX WARN: Removed duplicated region for block: B:91:0x0173  */
    /* JADX WARN: Type inference failed for: r14v4 */
    /* JADX WARN: Type inference failed for: r14v5, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r14v9 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processDeletedMessages(java.util.ArrayList<java.lang.Integer> r40, long r41) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 1187
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.processDeletedMessages(java.util.ArrayList, long):void");
    }

    private void replaceMessageObjects(ArrayList<MessageObject> messageObjects, int loadIndex, boolean remove) throws Resources.NotFoundException, NumberFormatException {
        ChatActivityAdapter chatActivityAdapter;
        int i;
        MessageObject.GroupedMessages groupedMessages;
        int iIndexOf;
        ArrayList<TLRPC$PhotoSize> arrayList;
        MessageObject messageObject;
        TLRPC$User tLRPC$User = null;
        LongSparseArray longSparseArray = null;
        int i2 = 0;
        while (i2 < messageObjects.size()) {
            MessageObject messageObject2 = messageObjects.get(i2);
            if (this.pinnedMessageObjects.get(Integer.valueOf(messageObject2.getId())) != null) {
                this.pinnedMessageObjects.put(Integer.valueOf(messageObject2.getId()), messageObject2);
            }
            MessageObject messageObject3 = this.messagesDict[loadIndex].get(messageObject2.getId());
            if (this.pinnedMessageObjects.containsKey(Integer.valueOf(messageObject2.getId()))) {
                this.pinnedMessageObjects.put(Integer.valueOf(messageObject2.getId()), messageObject2);
                if (messageObject2.getId() == this.currentPinnedMessageId) {
                    updatePinnedMessageView(true);
                }
            }
            if (loadIndex == 0 && this.repliesMessagesDict.indexOfKey(messageObject2.getId()) >= 0) {
                this.repliesMessagesDict.put(messageObject2.getId(), messageObject2);
            }
            if (messageObject3 != null && (!remove || messageObject3.messageOwner.date == messageObject2.messageOwner.date)) {
                if (remove) {
                    messageObjects.remove(i2);
                    i2--;
                }
                addToPolls(messageObject2, messageObject3);
                if (messageObject2.type >= 0) {
                    MessageObject messageObject4 = messageObject3.replyMessageObject;
                    if (messageObject4 != null) {
                        messageObject2.replyMessageObject = messageObject4;
                        TLRPC$MessageAction tLRPC$MessageAction = messageObject2.messageOwner.action;
                        if (tLRPC$MessageAction instanceof TLRPC$TL_messageActionGameScore) {
                            messageObject2.generateGameMessageText(tLRPC$User);
                        } else if (tLRPC$MessageAction instanceof TLRPC$TL_messageActionPaymentSent) {
                            messageObject2.generatePaymentSentMessageText(tLRPC$User);
                        }
                    }
                    if (!messageObject3.isEditing()) {
                        if (messageObject3.getFileName().equals(messageObject2.getFileName())) {
                            messageObject2.messageOwner.attachPath = messageObject3.messageOwner.attachPath;
                            messageObject2.attachPathExists = messageObject3.attachPathExists;
                            messageObject2.mediaExists = messageObject3.mediaExists;
                        } else {
                            messageObject2.checkMediaExistance();
                        }
                    }
                    this.messagesDict[loadIndex].put(messageObject3.getId(), messageObject2);
                } else {
                    this.messagesDict[loadIndex].remove(messageObject3.getId());
                }
                int iIndexOf2 = this.messages.indexOf(messageObject3);
                if (iIndexOf2 >= 0) {
                    ArrayList<MessageObject> arrayList2 = this.messagesByDays.get(messageObject3.dateKey);
                    int iIndexOf3 = arrayList2 != null ? arrayList2.indexOf(messageObject3) : -1;
                    if (messageObject3.getGroupId() != 0 && (groupedMessages = this.groupedMessagesMap.get(messageObject3.getGroupId())) != null && (iIndexOf = groupedMessages.messages.indexOf(messageObject3)) >= 0) {
                        if (messageObject3.getGroupId() != messageObject2.getGroupId()) {
                            this.groupedMessagesMap.put(messageObject2.getGroupId(), groupedMessages);
                        }
                        if (!messageObject2.isMusic() && !messageObject2.isDocument() && ((arrayList = messageObject2.photoThumbs) == null || arrayList.isEmpty())) {
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                            if (iIndexOf <= 0 || iIndexOf >= groupedMessages.messages.size() - 1) {
                                messageObject = messageObject3;
                            } else {
                                MessageObject.GroupedMessages groupedMessages2 = new MessageObject.GroupedMessages();
                                messageObject = messageObject3;
                                groupedMessages2.groupId = Utilities.random.nextLong();
                                ArrayList<MessageObject> arrayList3 = groupedMessages2.messages;
                                ArrayList<MessageObject> arrayList4 = groupedMessages.messages;
                                int i3 = iIndexOf + 1;
                                arrayList3.addAll(arrayList4.subList(i3, arrayList4.size()));
                                for (int i4 = 0; i4 < groupedMessages2.messages.size(); i4++) {
                                    groupedMessages2.messages.get(i4).localGroupId = groupedMessages2.groupId;
                                    groupedMessages.messages.remove(i3);
                                }
                                longSparseArray.put(groupedMessages2.groupId, groupedMessages2);
                                this.groupedMessagesMap.put(groupedMessages2.groupId, groupedMessages2);
                            }
                            groupedMessages.messages.remove(iIndexOf);
                            messageObject3 = messageObject;
                        } else {
                            groupedMessages.messages.set(iIndexOf, messageObject2);
                            messageObject3 = messageObject3;
                            MessageObject.GroupedMessagePosition groupedMessagePositionRemove = groupedMessages.positions.remove(messageObject3);
                            if (groupedMessagePositionRemove != null) {
                                groupedMessages.positions.put(messageObject2, groupedMessagePositionRemove);
                            }
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                        }
                    }
                    if (messageObject2.type >= 0) {
                        messageObject2.stableId = messageObject3.stableId;
                        this.messages.set(iIndexOf2, messageObject2);
                        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
                        if (chatActivityAdapter2 != null) {
                            chatActivityAdapter2.updateRowAtPosition(chatActivityAdapter2.messagesStartRow + iIndexOf2);
                        }
                        if (iIndexOf3 >= 0) {
                            arrayList2.set(iIndexOf3, messageObject2);
                        }
                    } else {
                        this.messages.remove(iIndexOf2);
                        ChatActivityAdapter chatActivityAdapter3 = this.chatAdapter;
                        if (chatActivityAdapter3 != null) {
                            chatActivityAdapter3.notifyItemRemoved(chatActivityAdapter3.messagesStartRow + iIndexOf2);
                        }
                        if (iIndexOf3 >= 0) {
                            arrayList2.remove(iIndexOf3);
                            if (arrayList2.isEmpty()) {
                                this.messagesByDays.remove(messageObject3.dateKey);
                                this.messages.remove(iIndexOf2);
                                int i5 = this.chatAdapter.loadingUpRow;
                                int i6 = this.chatAdapter.loadingDownRow;
                                ChatActivityAdapter chatActivityAdapter4 = this.chatAdapter;
                                chatActivityAdapter4.notifyItemRemoved(chatActivityAdapter4.messagesStartRow + iIndexOf2);
                                if (this.messages.isEmpty()) {
                                    if (i5 >= 0) {
                                        i = 0;
                                        this.chatAdapter.notifyItemRemoved(0);
                                    } else {
                                        i = 0;
                                    }
                                    if (i6 >= 0) {
                                        this.chatAdapter.notifyItemRemoved(i);
                                    }
                                }
                                updateReplyMessageOwners(messageObject3.getId(), messageObject2);
                            }
                        }
                    }
                    updateReplyMessageOwners(messageObject3.getId(), messageObject2);
                } else {
                    updateReplyMessageOwners(messageObject3.getId(), messageObject2);
                }
            }
            i2++;
            tLRPC$User = null;
        }
        if (longSparseArray != null) {
            for (int i7 = 0; i7 < longSparseArray.size(); i7++) {
                MessageObject.GroupedMessages groupedMessages3 = (MessageObject.GroupedMessages) longSparseArray.valueAt(i7);
                if (groupedMessages3.messages.isEmpty()) {
                    this.groupedMessagesMap.remove(groupedMessages3.groupId);
                } else {
                    groupedMessages3.calculate();
                    ArrayList<MessageObject> arrayList5 = groupedMessages3.messages;
                    int iIndexOf4 = this.messages.indexOf(arrayList5.get(arrayList5.size() - 1));
                    if (iIndexOf4 >= 0 && (chatActivityAdapter = this.chatAdapter) != null) {
                        chatActivityAdapter.notifyItemRangeChanged(iIndexOf4 + chatActivityAdapter.messagesStartRow, groupedMessages3.messages.size());
                        ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
                        if (chatListItemAnimator != null) {
                            chatListItemAnimator.groupWillChanged(groupedMessages3);
                        }
                    }
                }
            }
        }
    }

    private void migrateToNewChat(final MessageObject obj) {
        final BaseFragment baseFragment;
        ActionBarLayout actionBarLayout = this.parentLayout;
        if (actionBarLayout == null) {
            return;
        }
        final long j = obj.messageOwner.action.channel_id;
        if (actionBarLayout.fragmentsStack.size() > 0) {
            baseFragment = this.parentLayout.fragmentsStack.get(r0.size() - 1);
        } else {
            baseFragment = null;
        }
        int iIndexOf = this.parentLayout.fragmentsStack.indexOf(this);
        final ActionBarLayout actionBarLayout2 = this.parentLayout;
        if (iIndexOf > 0 && !(baseFragment instanceof ChatActivity) && !(baseFragment instanceof ProfileActivity) && this.currentChat.creator) {
            int size = actionBarLayout2.fragmentsStack.size() - 1;
            while (iIndexOf < size) {
                BaseFragment baseFragment2 = actionBarLayout2.fragmentsStack.get(iIndexOf);
                if (baseFragment2 instanceof ChatActivity) {
                    Bundle bundle = new Bundle();
                    bundle.putLong("chat_id", j);
                    actionBarLayout2.addFragmentToStack(new ChatActivity(bundle), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ProfileActivity) {
                    Bundle bundle2 = new Bundle();
                    bundle2.putLong("chat_id", j);
                    actionBarLayout2.addFragmentToStack(new ProfileActivity(bundle2), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ChatEditActivity) {
                    Bundle bundle3 = new Bundle();
                    bundle3.putLong("chat_id", j);
                    actionBarLayout2.addFragmentToStack(new ChatEditActivity(bundle3), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ChatUsersActivity) {
                    if (!((ChatUsersActivity) baseFragment2).hasSelectType()) {
                        Bundle arguments = baseFragment2.getArguments();
                        arguments.putLong("chat_id", j);
                        actionBarLayout2.addFragmentToStack(new ChatUsersActivity(arguments), iIndexOf);
                    }
                    baseFragment2.removeSelfFromStack();
                }
                iIndexOf++;
            }
        } else {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$kYtTA3bhHdXYYAtiwj8-KdHMDP4
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$migrateToNewChat$97$ChatActivity(baseFragment, obj, actionBarLayout2);
                }
            });
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$jsYA75QqeU_M6a0XFQkrHJDNJQ0
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$migrateToNewChat$98$ChatActivity(j);
            }
        }, 1000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$migrateToNewChat$97, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$migrateToNewChat$97$ChatActivity(BaseFragment baseFragment, MessageObject messageObject, ActionBarLayout actionBarLayout) {
        if (baseFragment instanceof NotificationCenter.NotificationCenterDelegate) {
            getNotificationCenter().removeObserver(baseFragment, NotificationCenter.closeChats);
        }
        getNotificationCenter().postNotificationName(NotificationCenter.closeChats, new Object[0]);
        Bundle bundle = new Bundle();
        bundle.putLong("chat_id", messageObject.messageOwner.action.channel_id);
        actionBarLayout.addFragmentToStack(new ChatActivity(bundle), actionBarLayout.fragmentsStack.size() - 1);
        baseFragment.finishFragment();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$migrateToNewChat$98, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$migrateToNewChat$98$ChatActivity(long j) {
        getMessagesController().loadFullChat(j, 0, true);
    }

    private void addToPolls(MessageObject obj, MessageObject old) {
        long pollId = obj.getPollId();
        if (pollId != 0) {
            ArrayList<MessageObject> arrayList = this.polls.get(pollId);
            if (arrayList == null) {
                arrayList = new ArrayList<>();
                this.polls.put(pollId, arrayList);
            }
            arrayList.add(obj);
            if (old != null) {
                arrayList.remove(old);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showInfoHint(MessageObject messageObject, CharSequence text, final int type) {
        UndoView undoView = this.topUndoView;
        if (undoView == null) {
            return;
        }
        Runnable runnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$0_fVdHmr9d2soVZhpuERLYo8vdM
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showInfoHint$99$ChatActivity(type);
            }
        };
        undoView.showWithAction(0L, 18, text, runnable, runnable);
        this.hintMessageObject = messageObject;
        this.hintMessageType = type;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showInfoHint$99, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showInfoHint$99$ChatActivity(int i) {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            int childCount = recyclerListView.getChildCount();
            for (int i2 = 0; i2 < childCount; i2++) {
                View childAt = this.chatListView.getChildAt(i2);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.equals(this.hintMessageObject)) {
                    chatMessageCell.showHintButton(true, true, i);
                }
            }
        }
        this.hintMessageObject = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showPollSolution(MessageObject messageObject, TLRPC$PollResults results) {
        CharSequence spannableStringBuilder;
        if (results == null || TextUtils.isEmpty(results.solution)) {
            return;
        }
        if (!results.solution_entities.isEmpty()) {
            spannableStringBuilder = new SpannableStringBuilder(results.solution);
            MessageObject.addEntitiesToText(spannableStringBuilder, results.solution_entities, false, true, true, false);
        } else {
            spannableStringBuilder = results.solution;
        }
        showInfoHint(messageObject, spannableStringBuilder, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateSearchButtons(int mask, int num, int count) {
        ImageView imageView = this.searchUpButton;
        if (imageView != null) {
            imageView.setEnabled((mask & 1) != 0);
            this.searchDownButton.setEnabled((mask & 2) != 0);
            ImageView imageView2 = this.searchUpButton;
            imageView2.setAlpha(imageView2.isEnabled() ? 1.0f : 0.5f);
            ImageView imageView3 = this.searchDownButton;
            imageView3.setAlpha(imageView3.isEnabled() ? 1.0f : 0.5f);
            if (count < 0) {
                this.searchCountText.setCount("", 0, false);
            } else if (count == 0) {
                this.searchCountText.setCount(LocaleController.getString("NoResult", R.string.NoResult), 0, false);
            } else {
                int i = num + 1;
                this.searchCountText.setCount(LocaleController.formatString("OfCounted", R.string.OfCounted, Integer.valueOf(i), Integer.valueOf(count)), i, true);
            }
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean needDelayOpenAnimation() {
        if (this.chatMode != 1 && getParentLayout().fragmentsStack.size() > 1) {
            BaseFragment baseFragment = getParentLayout().fragmentsStack.get(getParentLayout().fragmentsStack.size() - 2);
            if ((baseFragment instanceof ChatActivity) && ((ChatActivity) baseFragment).isKeyboardVisible()) {
                return false;
            }
        }
        return this.firstLoading;
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected void onBecomeFullyVisible() {
        super.onBecomeFullyVisible();
        if (this.showCloseChatDialogLater) {
            showDialog(this.closeChatDialog);
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected void onBecomeFullyHidden() {
        hideUndoViews();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void saveKeyboardPositionBeforeTransition() {
        Runnable runnable = this.cancelFixedPositionRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || this.contentView == null || chatActivityEnterView.getAdjustPanLayoutHelper() == null || this.chatActivityEnterView.getAdjustPanLayoutHelper().animationInProgress()) {
            return;
        }
        this.fixedKeyboardHeight = this.contentView.getKeyboardHeight();
    }

    public void removeKeyboardPositionBeforeTransition() {
        if (this.fixedKeyboardHeight > 0) {
            Runnable runnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$LaMqXghsz69hsDB9NqKzRgc-XWg
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$removeKeyboardPositionBeforeTransition$100$ChatActivity();
                }
            };
            this.cancelFixedPositionRunnable = runnable;
            AndroidUtilities.runOnUIThread(runnable, 200L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$removeKeyboardPositionBeforeTransition$100, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$removeKeyboardPositionBeforeTransition$100$ChatActivity() {
        this.cancelFixedPositionRunnable = null;
        this.fixedKeyboardHeight = -1;
        this.fragmentView.requestLayout();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onTransitionAnimationStart(boolean isOpen, boolean backward) {
        int[] iArr;
        super.onTransitionAnimationStart(isOpen, backward);
        if (isOpen) {
            iArr = this.transitionAnimationIndex == 0 ? new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog, NotificationCenter.messagesDidLoad} : new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog};
            this.openAnimationEnded = false;
            if (!backward) {
                this.openAnimationStartTime = SystemClock.elapsedRealtime();
            }
        } else {
            iArr = UserObject.isUserSelf(this.currentUser) ? new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog, NotificationCenter.mediaDidLoad} : null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.onBeginHide();
            }
        }
        checkShowBlur(true);
        this.transitionAnimationIndex = getNotificationCenter().setAnimationInProgress(this.transitionAnimationIndex, iArr);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onTransitionAnimationEnd(boolean isOpen, boolean backward) throws InterruptedException, IOException {
        ActionBarLayout actionBarLayout;
        MessageObject messageObject;
        ActionBarLayout actionBarLayout2;
        Bulletin bulletin;
        super.onTransitionAnimationEnd(isOpen, backward);
        if (isOpen) {
            if (!this.fragmentOpened) {
                this.fragmentOpened = true;
                updateMessagesVisiblePart(false);
            }
            if (backward && this.showPinBulletin && (bulletin = this.pinBulletin) != null) {
                bulletin.show();
                this.showPinBulletin = false;
            }
        }
        Runnable runnable = this.cancelFixedPositionRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        this.fixedKeyboardHeight = -1;
        if (isOpen) {
            checkShowBlur(false);
            this.openAnimationEnded = true;
            getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
            if (Build.VERSION.SDK_INT >= 21) {
                createChatAttachView();
            }
            checkGroupCallJoin(this.lastCallCheckFromServer);
            if (this.chatActivityEnterView.hasRecordVideo() && !this.chatActivityEnterView.isSendButtonVisible()) {
                TLRPC$Chat tLRPC$Chat = this.currentChat;
                boolean z = (tLRPC$Chat == null || !ChatObject.isChannel(tLRPC$Chat) || this.currentChat.megagroup) ? false : true;
                SharedPreferences globalMainSettings = MessagesController.getGlobalMainSettings();
                String str = z ? "needShowRoundHintChannel2" : "needShowRoundHint2";
                int i = globalMainSettings.getInt(str, 0);
                if (i < 3 && Utilities.random.nextFloat() <= 0.2f) {
                    showVoiceHint(false, this.chatActivityEnterView.isInVideoMode());
                    globalMainSettings.edit().putInt(str, i + 1).commit();
                }
            }
            if (!backward && (actionBarLayout2 = this.parentLayout) != null && this.needRemovePreviousSameChatActivity) {
                int size = actionBarLayout2.fragmentsStack.size() - 1;
                int i2 = 0;
                while (true) {
                    if (i2 >= size) {
                        break;
                    }
                    BaseFragment baseFragment = this.parentLayout.fragmentsStack.get(i2);
                    if (baseFragment != this && (baseFragment instanceof ChatActivity)) {
                        ChatActivity chatActivity = (ChatActivity) baseFragment;
                        if (chatActivity.needRemovePreviousSameChatActivity && chatActivity.dialog_id == this.dialog_id && chatActivity.getChatMode() == getChatMode() && chatActivity.threadMessageId == this.threadMessageId && chatActivity.reportType == this.reportType) {
                            baseFragment.removeSelfFromStack();
                            break;
                        }
                    }
                    i2++;
                }
            }
            if (!backward && this.firstOpen) {
                if (this.chatActivityEnterView != null && (messageObject = this.threadMessageObject) != null && messageObject.getRepliesCount() == 0 && ChatObject.canSendMessages(this.currentChat)) {
                    this.chatActivityEnterView.setFieldFocused();
                    this.chatActivityEnterView.openKeyboard();
                }
                if (getMessagesController().isPromoDialog(this.dialog_id, true)) {
                    int i3 = getMessagesController().promoDialogType;
                    SharedPreferences globalNotificationsSettings = MessagesController.getGlobalNotificationsSettings();
                    String string = null;
                    if (i3 == MessagesController.PROMO_TYPE_PROXY) {
                        if (AndroidUtilities.getPrefIntOrLong(globalNotificationsSettings, "proxychannel", 0L) != this.dialog_id) {
                            string = LocaleController.getString("UseProxySponsorInfo", R.string.UseProxySponsorInfo);
                        }
                    } else if (i3 == MessagesController.PROMO_TYPE_PSA) {
                        String str2 = getMessagesController().promoPsaType;
                        if (!globalNotificationsSettings.getBoolean(str2 + "_shown", false)) {
                            String string2 = LocaleController.getString("PsaInfo_" + str2);
                            if (TextUtils.isEmpty(string2)) {
                                string2 = LocaleController.getString("PsaInfoDefault", R.string.PsaInfoDefault);
                            }
                            string = string2;
                        }
                    }
                    if (!TextUtils.isEmpty(string) && this.topUndoView != null) {
                        if (i3 == MessagesController.PROMO_TYPE_PROXY) {
                            globalNotificationsSettings.edit().putLong("proxychannel", this.dialog_id).commit();
                        } else if (i3 == MessagesController.PROMO_TYPE_PSA) {
                            String str3 = getMessagesController().promoPsaType;
                            globalNotificationsSettings.edit().putBoolean(str3 + "_shown", true).commit();
                        }
                        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(string);
                        MessageObject.addLinks(false, spannableStringBuilder);
                        this.topUndoView.showWithAction(0L, 18, spannableStringBuilder, null, null);
                    }
                }
                this.firstOpen = false;
            }
            if (!backward && this.fromPullingDownTransition && (actionBarLayout = this.parentLayout) != null && actionBarLayout.fragmentsStack.size() >= 2) {
                ArrayList<BaseFragment> arrayList = this.parentLayout.fragmentsStack;
                BaseFragment baseFragment2 = arrayList.get(arrayList.size() - 2);
                if (baseFragment2 instanceof ChatActivity) {
                    ChatActivity chatActivity2 = (ChatActivity) baseFragment2;
                    this.backToPreviousFragment = chatActivity2;
                    this.parentLayout.fragmentsStack.remove(chatActivity2);
                }
            }
        } else {
            getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
        }
        this.contentView.invalidate();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected void onDialogDismiss(Dialog dialog) {
        Dialog dialog2 = this.closeChatDialog;
        if (dialog2 == null || dialog != dialog2) {
            return;
        }
        getMessagesController().deleteDialog(this.dialog_id, 0);
        ActionBarLayout actionBarLayout = this.parentLayout;
        if (actionBarLayout != null && !actionBarLayout.fragmentsStack.isEmpty()) {
            if (this.parentLayout.fragmentsStack.get(r4.size() - 1) != this) {
                BaseFragment baseFragment = this.parentLayout.fragmentsStack.get(r4.size() - 1);
                removeSelfFromStack();
                baseFragment.finishFragment();
                return;
            }
        }
        finishFragment();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean extendActionMode(Menu menu) {
        if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isVisible()) {
            if (PhotoViewer.getInstance().getSelectiongLength() == 0 || menu.findItem(android.R.id.copy) == null) {
                return true;
            }
        } else {
            if (this.chatActivityEnterView.getSelectionLength() != 0 && menu.findItem(android.R.id.copy) != null) {
            }
            return true;
        }
        fillActionModeMenu(menu);
        return true;
    }

    public void fillActionModeMenu(Menu menu) {
        if (menu.findItem(R.id.menu_bold) != null) {
            return;
        }
        if (Build.VERSION.SDK_INT >= 23) {
            menu.removeItem(android.R.id.shareText);
        }
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString("Bold", R.string.Bold));
        spannableStringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.getFontFamily(true)), 0, spannableStringBuilder.length(), 33);
        menu.add(R.id.menu_groupbolditalic, R.id.menu_bold, 6, spannableStringBuilder);
        SpannableStringBuilder spannableStringBuilder2 = new SpannableStringBuilder(LocaleController.getString("Italic", R.string.Italic));
        spannableStringBuilder2.setSpan(new TypefaceSpan(AndroidUtilities.getFontFamily(false, true)), 0, spannableStringBuilder2.length(), 33);
        menu.add(R.id.menu_groupbolditalic, R.id.menu_italic, 7, spannableStringBuilder2);
        SpannableStringBuilder spannableStringBuilder3 = new SpannableStringBuilder(LocaleController.getString("Mono", R.string.Mono));
        spannableStringBuilder3.setSpan(new TypefaceSpan(AndroidUtilities.getFontFamily(false)), 0, spannableStringBuilder3.length(), 33);
        menu.add(R.id.menu_groupbolditalic, R.id.menu_mono, 8, spannableStringBuilder3);
        menu.add(R.id.menu_groupbolditalic, R.id.menu_link, 11, LocaleController.getString("CreateLink", R.string.CreateLink));
        menu.add(R.id.menu_groupbolditalic, R.id.menu_regular, 12, LocaleController.getString("Regular", R.string.Regular));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateScheduledInterface(boolean animated) {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.updateScheduleButton(animated);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:45:0x00d9  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateBottomOverlay() {
        /*
            Method dump skipped, instructions count: 849
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.updateBottomOverlay():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$updateBottomOverlay$101, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$updateBottomOverlay$101$ChatActivity() {
        this.chatActivityEnterView.openKeyboard();
    }

    public void updateReplyMessageHeader(boolean notify) throws Resources.NotFoundException, NumberFormatException {
        String string;
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null && this.threadMessageId != 0) {
            if (this.isComments) {
                if (this.threadMessageObject.hasReplies()) {
                    this.avatarContainer.setTitle(LocaleController.formatPluralString("Comments", this.threadMessageObject.getRepliesCount()));
                } else {
                    this.avatarContainer.setTitle(LocaleController.getString("CommentsTitle", R.string.CommentsTitle));
                }
            } else {
                chatAvatarContainer.setTitle(LocaleController.formatPluralString("Replies", this.threadMessageObject.getRepliesCount()));
            }
        }
        if (this.replyMessageHeaderObject == null) {
            return;
        }
        if (this.threadMessageObject.getRepliesCount() == 0) {
            if (this.isComments) {
                string = LocaleController.getString("NoComments", R.string.NoComments);
            } else {
                string = LocaleController.getString("NoReplies", R.string.NoReplies);
            }
        } else {
            string = LocaleController.getString("DiscussionStarted", R.string.DiscussionStarted);
        }
        MessageObject messageObject = this.replyMessageHeaderObject;
        messageObject.messageOwner.message = string;
        messageObject.messageText = string;
        if (notify) {
            this.chatAdapter.updateRowWithMessageObject(messageObject, true);
        }
    }

    public void showAlert(String name, String message) {
        FrameLayout frameLayout = this.alertView;
        if (frameLayout == null || name == null || message == null) {
            return;
        }
        if (frameLayout.getTag() != null) {
            this.alertView.setTag(null);
            AnimatorSet animatorSet = this.alertViewAnimator;
            if (animatorSet != null) {
                animatorSet.cancel();
                this.alertViewAnimator = null;
            }
            if (this.alertView.getVisibility() != 0) {
                this.alertViewEnterProgress = 0.0f;
                invalidateChatListViewTopPadding();
            }
            this.alertView.setVisibility(0);
            this.alertViewAnimator = new AnimatorSet();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.alertViewEnterProgress, 1.0f);
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Ljq89UoLpVYee8mjodJcbZgPeg4
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$showAlert$102$ChatActivity(valueAnimator);
                }
            });
            this.alertViewAnimator.playTogether(valueAnimatorOfFloat);
            this.alertViewAnimator.setDuration(200L);
            this.alertViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.89
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animation) {
                    if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animation)) {
                        return;
                    }
                    ChatActivity.this.alertViewEnterProgress = 1.0f;
                    ChatActivity.this.invalidateChatListViewTopPadding();
                    ChatActivity.this.alertViewAnimator = null;
                }

                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationCancel(Animator animation) {
                    if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animation)) {
                        return;
                    }
                    ChatActivity.this.alertViewAnimator = null;
                }
            });
            this.alertViewAnimator.start();
        }
        this.alertNameTextView.setText(name);
        this.alertTextView.setText(Emoji.replaceEmoji(message.replace('\n', ' '), this.alertTextView.getPaint().getFontMetricsInt(), AndroidUtilities.dp(14.0f), false));
        Runnable runnable = this.hideAlertViewRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        AnonymousClass90 anonymousClass90 = new AnonymousClass90();
        this.hideAlertViewRunnable = anonymousClass90;
        AndroidUtilities.runOnUIThread(anonymousClass90, 3000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showAlert$102, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showAlert$102$ChatActivity(ValueAnimator valueAnimator) {
        this.alertViewEnterProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$90, reason: invalid class name */
    class AnonymousClass90 implements Runnable {
        AnonymousClass90() {
        }

        @Override // java.lang.Runnable
        public void run() {
            if (ChatActivity.this.hideAlertViewRunnable == this && ChatActivity.this.alertView.getTag() == null) {
                ChatActivity.this.alertView.setTag(1);
                if (ChatActivity.this.alertViewAnimator != null) {
                    ChatActivity.this.alertViewAnimator.cancel();
                    ChatActivity.this.alertViewAnimator = null;
                }
                ChatActivity.this.alertViewAnimator = new AnimatorSet();
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(ChatActivity.this.alertViewEnterProgress, 0.0f);
                valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$90$w3ExrHYK5wXuTxINPuaVTwKVAQo
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$run$0$ChatActivity$90(valueAnimator);
                    }
                });
                ChatActivity.this.alertViewAnimator.playTogether(valueAnimatorOfFloat);
                ChatActivity.this.alertViewAnimator.setDuration(200L);
                ChatActivity.this.alertViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.90.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.alertView.setVisibility(8);
                        ChatActivity.this.alertViewEnterProgress = 0.0f;
                        ChatActivity.this.invalidateChatListViewTopPadding();
                        ChatActivity.this.alertViewAnimator = null;
                    }

                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.alertViewAnimator = null;
                    }
                });
                ChatActivity.this.alertViewAnimator.start();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$0$ChatActivity$90(ValueAnimator valueAnimator) {
            ChatActivity.this.alertViewEnterProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.invalidateChatListViewTopPadding();
        }
    }

    private boolean hidePinnedMessageView(boolean animated) {
        FrameLayout frameLayout = this.pinnedMessageView;
        if (frameLayout == null || frameLayout.getTag() != null) {
            return false;
        }
        int i = 0;
        while (true) {
            AnimatorSet[] animatorSetArr = this.pinnedNextAnimation;
            if (i >= animatorSetArr.length) {
                break;
            }
            if (animatorSetArr[i] != null) {
                animatorSetArr[i].cancel();
                this.pinnedNextAnimation[i] = null;
            }
            i++;
        }
        this.setPinnedTextTranslationX = false;
        this.pinnedMessageView.setTag(1);
        AnimatorSet animatorSet = this.pinnedMessageViewAnimator;
        if (animatorSet != null) {
            animatorSet.cancel();
            this.pinnedMessageViewAnimator = null;
        }
        if (animated) {
            this.pinnedMessageViewAnimator = new AnimatorSet();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.pinnedMessageEnterOffset, -AndroidUtilities.dp(50.0f));
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$sLpNhgCdzUVda5XvD-PMXBOdxck
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$hidePinnedMessageView$103$ChatActivity(valueAnimator);
                }
            });
            this.pinnedMessageViewAnimator.playTogether(valueAnimatorOfFloat);
            this.pinnedMessageViewAnimator.setDuration(200L);
            this.pinnedMessageViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.91
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animation) {
                    if (ChatActivity.this.pinnedMessageViewAnimator == null || !ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                        return;
                    }
                    ChatActivity.this.pinnedMessageView.setVisibility(8);
                    ChatActivity.this.pinnedMessageViewAnimator = null;
                }

                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationCancel(Animator animation) {
                    if (ChatActivity.this.pinnedMessageViewAnimator == null || !ChatActivity.this.pinnedMessageViewAnimator.equals(animation)) {
                        return;
                    }
                    ChatActivity.this.pinnedMessageViewAnimator = null;
                }
            });
            this.pinnedMessageViewAnimator.start();
        } else {
            this.pinnedMessageEnterOffset = -AndroidUtilities.dp(50.0f);
            this.pinnedMessageView.setVisibility(8);
            this.chatListView.invalidate();
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$hidePinnedMessageView$103, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$hidePinnedMessageView$103$ChatActivity(ValueAnimator valueAnimator) {
        this.pinnedMessageEnterOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
        this.chatListView.invalidate();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updatePinnedMessageView(boolean animated) {
        updatePinnedMessageView(animated, 0);
    }

    private void updatePinnedListButton(boolean animated) {
        if (isThreadChat() || this.pinnedListButton == null) {
            return;
        }
        boolean z = this.pinnedMessageIds.size() > 1;
        boolean z2 = this.pinnedListButton.getTag() != null;
        boolean z3 = this.pinnedProgress.getTag() != null;
        if (z != z2 || z3 != this.pinnedPorgressIsShowing) {
            AnimatorSet animatorSet = this.pinnedListAnimator;
            if (animatorSet != null) {
                animatorSet.cancel();
                this.pinnedListAnimator = null;
            }
            final boolean z4 = (z || this.pinnedPorgressIsShowing) ? false : true;
            final boolean z5 = z && !this.pinnedPorgressIsShowing;
            if (animated) {
                if (z) {
                    this.pinnedListButton.setVisibility(0);
                } else {
                    this.closePinned.setVisibility(0);
                }
                if (this.pinnedPorgressIsShowing) {
                    this.pinnedProgress.setVisibility(0);
                    this.pinnedProgress.setAlpha(0.0f);
                    this.pinnedProgress.setScaleX(0.4f);
                    this.pinnedProgress.setScaleY(0.4f);
                }
                AnimatorSet animatorSet2 = new AnimatorSet();
                this.pinnedListAnimator = animatorSet2;
                Animator[] animatorArr = new Animator[9];
                ImageView imageView = this.pinnedListButton;
                Property property = View.ALPHA;
                float[] fArr = new float[1];
                fArr[0] = z5 ? 1.0f : 0.0f;
                animatorArr[0] = ObjectAnimator.ofFloat(imageView, (Property<ImageView, Float>) property, fArr);
                ImageView imageView2 = this.pinnedListButton;
                Property property2 = View.SCALE_X;
                float[] fArr2 = new float[1];
                fArr2[0] = z5 ? 1.0f : 0.4f;
                animatorArr[1] = ObjectAnimator.ofFloat(imageView2, (Property<ImageView, Float>) property2, fArr2);
                ImageView imageView3 = this.pinnedListButton;
                Property property3 = View.SCALE_Y;
                float[] fArr3 = new float[1];
                fArr3[0] = z5 ? 1.0f : 0.4f;
                animatorArr[2] = ObjectAnimator.ofFloat(imageView3, (Property<ImageView, Float>) property3, fArr3);
                ImageView imageView4 = this.closePinned;
                Property property4 = View.ALPHA;
                float[] fArr4 = new float[1];
                fArr4[0] = z4 ? 1.0f : 0.0f;
                animatorArr[3] = ObjectAnimator.ofFloat(imageView4, (Property<ImageView, Float>) property4, fArr4);
                ImageView imageView5 = this.closePinned;
                Property property5 = View.SCALE_X;
                float[] fArr5 = new float[1];
                fArr5[0] = z4 ? 1.0f : 0.4f;
                animatorArr[4] = ObjectAnimator.ofFloat(imageView5, (Property<ImageView, Float>) property5, fArr5);
                ImageView imageView6 = this.closePinned;
                Property property6 = View.SCALE_Y;
                float[] fArr6 = new float[1];
                fArr6[0] = z4 ? 1.0f : 0.4f;
                animatorArr[5] = ObjectAnimator.ofFloat(imageView6, (Property<ImageView, Float>) property6, fArr6);
                RadialProgressView radialProgressView = this.pinnedProgress;
                Property property7 = View.ALPHA;
                float[] fArr7 = new float[1];
                fArr7[0] = !this.pinnedPorgressIsShowing ? 0.0f : 1.0f;
                animatorArr[6] = ObjectAnimator.ofFloat(radialProgressView, (Property<RadialProgressView, Float>) property7, fArr7);
                RadialProgressView radialProgressView2 = this.pinnedProgress;
                Property property8 = View.SCALE_X;
                float[] fArr8 = new float[1];
                fArr8[0] = !this.pinnedPorgressIsShowing ? 0.4f : 1.0f;
                animatorArr[7] = ObjectAnimator.ofFloat(radialProgressView2, (Property<RadialProgressView, Float>) property8, fArr8);
                RadialProgressView radialProgressView3 = this.pinnedProgress;
                Property property9 = View.SCALE_Y;
                float[] fArr9 = new float[1];
                fArr9[0] = !this.pinnedPorgressIsShowing ? 0.4f : 1.0f;
                animatorArr[8] = ObjectAnimator.ofFloat(radialProgressView3, (Property<RadialProgressView, Float>) property9, fArr9);
                animatorSet2.playTogether(animatorArr);
                this.pinnedListAnimator.setDuration(180L);
                this.pinnedListAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.92
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        ChatActivity.this.pinnedListAnimator = null;
                        ChatActivity.this.closePinned.setVisibility(z4 ? 0 : 4);
                        ChatActivity.this.pinnedListButton.setVisibility(z5 ? 0 : 4);
                        ChatActivity.this.pinnedProgress.setVisibility(ChatActivity.this.pinnedPorgressIsShowing ? 0 : 4);
                    }
                });
                this.pinnedListAnimator.start();
            } else {
                this.closePinned.setAlpha(z4 ? 1.0f : 0.0f);
                this.closePinned.setScaleX(z4 ? 1.0f : 0.4f);
                this.closePinned.setScaleY(z4 ? 1.0f : 0.4f);
                this.closePinned.setVisibility(z4 ? 0 : 4);
                this.pinnedListButton.setAlpha(z5 ? 1.0f : 0.0f);
                this.pinnedListButton.setScaleX(z5 ? 1.0f : 0.4f);
                this.pinnedListButton.setScaleY(z5 ? 1.0f : 0.4f);
                this.pinnedListButton.setVisibility(z5 ? 0 : 4);
                this.pinnedProgress.setAlpha(this.pinnedPorgressIsShowing ? 1.0f : 0.0f);
                this.pinnedProgress.setScaleX(this.pinnedPorgressIsShowing ? 1.0f : 0.4f);
                this.pinnedProgress.setScaleY(this.pinnedPorgressIsShowing ? 1.0f : 0.4f);
                this.pinnedProgress.setVisibility(this.pinnedPorgressIsShowing ? 0 : 8);
            }
            this.pinnedListButton.setTag(z ? 1 : null);
            this.pinnedProgress.setTag(this.pinnedPorgressIsShowing ? 1 : null);
        }
        if (this.pinnedLineView != null) {
            if (isThreadChat()) {
                this.pinnedLineView.set(0, 1, false);
            } else {
                this.pinnedLineView.set((this.pinnedMessageIds.size() - 1) - Collections.binarySearch(this.pinnedMessageIds, Integer.valueOf(this.currentPinnedMessageId), Comparator.CC.reverseOrder()), this.pinnedMessageIds.size(), animated);
            }
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:159:0x03c5  */
    /* JADX WARN: Removed duplicated region for block: B:160:0x03d3  */
    /* JADX WARN: Removed duplicated region for block: B:174:0x0412  */
    /* JADX WARN: Removed duplicated region for block: B:181:0x043c  */
    /* JADX WARN: Removed duplicated region for block: B:208:0x050b  */
    /* JADX WARN: Removed duplicated region for block: B:20:0x004c  */
    /* JADX WARN: Removed duplicated region for block: B:291:0x094e  */
    /* JADX WARN: Removed duplicated region for block: B:305:0x09aa  */
    /* JADX WARN: Removed duplicated region for block: B:309:0x09b5  */
    /* JADX WARN: Removed duplicated region for block: B:314:0x0a54  */
    /* JADX WARN: Removed duplicated region for block: B:315:0x0a5c  */
    /* JADX WARN: Removed duplicated region for block: B:32:0x008f  */
    /* JADX WARN: Removed duplicated region for block: B:330:0x0aae  */
    /* JADX WARN: Removed duplicated region for block: B:333:0x0ac3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void updatePinnedMessageView(boolean r36, int r37) {
        /*
            Method dump skipped, instructions count: 2930
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.updatePinnedMessageView(boolean, int):void");
    }

    private void updateTopPanel(boolean animated) {
        boolean z;
        if (this.topChatPanelView == null || this.chatMode != 0) {
            return;
        }
        SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
        long j = this.dialog_id;
        TLRPC$EncryptedChat tLRPC$EncryptedChat = this.currentEncryptedChat;
        if (tLRPC$EncryptedChat != null) {
            boolean z2 = (tLRPC$EncryptedChat.admin_id == getUserConfig().getClientUserId() || getContactsController().isLoadingContacts() || getContactsController().contactsDict.get(Long.valueOf(this.currentUser.id)) != null) ? false : true;
            long j2 = this.currentUser.id;
            int i = notificationsSettings.getInt("dialog_bar_vis3" + j2, 0);
            if (z2 && (i == 1 || i == 3)) {
                z2 = false;
            }
            z = z2;
            j = j2;
        } else {
            StringBuilder sb = new StringBuilder();
            sb.append("dialog_bar_vis3");
            sb.append(j);
            z = notificationsSettings.getInt(sb.toString(), 0) == 2;
        }
        boolean z3 = notificationsSettings.getBoolean("dialog_bar_share" + j, false);
        boolean z4 = notificationsSettings.getBoolean("dialog_bar_report" + j, false);
        boolean z5 = notificationsSettings.getBoolean("dialog_bar_block" + j, false);
        boolean z6 = notificationsSettings.getBoolean("dialog_bar_add" + j, false);
        boolean z7 = notificationsSettings.getBoolean("dialog_bar_archived" + this.dialog_id, false);
        boolean z8 = notificationsSettings.getBoolean("dialog_bar_location" + j, false);
        boolean z9 = notificationsSettings.getBoolean("dialog_bar_invite" + j, false);
        if (z9) {
            z = true;
        }
        if (z4 || z5 || z8) {
            this.reportSpamButton.setVisibility(0);
        } else {
            this.reportSpamButton.setVisibility(8);
        }
        this.addToContactsButtonArchive = false;
        TLRPC$User user = this.currentUser != null ? getMessagesController().getUser(Long.valueOf(this.currentUser.id)) : null;
        if (z9) {
            String string = LocaleController.getString("GroupAddMembers", R.string.GroupAddMembers);
            if (string != null) {
                string = string.toUpperCase();
            }
            this.addToContactsButton.setVisibility(0);
            this.addToContactsButton.setText(string);
            this.addToContactsButton.setTag(4);
            this.addToContactsButton.setTextColor(getThemedColor("chat_addContact"));
            if (Build.VERSION.SDK_INT >= 21) {
                Theme.setSelectorDrawableColor(this.addToContactsButton.getBackground(), getThemedColor("chat_addContact") & 436207615, true);
            }
            this.reportSpamButton.setTag("chat_addContact");
        } else if (user != null) {
            if (UserObject.isReplyUser(user)) {
                this.addToContactsButton.setVisibility(8);
            } else {
                boolean z10 = user.contact;
                if (!z10 && !user.self && z6) {
                    this.addContactItem.setVisibility(0);
                    this.addContactItem.setText(LocaleController.getString("AddToContacts", R.string.AddToContacts));
                    this.addToContactsButton.setVisibility(0);
                    if (z7) {
                        this.addToContactsButtonArchive = true;
                        this.addToContactsButton.setText(LocaleController.getString("Unarchive", R.string.Unarchive).toUpperCase());
                        this.addToContactsButton.setTag(3);
                    } else if (this.reportSpamButton.getVisibility() == 0) {
                        this.addToContactsButton.setText(LocaleController.getString("AddContactChat", R.string.AddContactChat));
                    } else {
                        this.addToContactsButton.setText(LocaleController.formatString("AddContactFullChat", R.string.AddContactFullChat, UserObject.getFirstName(user)).toUpperCase());
                    }
                    this.addToContactsButton.setTag(null);
                    this.addToContactsButton.setVisibility(0);
                } else if (z3 && !user.self) {
                    this.addContactItem.setVisibility(0);
                    this.addToContactsButton.setVisibility(0);
                    this.addContactItem.setText(LocaleController.getString("ShareMyContactInfo", R.string.ShareMyContactInfo));
                    this.addToContactsButton.setText(LocaleController.getString("ShareMyPhone", R.string.ShareMyPhone).toUpperCase());
                    this.addToContactsButton.setTag(1);
                    this.addToContactsButton.setVisibility(0);
                } else {
                    if (!z10 && !user.self && !z) {
                        this.addContactItem.setVisibility(0);
                        this.addContactItem.setText(LocaleController.getString("ShareMyContactInfo", R.string.ShareMyContactInfo));
                        this.addToContactsButton.setTag(2);
                    } else {
                        this.addContactItem.setVisibility(8);
                    }
                    this.addToContactsButton.setVisibility(8);
                }
            }
            this.reportSpamButton.setText(LocaleController.getString("ReportSpamUser", R.string.ReportSpamUser));
        } else {
            if (z8) {
                this.reportSpamButton.setText(LocaleController.getString("ReportSpamLocation", R.string.ReportSpamLocation));
                this.reportSpamButton.setTag(R.id.object_tag, 1);
                this.reportSpamButton.setTextColor(getThemedColor("chat_addContact"));
                if (Build.VERSION.SDK_INT >= 21) {
                    Theme.setSelectorDrawableColor(this.reportSpamButton.getBackground(), getThemedColor("chat_addContact") & 436207615, true);
                }
                this.reportSpamButton.setTag("chat_addContact");
            } else {
                if (z7) {
                    this.addToContactsButtonArchive = true;
                    this.addToContactsButton.setText(LocaleController.getString("Unarchive", R.string.Unarchive).toUpperCase());
                    this.addToContactsButton.setTag(3);
                    this.addToContactsButton.setVisibility(0);
                    this.reportSpamButton.setText(LocaleController.getString("ReportSpam", R.string.ReportSpam));
                } else {
                    this.addToContactsButton.setVisibility(8);
                    this.reportSpamButton.setText(LocaleController.getString("ReportSpamAndLeave", R.string.ReportSpamAndLeave));
                }
                this.reportSpamButton.setTag(R.id.object_tag, null);
                this.reportSpamButton.setTextColor(getThemedColor("chat_reportSpam"));
                if (Build.VERSION.SDK_INT >= 21) {
                    Theme.setSelectorDrawableColor(this.reportSpamButton.getBackground(), getThemedColor("chat_reportSpam") & 436207615, true);
                }
                this.reportSpamButton.setTag("chat_reportSpam");
            }
            ActionBarMenuSubItem actionBarMenuSubItem = this.addContactItem;
            if (actionBarMenuSubItem != null) {
                actionBarMenuSubItem.setVisibility(8);
            }
        }
        if (this.userBlocked || (this.addToContactsButton.getVisibility() == 8 && this.reportSpamButton.getVisibility() == 8)) {
            z = false;
        }
        if (z) {
            if (this.topChatPanelView.getTag() != null) {
                if (BuildVars.LOGS_ENABLED) {
                    FileLog.d("show spam button");
                }
                this.topChatPanelView.setTag(null);
                this.topChatPanelView.setVisibility(0);
                AnimatorSet animatorSet = this.reportSpamViewAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.reportSpamViewAnimator = null;
                }
                if (animated) {
                    this.reportSpamViewAnimator = new AnimatorSet();
                    ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.topChatPanelViewOffset, 0.0f);
                    valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ysMs3a2fOU-sHwURtQh7VJDX468
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$updateTopPanel$104$ChatActivity(valueAnimator);
                        }
                    });
                    this.reportSpamViewAnimator.playTogether(valueAnimatorOfFloat);
                    this.reportSpamViewAnimator.setDuration(200L);
                    this.reportSpamViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.97
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animation) {
                            if (ChatActivity.this.reportSpamViewAnimator == null || !ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                                return;
                            }
                            ChatActivity.this.reportSpamViewAnimator = null;
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationCancel(Animator animation) {
                            if (ChatActivity.this.reportSpamViewAnimator == null || !ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                                return;
                            }
                            ChatActivity.this.reportSpamViewAnimator = null;
                        }
                    });
                    this.reportSpamViewAnimator.start();
                } else {
                    this.topChatPanelViewOffset = 0.0f;
                    invalidateChatListViewTopPadding();
                    invalidateMessagesVisiblePart();
                }
            }
        } else if (this.topChatPanelView.getTag() == null) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("hide spam button");
            }
            this.topChatPanelView.setTag(1);
            AnimatorSet animatorSet2 = this.reportSpamViewAnimator;
            if (animatorSet2 != null) {
                animatorSet2.cancel();
                this.reportSpamViewAnimator = null;
            }
            if (animated) {
                this.reportSpamViewAnimator = new AnimatorSet();
                ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(this.topChatPanelViewOffset, -AndroidUtilities.dp(50.0f));
                valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$0_E4HBhxn9vBe3XwwpCUiHwF0-g
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$updateTopPanel$105$ChatActivity(valueAnimator);
                    }
                });
                this.reportSpamViewAnimator.playTogether(valueAnimatorOfFloat2);
                this.reportSpamViewAnimator.setDuration(200L);
                this.reportSpamViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.98
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        if (ChatActivity.this.reportSpamViewAnimator == null || !ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.topChatPanelView.setVisibility(8);
                        ChatActivity.this.reportSpamViewAnimator = null;
                    }

                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationCancel(Animator animation) {
                        if (ChatActivity.this.reportSpamViewAnimator == null || !ChatActivity.this.reportSpamViewAnimator.equals(animation)) {
                            return;
                        }
                        ChatActivity.this.reportSpamViewAnimator = null;
                    }
                });
                this.reportSpamViewAnimator.start();
            } else {
                this.topChatPanelViewOffset = -AndroidUtilities.dp(50.0f);
                invalidateChatListViewTopPadding();
                invalidateMessagesVisiblePart();
            }
        }
        checkListViewPaddings();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$updateTopPanel$104, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$updateTopPanel$104$ChatActivity(ValueAnimator valueAnimator) {
        this.topChatPanelViewOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$updateTopPanel$105, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$updateTopPanel$105$ChatActivity(ValueAnimator valueAnimator) {
        this.topChatPanelViewOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    private void checkListViewPaddings() {
        MessageObject messageObject;
        if (!this.wasManualScroll && (messageObject = this.unreadMessageObject) != null) {
            if (this.messages.indexOf(messageObject) >= 0) {
                this.fixPaddingsInLayout = true;
                View view = this.fragmentView;
                if (view != null) {
                    view.requestLayout();
                    return;
                }
                return;
            }
            return;
        }
        if (this.checkPaddingsRunnable != null) {
            return;
        }
        Runnable runnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$xX4HIlF3pJpNsfUGd_8EHgVPaR0
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkListViewPaddings$106$ChatActivity();
            }
        };
        this.checkPaddingsRunnable = runnable;
        AndroidUtilities.runOnUIThread(runnable);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$checkListViewPaddings$106, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$checkListViewPaddings$106$ChatActivity() {
        this.checkPaddingsRunnable = null;
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkRaiseSensors() {
        FrameLayout frameLayout;
        FrameLayout frameLayout2;
        FrameLayout frameLayout3;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.isStickersExpanded()) {
            MediaController.getInstance().setAllowStartRecord(false);
            return;
        }
        TLRPC$Chat tLRPC$Chat = this.currentChat;
        if (tLRPC$Chat != null && !ChatObject.canSendMedia(tLRPC$Chat)) {
            MediaController.getInstance().setAllowStartRecord(false);
            return;
        }
        if (!ApplicationLoader.mainInterfacePaused && (((frameLayout = this.bottomOverlayChat) == null || frameLayout.getVisibility() != 0) && (((frameLayout2 = this.bottomOverlay) == null || frameLayout2.getVisibility() != 0) && ((frameLayout3 = this.searchContainer) == null || frameLayout3.getVisibility() != 0)))) {
            MediaController.getInstance().setAllowStartRecord(true);
        } else {
            MediaController.getInstance().setAllowStartRecord(false);
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void dismissCurrentDialog() {
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null && this.visibleDialog == chatAttachAlert) {
            chatAttachAlert.getPhotoLayout().closeCamera(false);
            this.chatAttachAlert.dismissInternal();
            this.chatAttachAlert.getPhotoLayout().hideCamera(true);
            return;
        }
        super.dismissCurrentDialog();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected void setInPreviewMode(boolean value) {
        MessageObject messageObject;
        TLRPC$Message tLRPC$Message;
        super.setInPreviewMode(value);
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.setOccupyStatusBar(!value);
            this.avatarContainer.setLayoutParams(LayoutHelper.createFrame(-2, -1.0f, 51, value ? this.chatMode == 2 ? 10 : 0 : 56.0f, 0.0f, 40.0f, 0.0f));
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setVisibility(!value ? 0 : 4);
        }
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            actionBar.setBackButtonDrawable(!value ? new BackDrawable(false) : null);
            ActionBarMenuItem actionBarMenuItem = this.headerItem;
            if (actionBarMenuItem != null) {
                actionBarMenuItem.setAlpha(!value ? 1.0f : 0.0f);
            }
            ActionBarMenuItem actionBarMenuItem2 = this.attachItem;
            if (actionBarMenuItem2 != null) {
                actionBarMenuItem2.setAlpha(value ? 0.0f : 1.0f);
            }
        }
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            int childCount = recyclerListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                boolean z = childAt instanceof ChatMessageCell;
                if (z) {
                    messageObject = ((ChatMessageCell) childAt).getMessageObject();
                } else {
                    messageObject = childAt instanceof ChatActionCell ? ((ChatActionCell) childAt).getMessageObject() : null;
                }
                if (messageObject != null && (tLRPC$Message = messageObject.messageOwner) != null && tLRPC$Message.media_unread && tLRPC$Message.mentioned) {
                    if (!messageObject.isVoice() && !messageObject.isRoundVideo()) {
                        int i2 = this.newMentionsCount - 1;
                        this.newMentionsCount = i2;
                        if (i2 <= 0) {
                            this.newMentionsCount = 0;
                            this.hasAllMentionsLocal = true;
                            showMentionDownButton(false, true);
                        } else {
                            this.mentiondownButtonCounter.setText(String.format("%d", Integer.valueOf(i2)));
                        }
                        getMessagesController().markMentionMessageAsRead(messageObject.getId(), ChatObject.isChannel(this.currentChat) ? this.currentChat.id : 0L, this.dialog_id);
                        messageObject.setContentIsRead();
                    }
                    if (z) {
                        ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                        chatMessageCell.setHighlighted(false);
                        chatMessageCell.setHighlightedAnimated();
                    }
                }
            }
            this.chatListView.setItemAnimator(null);
        }
        updateBottomOverlay();
        updateSecretStatus();
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onResume() {
        ChatActivityEnterView chatActivityEnterView;
        MessageObject messageObject;
        boolean z;
        BackupImageView backupImageView;
        super.onResume();
        checkShowBlur(false);
        this.activityResumeTime = System.currentTimeMillis();
        if (this.openImport && getSendMessagesHelper().getImportingHistory(this.dialog_id) != null) {
            ImportingAlert importingAlert = new ImportingAlert(getParentActivity(), null, this, this.themeDelegate);
            importingAlert.setOnHideListener(new DialogInterface.OnDismissListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$rGRpxU-u1RK9ok0a8qzuKrL9VJc
                @Override // android.content.DialogInterface.OnDismissListener
                public final void onDismiss(DialogInterface dialogInterface) {
                    this.f$0.lambda$onResume$107$ChatActivity(dialogInterface);
                }
            });
            showDialog(importingAlert);
            this.openImport = false;
        }
        checkAdjustResize();
        MediaController.getInstance().startRaiseToEarSensors(this);
        checkRaiseSensors();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.onResume();
        }
        SizeNotifierFrameLayout sizeNotifierFrameLayout = this.contentView;
        if (sizeNotifierFrameLayout != null) {
            sizeNotifierFrameLayout.onResume();
        }
        checkChecksHint();
        Bulletin.Delegate delegate = new Bulletin.Delegate() { // from class: ir.eitaa.ui.ChatActivity.99
            @Override // ir.eitaa.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onHide(Bulletin bulletin) {
                Bulletin.Delegate.CC.$default$onHide(this, bulletin);
            }

            @Override // ir.eitaa.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onOffsetChange(float f) {
                Bulletin.Delegate.CC.$default$onOffsetChange(this, f);
            }

            @Override // ir.eitaa.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onShow(Bulletin bulletin) {
                Bulletin.Delegate.CC.$default$onShow(this, bulletin);
            }

            @Override // ir.eitaa.ui.Components.Bulletin.Delegate
            public int getBottomOffset(int tag) {
                int iDp;
                if (tag == 1) {
                    return 0;
                }
                ChatActivityEnterView chatActivityEnterView2 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView2 != null && chatActivityEnterView2.getVisibility() == 0) {
                    if ((ChatActivity.this.contentView.getKeyboardHeight() < AndroidUtilities.dp(20.0f) && ChatActivity.this.chatActivityEnterView.isPopupShowing()) || ChatActivity.this.chatActivityEnterView.pannelAniamationInProgress()) {
                        iDp = ChatActivity.this.chatActivityEnterView.getHeight() + ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                    } else {
                        iDp = ChatActivity.this.chatActivityEnterView.getHeight();
                    }
                } else {
                    iDp = AndroidUtilities.dp(51.0f);
                }
                if (ChatActivity.this.chatActivityEnterView.pannelAniamationInProgress()) {
                    iDp = (int) (iDp + (ChatActivity.this.bottomPanelTranslationY - ChatActivity.this.chatActivityEnterView.getEmojiPadding()));
                }
                return ((int) (iDp + ChatActivity.this.contentPanTranslation)) - AndroidUtilities.dp(1.5f);
            }
        };
        this.bulletinDelegate = delegate;
        Bulletin.addDelegate(this, delegate);
        checkActionBarMenu(false);
        TLRPC$PhotoSize tLRPC$PhotoSize = this.replyImageLocation;
        if (tLRPC$PhotoSize != null && (backupImageView = this.replyImageView) != null) {
            backupImageView.setImage(ImageLocation.getForObject(tLRPC$PhotoSize, this.replyImageLocationObject), "50_50", ImageLocation.getForObject(this.replyImageThumbLocation, this.replyImageLocationObject), "50_50_b", null, this.replyImageSize, this.replyImageCacheType, this.replyingMessageObject);
        }
        if (this.pinnedImageLocation != null && this.pinnedMessageImageView != null) {
            this.pinnedMessageImageView[0].setImage(ImageLocation.getForObject(this.pinnedImageLocation, this.pinnedImageLocationObject), "50_50", ImageLocation.getForObject(this.pinnedImageThumbLocation, this.pinnedImageLocationObject), "50_50_b", null, this.pinnedImageSize, this.pinnedImageCacheType, this.pinnedMessageObjects.get(Integer.valueOf(this.currentPinnedMessageId)));
        }
        if (this.chatMode == 0) {
            getNotificationsController().setOpenedDialogId(this.dialog_id);
        }
        getMessagesController().setLastVisibleDialogId(this.dialog_id, this.chatMode == 1, true);
        if (this.scrollToTopOnResume) {
            if (this.scrollToTopUnReadOnResume && (messageObject = this.scrollToMessage) != null) {
                if (this.chatListView != null) {
                    int scrollOffsetForMessage = this.scrollToMessagePosition;
                    if (scrollOffsetForMessage == -9000) {
                        scrollOffsetForMessage = getScrollOffsetForMessage(messageObject);
                    } else if (scrollOffsetForMessage == -10000) {
                        scrollOffsetForMessage = -AndroidUtilities.dp(11.0f);
                    } else {
                        z = true;
                        this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(this.scrollToMessage), scrollOffsetForMessage, z);
                    }
                    z = false;
                    this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(this.scrollToMessage), scrollOffsetForMessage, z);
                }
            } else {
                moveScrollToLastMessage();
            }
            this.scrollToTopUnReadOnResume = false;
            this.scrollToTopOnResume = false;
            this.scrollToMessage = null;
        }
        this.paused = false;
        this.pausedOnLastMessage = false;
        checkScrollForLoad(false);
        if (this.wasPaused) {
            this.wasPaused = false;
            ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
            if (chatActivityAdapter != null) {
                chatActivityAdapter.notifyDataSetChanged(false);
            }
        }
        fixLayout();
        applyDraftMaybe(false);
        FrameLayout frameLayout = this.bottomOverlayChat;
        if (frameLayout != null && frameLayout.getVisibility() != 0 && !this.actionBar.isSearchFieldVisible()) {
            this.chatActivityEnterView.setFieldFocused(true);
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null) {
            chatActivityEnterView2.onResume();
        }
        if (this.currentUser != null) {
            this.chatEnterTime = System.currentTimeMillis();
            this.chatLeaveTime = 0L;
        }
        if (this.startVideoEdit != null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$tfybxhmo3yrkIykqvQLeIEvY2x4
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onResume$108$ChatActivity();
                }
            });
        }
        if (this.chatListView != null && ((chatActivityEnterView = this.chatActivityEnterView) == null || !chatActivityEnterView.isEditingMessage())) {
            this.chatListView.setOnItemLongClickListener(this.onItemLongClickListener);
            this.chatListView.setOnItemClickListener(this.onItemClickListener);
            this.chatListView.setLongClickable(true);
        }
        checkBotCommands();
        updateTitle();
        showGigagroupConvertAlert();
        if (this.pullingDownOffset != 0.0f) {
            this.pullingDownOffset = 0.0f;
            this.chatListView.invalidate();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onResume$107, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onResume$107$ChatActivity(DialogInterface dialogInterface) {
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            fragmentContextView.checkImport(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onResume$108, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onResume$108$ChatActivity() {
        openVideoEditor(this.startVideoEdit, null);
        this.startVideoEdit = null;
    }

    public void checkAdjustResize() {
        if (this.reportType >= 0) {
            AndroidUtilities.requestAdjustNothing(getParentActivity(), this.classGuid);
        } else {
            AndroidUtilities.requestAdjustResize(getParentActivity(), this.classGuid);
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void finishFragment() {
        super.finishFragment();
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.setPauseNotifications(false);
            this.scrimPopupWindow.dismiss();
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:104:0x01d2  */
    /* JADX WARN: Removed duplicated region for block: B:107:0x01d9  */
    /* JADX WARN: Removed duplicated region for block: B:108:0x0202  */
    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void onPause() throws java.lang.InterruptedException {
        /*
            Method dump skipped, instructions count: 603
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.onPause():void");
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r13v14, types: [android.text.Spannable, android.text.SpannableStringBuilder] */
    /* JADX WARN: Type inference failed for: r13v7, types: [java.lang.String] */
    /* JADX WARN: Type inference failed for: r13v8, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r2v4, types: [ir.eitaa.ui.Components.ChatActivityEnterView] */
    private void applyDraftMaybe(boolean canClear) {
        ?? ValueOf;
        long j;
        if (this.chatActivityEnterView == null || this.chatMode != 0) {
            return;
        }
        TLRPC$DraftMessage draft = getMediaDataController().getDraft(this.dialog_id, this.threadMessageId);
        TLRPC$Message draftMessage = (draft == null || draft.reply_to_msg_id == 0) ? null : getMediaDataController().getDraftMessage(this.dialog_id, this.threadMessageId);
        if (this.chatActivityEnterView.getFieldText() == null) {
            if (draft != null) {
                this.chatActivityEnterView.setWebPage(null, !draft.no_webpage);
                if (!draft.entities.isEmpty()) {
                    ValueOf = SpannableStringBuilder.valueOf(draft.message);
                    MediaDataController.sortEntities(draft.entities);
                    for (int i = 0; i < draft.entities.size(); i++) {
                        TLRPC$MessageEntity tLRPC$MessageEntity = draft.entities.get(i);
                        boolean z = tLRPC$MessageEntity instanceof TLRPC$TL_inputMessageEntityMentionName;
                        if (z || (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityMentionName)) {
                            if (z) {
                                j = ((TLRPC$TL_inputMessageEntityMentionName) tLRPC$MessageEntity).user_id.user_id;
                            } else {
                                j = ((TLRPC$TL_messageEntityMentionName) tLRPC$MessageEntity).user_id;
                            }
                            if (tLRPC$MessageEntity.offset + tLRPC$MessageEntity.length < ValueOf.length() && ValueOf.charAt(tLRPC$MessageEntity.offset + tLRPC$MessageEntity.length) == ' ') {
                                tLRPC$MessageEntity.length++;
                            }
                            URLSpanUserMention uRLSpanUserMention = new URLSpanUserMention("" + j, 3);
                            int i2 = tLRPC$MessageEntity.offset;
                            ValueOf.setSpan(uRLSpanUserMention, i2, tLRPC$MessageEntity.length + i2, 33);
                        } else if ((tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityCode) || (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityPre)) {
                            TextStyleSpan.TextStyleRun textStyleRun = new TextStyleSpan.TextStyleRun();
                            textStyleRun.flags |= 4;
                            TextStyleSpan textStyleSpan = new TextStyleSpan(textStyleRun);
                            int i3 = tLRPC$MessageEntity.offset;
                            MediaDataController.addStyleToText(textStyleSpan, i3, tLRPC$MessageEntity.length + i3, ValueOf, true);
                        } else if (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityBold) {
                            TextStyleSpan.TextStyleRun textStyleRun2 = new TextStyleSpan.TextStyleRun();
                            textStyleRun2.flags |= 1;
                            TextStyleSpan textStyleSpan2 = new TextStyleSpan(textStyleRun2);
                            int i4 = tLRPC$MessageEntity.offset;
                            MediaDataController.addStyleToText(textStyleSpan2, i4, tLRPC$MessageEntity.length + i4, ValueOf, true);
                        } else if (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityItalic) {
                            TextStyleSpan.TextStyleRun textStyleRun3 = new TextStyleSpan.TextStyleRun();
                            textStyleRun3.flags |= 2;
                            TextStyleSpan textStyleSpan3 = new TextStyleSpan(textStyleRun3);
                            int i5 = tLRPC$MessageEntity.offset;
                            MediaDataController.addStyleToText(textStyleSpan3, i5, tLRPC$MessageEntity.length + i5, ValueOf, true);
                        } else if (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityStrike) {
                            TextStyleSpan.TextStyleRun textStyleRun4 = new TextStyleSpan.TextStyleRun();
                            textStyleRun4.flags |= 8;
                            TextStyleSpan textStyleSpan4 = new TextStyleSpan(textStyleRun4);
                            int i6 = tLRPC$MessageEntity.offset;
                            MediaDataController.addStyleToText(textStyleSpan4, i6, tLRPC$MessageEntity.length + i6, ValueOf, true);
                        } else if (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityUnderline) {
                            TextStyleSpan.TextStyleRun textStyleRun5 = new TextStyleSpan.TextStyleRun();
                            textStyleRun5.flags |= 16;
                            TextStyleSpan textStyleSpan5 = new TextStyleSpan(textStyleRun5);
                            int i7 = tLRPC$MessageEntity.offset;
                            MediaDataController.addStyleToText(textStyleSpan5, i7, tLRPC$MessageEntity.length + i7, ValueOf, true);
                        } else if (tLRPC$MessageEntity instanceof TLRPC$TL_messageEntityTextUrl) {
                            URLSpanReplacement uRLSpanReplacement = new URLSpanReplacement(tLRPC$MessageEntity.url);
                            int i8 = tLRPC$MessageEntity.offset;
                            ValueOf.setSpan(uRLSpanReplacement, i8, tLRPC$MessageEntity.length + i8, 33);
                        }
                    }
                } else {
                    ValueOf = draft.message;
                }
                this.chatActivityEnterView.setFieldText(ValueOf);
                if (getArguments().getBoolean("hasUrl", false)) {
                    this.chatActivityEnterView.setSelection(draft.message.indexOf(10) + 1);
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$8KWWVoaTf9XvaWDGy8r3uJvJyo4
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$applyDraftMaybe$109$ChatActivity();
                        }
                    }, 700L);
                }
            }
        } else if (canClear && draft == null) {
            this.chatActivityEnterView.setFieldText("");
            hideFieldPanel(true);
        }
        if (this.replyingMessageObject != null || draftMessage == null) {
            return;
        }
        MessageObject messageObject = new MessageObject(this.currentAccount, draftMessage, (AbstractMap<Long, TLRPC$User>) getMessagesController().getUsers(), false, false);
        this.replyingMessageObject = messageObject;
        showFieldPanelForReply(messageObject);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$applyDraftMaybe$109, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$applyDraftMaybe$109$ChatActivity() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setFieldFocused(true);
            this.chatActivityEnterView.openKeyboard();
        }
    }

    private void updateInformationForScreenshotDetector() {
        if (this.currentUser == null) {
            return;
        }
        if (this.currentEncryptedChat != null) {
            ArrayList<Long> arrayList = new ArrayList<>();
            RecyclerListView recyclerListView = this.chatListView;
            if (recyclerListView != null) {
                int childCount = recyclerListView.getChildCount();
                for (int i = 0; i < childCount; i++) {
                    View childAt = this.chatListView.getChildAt(i);
                    MessageObject messageObject = childAt instanceof ChatMessageCell ? ((ChatMessageCell) childAt).getMessageObject() : null;
                    if (messageObject != null && messageObject.getId() < 0) {
                        long j = messageObject.messageOwner.random_id;
                        if (j != 0) {
                            arrayList.add(Long.valueOf(j));
                        }
                    }
                }
            }
            MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, this.chatEnterTime, this.chatLeaveTime, this.currentUser, this.currentEncryptedChat, arrayList, 0);
            return;
        }
        SecretMediaViewer secretMediaViewer = SecretMediaViewer.getInstance();
        MessageObject currentMessageObject = secretMediaViewer.getCurrentMessageObject();
        if (currentMessageObject == null || currentMessageObject.isOut()) {
            return;
        }
        MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, secretMediaViewer.getOpenTime(), secretMediaViewer.getCloseTime(), this.currentUser, null, null, currentMessageObject.getId());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean fixLayoutInternal() {
        boolean z;
        MessageObject.GroupedMessages currentMessagesGroup;
        if (!AndroidUtilities.isTablet() && ApplicationLoader.applicationContext.getResources().getConfiguration().orientation == 2) {
            this.selectedMessagesCountTextView.setTextSize(18);
        } else {
            this.selectedMessagesCountTextView.setTextSize(20);
        }
        int childCount = this.chatListView.getChildCount();
        HashMap map = null;
        int i = 0;
        while (true) {
            z = true;
            if (i >= childCount) {
                break;
            }
            View childAt = this.chatListView.getChildAt(i);
            if ((childAt instanceof ChatMessageCell) && (currentMessagesGroup = ((ChatMessageCell) childAt).getCurrentMessagesGroup()) != null && currentMessagesGroup.hasSibling && !currentMessagesGroup.messages.isEmpty()) {
                if (map == null) {
                    map = new HashMap();
                }
                if (!map.containsKey(Long.valueOf(currentMessagesGroup.groupId))) {
                    map.put(Long.valueOf(currentMessagesGroup.groupId), currentMessagesGroup);
                    ArrayList<MessageObject> arrayList = currentMessagesGroup.messages;
                    int iIndexOf = this.messages.indexOf(arrayList.get(arrayList.size() - 1));
                    if (iIndexOf >= 0) {
                        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                        chatActivityAdapter.notifyItemRangeChanged(iIndexOf + chatActivityAdapter.messagesStartRow, currentMessagesGroup.messages.size());
                        this.chatListView.setItemAnimator(null);
                    }
                }
            }
            i++;
        }
        if (!AndroidUtilities.isTablet()) {
            return true;
        }
        if (AndroidUtilities.isSmallTablet() && ApplicationLoader.applicationContext.getResources().getConfiguration().orientation == 1) {
            this.actionBar.setBackButtonDrawable(new BackDrawable(false));
        } else {
            ActionBar actionBar = this.actionBar;
            ActionBarLayout actionBarLayout = this.parentLayout;
            if (actionBarLayout != null && !actionBarLayout.fragmentsStack.isEmpty() && this.parentLayout.fragmentsStack.get(0) != this && this.parentLayout.fragmentsStack.size() != 1) {
                z = false;
            }
            actionBar.setBackButtonDrawable(new BackDrawable(z));
        }
        return false;
    }

    private void fixLayout() {
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() { // from class: ir.eitaa.ui.ChatActivity.100
                @Override // android.view.ViewTreeObserver.OnPreDrawListener
                public boolean onPreDraw() {
                    if (ChatActivity.this.avatarContainer != null) {
                        ChatActivity.this.avatarContainer.getViewTreeObserver().removeOnPreDrawListener(this);
                    }
                    return ChatActivity.this.fixLayoutInternal();
                }
            });
        }
    }

    public boolean maybePlayVisibleVideo() throws IOException {
        AnimatedFileDrawable animation;
        MessageObject messageObject;
        ImageReceiver photoImage;
        AnimatedFileDrawable animation2;
        if (this.chatListView == null) {
            return false;
        }
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (playingMessageObject != null && !playingMessageObject.isVideo()) {
            return false;
        }
        HintView hintView = this.noSoundHintView;
        if (hintView == null || hintView.getTag() == null) {
            animation = null;
            messageObject = null;
        } else {
            ChatMessageCell messageCell = this.noSoundHintView.getMessageCell();
            ImageReceiver photoImage2 = messageCell.getPhotoImage();
            animation = photoImage2.getAnimation();
            if (animation != null) {
                messageObject = messageCell.getMessageObject();
                this.scrollToVideo = ((float) messageCell.getTop()) + photoImage2.getImageY2() > ((float) this.chatListView.getMeasuredHeight());
            } else {
                messageObject = null;
            }
        }
        if (messageObject == null) {
            int childCount = this.chatListView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    break;
                }
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    MessageObject messageObject2 = chatMessageCell.getMessageObject();
                    boolean zIsRoundVideo = messageObject2.isRoundVideo();
                    if ((messageObject2.isVideo() || zIsRoundVideo) && messageObject2.videoEditedInfo == null && (animation2 = (photoImage = chatMessageCell.getPhotoImage()).getAnimation()) != null) {
                        float top = childAt.getTop() + photoImage.getImageY();
                        float imageHeight = photoImage.getImageHeight() + top;
                        if (imageHeight >= 0.0f && top <= this.chatListView.getMeasuredHeight()) {
                            if (messageObject != null && top < 0.0f) {
                                break;
                            }
                            this.scrollToVideo = top < 0.0f || imageHeight > ((float) this.chatListView.getMeasuredHeight());
                            if (top >= 0.0f && imageHeight <= this.chatListView.getMeasuredHeight()) {
                                messageObject = messageObject2;
                                animation = animation2;
                                break;
                            }
                            messageObject = messageObject2;
                            animation = animation2;
                        }
                    }
                }
                i++;
            }
        }
        if (messageObject == null || MediaController.getInstance().isPlayingMessage(messageObject)) {
            return false;
        }
        hideHints(true);
        if (messageObject.isRoundVideo()) {
            boolean zPlayMessage = MediaController.getInstance().playMessage(messageObject);
            MediaController.getInstance().setVoiceMessagesPlaylist(zPlayMessage ? createVoiceMessagesPlaylist(messageObject, false) : null, false);
            return zPlayMessage;
        }
        SharedConfig.setNoSoundHintShowed(true);
        messageObject.audioProgress = animation.getCurrentProgress();
        messageObject.audioProgressMs = animation.getCurrentProgressMs();
        animation.stop();
        if (PhotoViewer.isPlayingMessageInPip(messageObject)) {
            PhotoViewer.getPipInstance().destroyPhotoViewer();
        }
        return MediaController.getInstance().playMessage(messageObject);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public void onConfigurationChanged(Configuration newConfig) throws InterruptedException, Resources.NotFoundException, IOException {
        MessageObject playingMessageObject;
        fixLayout();
        Dialog dialog = this.visibleDialog;
        if (dialog instanceof DatePickerDialog) {
            dialog.dismiss();
        }
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
            this.scrimView = null;
        }
        if (AndroidUtilities.isTablet()) {
            return;
        }
        if (newConfig.orientation == 2) {
            if ((PhotoViewer.hasInstance() && PhotoViewer.getInstance().isVisible()) || (playingMessageObject = MediaController.getInstance().getPlayingMessageObject()) == null || !playingMessageObject.isVideo()) {
                return;
            }
            PhotoViewer.getInstance().setParentActivity(getParentActivity(), this.themeDelegate);
            getFileLoader().setLoadingVideoForPlayer(playingMessageObject.getDocument(), false);
            MediaController.getInstance().cleanupPlayer(true, true, false, true);
            PhotoViewer photoViewer = PhotoViewer.getInstance();
            int i = playingMessageObject.type;
            if (photoViewer.openPhoto(playingMessageObject, i != 0 ? this.dialog_id : 0L, i != 0 ? this.mergeDialogId : 0L, this.photoViewerProvider, false)) {
                PhotoViewer.getInstance().setParentChatActivity(this);
            }
            hideHints(false);
            MediaController.getInstance().resetGoingToShowMessageObject();
            return;
        }
        if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isOpenedFullScreenVideo()) {
            PhotoViewer.getInstance().injectVideoPlayerToMediaController();
            PhotoViewer.getInstance().closePhoto(false, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createDeleteMessagesAlert(final MessageObject finalSelectedObject, final MessageObject.GroupedMessages selectedGroup) {
        createDeleteMessagesAlert(finalSelectedObject, selectedGroup, 1);
    }

    private void createDeleteMessagesAlert(final MessageObject finalSelectedObject, final MessageObject.GroupedMessages finalSelectedGroup, int loadParticipant) {
        if (finalSelectedObject == null && this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() == 0) {
            return;
        }
        AlertsCreator.createDeleteMessagesAlert(this, this.currentUser, this.currentChat, this.currentEncryptedChat, this.chatInfo, this.mergeDialogId, finalSelectedObject, this.selectedMessagesIds, finalSelectedGroup, this.chatMode == 1, loadParticipant, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$T7Eahnxdh7ufNvgusBNZvY513Ac
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createDeleteMessagesAlert$110$ChatActivity();
            }
        }, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createDeleteMessagesAlert$110, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createDeleteMessagesAlert$110$ChatActivity() {
        hideActionMode();
        updatePinnedMessageView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideActionMode() {
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            if (!actionBar.isActionModeShowed()) {
                return;
            } else {
                this.actionBar.hideActionMode();
            }
        }
        this.cantDeleteMessagesCount = 0;
        this.canEditMessagesCount = 0;
        this.cantForwardMessagesCount = 0;
        this.canSaveMusicCount = 0;
        this.canSaveDocumentsCount = 0;
        this.cantSaveMessagesCount = 0;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            EditTextCaption editField = chatActivityEnterView.getEditField();
            if (this.chatActivityEnterView.getVisibility() == 0) {
                editField.requestFocus();
            }
            editField.setAllowDrawCursor(true);
        }
        TextSelectionHelper.ChatListTextSelectionHelper chatListTextSelectionHelper = this.textSelectionHelper;
        if (chatListTextSelectionHelper != null) {
            chatListTextSelectionHelper.clear(true);
            this.textSelectionHelper.cancelAllAnimators();
        }
        TextSelectionHint textSelectionHint = this.textSelectionHint;
        if (textSelectionHint != null) {
            textSelectionHint.hide();
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null) {
            chatActivityEnterView2.preventInput = false;
        }
        this.textSelectionHintWasShowed = false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createMenu(View v, boolean single, boolean listView, float x, float y) throws Resources.NotFoundException, NumberFormatException {
        createMenu(v, single, listView, x, y, true);
    }

    private CharSequence getMessageCaption(MessageObject messageObject, MessageObject.GroupedMessages group) {
        String restrictionReason = MessagesController.getRestrictionReason(messageObject.messageOwner.restriction_reason);
        if (!TextUtils.isEmpty(restrictionReason)) {
            return restrictionReason;
        }
        CharSequence charSequence = messageObject.caption;
        if (charSequence != null) {
            return charSequence;
        }
        if (group == null) {
            return null;
        }
        int size = group.messages.size();
        CharSequence charSequence2 = null;
        for (int i = 0; i < size; i++) {
            CharSequence charSequence3 = group.messages.get(i).caption;
            if (charSequence3 != null) {
                if (charSequence2 != null) {
                    return null;
                }
                charSequence2 = charSequence3;
            }
        }
        return charSequence2;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:123:0x0250  */
    /* JADX WARN: Removed duplicated region for block: B:424:0x094f  */
    /* JADX WARN: Removed duplicated region for block: B:463:0x0a1a  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void createMenu(android.view.View r26, boolean r27, boolean r28, float r29, float r30, boolean r31) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 5784
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.createMenu(android.view.View, boolean, boolean, float, float, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createMenu$112, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createMenu$112$ChatActivity(final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$IEB6AV9TeSyrtjpFX_qNYso1eL0
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$111$ChatActivity(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createMenu$111, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createMenu$111$ChatActivity(TLObject tLObject) {
        if (tLObject instanceof TLRPC$TL_payments_paymentReceipt) {
            presentFragment(new PaymentFormActivity((TLRPC$TL_payments_paymentReceipt) tLObject));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$createMenu$113, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$createMenu$113$ChatActivity(int i, ArrayList arrayList, View view) throws InterruptedException, Resources.NotFoundException, NumberFormatException, IOException {
        if (this.selectedObject == null || i >= arrayList.size()) {
            return;
        }
        processSelectedOption(((Integer) arrayList.get(i)).intValue());
        this.scrimView = null;
        this.contentView.invalidate();
        this.chatListView.invalidate();
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startEditingMessageObject(MessageObject messageObject) throws Resources.NotFoundException, NumberFormatException {
        if (messageObject == null || getParentActivity() == null) {
            return;
        }
        if (this.searchItem != null && this.actionBar.isSearchFieldVisible()) {
            this.actionBar.closeSearchField();
            this.chatActivityEnterView.setFieldFocused();
        }
        this.mentionsAdapter.setNeedBotContext(false);
        this.chatActivityEnterView.setVisibility(0);
        showFieldPanelForEdit(true, messageObject);
        updateBottomOverlay();
        checkEditTimer();
        this.chatActivityEnterView.setAllowStickersAndGifs(false, false, true);
        updatePinnedMessageView(true);
        updateVisibleRows();
        if (!messageObject.scheduled) {
            TLRPC$TL_messages_getMessageEditData tLRPC$TL_messages_getMessageEditData = new TLRPC$TL_messages_getMessageEditData();
            tLRPC$TL_messages_getMessageEditData.peer = getMessagesController().getInputPeer(this.dialog_id);
            tLRPC$TL_messages_getMessageEditData.id = messageObject.getId();
            this.editingMessageObjectReqId = getConnectionsManager().sendRequest(tLRPC$TL_messages_getMessageEditData, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$YfkCdxMAOq66EKldg15uCcU4W-I
                @Override // ir.eitaa.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                    this.f$0.lambda$startEditingMessageObject$115$ChatActivity(tLObject, tLRPC$TL_error);
                }
            });
            return;
        }
        this.chatActivityEnterView.showEditDoneProgress(false, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$startEditingMessageObject$115, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$startEditingMessageObject$115$ChatActivity(final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$CM6pEyxnN0ppRKWq-eptoLJ42hA
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$startEditingMessageObject$114$ChatActivity(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$startEditingMessageObject$114, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$startEditingMessageObject$114$ChatActivity(TLObject tLObject) {
        this.editingMessageObjectReqId = 0;
        if (tLObject != null || getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
        builder.setMessage(LocaleController.getString("EditMessageError", R.string.EditMessageError));
        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), null);
        showDialog(builder.create());
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setEditingMessageObject(null, false);
            hideFieldPanel(true);
        }
    }

    public void restartSticker(ChatMessageCell cell) {
        MessagesController.EmojiSound emojiSound;
        MessageObject messageObject = cell.getMessageObject();
        TLRPC$Document document = messageObject.getDocument();
        boolean zIsAnimatedEmoji = messageObject.isAnimatedEmoji();
        boolean z = true;
        if (!zIsAnimatedEmoji) {
            if (this.currentEncryptedChat != null && !messageObject.isOut()) {
                z = false;
            }
            if (!MessageObject.isAnimatedStickerDocument(document, z) || SharedConfig.loopStickers) {
                return;
            }
        }
        RLottieDrawable lottieAnimation = cell.getPhotoImage().getLottieAnimation();
        if (lottieAnimation != null) {
            if (zIsAnimatedEmoji) {
                String stickerEmoji = messageObject.getStickerEmoji();
                if (EmojiData.isHeartEmoji(stickerEmoji)) {
                    HashMap<Integer, Integer> map = new HashMap<>();
                    map.put(1, 1);
                    map.put(13, 0);
                    map.put(59, 1);
                    map.put(71, 0);
                    map.put(128, 1);
                    map.put(140, 0);
                    lottieAnimation.setVibrationPattern(map);
                } else if (EmojiData.isPeachEmoji(stickerEmoji)) {
                    HashMap<Integer, Integer> map2 = new HashMap<>();
                    map2.put(34, 1);
                    lottieAnimation.setVibrationPattern(map2);
                } else if (EmojiData.isCofinEmoji(stickerEmoji)) {
                    HashMap<Integer, Integer> map3 = new HashMap<>();
                    map3.put(24, 0);
                    map3.put(36, 0);
                    lottieAnimation.setVibrationPattern(map3);
                }
                if (!lottieAnimation.isRunning() && stickerEmoji != null && (emojiSound = getMessagesController().emojiSounds.get(stickerEmoji.replace("", ""))) != null) {
                    getMediaController().playEmojiSound(getAccountInstance(), stickerEmoji, emojiSound, false);
                }
            }
            lottieAnimation.restart();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public String getMessageContent(MessageObject messageObject, long previousUid, boolean name) {
        TLRPC$Chat chat;
        String str = "";
        if (name) {
            long fromChatId = messageObject.getFromChatId();
            if (previousUid != fromChatId) {
                if (fromChatId > 0) {
                    TLRPC$User user = getMessagesController().getUser(Long.valueOf(fromChatId));
                    if (user != null) {
                        str = ContactsController.formatName(user.first_name, user.last_name) + ":\n";
                    }
                } else if (fromChatId < 0 && (chat = getMessagesController().getChat(Long.valueOf(-fromChatId))) != null) {
                    str = chat.title + ":\n";
                }
            }
        }
        String restrictionReason = MessagesController.getRestrictionReason(messageObject.messageOwner.restriction_reason);
        if (!TextUtils.isEmpty(restrictionReason)) {
            return str + restrictionReason;
        }
        if ((messageObject.type == 0 || messageObject.isAnimatedEmoji()) && messageObject.messageOwner.message != null) {
            return str + messageObject.messageOwner.message;
        }
        TLRPC$Message tLRPC$Message = messageObject.messageOwner;
        if (tLRPC$Message.media != null && tLRPC$Message.message != null) {
            return str + messageObject.messageOwner.message;
        }
        return str + ((Object) messageObject.messageText);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void unpinMessage(final MessageObject messageObject) {
        if (messageObject == null) {
            return;
        }
        Bulletin bulletin = this.pinBulletin;
        if (bulletin != null) {
            bulletin.hide(false, 0L);
        }
        final ArrayList arrayList = new ArrayList();
        arrayList.add(this.selectedObject);
        final ArrayList arrayList2 = new ArrayList();
        arrayList2.add(Integer.valueOf(messageObject.getId()));
        final int i = this.totalPinnedMessagesCount;
        getNotificationCenter().postNotificationName(NotificationCenter.didLoadPinnedMessages, Long.valueOf(this.dialog_id), arrayList2, Boolean.FALSE, null, null, 0, Integer.valueOf(this.totalPinnedMessagesCount - 1), Boolean.valueOf(this.pinnedEndReached));
        this.pinBulletin = BulletinFactory.createUnpinMessageBulletin(this, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$GvsrHe0wjlvk-cEjcD_MgemvKII
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$unpinMessage$116$ChatActivity(arrayList2, arrayList, i);
            }
        }, new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$yuiw41J6efoSRBan0M_l7-lxlAc
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$unpinMessage$117$ChatActivity(messageObject);
            }
        }, this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$unpinMessage$116, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$unpinMessage$116$ChatActivity(ArrayList arrayList, ArrayList arrayList2, int i) {
        getNotificationCenter().postNotificationName(NotificationCenter.didLoadPinnedMessages, Long.valueOf(this.dialog_id), arrayList, Boolean.TRUE, arrayList2, null, 0, Integer.valueOf(i), Boolean.valueOf(this.pinnedEndReached));
        this.pinBulletin = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$unpinMessage$117, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$unpinMessage$117$ChatActivity(MessageObject messageObject) {
        getMessagesController().pinMessage(this.currentChat, this.currentUser, messageObject.getId(), true, false, false);
        this.pinBulletin = null;
    }

    public void openReportChat(int type) {
        Bundle bundle = new Bundle();
        if (DialogObject.isUserDialog(this.dialog_id)) {
            bundle.putLong("user_id", this.dialog_id);
        } else {
            bundle.putLong("chat_id", -this.dialog_id);
        }
        bundle.putInt("report", type);
        ChatActivity chatActivity = new ChatActivity(bundle);
        presentFragment(chatActivity);
        chatActivity.chatActivityDelegate = new ChatActivityDelegate() { // from class: ir.eitaa.ui.ChatActivity.105
            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void onUnpin(boolean z, boolean z2) {
                ChatActivityDelegate.CC.$default$onUnpin(this, z, z2);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void openReplyMessage(int i) {
                ChatActivityDelegate.CC.$default$openReplyMessage(this, i);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void openSearch(String str) {
                ChatActivityDelegate.CC.$default$openSearch(this, str);
            }

            @Override // ir.eitaa.ui.ChatActivity.ChatActivityDelegate
            public void onReport() {
                ChatActivity.this.undoView.showWithAction(0L, 74, (Runnable) null);
            }
        };
    }

    private void saveMessageToGallery(MessageObject messageObject) {
        String string = messageObject.messageOwner.attachPath;
        if (!TextUtils.isEmpty(string) && !new File(string).exists()) {
            string = null;
        }
        if (TextUtils.isEmpty(string)) {
            string = FileLoader.getPathToMessage(messageObject.messageOwner).toString();
        }
        MediaController.saveFile(string, getParentActivity(), messageObject.isVideo() ? 1 : 0, null, null);
    }

    /* JADX WARN: Removed duplicated region for block: B:234:0x06bf  */
    /* JADX WARN: Removed duplicated region for block: B:363:0x0b5b  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processSelectedOption(int r21) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException, java.io.IOException {
        /*
            Method dump skipped, instructions count: 3117
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.processSelectedOption(int):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$118, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$118$ChatActivity(boolean z, int i) {
        if (getParentActivity() == null || this.fragmentView == null || i <= 0) {
            return;
        }
        BulletinFactory.of(this).createDownloadBulletin(z ? BulletinFactory.FileType.AUDIOS : BulletinFactory.FileType.UNKNOWNS, i, this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$119, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$119$ChatActivity(boolean z, boolean z2, boolean z3) {
        BulletinFactory.FileType fileType;
        if (getParentActivity() == null) {
            return;
        }
        if (z) {
            fileType = BulletinFactory.FileType.PHOTO_TO_DOWNLOADS;
        } else if (z2) {
            fileType = BulletinFactory.FileType.VIDEO_TO_DOWNLOADS;
        } else if (z3) {
            fileType = BulletinFactory.FileType.GIF;
        } else {
            fileType = BulletinFactory.FileType.UNKNOWN;
        }
        BulletinFactory.of(this).createDownloadBulletin(fileType, this.themeDelegate).show();
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$106, reason: invalid class name */
    class AnonymousClass106 implements RequestDelegate {
        final /* synthetic */ MessageObject val$finalSelectedObject;
        final /* synthetic */ AlertDialog val$progressDialog;

        AnonymousClass106(final AlertDialog val$progressDialog, final MessageObject val$finalSelectedObject) {
            this.val$progressDialog = val$progressDialog;
            this.val$finalSelectedObject = val$finalSelectedObject;
        }

        @Override // ir.eitaa.tgnet.RequestDelegate
        public void run(final TLObject response, TLRPC$TL_error error) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.ChatActivity.106.1
                @Override // java.lang.Runnable
                public void run() {
                    ChatActivity.this.editingMessageObjectReqId = 0;
                    if (response == null) {
                        AlertDialog.Builder builder = new AlertDialog.Builder(ChatActivity.this.getParentActivity());
                        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                        builder.setMessage(LocaleController.getString("EditMessageError", R.string.EditMessageError));
                        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), null);
                        ChatActivity.this.showDialog(builder.create());
                        return;
                    }
                    try {
                        AlertDialog alertDialog = AnonymousClass106.this.val$progressDialog;
                        if (alertDialog != null) {
                            alertDialog.dismiss();
                        }
                        String str = "https://" + MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).payHost + "/createLink";
                        Bundle bundle = new Bundle();
                        bundle.putString("link", str);
                        bundle.putInt("msg_id", AnonymousClass106.this.val$finalSelectedObject.getId());
                        TLRPC$Peer tLRPC$Peer = AnonymousClass106.this.val$finalSelectedObject.messageOwner.peer_id;
                        SerializedData serializedData = new SerializedData(tLRPC$Peer.getObjectSize());
                        tLRPC$Peer.serializeToStream(serializedData);
                        bundle.putByteArray("peer", serializedData.toByteArray());
                        PaymentActivity paymentActivity = new PaymentActivity(bundle);
                        paymentActivity.setDelegate(new PaymentActivity.Delegate() { // from class: ir.eitaa.ui.ChatActivity.106.1.1
                            @Override // ir.eitaa.ui.PaymentActivity.Delegate
                            public void onLinkCreated(String link) throws Resources.NotFoundException, NumberFormatException {
                                Object obj;
                                TLRPC$User tLRPC$User;
                                if (ChatActivity.this.getParentActivity() == null) {
                                    ChatActivity.this.selectedObject = null;
                                    return;
                                }
                                ChatActivity.this.updateVisibleRows();
                                if (AnonymousClass106.this.val$finalSelectedObject.isMediaEmpty()) {
                                    obj = AnonymousClass106.this.val$finalSelectedObject.messageText;
                                } else {
                                    obj = AnonymousClass106.this.val$finalSelectedObject.caption;
                                    if (obj == null) {
                                        obj = "";
                                    }
                                }
                                CharSequence[] charSequenceArr = {obj + "\n" + link};
                                ArrayList<TLRPC$MessageEntity> entities = MediaDataController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getEntities(charSequenceArr, true);
                                SendMessagesHelper sendMessagesHelper = SendMessagesHelper.getInstance(((BaseFragment) ChatActivity.this).currentAccount);
                                MessageObject messageObject = AnonymousClass106.this.val$finalSelectedObject;
                                String string = charSequenceArr[0].toString();
                                ChatActivity chatActivity = ChatActivity.this;
                                TLRPC$UserFull tLRPC$UserFull = chatActivity.userInfo;
                                sendMessagesHelper.editMessage(messageObject, string, true, chatActivity, entities, 0, (tLRPC$UserFull == null || (tLRPC$User = tLRPC$UserFull.user) == null || !tLRPC$User.MXB_VIRTUAL_USER) ? false : true);
                            }
                        });
                        ChatActivity.this.presentFragment(paymentActivity);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
        }
    }

    static /* synthetic */ void lambda$processSelectedOption$120(boolean[] zArr, View view) {
        zArr[1] = !zArr[1];
        ((CheckBoxCell) view).setChecked(zArr[1], true);
    }

    static /* synthetic */ void lambda$processSelectedOption$121(boolean[] zArr, View view) {
        zArr[0] = !zArr[0];
        ((CheckBoxCell) view).setChecked(zArr[0], true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$123, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$123$ChatActivity(int i, boolean[] zArr, DialogInterface dialogInterface, int i2) {
        getMessagesController().pinMessage(this.currentChat, this.currentUser, i, false, !zArr[1], zArr[0]);
        Bulletin bulletinCreatePinMessageBulletin = BulletinFactory.createPinMessageBulletin(this, this.themeDelegate);
        bulletinCreatePinMessageBulletin.show();
        final Bulletin.Layout layout = bulletinCreatePinMessageBulletin.getLayout();
        layout.postDelayed(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Qsx4fECFu0cUWUdNnyu7jsO7iVY
            @Override // java.lang.Runnable
            public final void run() {
                layout.performHapticFeedback(3, 2);
            }
        }, 550L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$125, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$125$ChatActivity(final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$xU39Xa3i4q_wcBC0FZiSghg5MI0
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processSelectedOption$124$ChatActivity(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$124, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$124$ChatActivity(TLObject tLObject) {
        if (tLObject != null) {
            TLRPC$TL_exportedMessageLink tLRPC$TL_exportedMessageLink = (TLRPC$TL_exportedMessageLink) tLObject;
            try {
                ((ClipboardManager) ApplicationLoader.applicationContext.getSystemService("clipboard")).setPrimaryClip(ClipData.newPlainText("label", tLRPC$TL_exportedMessageLink.link));
                if (BulletinFactory.canShowBulletin(this)) {
                    BulletinFactory.of(this).createCopyLinkBulletin(!isThreadChat() && tLRPC$TL_exportedMessageLink.link.contains("/c/"), this.themeDelegate).show();
                }
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    static /* synthetic */ void lambda$processSelectedOption$126(AlertDialog[] alertDialogArr) {
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$128, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$128$ChatActivity(AlertDialog[] alertDialogArr, final int i) {
        if (alertDialogArr[0] == null) {
            return;
        }
        alertDialogArr[0].setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$kr3J4Up8xRYUquukU31HDwsqvEI
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$processSelectedOption$127$ChatActivity(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$127, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$127$ChatActivity(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$134, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$134$ChatActivity(MessageObject messageObject, DialogInterface dialogInterface, int i) {
        final AlertDialog[] alertDialogArr = {new AlertDialog(getParentActivity(), 3, this.themeDelegate)};
        final TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage = new TLRPC$TL_messages_editMessage();
        TLRPC$TL_messageMediaPoll tLRPC$TL_messageMediaPoll = (TLRPC$TL_messageMediaPoll) messageObject.messageOwner.media;
        TLRPC$TL_inputMediaPoll tLRPC$TL_inputMediaPoll = new TLRPC$TL_inputMediaPoll();
        TLRPC$TL_poll tLRPC$TL_poll = new TLRPC$TL_poll();
        tLRPC$TL_inputMediaPoll.poll = tLRPC$TL_poll;
        TLRPC$Poll tLRPC$Poll = tLRPC$TL_messageMediaPoll.poll;
        tLRPC$TL_poll.id = tLRPC$Poll.id;
        tLRPC$TL_poll.question = tLRPC$Poll.question;
        tLRPC$TL_poll.answers = tLRPC$Poll.answers;
        tLRPC$TL_poll.closed = true;
        tLRPC$TL_messages_editMessage.media = tLRPC$TL_inputMediaPoll;
        tLRPC$TL_messages_editMessage.peer = getMessagesController().getInputPeer(this.dialog_id);
        tLRPC$TL_messages_editMessage.id = messageObject.getId();
        tLRPC$TL_messages_editMessage.flags |= 16384;
        final int iSendRequest = getConnectionsManager().sendRequest(tLRPC$TL_messages_editMessage, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$GFbv5XcpNDM6-h1JqdXXlO3Yi_k
            @Override // ir.eitaa.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                this.f$0.lambda$processSelectedOption$131$ChatActivity(alertDialogArr, tLRPC$TL_messages_editMessage, tLObject, tLRPC$TL_error);
            }
        });
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$yP8pG6COM7z9ZiXrlDzmzqO950U
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processSelectedOption$133$ChatActivity(alertDialogArr, iSendRequest);
            }
        }, 500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$131, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$131$ChatActivity(final AlertDialog[] alertDialogArr, final TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage, TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$c5NpLYFJLWgn8FB3zsAZbfIBxTw
            @Override // java.lang.Runnable
            public final void run() {
                ChatActivity.lambda$processSelectedOption$129(alertDialogArr);
            }
        });
        if (tLRPC$TL_error == null) {
            getMessagesController().processUpdates((TLRPC$Updates) tLObject, false);
        } else {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Ow-n7U8Jvm3-9ELbMmkF78eou4Q
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$130$ChatActivity(tLRPC$TL_error, tLRPC$TL_messages_editMessage);
                }
            });
        }
    }

    static /* synthetic */ void lambda$processSelectedOption$129(AlertDialog[] alertDialogArr) {
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$130, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$130$ChatActivity(TLRPC$TL_error tLRPC$TL_error, TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage) {
        AlertsCreator.processError(this.currentAccount, tLRPC$TL_error, this, tLRPC$TL_messages_editMessage, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$133, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$133$ChatActivity(AlertDialog[] alertDialogArr, final int i) {
        if (alertDialogArr[0] == null) {
            return;
        }
        alertDialogArr[0].setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$lRJkJqBYWkAT7XD8sF9Q4LmBAbQ
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$processSelectedOption$132$ChatActivity(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$132, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$132$ChatActivity(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$137, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$137$ChatActivity(final TLRPC$TL_messages_sendScheduledMessages tLRPC$TL_messages_sendScheduledMessages, TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
        if (tLRPC$TL_error == null) {
            getMessagesController().processUpdates((TLRPC$Updates) tLObject, false);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$0aMETF9v2B6TTezOQLytINtttVY
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$135$ChatActivity(tLRPC$TL_messages_sendScheduledMessages);
                }
            });
        } else if (tLRPC$TL_error.text != null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$NsT1uUp9k4WzwGkLn_aYOuwy_3Y
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$136$ChatActivity(tLRPC$TL_error);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$135, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$135$ChatActivity(TLRPC$TL_messages_sendScheduledMessages tLRPC$TL_messages_sendScheduledMessages) {
        NotificationCenter.getInstance(this.currentAccount).postNotificationName(NotificationCenter.messagesDeleted, tLRPC$TL_messages_sendScheduledMessages.id, Long.valueOf(-this.dialog_id), Boolean.TRUE, Long.valueOf(this.dialog_id));
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$136, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$136$ChatActivity(TLRPC$TL_error tLRPC$TL_error) {
        if (tLRPC$TL_error.text.startsWith("SLOWMODE_WAIT_")) {
            AlertsCreator.showSimpleToast(this, LocaleController.getString("SlowmodeSendError", R.string.SlowmodeSendError));
        } else if (tLRPC$TL_error.text.equals("CHAT_SEND_MEDIA_FORBIDDEN")) {
            AlertsCreator.showSimpleToast(this, LocaleController.getString("AttachMediaRestrictedForever", R.string.AttachMediaRestrictedForever));
        } else {
            AlertsCreator.showSimpleToast(this, tLRPC$TL_error.text);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processSelectedOption$138, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processSelectedOption$138$ChatActivity(MessageObject.GroupedMessages groupedMessages, MessageObject messageObject, boolean z, int i) {
        if (groupedMessages != null && !groupedMessages.messages.isEmpty()) {
            SendMessagesHelper.getInstance(this.currentAccount).editMessage(groupedMessages.messages.get(0), null, false, this, null, i, this.userInfo.user.MXB_VIRTUAL_USER);
        } else {
            SendMessagesHelper.getInstance(this.currentAccount).editMessage(messageObject, null, false, this, null, i, this.userInfo.user.MXB_VIRTUAL_USER);
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$107, reason: invalid class name */
    class AnonymousClass107 implements Runnable {
        final /* synthetic */ int[] val$flags;
        final /* synthetic */ MessageObject val$object;

        AnonymousClass107(final MessageObject val$object, final int[] val$flags) {
            this.val$object = val$object;
            this.val$flags = val$flags;
        }

        @Override // java.lang.Runnable
        public void run() {
            final AlertDialog[] alertDialogArr = {new AlertDialog(ChatActivity.this.getParentActivity(), 0)};
            alertDialogArr[0].setMessage(LocaleController.getString("Loading", R.string.Loading));
            alertDialogArr[0].setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.ChatActivity.107.1
                @Override // android.content.DialogInterface.OnClickListener
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });
            alertDialogArr[0].setCanceledOnTouchOutside(true);
            final TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage = new TLRPC$TL_messages_editMessage();
            TLRPC$TL_inputMediaLiveStream tLRPC$TL_inputMediaLiveStream = new TLRPC$TL_inputMediaLiveStream();
            tLRPC$TL_inputMediaLiveStream.flags |= this.val$flags[0];
            tLRPC$TL_messages_editMessage.media = tLRPC$TL_inputMediaLiveStream;
            tLRPC$TL_messages_editMessage.peer = MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getInputPeer((int) ChatActivity.this.dialog_id);
            tLRPC$TL_messages_editMessage.id = this.val$object.getId();
            tLRPC$TL_messages_editMessage.flags |= 16384;
            final int iSendRequest = ConnectionsManager.getInstance(((BaseFragment) ChatActivity.this).currentAccount).sendRequest(tLRPC$TL_messages_editMessage, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$ZL4qCjitv2jkPMxu-licMyGRg9U
                @Override // ir.eitaa.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                    this.f$0.lambda$run$3$ChatActivity$107(alertDialogArr, tLRPC$TL_messages_editMessage, tLObject, tLRPC$TL_error);
                }
            });
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$5Yf59qX3tpsG8cc1WoSUrrWDXAI
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$run$5$ChatActivity$107(alertDialogArr, iSendRequest);
                }
            }, 500L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$3, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$3$ChatActivity$107(final AlertDialog[] alertDialogArr, final TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage, TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$K3iM-0Wf6lpxlgmtBPsGenid4II
                @Override // java.lang.Runnable
                public final void run() {
                    ChatActivity.AnonymousClass107.lambda$run$0(alertDialogArr);
                }
            });
            if (tLRPC$TL_error == null) {
                MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearLiveDialogId();
                MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).processUpdates((TLRPC$Updates) tLObject, false);
            } else {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$O1JkBQquv8UUNxp62xR0vNKqUpg
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$run$1$ChatActivity$107(tLRPC$TL_error, tLRPC$TL_messages_editMessage);
                    }
                });
            }
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$uX5tzmDXUX-KZVLFNgjg6STKTpY
                @Override // java.lang.Runnable
                public final void run() throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$run$2$ChatActivity$107();
                }
            });
        }

        static /* synthetic */ void lambda$run$0(AlertDialog[] alertDialogArr) {
            try {
                alertDialogArr[0].dismiss();
            } catch (Throwable unused) {
            }
            alertDialogArr[0] = null;
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$1$ChatActivity$107(TLRPC$TL_error tLRPC$TL_error, TLRPC$TL_messages_editMessage tLRPC$TL_messages_editMessage) {
            AlertsCreator.processError(((BaseFragment) ChatActivity.this).currentAccount, tLRPC$TL_error, ChatActivity.this, tLRPC$TL_messages_editMessage, new Object[0]);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$2, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$2$ChatActivity$107() throws Resources.NotFoundException, NumberFormatException {
            ChatActivity.this.updateVisibleRows();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$5, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$5$ChatActivity$107(AlertDialog[] alertDialogArr, final int i) {
            if (alertDialogArr[0] == null) {
                return;
            }
            alertDialogArr[0].setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$107$lKN-hAhcg1ANhuWpRy70do3RIZQ
                @Override // android.content.DialogInterface.OnCancelListener
                public final void onCancel(DialogInterface dialogInterface) {
                    this.f$0.lambda$run$4$ChatActivity$107(i, dialogInterface);
                }
            });
            ChatActivity.this.showDialog(alertDialogArr[0]);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$run$4, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$run$4$ChatActivity$107(int i, DialogInterface dialogInterface) {
            ConnectionsManager.getInstance(((BaseFragment) ChatActivity.this).currentAccount).cancelRequest(i, true);
        }
    }

    static /* synthetic */ void lambda$processSelectedOption$139(int[] iArr, Runnable runnable, DialogInterface dialogInterface, int i) {
        iArr[0] = 1;
        runnable.run();
    }

    static /* synthetic */ void lambda$processSelectedOption$140(int[] iArr, Runnable runnable, DialogInterface dialogInterface, int i) {
        iArr[0] = 3;
        runnable.run();
    }

    @Override // ir.eitaa.ui.DialogsActivity.DialogsActivityDelegate
    public void didSelectDialogs(DialogsActivity fragment, ArrayList<Long> dids, CharSequence message, boolean param) throws Resources.NotFoundException, NumberFormatException {
        if (this.forwardingMessage == null && this.selectedMessagesIds[0].size() == 0 && this.selectedMessagesIds[1].size() == 0) {
            return;
        }
        ArrayList<MessageObject> arrayList = new ArrayList<>();
        MessageObject messageObject = this.forwardingMessage;
        if (messageObject != null) {
            MessageObject.GroupedMessages groupedMessages = this.forwardingMessageGroup;
            if (groupedMessages != null) {
                arrayList.addAll(groupedMessages.messages);
            } else {
                arrayList.add(messageObject);
            }
            this.forwardingMessage = null;
            this.forwardingMessageGroup = null;
        } else {
            for (int i = 1; i >= 0; i--) {
                ArrayList arrayList2 = new ArrayList();
                for (int i2 = 0; i2 < this.selectedMessagesIds[i].size(); i2++) {
                    arrayList2.add(Integer.valueOf(this.selectedMessagesIds[i].keyAt(i2)));
                }
                Collections.sort(arrayList2);
                for (int i3 = 0; i3 < arrayList2.size(); i3++) {
                    MessageObject messageObject2 = this.selectedMessagesIds[i].get(((Integer) arrayList2.get(i3)).intValue());
                    if (messageObject2 != null) {
                        arrayList.add(messageObject2);
                    }
                }
                this.selectedMessagesCanCopyIds[i].clear();
                this.selectedMessagesCanStarIds[i].clear();
                this.selectedMessagesIds[i].clear();
            }
            hideActionMode();
            updatePinnedMessageView(true);
            updateVisibleRows();
        }
        if (dids.size() > 1 || dids.get(0).longValue() == getUserConfig().getClientUserId() || message != null) {
            this.forwardingMessages = null;
            hideFieldPanel(false);
            for (int i4 = 0; i4 < dids.size(); i4++) {
                long jLongValue = dids.get(i4).longValue();
                if (message != null) {
                    getSendMessagesHelper().sendMessage(message.toString(), jLongValue, null, null, null, true, null, null, null, true, 0, null);
                }
                getSendMessagesHelper().sendMessage(arrayList, jLongValue, this.isForwardFromMyName, false, true, 0);
            }
            fragment.finishFragment();
            if (dids.size() == 1) {
                this.undoView.showWithAction(dids.get(0).longValue(), 53, Integer.valueOf(arrayList.size()));
                return;
            } else {
                this.undoView.showWithAction(0L, 53, Integer.valueOf(arrayList.size()), Integer.valueOf(dids.size()), (Runnable) null, (Runnable) null);
                return;
            }
        }
        long jLongValue2 = dids.get(0).longValue();
        if (jLongValue2 != this.dialog_id || this.chatMode == 2) {
            Bundle bundle = new Bundle();
            bundle.putBoolean("scrollToTopOnResume", this.scrollToTopOnResume);
            if (DialogObject.isEncryptedDialog(jLongValue2)) {
                bundle.putInt("enc_id", DialogObject.getEncryptedChatId(jLongValue2));
            } else {
                if (DialogObject.isUserDialog(jLongValue2)) {
                    bundle.putLong("user_id", jLongValue2);
                } else {
                    bundle.putLong("chat_id", -jLongValue2);
                }
                if (!getMessagesController().checkCanOpenChat(bundle, fragment)) {
                    return;
                }
            }
            if (this.isForwardFromMyName) {
                bundle.putBoolean("forward_from_my_name", true);
            }
            ChatActivity chatActivity = new ChatActivity(bundle);
            if (presentFragment(chatActivity, true)) {
                chatActivity.showFieldPanelForForward(true, arrayList);
                if (AndroidUtilities.isTablet()) {
                    return;
                }
                removeSelfFromStack();
                return;
            }
            fragment.finishFragment();
            return;
        }
        fragment.finishFragment();
        moveScrollToLastMessage();
        this.fromMyName = this.isForwardFromMyName;
        showFieldPanelForForward(true, arrayList);
        if (AndroidUtilities.isTablet()) {
            hideActionMode();
            updatePinnedMessageView(true);
        }
        updateVisibleRows();
    }

    public boolean checkRecordLocked(final boolean forceCloseOnDiscard) {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || !chatActivityEnterView.isRecordLocked()) {
            return false;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        if (this.chatActivityEnterView.isInVideoMode()) {
            builder.setTitle(LocaleController.getString("DiscardVideoMessageTitle", R.string.DiscardVideoMessageTitle));
            builder.setMessage(LocaleController.getString("DiscardVideoMessageDescription", R.string.DiscardVideoMessageDescription));
        } else {
            builder.setTitle(LocaleController.getString("DiscardVoiceMessageTitle", R.string.DiscardVoiceMessageTitle));
            builder.setMessage(LocaleController.getString("DiscardVoiceMessageDescription", R.string.DiscardVoiceMessageDescription));
        }
        builder.setPositiveButton(LocaleController.getString("DiscardVoiceMessageAction", R.string.DiscardVoiceMessageAction), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$2x2pSa2R0hgDUzOk0uOgwNpnYNU
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$checkRecordLocked$141$ChatActivity(forceCloseOnDiscard, dialogInterface, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString("Continue", R.string.Continue), null);
        showDialog(builder.create());
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$checkRecordLocked$141, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$checkRecordLocked$141$ChatActivity(boolean z, DialogInterface dialogInterface, int i) {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            if (z) {
                finishFragment();
            } else {
                chatActivityEnterView.cancelRecordingAudioVideo();
            }
        }
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean onBackPressed() throws Resources.NotFoundException, NumberFormatException {
        ForwardingPreviewView forwardingPreviewView = this.forwardingPreviewView;
        if (forwardingPreviewView != null && forwardingPreviewView.isShowing()) {
            this.forwardingPreviewView.dismiss(true);
            return false;
        }
        if (this.messagesSearchListView.getTag() != null) {
            showMessagesSearchListView(false);
            return false;
        }
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
            return false;
        }
        if (checkRecordLocked(false)) {
            return false;
        }
        if (this.textSelectionHelper.isSelectionMode()) {
            this.textSelectionHelper.clear();
            return false;
        }
        ActionBar actionBar = this.actionBar;
        if (actionBar != null && actionBar.isActionModeShowed()) {
            clearSelectionMode();
            return false;
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.isPopupShowing()) {
            this.chatActivityEnterView.hidePopup(true);
            return false;
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null && chatActivityEnterView2.botCommandsMenuIsShowing()) {
            this.chatActivityEnterView.hideBotCommands();
            return false;
        }
        if (this.backToPreviousFragment != null) {
            ArrayList<BaseFragment> arrayList = this.parentLayout.fragmentsStack;
            arrayList.add(arrayList.size() - 1, this.backToPreviousFragment);
            this.backToPreviousFragment = null;
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void clearSelectionMode() throws Resources.NotFoundException, NumberFormatException {
        for (int i = 1; i >= 0; i--) {
            this.selectedMessagesIds[i].clear();
            this.selectedMessagesCanCopyIds[i].clear();
            this.selectedMessagesCanStarIds[i].clear();
        }
        hideActionMode();
        updatePinnedMessageView(true);
        updateVisibleRows();
    }

    public void onListItemAniamtorTick() {
        invalidateMessagesVisiblePart();
        if (this.scrimView != null) {
            this.fragmentView.invalidate();
        }
    }

    public void setThreadMessages(ArrayList<MessageObject> messageObjects, TLRPC$Chat originalChat, int originalMessage, int maxInboxReadId, int maxOutboxReadId) {
        this.threadMessageObjects = messageObjects;
        MessageObject messageObject = messageObjects.get(messageObjects.size() - 1);
        this.threadMessageObject = messageObject;
        this.replyingMessageObject = messageObject;
        this.threadMaxInboxReadId = maxInboxReadId;
        this.threadMaxOutboxReadId = maxOutboxReadId;
        this.replyMaxReadId = Math.max(1, maxInboxReadId);
        this.threadMessageId = this.threadMessageObject.getId();
        this.replyOriginalMessageId = originalMessage;
        this.replyOriginalChat = originalChat;
        TLRPC$MessageFwdHeader tLRPC$MessageFwdHeader = this.replyingMessageObject.messageOwner.fwd_from;
        this.isComments = (tLRPC$MessageFwdHeader == null || tLRPC$MessageFwdHeader.channel_post == 0) ? false : true;
    }

    public void setHighlightMessageId(int id) {
        this.highlightMessageId = id;
    }

    public boolean isThreadChat() {
        return this.threadMessageObject != null;
    }

    public boolean isReplyChatComment() {
        return this.threadMessageObject != null && this.isComments;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:95:0x0176  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateVisibleRows() throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 407
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.updateVisibleRows():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkEditTimer() {
        MessageObject editingMessageObject;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || (editingMessageObject = chatActivityEnterView.getEditingMessageObject()) == null || editingMessageObject.scheduled) {
            return;
        }
        TLRPC$User tLRPC$User = this.currentUser;
        if (tLRPC$User == null || !tLRPC$User.self) {
            int iAbs = editingMessageObject.canEditMessageAnytime(this.currentChat) ? 360 : (getMessagesController().maxEditTime + 300) - Math.abs(getConnectionsManager().getCurrentTime() - editingMessageObject.messageOwner.date);
            if (iAbs > 0) {
                if (iAbs <= 300) {
                    this.replyObjectTextView.setText(LocaleController.formatString("TimeToEdit", R.string.TimeToEdit, AndroidUtilities.formatShortDuration(iAbs)));
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Fne3u_ReuHbgpXi7w62444ZMnNs
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.checkEditTimer();
                    }
                }, 1000L);
            } else {
                this.chatActivityEnterView.onEditTimeExpired();
                this.replyObjectTextView.setText(LocaleController.formatString("TimeToEditExpired", R.string.TimeToEditExpired, new Object[0]));
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public ArrayList<MessageObject> createVoiceMessagesPlaylist(MessageObject startMessageObject, boolean playingUnreadMedia) {
        ArrayList<MessageObject> arrayList = new ArrayList<>();
        arrayList.add(startMessageObject);
        int id = startMessageObject.getId();
        startMessageObject.getDialogId();
        if (id != 0) {
            for (int size = this.messages.size() - 1; size >= 0; size--) {
                MessageObject messageObject = this.messages.get(size);
                if ((messageObject.getDialogId() != this.mergeDialogId || startMessageObject.getDialogId() == this.mergeDialogId) && (((this.currentEncryptedChat == null && messageObject.getId() > id) || (this.currentEncryptedChat != null && messageObject.getId() < id)) && ((messageObject.isVoice() || messageObject.isRoundVideo()) && (!playingUnreadMedia || (messageObject.isContentUnread() && !messageObject.isOut()))))) {
                    arrayList.add(messageObject);
                }
            }
        }
        return arrayList;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void alertUserOpenError(MessageObject message) {
        if (getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
        builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), null);
        if (message.type == 3) {
            builder.setMessage(LocaleController.getString("NoPlayerInstalled", R.string.NoPlayerInstalled));
        } else {
            builder.setMessage(LocaleController.formatString("NoHandleAppInstalled", R.string.NoHandleAppInstalled, message.getDocument().mime_type));
        }
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openSearchWithText(String text) {
        ActionBarMenuItem actionBarMenuItem;
        if (!this.actionBar.isSearchFieldVisible()) {
            AndroidUtilities.updateViewVisibilityAnimated(this.avatarContainer, false, 0.95f, true);
            ActionBarMenuItem actionBarMenuItem2 = this.headerItem;
            if (actionBarMenuItem2 != null) {
                actionBarMenuItem2.setVisibility(8);
            }
            ActionBarMenuItem actionBarMenuItem3 = this.attachItem;
            if (actionBarMenuItem3 != null) {
                actionBarMenuItem3.setVisibility(8);
            }
            ActionBarMenuItem actionBarMenuItem4 = this.editTextItem;
            if (actionBarMenuItem4 != null) {
                actionBarMenuItem4.setVisibility(8);
            }
            if (this.threadMessageId == 0 && (actionBarMenuItem = this.searchItem) != null) {
                actionBarMenuItem.setVisibility(0);
            }
            ActionBarMenuItem actionBarMenuItem5 = this.searchIconItem;
            if (actionBarMenuItem5 != null && this.showSearchAsIcon) {
                actionBarMenuItem5.setVisibility(8);
            }
            ActionBarMenuItem actionBarMenuItem6 = this.audioCallIconItem;
            if (actionBarMenuItem6 != null && this.showAudioCallAsIcon) {
                actionBarMenuItem6.setVisibility(8);
            }
            this.searchItemVisible = true;
            updateSearchButtons(0, 0, -1);
            updateBottomOverlay();
        }
        if (this.threadMessageId == 0 && !UserObject.isReplyUser(this.currentUser)) {
            boolean z = text == null;
            this.openSearchKeyboard = z;
            ActionBarMenuItem actionBarMenuItem7 = this.searchItem;
            if (actionBarMenuItem7 != null) {
                actionBarMenuItem7.openSearch(z);
            }
        }
        if (text != null) {
            ActionBarMenuItem actionBarMenuItem8 = this.searchItem;
            if (actionBarMenuItem8 != null) {
                actionBarMenuItem8.setSearchFieldText(text, false);
            }
            getMediaDataController().searchMessagesInChat(text, this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages);
        }
        updatePinnedMessageView(true);
    }

    public void didSelectLocation(TLRPC$MessageMedia location, int locationType, boolean notify, int scheduleDate) {
        getSendMessagesHelper().sendMessage(location, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC$ReplyMarkup) null, (HashMap<String, String>) null, notify, scheduleDate);
        if (this.chatMode == 0) {
            moveScrollToLastMessage();
        }
        if (locationType == 0 || locationType == 1) {
            afterMessageSend();
        }
        if (this.paused) {
            this.scrollToTopOnResume = true;
        }
    }

    public boolean isEditingMessageMedia() {
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        return (chatAttachAlert == null || chatAttachAlert.getEditingMessageObject() == null) ? false : true;
    }

    public boolean isSecretChat() {
        return this.currentEncryptedChat != null;
    }

    public boolean canScheduleMessage() {
        FrameLayout frameLayout;
        return this.currentEncryptedChat == null && ((frameLayout = this.bottomOverlayChat) == null || frameLayout.getVisibility() != 0) && !isThreadChat();
    }

    public boolean isInScheduleMode() {
        return this.chatMode == 1;
    }

    public int getChatMode() {
        return this.chatMode;
    }

    public MessageObject getThreadMessage() {
        return this.threadMessageObject;
    }

    public MessageObject getReplyMessage() {
        return this.replyingMessageObject;
    }

    public int getThreadId() {
        return this.threadMessageId;
    }

    public long getInlineReturn() {
        return this.inlineReturn;
    }

    public TLRPC$User getCurrentUser() {
        return this.currentUser;
    }

    public TLRPC$Chat getCurrentChat() {
        return this.currentChat;
    }

    public TLRPC$EncryptedChat getCurrentEncryptedChat() {
        return this.currentEncryptedChat;
    }

    public TLRPC$ChatFull getCurrentChatInfo() {
        return this.chatInfo;
    }

    public ChatObject.Call getGroupCall() {
        ChatObject.Call call;
        if (this.chatMode == 0 && (call = this.groupCall) != null && (call.call instanceof TLRPC$TL_groupCall)) {
            return call;
        }
        return null;
    }

    public TLRPC$UserFull getCurrentUserInfo() {
        return this.userInfo;
    }

    public void sendAudio(ArrayList<MessageObject> audios, CharSequence caption, boolean notify, int scheduleDate) {
        fillEditingMediaWithCaption(caption, null);
        SendMessagesHelper.prepareSendingAudioDocuments(getAccountInstance(), audios, caption != null ? caption.toString() : null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), this.editingMessageObject, notify, scheduleDate);
        afterMessageSend();
    }

    public void sendContact(TLRPC$User user, boolean notify, int scheduleDate) {
        getSendMessagesHelper().sendMessage(user, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC$ReplyMarkup) null, (HashMap<String, String>) null, notify, scheduleDate);
        afterMessageSend();
    }

    public void sendPoll(TLRPC$TL_messageMediaPoll poll, HashMap<String, String> params, boolean notify, int scheduleDate) {
        getSendMessagesHelper().sendMessage(poll, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC$ReplyMarkup) null, params, notify, scheduleDate);
        afterMessageSend();
    }

    public void sendMedia(MediaController.PhotoEntry photoEntry, VideoEditedInfo videoEditedInfo, boolean notify, int scheduleDate, boolean forceDocument) {
        if (photoEntry == null) {
            return;
        }
        fillEditingMediaWithCaption(photoEntry.caption, photoEntry.entities);
        if (photoEntry.isVideo) {
            if (videoEditedInfo != null) {
                SendMessagesHelper.prepareSendingVideo(getAccountInstance(), photoEntry.path, videoEditedInfo, this.dialog_id, this.replyingMessageObject, getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.ttl, this.editingMessageObject, notify, scheduleDate, forceDocument);
            } else {
                SendMessagesHelper.prepareSendingVideo(getAccountInstance(), photoEntry.path, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.ttl, this.editingMessageObject, notify, scheduleDate, forceDocument);
            }
            afterMessageSend();
            return;
        }
        if (photoEntry.imagePath != null) {
            SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.imagePath, photoEntry.thumbPath, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject, videoEditedInfo, notify, scheduleDate, forceDocument);
            afterMessageSend();
        } else if (photoEntry.path != null) {
            SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.path, photoEntry.thumbPath, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), photoEntry.caption, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject, videoEditedInfo, notify, scheduleDate, forceDocument);
            afterMessageSend();
        }
    }

    public void showOpenGameAlert(final TLRPC$TL_game game, final MessageObject messageObject, final String urlStr, boolean ask, final long uid) {
        String str;
        String str2;
        TLRPC$User user = getMessagesController().getUser(Long.valueOf(uid));
        str = "";
        if (ask) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
            builder.setMessage(LocaleController.formatString("BotPermissionGameAlert", R.string.BotPermissionGameAlert, user != null ? ContactsController.formatName(user.first_name, user.last_name) : ""));
            builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$j7BjRbMdXU0mulIE7bM6qCXuGhE
                @Override // android.content.DialogInterface.OnClickListener
                public final void onClick(DialogInterface dialogInterface, int i) {
                    this.f$0.lambda$showOpenGameAlert$142$ChatActivity(game, messageObject, urlStr, uid, dialogInterface, i);
                }
            });
            builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
            showDialog(builder.create());
            return;
        }
        if (Build.VERSION.SDK_INT >= 21 && !AndroidUtilities.isTablet() && WebviewActivity.supportWebview()) {
            ArrayList<BaseFragment> arrayList = this.parentLayout.fragmentsStack;
            if (arrayList.get(arrayList.size() - 1) == this) {
                if (user != null && !TextUtils.isEmpty(user.username)) {
                    str = user.username;
                }
                presentFragment(new WebviewActivity(urlStr, str, game.title, game.short_name, messageObject));
                return;
            }
            return;
        }
        Activity parentActivity = getParentActivity();
        String str3 = game.short_name;
        if (user != null && (str2 = user.username) != null) {
            str = str2;
        }
        WebviewActivity.openGameInBrowser(urlStr, messageObject, parentActivity, str3, str);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showOpenGameAlert$142, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showOpenGameAlert$142$ChatActivity(TLRPC$TL_game tLRPC$TL_game, MessageObject messageObject, String str, long j, DialogInterface dialogInterface, int i) {
        showOpenGameAlert(tLRPC$TL_game, messageObject, str, false, j);
        MessagesController.getNotificationsSettings(this.currentAccount).edit().putBoolean("askgame_" + j, false).commit();
    }

    /* JADX WARN: Removed duplicated region for block: B:34:0x0063  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processLoadedDiscussionMessage(boolean r20, ir.eitaa.tgnet.TLRPC$TL_messages_discussionMessage r21, boolean r22, ir.eitaa.tgnet.TLRPC$messages_Messages r23, final int r24, ir.eitaa.messenger.MessageObject r25, java.lang.Runnable r26, ir.eitaa.tgnet.TLRPC$TL_messages_getDiscussionMessage r27, ir.eitaa.tgnet.TLRPC$Chat r28, int r29, ir.eitaa.messenger.MessageObject r30) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 381
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.processLoadedDiscussionMessage(boolean, ir.eitaa.tgnet.TLRPC$TL_messages_discussionMessage, boolean, ir.eitaa.tgnet.TLRPC$messages_Messages, int, ir.eitaa.messenger.MessageObject, java.lang.Runnable, ir.eitaa.tgnet.TLRPC$TL_messages_getDiscussionMessage, ir.eitaa.tgnet.TLRPC$Chat, int, ir.eitaa.messenger.MessageObject):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$processLoadedDiscussionMessage$143, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$processLoadedDiscussionMessage$143$ChatActivity(TLRPC$messages_Messages tLRPC$messages_Messages, long j, int i, ChatActivity chatActivity, int i2, ArrayList arrayList) {
        getMessagesController().processLoadedMessages(tLRPC$messages_Messages, tLRPC$messages_Messages.messages.size(), j, 0L, 30, i, 0, false, chatActivity.getClassGuid(), i2, 0, 0, 0, 2, true, 0, ((MessageObject) arrayList.get(arrayList.size() - 1)).getId(), 1, false, 0, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openDiscussionMessageChat(long chatId, final MessageObject originalMessage, final int messageId, long linkedChatId, final int maxReadId, final int highlightMsgId, final MessageObject fallbackMessage) {
        TLRPC$Chat chat;
        final TLRPC$Chat chat2 = getMessagesController().getChat(Long.valueOf(chatId));
        final TLRPC$TL_messages_getDiscussionMessage tLRPC$TL_messages_getDiscussionMessage = new TLRPC$TL_messages_getDiscussionMessage();
        tLRPC$TL_messages_getDiscussionMessage.peer = MessagesController.getInputPeer(chat2);
        tLRPC$TL_messages_getDiscussionMessage.msg_id = messageId;
        if (BuildVars.LOGS_ENABLED) {
            FileLog.d("getDiscussionMessage chat = " + chat2.id + " msg_id = " + messageId);
        }
        this.commentLoadingMessageId = 0;
        this.savedDiscussionMessage = null;
        this.savedNoDiscussion = false;
        this.savedNoHistory = false;
        this.savedHistory = null;
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            recyclerListView.invalidateViews();
        }
        if (this.commentMessagesRequestId != -1) {
            getConnectionsManager().cancelRequest(this.commentMessagesRequestId, false);
        }
        if (this.commentRequestId != -1) {
            getConnectionsManager().cancelRequest(this.commentRequestId, false);
        }
        final Runnable runnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$O4F2WkKvp2KRbZymqU53EWxfaJY
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$144$ChatActivity(fallbackMessage, messageId);
            }
        };
        if (maxReadId >= 0 && linkedChatId != 0 && (chat = getMessagesController().getChat(Long.valueOf(linkedChatId))) != null) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("load replies for " + chat.id + " msg_id = " + maxReadId);
            }
            TLRPC$TL_messages_getReplies tLRPC$TL_messages_getReplies = new TLRPC$TL_messages_getReplies();
            tLRPC$TL_messages_getReplies.peer = MessagesController.getInputPeer(chat);
            tLRPC$TL_messages_getReplies.msg_id = maxReadId;
            tLRPC$TL_messages_getReplies.offset_date = 0;
            tLRPC$TL_messages_getReplies.add_offset = -20;
            tLRPC$TL_messages_getReplies.limit = 30;
            tLRPC$TL_messages_getReplies.offset_id = maxReadId;
            final int i = this.commentMessagesLoadingGuid + 1;
            this.commentMessagesLoadingGuid = i;
            final int i2 = 30;
            this.commentMessagesRequestId = getConnectionsManager().sendRequest(tLRPC$TL_messages_getReplies, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$OA2ZKcmdECwM5ZwakpGfQ5xwxCE
                @Override // ir.eitaa.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                    this.f$0.lambda$openDiscussionMessageChat$147$ChatActivity(i, i2, runnable, maxReadId, fallbackMessage, tLRPC$TL_messages_getDiscussionMessage, chat2, highlightMsgId, originalMessage, tLObject, tLRPC$TL_error);
                }
            });
            getConnectionsManager().bindRequestToGuid(this.commentMessagesRequestId, this.classGuid);
        } else {
            this.savedNoHistory = true;
        }
        final int i3 = this.commentLoadingGuid + 1;
        this.commentLoadingGuid = i3;
        this.commentRequestId = getConnectionsManager().sendRequest(tLRPC$TL_messages_getDiscussionMessage, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$drtdw1Amtuu_3dLXyvdEZSB4eQg
            @Override // ir.eitaa.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                this.f$0.lambda$openDiscussionMessageChat$150$ChatActivity(i3, maxReadId, fallbackMessage, runnable, tLRPC$TL_messages_getDiscussionMessage, chat2, highlightMsgId, originalMessage, tLObject, tLRPC$TL_error);
            }
        });
        getConnectionsManager().bindRequestToGuid(this.commentRequestId, this.classGuid);
        AndroidUtilities.runOnUIThread(runnable, 500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openDiscussionMessageChat$144, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openDiscussionMessageChat$144$ChatActivity(MessageObject messageObject, int i) {
        if (messageObject != null) {
            i = messageObject.getId();
        }
        this.commentLoadingMessageId = i;
        RecyclerListView recyclerListView = this.chatListView;
        if (recyclerListView != null) {
            recyclerListView.invalidateViews();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openDiscussionMessageChat$147, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openDiscussionMessageChat$147$ChatActivity(final int i, final int i2, final Runnable runnable, final int i3, final MessageObject messageObject, final TLRPC$TL_messages_getDiscussionMessage tLRPC$TL_messages_getDiscussionMessage, final TLRPC$Chat tLRPC$Chat, final int i4, final MessageObject messageObject2, final TLObject tLObject, final TLRPC$TL_error tLRPC$TL_error) {
        final Runnable runnable2 = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$zbJmLZm_-NxSp990j-QbuhVCTC0
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$openDiscussionMessageChat$145$ChatActivity(i, tLObject, i2, tLRPC$TL_error, runnable, i3, messageObject, tLRPC$TL_messages_getDiscussionMessage, tLRPC$Chat, i4, messageObject2);
            }
        };
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$4QMun8GmbguRR_A7EySDIPMoHHU
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$146$ChatActivity(runnable2);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openDiscussionMessageChat$145, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openDiscussionMessageChat$145$ChatActivity(int i, TLObject tLObject, int i2, TLRPC$TL_error tLRPC$TL_error, Runnable runnable, int i3, MessageObject messageObject, TLRPC$TL_messages_getDiscussionMessage tLRPC$TL_messages_getDiscussionMessage, TLRPC$Chat tLRPC$Chat, int i4, MessageObject messageObject2) throws Resources.NotFoundException, NumberFormatException {
        if (i != this.commentMessagesLoadingGuid) {
            return;
        }
        this.commentMessagesRequestId = -1;
        if (tLObject != null) {
            TLRPC$messages_Messages tLRPC$messages_Messages = (TLRPC$messages_Messages) tLObject;
            this.savedHistory = tLRPC$messages_Messages;
            if (tLRPC$messages_Messages.messages.size() > i2) {
                this.savedHistory.messages.remove(0);
            }
        } else {
            if ("CHANNEL_PRIVATE".equals(tLRPC$TL_error.text)) {
                if (getParentActivity() != null) {
                    AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                    builder.setTitle(LocaleController.getString("AppName", R.string.AppName));
                    builder.setMessage(LocaleController.getString("JoinByPeekChannelText", R.string.JoinByPeekChannelText));
                    builder.setPositiveButton(LocaleController.getString("OK", R.string.OK), null);
                    showDialog(builder.create());
                }
                AndroidUtilities.cancelRunOnUIThread(runnable);
                this.commentLoadingMessageId = 0;
                this.chatListView.invalidateViews();
                return;
            }
            this.savedNoHistory = true;
        }
        processLoadedDiscussionMessage(this.savedNoDiscussion, this.savedDiscussionMessage, this.savedNoHistory, this.savedHistory, i3, messageObject, runnable, tLRPC$TL_messages_getDiscussionMessage, tLRPC$Chat, i4, messageObject2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openDiscussionMessageChat$150, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openDiscussionMessageChat$150$ChatActivity(final int i, final int i2, final MessageObject messageObject, final Runnable runnable, final TLRPC$TL_messages_getDiscussionMessage tLRPC$TL_messages_getDiscussionMessage, final TLRPC$Chat tLRPC$Chat, final int i3, final MessageObject messageObject2, final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        final Runnable runnable2 = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$FZW2XIEsmcsg_IXWPqO1vdJljMk
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$openDiscussionMessageChat$148$ChatActivity(i, tLObject, i2, messageObject, runnable, tLRPC$TL_messages_getDiscussionMessage, tLRPC$Chat, i3, messageObject2);
            }
        };
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThOQr0oSDSqgU9-CWegwffYixJ8
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$149$ChatActivity(runnable2);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$openDiscussionMessageChat$148, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$openDiscussionMessageChat$148$ChatActivity(int i, TLObject tLObject, int i2, MessageObject messageObject, Runnable runnable, TLRPC$TL_messages_getDiscussionMessage tLRPC$TL_messages_getDiscussionMessage, TLRPC$Chat tLRPC$Chat, int i3, MessageObject messageObject2) throws Resources.NotFoundException, NumberFormatException {
        if (i != this.commentLoadingGuid) {
            return;
        }
        this.commentRequestId = -1;
        if (tLObject instanceof TLRPC$TL_messages_discussionMessage) {
            this.savedDiscussionMessage = (TLRPC$TL_messages_discussionMessage) tLObject;
            getMessagesController().putUsers(this.savedDiscussionMessage.users, false);
            getMessagesController().putChats(this.savedDiscussionMessage.chats, false);
        } else {
            this.savedNoDiscussion = true;
        }
        processLoadedDiscussionMessage(this.savedNoDiscussion, this.savedDiscussionMessage, this.savedNoHistory, this.savedHistory, i2, messageObject, runnable, tLRPC$TL_messages_getDiscussionMessage, tLRPC$Chat, i3, messageObject2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openOriginalReplyChat(MessageObject messageObject) throws Resources.NotFoundException, NumberFormatException {
        if (UserObject.isUserSelf(this.currentUser)) {
            TLRPC$MessageFwdHeader tLRPC$MessageFwdHeader = messageObject.messageOwner.fwd_from;
            if (tLRPC$MessageFwdHeader.saved_from_peer.user_id == this.currentUser.id) {
                scrollToMessageId(tLRPC$MessageFwdHeader.saved_from_msg_id, messageObject.getId(), true, 0, true, 0);
                return;
            }
        }
        Bundle bundle = new Bundle();
        TLRPC$Peer tLRPC$Peer = messageObject.messageOwner.fwd_from.saved_from_peer;
        long j = tLRPC$Peer.channel_id;
        if (j != 0) {
            bundle.putLong("chat_id", j);
        } else {
            long j2 = tLRPC$Peer.chat_id;
            if (j2 != 0) {
                bundle.putLong("chat_id", j2);
            } else {
                long j3 = tLRPC$Peer.user_id;
                if (j3 != 0) {
                    bundle.putLong("user_id", j3);
                }
            }
        }
        bundle.putInt("message_id", messageObject.messageOwner.fwd_from.saved_from_msg_id);
        if (getMessagesController().checkCanOpenChat(bundle, this)) {
            presentFragment(new ChatActivity(bundle));
        }
    }

    public void showRequestUrlAlert(final TLRPC$TL_urlAuthResultRequest request, final TLRPC$TL_messages_requestUrlAuth buttonReq, final String url, final boolean ask) {
        if (getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString("OpenUrlTitle", R.string.OpenUrlTitle));
        String string = LocaleController.getString("OpenUrlAlert2", R.string.OpenUrlAlert2);
        int iIndexOf = string.indexOf("%");
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(String.format(string, url));
        if (iIndexOf >= 0) {
            spannableStringBuilder.setSpan(new URLSpan(url), iIndexOf, url.length() + iIndexOf, 33);
        }
        builder.setMessage(spannableStringBuilder);
        builder.setMessageTextViewClickable(false);
        builder.setNegativeButton(LocaleController.getString("Cancel", R.string.Cancel), null);
        int i = 2;
        final CheckBoxCell[] checkBoxCellArr = new CheckBoxCell[2];
        LinearLayout linearLayout = new LinearLayout(getParentActivity());
        linearLayout.setOrientation(1);
        TLRPC$User currentUser = getUserConfig().getCurrentUser();
        int i2 = 0;
        while (true) {
            if (i2 < (request.request_write_access ? 2 : 1)) {
                checkBoxCellArr[i2] = new CheckBoxCell(getParentActivity(), 5, this.themeDelegate);
                checkBoxCellArr[i2].setBackgroundDrawable(Theme.getSelectorDrawable(false));
                checkBoxCellArr[i2].setMultiline(true);
                checkBoxCellArr[i2].setTag(Integer.valueOf(i2));
                if (i2 == 0) {
                    Object[] objArr = new Object[i];
                    objArr[0] = request.domain;
                    objArr[1] = ContactsController.formatName(currentUser.first_name, currentUser.last_name);
                    SpannableStringBuilder spannableStringBuilderReplaceTags = AndroidUtilities.replaceTags(LocaleController.formatString("OpenUrlOption1", R.string.OpenUrlOption1, objArr));
                    int iIndexOf2 = TextUtils.indexOf(spannableStringBuilderReplaceTags, request.domain);
                    if (iIndexOf2 >= 0) {
                        spannableStringBuilderReplaceTags.setSpan(new URLSpan(""), iIndexOf2, request.domain.length() + iIndexOf2, 33);
                    }
                    checkBoxCellArr[i2].setText(spannableStringBuilderReplaceTags, "", true, false);
                } else {
                    checkBoxCellArr[i2].setText(AndroidUtilities.replaceTags(LocaleController.formatString("OpenUrlOption2", R.string.OpenUrlOption2, UserObject.getFirstName(request.bot))), "", true, false);
                }
                checkBoxCellArr[i2].setPadding(LocaleController.isRTL ? AndroidUtilities.dp(16.0f) : AndroidUtilities.dp(8.0f), 0, LocaleController.isRTL ? AndroidUtilities.dp(8.0f) : AndroidUtilities.dp(16.0f), 0);
                linearLayout.addView(checkBoxCellArr[i2], LayoutHelper.createLinear(-1, -2));
                checkBoxCellArr[i2].setOnClickListener(new View.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$BPH4PErb-UL9BsZoTFgV4P8K9V0
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        ChatActivity.lambda$showRequestUrlAlert$151(checkBoxCellArr, view);
                    }
                });
                i2++;
                i = 2;
            } else {
                builder.setCustomViewOffset(12);
                builder.setView(linearLayout);
                builder.setPositiveButton(LocaleController.getString("Open", R.string.Open), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$msqBz8tHySQNXwLBY6sGsEvJeVY
                    @Override // android.content.DialogInterface.OnClickListener
                    public final void onClick(DialogInterface dialogInterface, int i3) {
                        this.f$0.lambda$showRequestUrlAlert$156$ChatActivity(checkBoxCellArr, url, buttonReq, request, ask, dialogInterface, i3);
                    }
                });
                showDialog(builder.create());
                return;
            }
        }
    }

    static /* synthetic */ void lambda$showRequestUrlAlert$151(CheckBoxCell[] checkBoxCellArr, View view) {
        if (view.isEnabled()) {
            Integer num = (Integer) view.getTag();
            checkBoxCellArr[num.intValue()].setChecked(!checkBoxCellArr[num.intValue()].isChecked(), true);
            if (num.intValue() != 0 || checkBoxCellArr[1] == null) {
                return;
            }
            if (checkBoxCellArr[num.intValue()].isChecked()) {
                checkBoxCellArr[1].setEnabled(true);
            } else {
                checkBoxCellArr[1].setChecked(false, true);
                checkBoxCellArr[1].setEnabled(false);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showRequestUrlAlert$156, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showRequestUrlAlert$156$ChatActivity(CheckBoxCell[] checkBoxCellArr, final String str, final TLRPC$TL_messages_requestUrlAuth tLRPC$TL_messages_requestUrlAuth, TLRPC$TL_urlAuthResultRequest tLRPC$TL_urlAuthResultRequest, final boolean z, DialogInterface dialogInterface, int i) {
        if (!checkBoxCellArr[0].isChecked()) {
            Browser.openUrl((Context) getParentActivity(), str, false);
            return;
        }
        final AlertDialog[] alertDialogArr = {new AlertDialog(getParentActivity(), 3, this.themeDelegate)};
        TLRPC$TL_messages_acceptUrlAuth tLRPC$TL_messages_acceptUrlAuth = new TLRPC$TL_messages_acceptUrlAuth();
        String str2 = tLRPC$TL_messages_requestUrlAuth.url;
        if (str2 != null) {
            tLRPC$TL_messages_acceptUrlAuth.url = str2;
            tLRPC$TL_messages_acceptUrlAuth.flags |= 4;
        } else {
            tLRPC$TL_messages_acceptUrlAuth.button_id = tLRPC$TL_messages_requestUrlAuth.button_id;
            tLRPC$TL_messages_acceptUrlAuth.msg_id = tLRPC$TL_messages_requestUrlAuth.msg_id;
            tLRPC$TL_messages_acceptUrlAuth.peer = tLRPC$TL_messages_requestUrlAuth.peer;
            tLRPC$TL_messages_acceptUrlAuth.flags |= 2;
        }
        if (tLRPC$TL_urlAuthResultRequest.request_write_access) {
            tLRPC$TL_messages_acceptUrlAuth.write_allowed = checkBoxCellArr[1].isChecked();
        }
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
        final int iSendRequest = getConnectionsManager().sendRequest(tLRPC$TL_messages_acceptUrlAuth, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$vkYjt5_jOayeogjgFUc1SUuz0vo
            @Override // ir.eitaa.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                this.f$0.lambda$showRequestUrlAlert$153$ChatActivity(str, tLRPC$TL_messages_requestUrlAuth, z, tLObject, tLRPC$TL_error);
            }
        });
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$-uuD4lFK2E6k8AENOE8MqerMPVg
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showRequestUrlAlert$155$ChatActivity(alertDialogArr, iSendRequest);
            }
        }, 500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showRequestUrlAlert$153, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showRequestUrlAlert$153$ChatActivity(final String str, final TLRPC$TL_messages_requestUrlAuth tLRPC$TL_messages_requestUrlAuth, final boolean z, final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$4OZbBBzLyuhhTadgoLXZPGKooZ4
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showRequestUrlAlert$152$ChatActivity(tLObject, str, tLRPC$TL_messages_requestUrlAuth, z);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showRequestUrlAlert$152, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showRequestUrlAlert$152$ChatActivity(TLObject tLObject, String str, TLRPC$TL_messages_requestUrlAuth tLRPC$TL_messages_requestUrlAuth, boolean z) {
        if (tLObject instanceof TLRPC$TL_urlAuthResultAccepted) {
            Browser.openUrl((Context) getParentActivity(), ((TLRPC$TL_urlAuthResultAccepted) tLObject).url, false);
            return;
        }
        if (tLObject instanceof TLRPC$TL_urlAuthResultDefault) {
            Browser.openUrl((Context) getParentActivity(), str, false);
            return;
        }
        String str2 = tLRPC$TL_messages_requestUrlAuth.url;
        if (str2 != null) {
            AlertsCreator.showOpenUrlAlert(this, str2, false, z, this.themeDelegate);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showRequestUrlAlert$155, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showRequestUrlAlert$155$ChatActivity(AlertDialog[] alertDialogArr, final int i) {
        if (alertDialogArr[0] == null) {
            return;
        }
        alertDialogArr[0].setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$19DdIJ-VVFpv5bRqSOtlYpuhQEc
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$showRequestUrlAlert$154$ChatActivity(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showRequestUrlAlert$154, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showRequestUrlAlert$154$ChatActivity(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    private void removeMessageObject(MessageObject messageObject) {
        int iIndexOf = this.messages.indexOf(messageObject);
        if (iIndexOf == -1) {
            return;
        }
        this.messages.remove(iIndexOf);
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            chatActivityAdapter.notifyItemRemoved(chatActivityAdapter.messagesStartRow + iIndexOf);
        }
    }

    public void openVCard(TLRPC$User user, String vcard, String first_name, String last_name) throws IOException {
        try {
            File sharingDirectory = AndroidUtilities.getSharingDirectory();
            sharingDirectory.mkdirs();
            File file = new File(sharingDirectory, "vcard.vcf");
            BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(file));
            bufferedWriter.write(vcard);
            bufferedWriter.close();
            showDialog(new PhonebookShareAlert(this, null, user, null, file, first_name, last_name, this.themeDelegate));
        } catch (Exception e) {
            FileLog.e(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setCellSelectionBackground(MessageObject message, ChatMessageCell messageCell, int idx, boolean animated) {
        boolean z;
        MessageObject.GroupedMessages validGroupedMessage = getValidGroupedMessage(message);
        if (validGroupedMessage != null) {
            int i = 0;
            while (true) {
                if (i >= validGroupedMessage.messages.size()) {
                    z = false;
                    break;
                } else {
                    if (this.selectedMessagesIds[idx].indexOfKey(validGroupedMessage.messages.get(i).getId()) < 0) {
                        z = true;
                        break;
                    }
                    i++;
                }
            }
            if (!z) {
                validGroupedMessage = null;
            }
        }
        messageCell.setDrawSelectionBackground(validGroupedMessage == null);
        messageCell.setChecked(true, validGroupedMessage == null, animated);
    }

    private void openClickableLink(String str) {
        TLRPC$User tLRPC$User;
        if (str.startsWith("@")) {
            String lowerCase = str.substring(1).toLowerCase();
            TLRPC$Chat tLRPC$Chat = this.currentChat;
            if ((tLRPC$Chat != null && !TextUtils.isEmpty(tLRPC$Chat.username) && lowerCase.equals(this.currentChat.username.toLowerCase())) || ((tLRPC$User = this.currentUser) != null && !TextUtils.isEmpty(tLRPC$User.username) && lowerCase.equals(this.currentUser.username.toLowerCase()))) {
                Bundle bundle = new Bundle();
                TLRPC$Chat tLRPC$Chat2 = this.currentChat;
                if (tLRPC$Chat2 != null) {
                    bundle.putLong("chat_id", tLRPC$Chat2.id);
                } else {
                    TLRPC$User tLRPC$User2 = this.currentUser;
                    if (tLRPC$User2 != null) {
                        bundle.putLong("user_id", tLRPC$User2.id);
                        if (this.currentEncryptedChat != null) {
                            bundle.putLong("dialog_id", this.dialog_id);
                        }
                    }
                }
                ProfileActivity profileActivity = new ProfileActivity(bundle, this.avatarContainer.getSharedMediaPreloader());
                profileActivity.setPlayProfileAnimation(1);
                profileActivity.setChatInfo(this.chatInfo);
                profileActivity.setUserInfo(this.userInfo);
                presentFragment(profileActivity);
                return;
            }
            getMessagesController().openByUserName(lowerCase, this, 0);
            return;
        }
        if (str.startsWith("#") || str.startsWith("$")) {
            if (ChatObject.isChannel(this.currentChat)) {
                int i = this.chatMode;
                if (i == 1 || i == 2) {
                    this.chatActivityDelegate.openSearch(str);
                    finishFragment();
                    return;
                } else {
                    openSearchWithText(str);
                    return;
                }
            }
            SearchViewPager.globalSearch = true;
            SearchViewPager.trendString = str;
            DialogsActivity dialogsActivity = new DialogsActivity(null);
            dialogsActivity.setSearchString(str);
            presentFragment(dialogsActivity);
            return;
        }
        processExternalUrl(0, str, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void processExternalUrl(int type, String url, boolean forceAlert) {
        try {
            Uri uri = Uri.parse(url);
            String lowerCase = uri.getHost() != null ? uri.getHost().toLowerCase() : "";
            if ((this.currentEncryptedChat == null || getMessagesController().secretWebpagePreview == 1) && getMessagesController().authDomains.contains(lowerCase)) {
                getSendMessagesHelper().requestUrlAuth(url, this, type == 0 || type == 2);
                return;
            }
        } catch (Exception e) {
            FileLog.e(e);
        }
        if (forceAlert || AndroidUtilities.shouldShowUrlInAlert(url)) {
            if (type == 0 || type == 2) {
                AlertsCreator.showOpenUrlAlert(this, url, true, true, true, this.themeDelegate);
                return;
            } else {
                if (type == 1) {
                    AlertsCreator.showOpenUrlAlert(this, url, true, true, false, this.themeDelegate);
                    return;
                }
                return;
            }
        }
        if (type == 0) {
            Browser.openUrl(getParentActivity(), url);
        } else if (type == 1) {
            Browser.openUrl(getParentActivity(), url, this.inlineReturn == 0, false);
        } else if (type == 2) {
            Browser.openUrl(getParentActivity(), url, this.inlineReturn == 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:49:0x00c7  */
    /* JADX WARN: Removed duplicated region for block: B:50:0x00f0  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didPressMessageUrl(final android.text.style.CharacterStyle r25, boolean r26, final ir.eitaa.messenger.MessageObject r27, final ir.eitaa.ui.Cells.ChatMessageCell r28) throws java.lang.NoSuchFieldException, java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.io.IOException {
        /*
            Method dump skipped, instructions count: 758
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.didPressMessageUrl(android.text.style.CharacterStyle, boolean, ir.eitaa.messenger.MessageObject, ir.eitaa.ui.Cells.ChatMessageCell):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didPressMessageUrl$159, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didPressMessageUrl$159$ChatActivity(final AlertDialog[] alertDialogArr, final String str, final TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$DvQnvXjTOiM2-yxn7-XfI0DOv2o
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didPressMessageUrl$158$ChatActivity(alertDialogArr, tLObject, str);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didPressMessageUrl$158, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didPressMessageUrl$158$ChatActivity(AlertDialog[] alertDialogArr, TLObject tLObject, final String str) {
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
        if (!(tLObject instanceof TLRPC$TL_payments_bankCardData) || getParentActivity() == null) {
            return;
        }
        final TLRPC$TL_payments_bankCardData tLRPC$TL_payments_bankCardData = (TLRPC$TL_payments_bankCardData) tLObject;
        BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity(), false, this.themeDelegate);
        ArrayList arrayList = new ArrayList();
        int size = tLRPC$TL_payments_bankCardData.open_urls.size();
        for (int i = 0; i < size; i++) {
            arrayList.add(tLRPC$TL_payments_bankCardData.open_urls.get(i).name);
        }
        arrayList.add(LocaleController.getString("CopyCardNumber", R.string.CopyCardNumber));
        builder.setTitle(tLRPC$TL_payments_bankCardData.title);
        builder.setItems((CharSequence[]) arrayList.toArray(new CharSequence[0]), new DialogInterface.OnClickListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$dM8R745P_mgare51alsT0UYHcRw
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i2) {
                this.f$0.lambda$didPressMessageUrl$157$ChatActivity(tLRPC$TL_payments_bankCardData, str, dialogInterface, i2);
            }
        });
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didPressMessageUrl$157, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didPressMessageUrl$157$ChatActivity(TLRPC$TL_payments_bankCardData tLRPC$TL_payments_bankCardData, String str, DialogInterface dialogInterface, int i) {
        if (i < tLRPC$TL_payments_bankCardData.open_urls.size()) {
            Browser.openUrl(getParentActivity(), tLRPC$TL_payments_bankCardData.open_urls.get(i).url, this.inlineReturn == 0, false);
        } else {
            AndroidUtilities.addToClipboard(str);
            Toast.makeText(ApplicationLoader.applicationContext, LocaleController.getString("CardNumberCopied", R.string.CardNumberCopied), 0).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didPressMessageUrl$161, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didPressMessageUrl$161$ChatActivity(AlertDialog[] alertDialogArr, final int i) {
        if (alertDialogArr[0] == null) {
            return;
        }
        alertDialogArr[0].setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$hYKHi_i43ysaVyjs0ZIX71JwAeY
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$didPressMessageUrl$160$ChatActivity(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$didPressMessageUrl$160, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$didPressMessageUrl$160$ChatActivity(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:48:0x00e3  */
    /* JADX WARN: Removed duplicated region for block: B:50:0x00e6 A[RETURN] */
    /* JADX WARN: Removed duplicated region for block: B:51:0x00e7  */
    /* renamed from: lambda$didPressMessageUrl$162, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$didPressMessageUrl$162$ChatActivity(java.lang.String r3, android.text.style.CharacterStyle r4, ir.eitaa.messenger.MessageObject r5, ir.eitaa.ui.Cells.ChatMessageCell r6, int r7, android.content.DialogInterface r8, int r9) throws java.lang.NoSuchFieldException, java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.io.IOException {
        /*
            Method dump skipped, instructions count: 289
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.lambda$didPressMessageUrl$162$ChatActivity(java.lang.String, android.text.style.CharacterStyle, ir.eitaa.messenger.MessageObject, ir.eitaa.ui.Cells.ChatMessageCell, int, android.content.DialogInterface, int):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:15:0x0030  */
    /* JADX WARN: Removed duplicated region for block: B:16:0x0038  */
    /* renamed from: lambda$didPressMessageUrl$163, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$didPressMessageUrl$163$ChatActivity(java.lang.String r4, android.content.DialogInterface r5, int r6) {
        /*
            r3 = this;
            r5 = 0
            r0 = 1
            if (r6 != 0) goto L8
            r3.processExternalUrl(r0, r4, r5)
            goto L49
        L8:
            if (r6 != r0) goto L49
            java.lang.String r6 = "mailto:"
            boolean r6 = r4.startsWith(r6)
            if (r6 == 0) goto L19
            r6 = 7
            java.lang.String r4 = r4.substring(r6)
            r5 = 1
            goto L27
        L19:
            java.lang.String r6 = "tel:"
            boolean r6 = r4.startsWith(r6)
            if (r6 == 0) goto L27
            r6 = 4
            java.lang.String r4 = r4.substring(r6)
            goto L28
        L27:
            r0 = 0
        L28:
            ir.eitaa.messenger.AndroidUtilities.addToClipboard(r4)
            r4 = 0
            r1 = 0
            if (r5 == 0) goto L38
            ir.eitaa.ui.Components.UndoView r5 = r3.undoView
            r6 = 80
            r5.showWithAction(r1, r6, r4)
            goto L49
        L38:
            if (r0 == 0) goto L42
            ir.eitaa.ui.Components.UndoView r5 = r3.undoView
            r6 = 60
            r5.showWithAction(r1, r6, r4)
            goto L49
        L42:
            ir.eitaa.ui.Components.UndoView r5 = r3.undoView
            r6 = 59
            r5.showWithAction(r1, r6, r4)
        L49:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.lambda$didPressMessageUrl$163$ChatActivity(java.lang.String, android.content.DialogInterface, int):void");
    }

    void openPhotoViewerForMessage(ChatMessageCell cell, MessageObject message) throws InterruptedException, Resources.NotFoundException, IOException {
        ChatMessageCell chatMessageCell;
        AnimatedFileDrawable animation;
        Bitmap animatedBitmap;
        if (cell == null) {
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.getMessageObject().equals(message)) {
                        break;
                    }
                }
            }
            chatMessageCell = cell;
        } else {
            chatMessageCell = cell;
        }
        if (message.isVideo()) {
            sendSecretMessageRead(message, true);
        }
        PhotoViewer.getInstance().setParentActivity(getParentActivity(), this.themeDelegate);
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (chatMessageCell != null && playingMessageObject != null && playingMessageObject.isVideo()) {
            getFileLoader().setLoadingVideoForPlayer(playingMessageObject.getDocument(), false);
            if (playingMessageObject.equals(message) && (animation = chatMessageCell.getPhotoImage().getAnimation()) != null && this.videoTextureView != null && this.videoPlayerContainer.getTag() != null && (animatedBitmap = animation.getAnimatedBitmap()) != null) {
                try {
                    Bitmap bitmap = this.videoTextureView.getBitmap(animatedBitmap.getWidth(), animatedBitmap.getHeight());
                    new Canvas(animatedBitmap).drawBitmap(bitmap, 0.0f, 0.0f, (Paint) null);
                    bitmap.recycle();
                } catch (Throwable th) {
                    FileLog.e(th);
                }
            }
            MediaController.getInstance().cleanupPlayer(true, true, false, playingMessageObject.equals(message));
        }
        if (this.chatMode == 1 && (message.isVideo() || message.type == 1)) {
            PhotoViewer.getInstance().setParentChatActivity(this);
            ArrayList<MessageObject> arrayList = new ArrayList<>();
            int size = this.messages.size();
            for (int i2 = 0; i2 < size; i2++) {
                MessageObject messageObject = this.messages.get(i2);
                if (messageObject.isVideo() || messageObject.type == 1) {
                    arrayList.add(0, messageObject);
                }
            }
            PhotoViewer.getInstance().openPhoto(arrayList, arrayList.indexOf(message), this.dialog_id, 0L, this.photoViewerProvider);
        } else {
            PhotoViewer photoViewer = PhotoViewer.getInstance();
            int i3 = message.type;
            photoViewer.openPhoto(message, this, i3 != 0 ? this.dialog_id : 0L, i3 != 0 ? this.mergeDialogId : 0L, this.photoViewerProvider);
        }
        hideHints(false);
        MediaController.getInstance().resetGoingToShowMessageObject();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateMessageListAccessibilityVisibility() {
        ActionBarPopupWindow actionBarPopupWindow;
        if (this.currentEncryptedChat == null && Build.VERSION.SDK_INT >= 19) {
            this.chatListView.setImportantForAccessibility((this.mentionContainer.getVisibility() == 0 || ((actionBarPopupWindow = this.scrimPopupWindow) != null && actionBarPopupWindow.isShowing())) ? 4 : 0);
        }
    }

    private void markSponsoredAsRead(MessageObject object) {
        if (!object.isSponsored() || object.viewsReloaded) {
            return;
        }
        object.viewsReloaded = true;
        TLRPC$TL_channels_viewSponsoredMessage tLRPC$TL_channels_viewSponsoredMessage = new TLRPC$TL_channels_viewSponsoredMessage();
        tLRPC$TL_channels_viewSponsoredMessage.channel = MessagesController.getInputChannel(this.currentChat);
        tLRPC$TL_channels_viewSponsoredMessage.random_id = object.sponsoredId;
        getConnectionsManager().sendRequest(tLRPC$TL_channels_viewSponsoredMessage, new RequestDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$-stKfZsAADNojz88Rv8Gl-Mp8uo
            @Override // ir.eitaa.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC$TL_error tLRPC$TL_error) {
                ChatActivity.lambda$markSponsoredAsRead$164(tLObject, tLRPC$TL_error);
            }
        });
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean canBeginSlide() {
        return this.swipeBackEnabled && this.chatActivityEnterView.swipeToBackEnabled() && this.pullingDownOffset == 0.0f;
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public boolean isSwipeBackEnabled(MotionEvent event) {
        return this.swipeBackEnabled;
    }

    public class ChatActivityAdapter extends RecyclerAnimationScrollHelper.AnimatableAdapter {
        private boolean isBot;
        private Context mContext;
        private int messagesEndRow;
        private int messagesStartRow;
        private int rowCount;
        private int botInfoRow = -5;
        private int botInfoEmptyRow = -5;
        private int loadingUpRow = -5;
        private int loadingDownRow = -5;

        @Override // ir.eitaa.ui.Components.RecyclerListView.SelectionAdapter
        public boolean isEnabled(RecyclerView.ViewHolder holder) {
            return false;
        }

        public ChatActivityAdapter(Context context) {
            this.mContext = context;
            TLRPC$User tLRPC$User = ChatActivity.this.currentUser;
            this.isBot = tLRPC$User != null && tLRPC$User.bot;
            setHasStableIds(true);
        }

        public void updateRowsSafe() {
            int i = this.rowCount;
            int i2 = this.botInfoRow;
            int i3 = this.loadingUpRow;
            int i4 = this.loadingDownRow;
            int i5 = this.messagesStartRow;
            int i6 = this.messagesEndRow;
            updateRowsInternal();
            if (i == this.rowCount && i2 == this.botInfoRow && i3 == this.loadingUpRow && i4 == this.loadingDownRow && i5 == this.messagesStartRow && i6 == this.messagesEndRow) {
                return;
            }
            notifyDataSetChanged(false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public void updateRowsInternal() {
            TLRPC$User tLRPC$User;
            this.rowCount = 0;
            if (!ChatActivity.this.messages.isEmpty()) {
                if (!ChatActivity.this.forwardEndReached[0] || (ChatActivity.this.mergeDialogId != 0 && !ChatActivity.this.forwardEndReached[1])) {
                    int i = this.rowCount;
                    this.rowCount = i + 1;
                    this.loadingDownRow = i;
                } else {
                    this.loadingDownRow = -5;
                }
                int i2 = this.rowCount;
                this.messagesStartRow = i2;
                int size = i2 + ChatActivity.this.messages.size();
                this.rowCount = size;
                this.messagesEndRow = size;
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC$User tLRPC$User2 = chatActivity.currentUser;
                if (tLRPC$User2 != null && tLRPC$User2.bot && chatActivity.chatMode == 0 && (((ChatActivity.this.botInfo.size() > 0 && ((TLRPC$BotInfo) ChatActivity.this.botInfo.get(ChatActivity.this.currentUser.id)).description != null) || UserObject.isReplyUser(ChatActivity.this.currentUser)) && ChatActivity.this.endReached[0])) {
                    int i3 = this.rowCount;
                    this.rowCount = i3 + 1;
                    this.botInfoRow = i3;
                } else {
                    this.botInfoRow = -5;
                }
                if (!ChatActivity.this.endReached[0] || (ChatActivity.this.mergeDialogId != 0 && !ChatActivity.this.endReached[1])) {
                    int i4 = this.rowCount;
                    this.rowCount = i4 + 1;
                    this.loadingUpRow = i4;
                    return;
                }
                this.loadingUpRow = -5;
                return;
            }
            this.loadingUpRow = -5;
            this.loadingDownRow = -5;
            this.messagesStartRow = -5;
            this.messagesEndRow = -5;
            if (UserObject.isReplyUser(ChatActivity.this.currentUser) || ((tLRPC$User = ChatActivity.this.currentUser) != null && tLRPC$User.bot && !MessagesController.isSupportUser(tLRPC$User) && ChatActivity.this.chatMode == 0)) {
                int i5 = this.rowCount;
                this.rowCount = i5 + 1;
                this.botInfoRow = i5;
                return;
            }
            this.botInfoRow = -5;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public int getItemCount() {
            this.botInfoEmptyRow = -5;
            if (!ChatActivity.this.clearingHistory) {
                if (ChatActivity.this.clearingHistory) {
                    return 0;
                }
                return this.rowCount;
            }
            ChatActivity chatActivity = ChatActivity.this;
            TLRPC$User tLRPC$User = chatActivity.currentUser;
            if (tLRPC$User == null || !tLRPC$User.bot || chatActivity.chatMode != 0 || ((ChatActivity.this.botInfo.size() <= 0 || ((TLRPC$BotInfo) ChatActivity.this.botInfo.get(ChatActivity.this.currentUser.id)).description == null) && !UserObject.isReplyUser(ChatActivity.this.currentUser))) {
                return 0;
            }
            this.botInfoEmptyRow = 0;
            return 1;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public long getItemId(int position) {
            if (ChatActivity.this.clearingHistory && position == this.botInfoEmptyRow) {
                return 1L;
            }
            if (position >= this.messagesStartRow && position < this.messagesEndRow) {
                return ChatActivity.this.messages.get(position - r0).stableId;
            }
            if (position == this.botInfoRow || position == this.botInfoEmptyRow) {
                return 1L;
            }
            if (position == this.loadingUpRow) {
                return 2L;
            }
            return position == this.loadingDownRow ? 3L : 4L;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
            View chatLoadingCell;
            View chatMessageCell;
            if (i == 0) {
                if (!ChatActivity.this.chatMessageCellsCache.isEmpty()) {
                    View view = (View) ChatActivity.this.chatMessageCellsCache.get(0);
                    ChatActivity.this.chatMessageCellsCache.remove(0);
                    chatMessageCell = view;
                } else {
                    chatMessageCell = new ChatMessageCell(this.mContext, ChatActivity.this.themeDelegate);
                }
                ChatMessageCell chatMessageCell2 = (ChatMessageCell) chatMessageCell;
                chatMessageCell2.setDelegate(new AnonymousClass1());
                chatLoadingCell = chatMessageCell;
                if (ChatActivity.this.currentEncryptedChat == null) {
                    chatMessageCell2.setAllowAssistant(true);
                    chatLoadingCell = chatMessageCell;
                }
            } else if (i == 1) {
                ChatActionCell chatActionCell = new ChatActionCell(this.mContext, ChatActivity.this.themeDelegate) { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.2
                    @Override // ir.eitaa.ui.Cells.ChatActionCell, android.view.View
                    public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo info) {
                        super.onInitializeAccessibilityNodeInfo(info);
                        info.setVisibleToUser(true);
                    }
                };
                chatActionCell.setInvalidateColors(true);
                chatActionCell.setDelegate(new ChatActionCell.ChatActionCellDelegate() { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.3
                    @Override // ir.eitaa.ui.Cells.ChatActionCell.ChatActionCellDelegate
                    public /* synthetic */ void needOpenInviteLink(TLRPC$TL_chatInviteExported tLRPC$TL_chatInviteExported) {
                        ChatActionCell.ChatActionCellDelegate.CC.$default$needOpenInviteLink(this, tLRPC$TL_chatInviteExported);
                    }

                    @Override // ir.eitaa.ui.Cells.ChatActionCell.ChatActionCellDelegate
                    public void didClickImage(ChatActionCell cell) throws Resources.NotFoundException {
                        MessageObject messageObject = cell.getMessageObject();
                        PhotoViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity(), ChatActivity.this.themeDelegate);
                        TLRPC$PhotoSize closestPhotoSizeWithSize = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, 640);
                        if (closestPhotoSizeWithSize == null) {
                            PhotoViewer.getInstance().openPhoto(messageObject, (ChatActivity) null, 0L, 0L, ChatActivity.this.photoViewerProvider);
                        } else {
                            PhotoViewer.getInstance().openPhoto(closestPhotoSizeWithSize.location, ImageLocation.getForPhoto(closestPhotoSizeWithSize, messageObject.messageOwner.action.photo), ChatActivity.this.photoViewerProvider);
                        }
                    }

                    @Override // ir.eitaa.ui.Cells.ChatActionCell.ChatActionCellDelegate
                    public void didLongPress(ChatActionCell cell, float x, float y) throws Resources.NotFoundException, NumberFormatException {
                        ChatActivity.this.createMenu(cell, false, false, x, y);
                    }

                    @Override // ir.eitaa.ui.Cells.ChatActionCell.ChatActionCellDelegate
                    public void needOpenUserProfile(long uid) {
                        if (uid < 0) {
                            Bundle bundle = new Bundle();
                            bundle.putLong("chat_id", -uid);
                            if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this)) {
                                ChatActivity.this.presentFragment(new ChatActivity(bundle));
                                return;
                            }
                            return;
                        }
                        if (uid != ChatActivity.this.getUserConfig().getClientUserId()) {
                            Bundle bundle2 = new Bundle();
                            bundle2.putLong("user_id", uid);
                            ChatActivity chatActivity = ChatActivity.this;
                            if (chatActivity.currentEncryptedChat != null && uid == chatActivity.currentUser.id) {
                                bundle2.putLong("dialog_id", chatActivity.dialog_id);
                            }
                            ProfileActivity profileActivity = new ProfileActivity(bundle2);
                            TLRPC$User tLRPC$User = ChatActivity.this.currentUser;
                            profileActivity.setPlayProfileAnimation((tLRPC$User == null || tLRPC$User.id != uid) ? 0 : 1);
                            ChatActivity.this.presentFragment(profileActivity);
                        }
                    }

                    @Override // ir.eitaa.ui.Cells.ChatActionCell.ChatActionCellDelegate
                    public void didPressReplyMessage(ChatActionCell cell, int id) throws Resources.NotFoundException, NumberFormatException {
                        MessageObject messageObject = cell.getMessageObject();
                        ChatActivity.this.scrollToMessageId(id, messageObject.getId(), true, messageObject.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0);
                    }
                });
                chatLoadingCell = chatActionCell;
            } else if (i == 2) {
                chatLoadingCell = new ChatUnreadCell(this.mContext, ChatActivity.this.themeDelegate);
            } else if (i == 3) {
                BotHelpCell botHelpCell = new BotHelpCell(this.mContext, ChatActivity.this.themeDelegate);
                botHelpCell.setDelegate(new BotHelpCell.BotHelpCellDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ChatActivityAdapter$-JXO1W41_Epy14kEG-ID_dqQO90
                    @Override // ir.eitaa.ui.Cells.BotHelpCell.BotHelpCellDelegate
                    public final void didPressUrl(String str) {
                        this.f$0.lambda$onCreateViewHolder$0$ChatActivity$ChatActivityAdapter(str);
                    }
                });
                chatLoadingCell = botHelpCell;
            } else if (i == 4) {
                Context context = this.mContext;
                ChatActivity chatActivity = ChatActivity.this;
                chatLoadingCell = new ChatLoadingCell(context, chatActivity.contentView, chatActivity.themeDelegate);
            } else {
                chatLoadingCell = null;
            }
            chatLoadingCell.setLayoutParams(new RecyclerView.LayoutParams(-1, -2));
            return new RecyclerListView.Holder(chatLoadingCell);
        }

        /* renamed from: ir.eitaa.ui.ChatActivity$ChatActivityAdapter$1, reason: invalid class name */
        class AnonymousClass1 implements ChatMessageCell.ChatMessageCellDelegate {
            AnonymousClass1() {
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressHint(ChatMessageCell cell, int type) {
                if (type == 0) {
                    ChatActivity.this.showPollSolution(cell.getMessageObject(), ((TLRPC$TL_messageMediaPoll) cell.getMessageObject().messageOwner.media).results);
                } else if (type == 1) {
                    MessageObject messageObject = cell.getMessageObject();
                    TLRPC$MessageFwdHeader tLRPC$MessageFwdHeader = messageObject.messageOwner.fwd_from;
                    if (tLRPC$MessageFwdHeader == null || TextUtils.isEmpty(tLRPC$MessageFwdHeader.psa_type)) {
                        return;
                    }
                    String string = LocaleController.getString("PsaMessageInfo_" + messageObject.messageOwner.fwd_from.psa_type);
                    if (TextUtils.isEmpty(string)) {
                        string = LocaleController.getString("PsaMessageInfoDefault", R.string.PsaMessageInfoDefault);
                    }
                    SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(string);
                    MessageObject.addLinks(false, spannableStringBuilder);
                    MessageObject.GroupedMessages currentMessagesGroup = cell.getCurrentMessagesGroup();
                    if (currentMessagesGroup != null) {
                        int size = currentMessagesGroup.posArray.size();
                        int i = 0;
                        while (true) {
                            if (i >= size) {
                                break;
                            }
                            if ((currentMessagesGroup.posArray.get(i).flags & 1) != 0) {
                                MessageObject messageObject2 = currentMessagesGroup.messages.get(i);
                                if (messageObject2 != messageObject) {
                                    int childCount = ChatActivity.this.chatListView.getChildCount();
                                    for (int i2 = 0; i2 < childCount; i2++) {
                                        View childAt = ChatActivity.this.chatListView.getChildAt(i2);
                                        if (childAt instanceof ChatMessageCell) {
                                            ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                                            if (messageObject2.equals(chatMessageCell.getMessageObject())) {
                                                cell = chatMessageCell;
                                            }
                                        }
                                    }
                                    messageObject = messageObject2;
                                }
                            } else {
                                i++;
                            }
                        }
                    }
                    ChatActivity.this.showInfoHint(messageObject, spannableStringBuilder, 1);
                }
                cell.showHintButton(false, true, type);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean shouldDrawThreadProgress(ChatMessageCell cell) {
                MessageObject messageObject;
                MessageObject.GroupedMessages currentMessagesGroup = cell.getCurrentMessagesGroup();
                if (currentMessagesGroup != null && !currentMessagesGroup.messages.isEmpty()) {
                    messageObject = currentMessagesGroup.messages.get(0);
                } else {
                    messageObject = cell.getMessageObject();
                }
                return messageObject != null && messageObject.getId() == ChatActivity.this.commentLoadingMessageId;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressSideButton(ChatMessageCell cell) throws Resources.NotFoundException, NumberFormatException {
                TLRPC$Message tLRPC$Message;
                TLRPC$TL_messageReplyHeader tLRPC$TL_messageReplyHeader;
                int i;
                MessageObject.GroupedMessages groupedMessages;
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView != null) {
                    chatActivityEnterView.closeKeyboard();
                }
                MessageObject messageObject = cell.getMessageObject();
                if (ChatActivity.this.chatMode == 2) {
                    ChatActivity.this.chatActivityDelegate.openReplyMessage(messageObject.getId());
                    ChatActivity.this.finishFragment();
                    return;
                }
                if ((UserObject.isReplyUser(ChatActivity.this.currentUser) || UserObject.isUserSelf(ChatActivity.this.currentUser)) && messageObject.messageOwner.fwd_from.saved_from_peer != null) {
                    if (!UserObject.isReplyUser(ChatActivity.this.currentUser) || (tLRPC$TL_messageReplyHeader = (tLRPC$Message = messageObject.messageOwner).reply_to) == null || (i = tLRPC$TL_messageReplyHeader.reply_to_top_id) == 0) {
                        ChatActivity.this.openOriginalReplyChat(messageObject);
                        return;
                    } else {
                        ChatActivity.this.openDiscussionMessageChat(tLRPC$TL_messageReplyHeader.reply_to_peer_id.channel_id, null, i, 0L, -1, tLRPC$Message.fwd_from.saved_from_msg_id, messageObject);
                        return;
                    }
                }
                ArrayList<MessageObject> arrayList = null;
                if (messageObject.getGroupId() != 0 && (groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(messageObject.getGroupId())) != null) {
                    arrayList = groupedMessages.messages;
                }
                if (arrayList == null) {
                    arrayList = new ArrayList<>();
                    arrayList.add(messageObject);
                }
                ChatActivity chatActivity = ChatActivity.this;
                Context context = ChatActivityAdapter.this.mContext;
                ChatActivity chatActivity2 = ChatActivity.this;
                chatActivity.showDialog(new ShareAlert(context, chatActivity2, arrayList, null, null, ChatObject.isChannel(chatActivity2.currentChat), null, null, false, false, ChatActivity.this.themeDelegate) { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.1.1
                    @Override // ir.eitaa.ui.Components.ShareAlert, ir.eitaa.ui.ActionBar.BottomSheet
                    public void dismissInternal() {
                        super.dismissInternal();
                        AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                        if (ChatActivity.this.chatActivityEnterView.getVisibility() == 0) {
                            ((BaseFragment) ChatActivity.this).fragmentView.requestLayout();
                        }
                    }

                    @Override // ir.eitaa.ui.Components.ShareAlert
                    protected void onSend(LongSparseArray<TLRPC$Dialog> dids, int count) {
                        if (dids.size() == 1) {
                            ChatActivity.this.undoView.showWithAction(dids.valueAt(0).id, 53, Integer.valueOf(count));
                        } else {
                            ChatActivity.this.undoView.showWithAction(0L, 53, Integer.valueOf(count), Integer.valueOf(dids.size()), (Runnable) null, (Runnable) null);
                        }
                    }
                });
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                ((BaseFragment) ChatActivity.this).fragmentView.requestLayout();
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean needPlayMessage(MessageObject messageObject) throws IOException {
                if (messageObject.isVoice() || messageObject.isRoundVideo()) {
                    boolean zPlayMessage = MediaController.getInstance().playMessage(messageObject);
                    MediaController.getInstance().setVoiceMessagesPlaylist(zPlayMessage ? ChatActivity.this.createVoiceMessagesPlaylist(messageObject, false) : null, false);
                    return zPlayMessage;
                }
                if (!messageObject.isMusic()) {
                    return false;
                }
                MediaController mediaController = MediaController.getInstance();
                ChatActivity chatActivity = ChatActivity.this;
                return mediaController.setPlaylist(chatActivity.messages, messageObject, chatActivity.mergeDialogId);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void videoTimerReached() {
                ChatActivity.this.showNoSoundHint();
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressTime(ChatMessageCell cell) {
                ChatActivity.this.undoView.showWithAction(ChatActivity.this.dialog_id, 47, (Runnable) null);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressChannelAvatar(ChatMessageCell cell, TLRPC$Chat chat, int postId, float touchX, float touchY) throws Resources.NotFoundException, NumberFormatException {
                if (chat == null) {
                    return;
                }
                if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) {
                    ChatActivity.this.processRowSelect(cell, true, touchX, touchY);
                } else {
                    openChat(cell, chat, postId);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressHiddenForward(ChatMessageCell cell) {
                if (!cell.getMessageObject().isImportedForward()) {
                    ChatActivity.this.showForwardHint(cell);
                } else {
                    didPressTime(cell);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressOther(ChatMessageCell cell, float otherX, float otherY) throws Resources.NotFoundException, NumberFormatException {
                MessageObject messageObject = cell.getMessageObject();
                if (messageObject.type != 16) {
                    ChatActivity.this.createMenu(cell, true, false, otherX, otherY, messageObject.isMusic());
                    return;
                }
                TLRPC$User tLRPC$User = ChatActivity.this.currentUser;
                if (tLRPC$User != null) {
                    boolean zIsVideoCall = messageObject.isVideoCall();
                    ChatActivity chatActivity = ChatActivity.this;
                    TLRPC$UserFull tLRPC$UserFull = chatActivity.userInfo;
                    VoIPHelper.startCall(tLRPC$User, zIsVideoCall, tLRPC$UserFull != null && tLRPC$UserFull.video_calls_available, chatActivity.getParentActivity(), ChatActivity.this.getMessagesController().getUserFull(ChatActivity.this.currentUser.id), ChatActivity.this.getAccountInstance());
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressUserAvatar(ChatMessageCell cell, TLRPC$User user, float touchX, float touchY) throws Resources.NotFoundException, NumberFormatException {
                if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) {
                    ChatActivity.this.processRowSelect(cell, true, touchX, touchY);
                } else {
                    openProfile(user);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean didLongPressUserAvatar(final ChatMessageCell cell, final TLRPC$User user, float touchX, float touchY) {
                AvatarPreviewer.Data dataOf;
                if (isAvatarPreviewerEnabled()) {
                    ChatActivity chatActivity = ChatActivity.this;
                    int i = (chatActivity.currentChat == null || (chatActivity.bottomOverlayChat != null && ChatActivity.this.bottomOverlayChat.getVisibility() == 0) || (ChatActivity.this.bottomOverlay != null && ChatActivity.this.bottomOverlay.getVisibility() == 0)) ? 0 : 1;
                    AvatarPreviewer.MenuItem[] menuItemArr = new AvatarPreviewer.MenuItem[i + 2];
                    menuItemArr[0] = AvatarPreviewer.MenuItem.OPEN_PROFILE;
                    menuItemArr[1] = AvatarPreviewer.MenuItem.SEND_MESSAGE;
                    if (i != 0) {
                        menuItemArr[2] = AvatarPreviewer.MenuItem.MENTION;
                    }
                    TLRPC$UserFull userFull = ChatActivity.this.getMessagesController().getUserFull(user.id);
                    if (userFull == null) {
                        dataOf = AvatarPreviewer.Data.of(user, ((BaseFragment) ChatActivity.this).classGuid, menuItemArr);
                    } else {
                        dataOf = AvatarPreviewer.Data.of(userFull, menuItemArr);
                    }
                    if (AvatarPreviewer.canPreview(dataOf)) {
                        AvatarPreviewer.getInstance().show((ViewGroup) ((BaseFragment) ChatActivity.this).fragmentView, dataOf, new AvatarPreviewer.Callback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ChatActivityAdapter$1$_Hueo2x9sBrnd8ppexKUm1D42Lo
                            @Override // ir.eitaa.ui.AvatarPreviewer.Callback
                            public final void onMenuClick(AvatarPreviewer.MenuItem menuItem) {
                                this.f$0.lambda$didLongPressUserAvatar$0$ChatActivity$ChatActivityAdapter$1(cell, user, menuItem);
                            }
                        });
                        return true;
                    }
                }
                return false;
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$didLongPressUserAvatar$0, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$didLongPressUserAvatar$0$ChatActivity$ChatActivityAdapter$1(ChatMessageCell chatMessageCell, TLRPC$User tLRPC$User, AvatarPreviewer.MenuItem menuItem) {
                int i = AnonymousClass110.$SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[menuItem.ordinal()];
                if (i == 1) {
                    openProfile(tLRPC$User);
                } else if (i == 4) {
                    openDialog(chatMessageCell, tLRPC$User);
                } else {
                    if (i != 5) {
                        return;
                    }
                    appendMention(tLRPC$User);
                }
            }

            private void appendMention(TLRPC$User user) {
                if (ChatActivity.this.chatActivityEnterView != null) {
                    SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
                    CharSequence fieldText = ChatActivity.this.chatActivityEnterView.getFieldText();
                    if (fieldText != null) {
                        spannableStringBuilder.append(fieldText);
                    }
                    if (spannableStringBuilder.length() > 0 && spannableStringBuilder.charAt(spannableStringBuilder.length() - 1) != ' ') {
                        spannableStringBuilder.append(' ');
                    }
                    if (user.username != null) {
                        spannableStringBuilder.append((CharSequence) "@").append((CharSequence) user.username).append((CharSequence) " ");
                    } else {
                        SpannableString spannableString = new SpannableString(UserObject.getFirstName(user, false) + " ");
                        spannableString.setSpan(new URLSpanUserMention("" + user.id, 3), 0, spannableString.length(), 33);
                        spannableStringBuilder.append((CharSequence) spannableString);
                    }
                    ChatActivity.this.chatActivityEnterView.setFieldText(spannableStringBuilder);
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ChatActivityAdapter$1$tySrNHOwp-GTIeELxhVrOoaNtNA
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$appendMention$1$ChatActivity$ChatActivityAdapter$1();
                        }
                    }, 200L);
                }
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$appendMention$1, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$appendMention$1$ChatActivity$ChatActivityAdapter$1() {
                ChatActivity.this.chatActivityEnterView.openKeyboard();
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean didLongPressChannelAvatar(final ChatMessageCell cell, final TLRPC$Chat chat, int postId, float touchX, float touchY) {
                AvatarPreviewer.Data dataOf;
                if (isAvatarPreviewerEnabled()) {
                    AvatarPreviewer.MenuItem[] menuItemArr = {AvatarPreviewer.MenuItem.OPEN_PROFILE};
                    ChatActivity chatActivity = ChatActivity.this;
                    TLRPC$Chat tLRPC$Chat = chatActivity.currentChat;
                    if (tLRPC$Chat == null || tLRPC$Chat.id != chat.id || chatActivity.isThreadChat()) {
                        menuItemArr = (AvatarPreviewer.MenuItem[]) Arrays.copyOf(menuItemArr, 2);
                        menuItemArr[1] = chat.broadcast ? AvatarPreviewer.MenuItem.OPEN_CHANNEL : AvatarPreviewer.MenuItem.OPEN_GROUP;
                    }
                    TLRPC$ChatFull chatFull = ChatActivity.this.getMessagesController().getChatFull(chat.id);
                    if (chatFull == null) {
                        dataOf = AvatarPreviewer.Data.of(chat, ((BaseFragment) ChatActivity.this).classGuid, menuItemArr);
                    } else {
                        dataOf = AvatarPreviewer.Data.of(chat, chatFull, menuItemArr);
                    }
                    if (AvatarPreviewer.canPreview(dataOf)) {
                        AvatarPreviewer.getInstance().show((ViewGroup) ((BaseFragment) ChatActivity.this).fragmentView, dataOf, new AvatarPreviewer.Callback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ChatActivityAdapter$1$p2HkX5Gg-gq2lLmrPThvX9LuGmE
                            @Override // ir.eitaa.ui.AvatarPreviewer.Callback
                            public final void onMenuClick(AvatarPreviewer.MenuItem menuItem) throws Resources.NotFoundException, NumberFormatException {
                                this.f$0.lambda$didLongPressChannelAvatar$2$ChatActivity$ChatActivityAdapter$1(chat, cell, menuItem);
                            }
                        });
                        return true;
                    }
                }
                return false;
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$didLongPressChannelAvatar$2, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$didLongPressChannelAvatar$2$ChatActivity$ChatActivityAdapter$1(TLRPC$Chat tLRPC$Chat, ChatMessageCell chatMessageCell, AvatarPreviewer.MenuItem menuItem) throws Resources.NotFoundException, NumberFormatException {
                int i = AnonymousClass110.$SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[menuItem.ordinal()];
                if (i == 1) {
                    openProfile(tLRPC$Chat);
                } else if (i == 2 || i == 3) {
                    openChat(chatMessageCell, tLRPC$Chat, 0);
                }
            }

            private void openProfile(TLRPC$User user) {
                if (user == null || user.id == ChatActivity.this.getUserConfig().getClientUserId()) {
                    return;
                }
                Bundle bundle = new Bundle();
                bundle.putLong("user_id", user.id);
                ProfileActivity profileActivity = new ProfileActivity(bundle);
                TLRPC$User tLRPC$User = ChatActivity.this.currentUser;
                profileActivity.setPlayProfileAnimation((tLRPC$User == null || tLRPC$User.id != user.id) ? 0 : 1);
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                ChatActivity.this.presentFragment(profileActivity);
            }

            private void openProfile(TLRPC$Chat chat) {
                if (chat != null) {
                    Bundle bundle = new Bundle();
                    bundle.putLong("chat_id", chat.id);
                    ChatActivity.this.presentFragment(new ProfileActivity(bundle));
                }
            }

            private void openDialog(ChatMessageCell cell, TLRPC$User user) {
                if (user != null) {
                    Bundle bundle = new Bundle();
                    bundle.putLong("user_id", user.id);
                    if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this, cell.getMessageObject())) {
                        ChatActivity.this.presentFragment(new ChatActivity(bundle));
                    }
                }
            }

            private void openChat(ChatMessageCell cell, TLRPC$Chat chat, int postId) throws Resources.NotFoundException, NumberFormatException {
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC$Chat tLRPC$Chat = chatActivity.currentChat;
                if (tLRPC$Chat != null && chat.id == tLRPC$Chat.id) {
                    chatActivity.scrollToMessageId(postId, cell.getMessageObject().getId(), true, 0, true, 0);
                    return;
                }
                if (tLRPC$Chat == null || chat.id != tLRPC$Chat.id || chatActivity.isThreadChat()) {
                    Bundle bundle = new Bundle();
                    bundle.putLong("chat_id", chat.id);
                    if (postId != 0) {
                        bundle.putInt("message_id", postId);
                    }
                    if (chat.isMediaContent) {
                        bundle.putBoolean("show_switch_button", true);
                    }
                    if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this, cell.getMessageObject())) {
                        ChatActivity.this.presentFragment(new ChatActivity(bundle));
                    }
                }
            }

            private boolean isAvatarPreviewerEnabled() {
                TLRPC$Chat tLRPC$Chat;
                return UserObject.isUserSelf(ChatActivity.this.currentUser) || ((tLRPC$Chat = ChatActivity.this.currentChat) != null && (!ChatObject.isChannel(tLRPC$Chat) || ChatActivity.this.currentChat.megagroup));
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressBotButton(ChatMessageCell cell, TLRPC$KeyboardButton button) {
                if (ChatActivity.this.getParentActivity() != null) {
                    if (ChatActivity.this.bottomOverlayChat.getVisibility() != 0 || (button instanceof TLRPC$TL_keyboardButtonSwitchInline) || (button instanceof TLRPC$TL_keyboardButtonCallback) || (button instanceof TLRPC$TL_keyboardButtonGame) || (button instanceof TLRPC$TL_keyboardButtonUrl) || (button instanceof TLRPC$TL_keyboardButtonBuy) || (button instanceof TLRPC$TL_keyboardButtonUrlAuth)) {
                        ChatActivity.this.chatActivityEnterView.didPressedBotButton(button, cell.getMessageObject(), cell.getMessageObject());
                    }
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressReaction(ChatMessageCell cell, TLRPC$TL_reactionCount reaction) {
                ChatActivity.this.getSendMessagesHelper().sendReaction(cell.getMessageObject(), reaction.reaction, ChatActivity.this);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressVoteButtons(ChatMessageCell cell, ArrayList<TLRPC$TL_pollAnswer> buttons, int showCount, int x, int y) {
                int i;
                int i2;
                int i3;
                int i4;
                if (showCount >= 0 || buttons.isEmpty()) {
                    if (ChatActivity.this.getParentActivity() == null) {
                        return;
                    }
                    if (ChatActivity.this.pollHintView == null) {
                        ChatActivity.this.pollHintView = new HintView(ChatActivity.this.getParentActivity(), 5, ChatActivity.this.themeDelegate);
                        ChatActivity.this.pollHintView.setAlpha(0.0f);
                        ChatActivity.this.pollHintView.setVisibility(4);
                        ChatActivity chatActivity = ChatActivity.this;
                        int iIndexOfChild = chatActivity.contentView.indexOfChild(chatActivity.chatActivityEnterView);
                        if (iIndexOfChild == -1) {
                            return;
                        }
                        ChatActivity chatActivity2 = ChatActivity.this;
                        chatActivity2.contentView.addView(chatActivity2.pollHintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                    }
                    if (!buttons.isEmpty() || showCount >= 0) {
                        i = x;
                        i2 = y;
                    } else {
                        ArrayList<ChatMessageCell.PollButton> pollButtons = cell.getPollButtons();
                        int size = pollButtons.size();
                        int i5 = 0;
                        float f = 0.0f;
                        while (true) {
                            if (i5 >= size) {
                                i3 = x;
                                i4 = y;
                                break;
                            }
                            ChatMessageCell.PollButton pollButton = pollButtons.get(i5);
                            float y2 = ((cell.getY() + pollButton.y) - AndroidUtilities.dp(4.0f)) - ChatActivity.this.chatListViewPaddingTop;
                            ChatActivity.this.pollHintX = pollButton.x + AndroidUtilities.dp(13.3f);
                            ChatActivity.this.pollHintY = (pollButton.y - AndroidUtilities.dp(6.0f)) + y;
                            if (y2 > 0.0f) {
                                i3 = ChatActivity.this.pollHintX;
                                i4 = ChatActivity.this.pollHintY;
                                f = 0.0f;
                                break;
                            }
                            i5++;
                            f = y2;
                        }
                        if (f != 0.0f) {
                            ChatActivity.this.chatListView.smoothScrollBy(0, (int) f);
                            ChatActivity.this.pollHintCell = cell;
                            return;
                        } else {
                            i = i3;
                            i2 = i4;
                        }
                    }
                    ChatActivity.this.pollHintView.showForMessageCell(cell, Integer.valueOf(showCount), i, i2, true);
                    return;
                }
                ChatActivity.this.getSendMessagesHelper().sendVote(cell.getMessageObject(), buttons, null);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressCancelSendButton(ChatMessageCell cell) {
                MessageObject messageObject = cell.getMessageObject();
                if (messageObject.messageOwner.send_state != 0) {
                    ChatActivity.this.getSendMessagesHelper().cancelSendingMessage(messageObject);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didLongPress(ChatMessageCell cell, float x, float y) throws Resources.NotFoundException, NumberFormatException {
                ChatActivity.this.createMenu(cell, false, false, x, y);
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.startMultiselect(chatActivity.chatListView.getChildAdapterPosition(cell));
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean canPerformActions() {
                return (((BaseFragment) ChatActivity.this).actionBar == null || ((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.reportType >= 0) ? false : true;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressUrl(ChatMessageCell cell, final CharacterStyle url, boolean longPress) throws NoSuchFieldException, InterruptedException, Resources.NotFoundException, IOException {
                String url2 = !(url instanceof URLSpanMono) ? ((URLSpan) url).getURL() : null;
                if (url != null) {
                    if (cell.getMessageObject().messageText.toString().toLowerCase().contains("?eitaafly") || cell.getMessageObject().messageText.toString().toLowerCase().contains("&eitaafly")) {
                        String url3 = ((URLSpan) url).getURL();
                        if (url3 != null && url3.length() > 0) {
                            if (!url3.toLowerCase().contains("?eitaafly") && !url3.toLowerCase().contains("&eitaafly")) {
                                ChatActivity.this.didPressMessageUrl(url, longPress, cell.getMessageObject(), cell);
                            } else {
                                EmbedBottomSheet.show(ChatActivity.this.getParentActivity(), null, null, "", "", url3, url3, 680, 360, false);
                                return;
                            }
                        }
                    } else if (cell.getMessageObject().caption == null) {
                        ChatActivity.this.didPressMessageUrl(url, longPress, cell.getMessageObject(), cell);
                    } else if (!cell.getMessageObject().caption.toString().toLowerCase().contains("?eitaafly") && !cell.getMessageObject().caption.toString().toLowerCase().contains("&eitaafly")) {
                        ChatActivity.this.didPressMessageUrl(url, longPress, cell.getMessageObject(), cell);
                    } else {
                        String url4 = ((URLSpan) url).getURL();
                        if (url4 != null && url4.length() > 0) {
                            if (!url4.toLowerCase().contains("?eitaafly") && !url4.toLowerCase().contains("&eitaafly")) {
                                ChatActivity.this.didPressMessageUrl(url, longPress, cell.getMessageObject(), cell);
                            } else {
                                EmbedBottomSheet.show(ChatActivity.this.getParentActivity(), null, null, "", "", url4, url4, 680, 360, false);
                                return;
                            }
                        }
                    }
                }
                if (MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).payEnabled) {
                    try {
                        String str = MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).payHost;
                        if (!url2.startsWith("http")) {
                            url2 = "https://" + url2;
                        }
                        if (new URL(url2).getHost().toLowerCase().equals(str)) {
                            Bundle bundle = new Bundle();
                            bundle.putString("link", url2);
                            TLRPC$Peer tLRPC$Peer = cell.getMessageObject().messageOwner.peer_id;
                            SerializedData serializedData = new SerializedData(tLRPC$Peer.getObjectSize());
                            tLRPC$Peer.serializeToStream(serializedData);
                            bundle.putByteArray("peer", serializedData.readByteArray(false));
                            ChatActivity.this.presentFragment(new PaymentActivity(bundle));
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void needOpenWebView(MessageObject message, String url, String title, String description, String originalUrl, int w, int h) {
                try {
                    EmbedBottomSheet.show(ChatActivity.this.getParentActivity(), message, ChatActivity.this.photoViewerProvider, title, description, originalUrl, url, w, h, ChatActivity.this.isKeyboardVisible());
                } catch (Throwable th) {
                    FileLog.e(th);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressReplyMessage(ChatMessageCell cell, int id) throws Resources.NotFoundException, NumberFormatException {
                if (UserObject.isReplyUser(ChatActivity.this.currentUser)) {
                    didPressSideButton(cell);
                    return;
                }
                MessageObject messageObject = cell.getMessageObject();
                if (ChatActivity.this.chatMode == 2 || ChatActivity.this.chatMode == 1) {
                    ChatActivity.this.chatActivityDelegate.openReplyMessage(id);
                    ChatActivity.this.finishFragment();
                } else {
                    ChatActivity.this.scrollToMessageId(id, messageObject.getId(), true, messageObject.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressViaBot(ChatMessageCell cell, String username) {
                if (ChatActivity.this.bottomOverlayChat == null || ChatActivity.this.bottomOverlayChat.getVisibility() != 0) {
                    if ((ChatActivity.this.bottomOverlay == null || ChatActivity.this.bottomOverlay.getVisibility() != 0) && ChatActivity.this.chatActivityEnterView != null && username != null && username.length() > 0) {
                        ChatActivity.this.chatActivityEnterView.setFieldText("@" + username + " ");
                        ChatActivity.this.chatActivityEnterView.openKeyboard();
                    }
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didStartVideoStream(MessageObject message) {
                if (message.isVideo()) {
                    ChatActivity.this.sendSecretMessageRead(message, true);
                }
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void needReloadPolls() {
                ChatActivity.this.invalidateMessagesVisiblePart();
            }

            /* JADX WARN: Removed duplicated region for block: B:123:0x030a  */
            /* JADX WARN: Removed duplicated region for block: B:125:0x030d  */
            /* JADX WARN: Removed duplicated region for block: B:130:0x0324  */
            /* JADX WARN: Removed duplicated region for block: B:132:0x0331  */
            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            /*
                Code decompiled incorrectly, please refer to instructions dump.
                To view partially-correct add '--show-bad-code' argument
            */
            public void didPressImage(ir.eitaa.ui.Cells.ChatMessageCell r19, float r20, float r21) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException, java.io.IOException {
                /*
                    Method dump skipped, instructions count: 942
                    To view this dump add '--comments-level debug' option
                */
                throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.AnonymousClass1.didPressImage(ir.eitaa.ui.Cells.ChatMessageCell, float, float):void");
            }

            /* JADX INFO: Access modifiers changed from: private */
            /* renamed from: lambda$didPressImage$3, reason: merged with bridge method [inline-methods] */
            public /* synthetic */ void lambda$didPressImage$3$ChatActivity$ChatActivityAdapter$1(MessageObject messageObject) {
                ChatActivity.this.getSendMessagesHelper().sendMessage(messageObject.getDiceEmoji(), ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, ChatActivity.this.getThreadMessage(), null, false, null, null, null, true, 0, null);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressInstantButton(ChatMessageCell cell, int type) throws NoSuchFieldException, Resources.NotFoundException, IOException {
                TLRPC$WebPage tLRPC$WebPage;
                TLRPC$WebPage tLRPC$WebPage2;
                MessageObject messageObject = cell.getMessageObject();
                if (type == 8) {
                    PollVotesAlert.showForPoll(ChatActivity.this, messageObject);
                    return;
                }
                if (type == 0) {
                    TLRPC$MessageMedia tLRPC$MessageMedia = messageObject.messageOwner.media;
                    if (tLRPC$MessageMedia == null || (tLRPC$WebPage2 = tLRPC$MessageMedia.webpage) == null || tLRPC$WebPage2.cached_page == null) {
                        return;
                    }
                    ArticleViewer.getInstance().setParentActivity(ChatActivity.this.getParentActivity(), ChatActivity.this);
                    ArticleViewer.getInstance().open(messageObject);
                    return;
                }
                if (type == 5) {
                    ChatActivity chatActivity = ChatActivity.this;
                    TLRPC$User user = chatActivity.getMessagesController().getUser(Long.valueOf(messageObject.messageOwner.media.user_id));
                    TLRPC$MessageMedia tLRPC$MessageMedia2 = messageObject.messageOwner.media;
                    chatActivity.openVCard(user, tLRPC$MessageMedia2.vcard, tLRPC$MessageMedia2.first_name, tLRPC$MessageMedia2.last_name);
                    return;
                }
                if (messageObject.isSponsored()) {
                    Bundle bundle = new Bundle();
                    long peerId = MessageObject.getPeerId(messageObject.messageOwner.from_id);
                    if (peerId < 0) {
                        bundle.putLong("chat_id", -peerId);
                    } else {
                        bundle.putLong("user_id", peerId);
                    }
                    String str = messageObject.botStartParam;
                    if (str != null) {
                        bundle.putString("inline_query", str);
                    }
                    if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this)) {
                        ChatActivity.this.presentFragment(new ChatActivity(bundle));
                        return;
                    }
                    return;
                }
                TLRPC$MessageMedia tLRPC$MessageMedia3 = messageObject.messageOwner.media;
                if (tLRPC$MessageMedia3 == null || (tLRPC$WebPage = tLRPC$MessageMedia3.webpage) == null || ChatActivity.this.openLinkInternally(tLRPC$WebPage.url, messageObject.getId())) {
                    return;
                }
                Browser.openUrl(ChatActivity.this.getParentActivity(), messageObject.messageOwner.media.webpage.url);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressCommentButton(ChatMessageCell cell) {
                MessageObject messageObject;
                long j;
                int i;
                MessageObject.GroupedMessages currentMessagesGroup = cell.getCurrentMessagesGroup();
                if (currentMessagesGroup != null && !currentMessagesGroup.messages.isEmpty()) {
                    messageObject = currentMessagesGroup.messages.get(0);
                } else {
                    messageObject = cell.getMessageObject();
                }
                MessageObject messageObject2 = messageObject;
                TLRPC$MessageReplies tLRPC$MessageReplies = messageObject2.messageOwner.replies;
                if (tLRPC$MessageReplies != null) {
                    i = tLRPC$MessageReplies.read_max_id;
                    j = tLRPC$MessageReplies.channel_id;
                } else {
                    j = 0;
                    i = -1;
                }
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.openDiscussionMessageChat(chatActivity.currentChat.id, messageObject2, messageObject2.getId(), j, i, 0, null);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public String getAdminRank(long uid) {
                if (!ChatObject.isChannel(ChatActivity.this.currentChat)) {
                    return null;
                }
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.currentChat.megagroup) {
                    return chatActivity.getMessagesController().getAdminRank(ChatActivity.this.currentChat.id, uid);
                }
                return null;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean shouldRepeatSticker(MessageObject message) {
                return !ChatActivity.this.alredyPlayedStickers.containsKey(message);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void setShouldNotRepeatSticker(MessageObject message) {
                ChatActivity.this.alredyPlayedStickers.put(message, Boolean.TRUE);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public TextSelectionHelper.ChatListTextSelectionHelper getTextSelectionHelper() {
                return ChatActivity.this.textSelectionHelper;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean hasSelectedMessages() {
                return ChatActivity.this.selectedMessagesIds[0].size() + ChatActivity.this.selectedMessagesIds[1].size() > 0;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void onDiceFinished() {
                if (ChatActivity.this.fireworksOverlay.isStarted()) {
                    return;
                }
                ChatActivity.this.fireworksOverlay.start();
                ChatActivity.this.fireworksOverlay.performHapticFeedback(3, 2);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public void didPressedShareToMine(ChatMessageCell cell) {
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                ArrayList<MessageObject> arrayList = new ArrayList<>();
                MessageObject messageObject = cell.getMessageObject();
                MessageObject.GroupedMessages validGroupedMessage = ChatActivity.this.getValidGroupedMessage(messageObject);
                if (validGroupedMessage != null) {
                    arrayList.addAll(validGroupedMessage.messages);
                } else {
                    arrayList.add(messageObject);
                }
                SendMessagesHelper.getInstance(((BaseFragment) ChatActivity.this).currentAccount).sendMessage(arrayList, UserConfig.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getClientUserId(), false, false, false, 0);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public PinchToZoomHelper getPinchToZoomHelper() {
                return ChatActivity.this.pinchToZoomHelper;
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean keyboardIsOpened() {
                return ChatActivity.this.contentView.getKeyboardHeight() + ChatActivity.this.chatEmojiViewPadding >= AndroidUtilities.dp(20.0f);
            }

            @Override // ir.eitaa.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
            public boolean isLandscape() {
                return ChatActivity.this.contentView.getMeasuredWidth() > ChatActivity.this.contentView.getMeasuredHeight();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onCreateViewHolder$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onCreateViewHolder$0$ChatActivity$ChatActivityAdapter(String str) {
            if (str.startsWith("@")) {
                ChatActivity.this.getMessagesController().openByUserName(str.substring(1), ChatActivity.this, 0);
                return;
            }
            if (str.startsWith("#") || str.startsWith("$")) {
                DialogsActivity dialogsActivity = new DialogsActivity(null);
                dialogsActivity.setSearchString(str);
                ChatActivity.this.presentFragment(dialogsActivity);
            } else {
                if (!str.startsWith("/")) {
                    ChatActivity.this.processExternalUrl(0, str, false);
                    return;
                }
                ChatActivity.this.chatActivityEnterView.setCommand(null, str, false, false);
                if (ChatActivity.this.chatActivityEnterView.getFieldText() == null) {
                    ChatActivity.this.hideFieldPanel(false);
                }
            }
        }

        /* JADX WARN: Removed duplicated region for block: B:103:0x01d4  */
        /* JADX WARN: Removed duplicated region for block: B:105:0x01d7  */
        /* JADX WARN: Removed duplicated region for block: B:135:0x023b  */
        /* JADX WARN: Removed duplicated region for block: B:154:0x0290  */
        /* JADX WARN: Removed duplicated region for block: B:157:0x0297  */
        /* JADX WARN: Removed duplicated region for block: B:202:0x0340  */
        /* JADX WARN: Removed duplicated region for block: B:221:0x0395  */
        /* JADX WARN: Removed duplicated region for block: B:233:0x03c0  */
        /* JADX WARN: Removed duplicated region for block: B:235:0x03c3  */
        /* JADX WARN: Removed duplicated region for block: B:241:0x03e0  */
        /* JADX WARN: Removed duplicated region for block: B:244:0x03ec  */
        /* JADX WARN: Removed duplicated region for block: B:247:0x03fc  */
        /* JADX WARN: Removed duplicated region for block: B:260:0x0439  */
        /* JADX WARN: Removed duplicated region for block: B:52:0x00ad  */
        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void onBindViewHolder(androidx.recyclerview.widget.RecyclerView.ViewHolder r22, int r23) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
            /*
                Method dump skipped, instructions count: 1305
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.onBindViewHolder(androidx.recyclerview.widget.RecyclerView$ViewHolder, int):void");
        }

        /* renamed from: ir.eitaa.ui.ChatActivity$ChatActivityAdapter$4, reason: invalid class name */
        class AnonymousClass4 implements ViewTreeObserver.OnPreDrawListener {
            final /* synthetic */ ChatMessageCell val$messageCell;

            AnonymousClass4(final ChatMessageCell val$messageCell) {
                this.val$messageCell = val$messageCell;
            }

            @Override // android.view.ViewTreeObserver.OnPreDrawListener
            public boolean onPreDraw() {
                PipRoundVideoView pipRoundVideoView = PipRoundVideoView.getInstance();
                if (pipRoundVideoView != null) {
                    pipRoundVideoView.showTemporary(true);
                }
                this.val$messageCell.getViewTreeObserver().removeOnPreDrawListener(this);
                ImageReceiver photoImage = this.val$messageCell.getPhotoImage();
                float imageWidth = photoImage.getImageWidth();
                ir.eitaa.ui.Components.Rect cameraRect = ChatActivity.this.instantCameraView.getCameraRect();
                float f = imageWidth / cameraRect.width;
                int[] iArr = new int[2];
                this.val$messageCell.getTransitionParams().ignoreAlpha = true;
                this.val$messageCell.setAlpha(0.0f);
                this.val$messageCell.setTimeAlpha(0.0f);
                this.val$messageCell.getLocationOnScreen(iArr);
                iArr[0] = (int) (iArr[0] + (photoImage.getImageX() - this.val$messageCell.getAnimationOffsetX()));
                iArr[1] = (int) (iArr[1] + (photoImage.getImageY() - this.val$messageCell.getTranslationY()));
                final InstantCameraView.InstantViewCameraContainer cameraContainer = ChatActivity.this.instantCameraView.getCameraContainer();
                cameraContainer.setPivotX(0.0f);
                cameraContainer.setPivotY(0.0f);
                AnimatorSet animatorSet = new AnimatorSet();
                cameraContainer.setImageReceiver(photoImage);
                ChatActivity.this.instantCameraView.cancelBlur();
                AnimatorSet animatorSet2 = new AnimatorSet();
                animatorSet.playTogether(ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_X, f), ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_Y, f), ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.TRANSLATION_Y, iArr[1] - cameraRect.y), ObjectAnimator.ofFloat(ChatActivity.this.instantCameraView.getSwitchButtonView(), (Property<View, Float>) View.ALPHA, 0.0f), ObjectAnimator.ofInt(ChatActivity.this.instantCameraView.getPaint(), AnimationProperties.PAINT_ALPHA, 0), ObjectAnimator.ofFloat(ChatActivity.this.instantCameraView.getMuteImageView(), (Property<View, Float>) View.ALPHA, 0.0f));
                animatorSet.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
                ObjectAnimator objectAnimatorOfFloat = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.TRANSLATION_X, iArr[0] - cameraRect.x);
                objectAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.DEFAULT);
                animatorSet2.playTogether(objectAnimatorOfFloat, animatorSet);
                animatorSet2.setStartDelay(120L);
                animatorSet2.setDuration(180L);
                ChatActivity.this.instantCameraView.setIsMessageTransition(true);
                animatorSet2.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.4.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animation) {
                        AnonymousClass4.this.val$messageCell.setAlpha(1.0f);
                        AnonymousClass4.this.val$messageCell.getTransitionParams().ignoreAlpha = false;
                        AnimationProperties.FloatProperty<ChatMessageCell> floatProperty = new AnimationProperties.FloatProperty<ChatMessageCell>("alpha") { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.4.1.1
                            @Override // ir.eitaa.ui.Components.AnimationProperties.FloatProperty
                            public void setValue(ChatMessageCell object, float value) {
                                object.setTimeAlpha(value);
                            }

                            @Override // android.util.Property
                            public Float get(ChatMessageCell object) {
                                return Float.valueOf(object.getTimeAlpha());
                            }
                        };
                        AnimatorSet animatorSet3 = new AnimatorSet();
                        animatorSet3.playTogether(ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.ALPHA, 0.0f), ObjectAnimator.ofFloat(AnonymousClass4.this.val$messageCell, floatProperty, 1.0f));
                        animatorSet3.setDuration(100L);
                        animatorSet3.setInterpolator(new DecelerateInterpolator());
                        animatorSet3.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.4.1.2
                            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                            public void onAnimationEnd(Animator animation2) {
                                ChatActivity.this.instantCameraView.setIsMessageTransition(false);
                                ChatActivity.this.instantCameraView.hideCamera(true);
                                ChatActivity.this.instantCameraView.setVisibility(4);
                            }
                        });
                        animatorSet3.start();
                    }
                });
                animatorSet2.start();
                return true;
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public int getItemViewType(int position) {
            if (ChatActivity.this.clearingHistory && position == this.botInfoEmptyRow) {
                return 3;
            }
            int i = this.messagesStartRow;
            if (position < i || position >= this.messagesEndRow) {
                return position == this.botInfoRow ? 3 : 4;
            }
            return ChatActivity.this.messages.get(position - i).contentType;
        }

        /* JADX WARN: Removed duplicated region for block: B:61:0x0141  */
        /* JADX WARN: Removed duplicated region for block: B:66:0x0153  */
        /* JADX WARN: Removed duplicated region for block: B:71:0x0170  */
        /* JADX WARN: Removed duplicated region for block: B:74:0x017c  */
        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void onViewAttachedToWindow(final androidx.recyclerview.widget.RecyclerView.ViewHolder r11) {
            /*
                Method dump skipped, instructions count: 573
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.ChatActivityAdapter.onViewAttachedToWindow(androidx.recyclerview.widget.RecyclerView$ViewHolder):void");
        }

        public void updateRowAtPosition(int index) {
            int iIndexOf;
            if (ChatActivity.this.chatLayoutManager == null) {
                return;
            }
            int measuredHeight = 0;
            if (ChatActivity.this.wasManualScroll || ChatActivity.this.unreadMessageObject == null) {
                iIndexOf = -1;
            } else {
                int childCount = ChatActivity.this.chatListView.getChildCount();
                int i = 0;
                while (true) {
                    if (i >= childCount) {
                        break;
                    }
                    View childAt = ChatActivity.this.chatListView.getChildAt(i);
                    if ((childAt instanceof ChatMessageCell) && ((ChatMessageCell) childAt).getMessageObject() == ChatActivity.this.unreadMessageObject) {
                        ChatActivity chatActivity = ChatActivity.this;
                        if (chatActivity.messages.indexOf(chatActivity.unreadMessageObject) >= 0) {
                            int i2 = this.messagesStartRow;
                            ChatActivity chatActivity2 = ChatActivity.this;
                            iIndexOf = i2 + chatActivity2.messages.indexOf(chatActivity2.unreadMessageObject);
                            measuredHeight = (ChatActivity.this.chatListView.getMeasuredHeight() - childAt.getBottom()) - ChatActivity.this.chatListView.getPaddingBottom();
                        }
                    } else {
                        i++;
                    }
                }
                iIndexOf = -1;
            }
            notifyItemChanged(index);
            if (iIndexOf != -1) {
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, measuredHeight);
            }
        }

        public void invalidateRowWithMessageObject(MessageObject messageObject) {
            int childCount = ChatActivity.this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = ChatActivity.this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.getMessageObject() == messageObject) {
                        chatMessageCell.invalidate();
                        return;
                    }
                }
            }
        }

        public View updateRowWithMessageObject(MessageObject messageObject, boolean allowInPlace) throws Resources.NotFoundException, NumberFormatException {
            if (allowInPlace) {
                int childCount = ChatActivity.this.chatListView.getChildCount();
                for (int i = 0; i < childCount; i++) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(i);
                    if (childAt instanceof ChatMessageCell) {
                        ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                        if (chatMessageCell.getMessageObject() == messageObject && !chatMessageCell.isAdminLayoutChanged()) {
                            chatMessageCell.setMessageObject(messageObject, chatMessageCell.getCurrentMessagesGroup(), chatMessageCell.isPinnedBottom(), chatMessageCell.isPinnedTop());
                            return chatMessageCell;
                        }
                    }
                }
            }
            int iIndexOf = ChatActivity.this.messages.indexOf(messageObject);
            if (iIndexOf == -1) {
                return null;
            }
            updateRowAtPosition(iIndexOf + this.messagesStartRow);
            return null;
        }

        public void notifyDataSetChanged(boolean animated) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify data set changed");
            }
            if (!animated || !ChatActivity.this.fragmentOpened) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyDataSetChanged();
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyDataSetChanged() {
            notifyDataSetChanged(false);
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemChanged(int position) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item changed " + position);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemChanged(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeChanged(int positionStart, int itemCount) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item range changed " + positionStart + ":" + itemCount);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRangeChanged(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemInserted(int position) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item inserted " + position);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemInserted(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemMoved(int fromPosition, int toPosition) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item moved" + fromPosition + ":" + toPosition);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemMoved(fromPosition, toPosition);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeInserted(int positionStart, int itemCount) {
            int i;
            int i2;
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item range inserted" + positionStart + ":" + itemCount);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            if (positionStart == 1 && itemCount > 0 && (i = positionStart + itemCount) >= (i2 = this.messagesStartRow) && i < this.messagesEndRow) {
                MessageObject messageObject = ChatActivity.this.messages.get(i - i2);
                MessageObject messageObject2 = ChatActivity.this.messages.get((i - this.messagesStartRow) - 1);
                if ((ChatActivity.this.currentChat != null && messageObject.getFromChatId() == messageObject2.getFromChatId()) || (ChatActivity.this.currentUser != null && messageObject.isOutOwner() == messageObject2.isOutOwner())) {
                    notifyItemChanged(positionStart);
                }
            }
            try {
                super.notifyItemRangeInserted(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRemoved(int position) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item removed " + position);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRemoved(position);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeRemoved(int positionStart, int itemCount) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.d("notify item range removed" + positionStart + ":" + itemCount);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRangeRemoved(positionStart, itemCount);
            } catch (Exception e) {
                FileLog.e(e);
            }
        }
    }

    /* renamed from: ir.eitaa.ui.ChatActivity$110, reason: invalid class name */
    static /* synthetic */ class AnonymousClass110 {
        static final /* synthetic */ int[] $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem;

        static {
            int[] iArr = new int[AvatarPreviewer.MenuItem.values().length];
            $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem = iArr;
            try {
                iArr[AvatarPreviewer.MenuItem.OPEN_PROFILE.ordinal()] = 1;
            } catch (NoSuchFieldError unused) {
            }
            try {
                $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.OPEN_GROUP.ordinal()] = 2;
            } catch (NoSuchFieldError unused2) {
            }
            try {
                $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.OPEN_CHANNEL.ordinal()] = 3;
            } catch (NoSuchFieldError unused3) {
            }
            try {
                $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.SEND_MESSAGE.ordinal()] = 4;
            } catch (NoSuchFieldError unused4) {
            }
            try {
                $SwitchMap$ir$eitaa$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.MENTION.ordinal()] = 5;
            } catch (NoSuchFieldError unused5) {
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean openLinkInternally(String urlFinal, int fromMessageId) throws Resources.NotFoundException, NumberFormatException {
        if (this.currentChat != null && urlFinal != null) {
            if (urlFinal.startsWith("et:privatepost") || urlFinal.startsWith("et://privatepost")) {
                Uri uri = Uri.parse(urlFinal.replace("et:privatepost", "et://eitaa.org").replace("et://privatepost", "et://eitaa.org"));
                int iIntValue = Utilities.parseInt(uri.getQueryParameter("post")).intValue();
                long jLongValue = Utilities.parseLong(uri.getQueryParameter("channel")).longValue();
                int iIntValue2 = Utilities.parseInt(uri.getQueryParameter("thread")).intValue();
                long j = this.currentChat.id;
                if (jLongValue == j && iIntValue != 0) {
                    if (iIntValue2 != 0) {
                        openDiscussionMessageChat(j, null, iIntValue2, 0L, -1, 0, null);
                    } else {
                        this.showScrollToMessageError = true;
                        if (this.chatMode == 2) {
                            this.chatActivityDelegate.openReplyMessage(iIntValue);
                            finishFragment();
                        } else {
                            scrollToMessageId(iIntValue, fromMessageId, true, 0, false, 0);
                        }
                    }
                    return true;
                }
            } else {
                String str = this.currentChat.username;
                if (str != null) {
                    String lowerCase = str.toLowerCase();
                    if (publicMsgUrlPattern == null) {
                        publicMsgUrlPattern = Pattern.compile("(https://)?eitaa.com/([0-9a-zA-Z_]+)/([0-9]+)");
                        voiceChatUrlPattern = Pattern.compile("(https://)?eitaa.com/([0-9a-zA-Z_]+)\\?(voicechat+)");
                    }
                    Matcher matcher = publicMsgUrlPattern.matcher(urlFinal);
                    if (matcher.find(2) && matcher.find(3) && lowerCase.equals(matcher.group(2).toLowerCase())) {
                        Uri uri2 = Uri.parse(urlFinal);
                        int iIntValue3 = Utilities.parseInt(uri2.getQueryParameter("thread")).intValue();
                        int iIntValue4 = Utilities.parseInt(uri2.getQueryParameter("comment")).intValue();
                        if (iIntValue3 != 0 || iIntValue4 != 0) {
                            return false;
                        }
                        int i = Integer.parseInt(matcher.group(3));
                        this.showScrollToMessageError = true;
                        if (this.chatMode == 2) {
                            this.chatActivityDelegate.openReplyMessage(i);
                            finishFragment();
                        } else {
                            int timestampFromLink = LaunchActivity.getTimestampFromLink(uri2);
                            this.startFromVideoTimestamp = timestampFromLink;
                            if (timestampFromLink >= 0) {
                                this.startFromVideoMessageId = i;
                            }
                            scrollToMessageId(i, fromMessageId, true, 0, false, 0);
                        }
                        return true;
                    }
                    if (urlFinal.startsWith("et:resolve") || urlFinal.startsWith("et://resolve")) {
                        Uri uri3 = Uri.parse(urlFinal.replace("et:resolve", "et://eitaa.org").replace("et://resolve", "et://eitaa.org"));
                        String lowerCase2 = uri3.getQueryParameter("domain").toLowerCase();
                        int iIntValue5 = Utilities.parseInt(uri3.getQueryParameter("post")).intValue();
                        int iIntValue6 = Utilities.parseInt(uri3.getQueryParameter("thread")).intValue();
                        int iIntValue7 = Utilities.parseInt(uri3.getQueryParameter("comment")).intValue();
                        if (!lowerCase.equals(lowerCase2) || iIntValue5 == 0 || iIntValue6 != 0 || iIntValue7 != 0) {
                            return false;
                        }
                        if (this.chatMode == 2) {
                            this.chatActivityDelegate.openReplyMessage(iIntValue5);
                            finishFragment();
                        } else {
                            scrollToMessageId(iIntValue5, fromMessageId, true, 0, false, 0);
                        }
                        return true;
                    }
                    Matcher matcher2 = voiceChatUrlPattern.matcher(urlFinal);
                    try {
                        if (matcher2.find(2) && matcher2.find(3) && lowerCase.equals(matcher2.group(2).toLowerCase())) {
                            String queryParameter = Uri.parse(urlFinal).getQueryParameter("voicechat");
                            if (!TextUtils.isEmpty(queryParameter)) {
                                this.voiceChatHash = queryParameter;
                                checkGroupCallJoin(true);
                                return true;
                            }
                        }
                    } catch (Exception e) {
                        FileLog.e(e);
                    }
                } else {
                    if (privateMsgUrlPattern == null) {
                        privateMsgUrlPattern = Pattern.compile("(https://)?eitaa.com/c/([0-9]+)/([0-9]+)");
                    }
                    Matcher matcher3 = privateMsgUrlPattern.matcher(urlFinal);
                    if (matcher3.find(2) && matcher3.find(3)) {
                        long j2 = Long.parseLong(matcher3.group(2));
                        int i2 = Integer.parseInt(matcher3.group(3));
                        if (j2 == this.currentChat.id && i2 != 0) {
                            Uri uri4 = Uri.parse(urlFinal);
                            int iIntValue8 = Utilities.parseInt(uri4.getQueryParameter("thread")).intValue();
                            int iIntValue9 = Utilities.parseInt(uri4.getQueryParameter("comment")).intValue();
                            if (iIntValue8 != 0 || iIntValue9 != 0) {
                                return false;
                            }
                            this.showScrollToMessageError = true;
                            if (this.chatMode == 2) {
                                this.chatActivityDelegate.openReplyMessage(i2);
                                finishFragment();
                            } else {
                                scrollToMessageId(i2, fromMessageId, true, 0, false, 0);
                            }
                            return true;
                        }
                    }
                }
            }
        }
        return false;
    }

    public void setPreloadedSticker(TLRPC$Document preloadedSticker, boolean historyEmpty) {
        this.preloadedGreetingsSticker = preloadedSticker;
        this.forceHistoryEmpty = historyEmpty;
    }

    public class ChatScrollCallback extends RecyclerAnimationScrollHelper.AnimationCallback {
        private boolean lastBottom;
        private int lastItemOffset;
        private int lastPadding;
        private MessageObject scrollTo;

        public ChatScrollCallback() {
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void onStartAnimation() {
            super.onStartAnimation();
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.scrollCallbackAnimationIndex = chatActivity.getNotificationCenter().setAnimationInProgress(ChatActivity.this.scrollCallbackAnimationIndex, ChatActivity.allowedNotificationsDuringChatListAnimations);
            if (ChatActivity.this.pinchToZoomHelper.isInOverlayMode()) {
                ChatActivity.this.pinchToZoomHelper.finishZoom();
            }
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void onEndAnimation() throws Resources.NotFoundException, NumberFormatException {
            if (this.scrollTo != null) {
                ChatActivity.this.chatAdapter.updateRowsSafe();
                int iIndexOf = ChatActivity.this.chatAdapter.messagesStartRow + ChatActivity.this.messages.indexOf(this.scrollTo);
                if (iIndexOf >= 0) {
                    ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, (int) ((this.lastItemOffset + this.lastPadding) - ChatActivity.this.chatListViewPaddingTop), this.lastBottom);
                }
            } else {
                ChatActivity.this.chatAdapter.updateRowsSafe();
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(0, 0, true);
            }
            this.scrollTo = null;
            ChatActivity.this.checkTextureViewPosition = true;
            ChatActivity.this.chatListView.getOnScrollListener().onScrolled(ChatActivity.this.chatListView, 0, ChatActivity.this.chatScrollHelper.getScrollDirection() != 0 ? -1 : 1);
            ChatActivity.this.updateVisibleRows();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ChatScrollCallback$2rbtdaB8KpYb1Pgd57JgVotYADo
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onEndAnimation$0$ChatActivity$ChatScrollCallback();
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$onEndAnimation$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$onEndAnimation$0$ChatActivity$ChatScrollCallback() {
            ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollCallbackAnimationIndex);
        }

        @Override // ir.eitaa.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void recycleView(View view) {
            if (view instanceof ChatMessageCell) {
                ChatActivity.this.chatMessageCellsCache.add((ChatMessageCell) view);
            }
        }
    }

    public static boolean isClickableLink(String str) {
        return str.startsWith("https://") || str.startsWith("@") || str.startsWith("#") || str.startsWith("$") || str.startsWith("video?");
    }

    public SimpleTextView getReplyNameTextView() {
        return this.replyNameTextView;
    }

    public SimpleTextView getReplyObjectTextView() {
        return this.replyObjectTextView;
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public ArrayList<ThemeDescription> getThemeDescriptions() {
        if (this.isPauseOnThemePreview) {
            this.isPauseOnThemePreview = false;
            return null;
        }
        ThemeDescription.ThemeDescriptionDelegate themeDescriptionDelegate = new ThemeDescription.ThemeDescriptionDelegate() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$Hd6IH0l6fJwyX_KJKTta5egZI5E
            @Override // ir.eitaa.ui.ActionBar.ThemeDescription.ThemeDescriptionDelegate
            public final void didSetColor() {
                this.f$0.lambda$getThemeDescriptions$165$ChatActivity();
            }

            @Override // ir.eitaa.ui.ActionBar.ThemeDescription.ThemeDescriptionDelegate
            public /* synthetic */ void onAnimationProgress(float f) {
                ThemeDescription.ThemeDescriptionDelegate.CC.$default$onAnimationProgress(this, f);
            }
        };
        ArrayList<ThemeDescription> arrayList = new ArrayList<>();
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, "chat_wallpaper"));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, "chat_wallpaper_gradient_to"));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, "key_chat_wallpaper_gradient_to2"));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, "key_chat_wallpaper_gradient_to3"));
        arrayList.add(new ThemeDescription(this.messagesSearchListView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "windowBackgroundWhite"));
        if (this.reportType < 0) {
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "actionBarDefault"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_ITEMSCOLOR, null, null, null, null, "actionBarDefaultIcon"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, "actionBarDefaultSelector"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_TITLECOLOR, null, null, null, null, "actionBarDefaultTitle"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBTITLECOLOR, null, null, null, null, "actionBarDefaultSubtitle"));
        } else {
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "actionBarActionModeDefault"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_ITEMSCOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, "actionBarActionModeDefaultSelector"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_TITLECOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBTITLECOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
        }
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUBACKGROUND, null, null, null, themeDescriptionDelegate, "actionBarDefaultSubmenuBackground"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUITEM, null, null, null, themeDescriptionDelegate, "actionBarDefaultSubmenuItem"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_IMAGECOLOR | ThemeDescription.FLAG_AB_SUBMENUITEM, null, null, null, themeDescriptionDelegate, "actionBarDefaultSubmenuItemIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LISTGLOWCOLOR, null, null, null, null, "actionBarDefault"));
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer != null ? chatAvatarContainer.getTitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "actionBarDefaultTitle"));
        ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer2 != null ? chatAvatarContainer2.getTitleTextView() : null, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "actionBarDefaultSubtitle"));
        ChatAvatarContainer chatAvatarContainer3 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer3 != null ? chatAvatarContainer3.getSubtitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, (Class[]) null, new Paint[]{Theme.chat_statusPaint, Theme.chat_statusRecordPaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_status", (Object) null));
        ChatAvatarContainer chatAvatarContainer4 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer4 != null ? chatAvatarContainer4.getSubtitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, (Class[]) null, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "actionBarDefaultSubtitle", (Object) null));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, "actionBarDefaultSelector"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCH, null, null, null, null, "actionBarDefaultSearch"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCHPLACEHOLDER, null, null, null, null, "actionBarDefaultSearchPlaceholder"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCHPLACEHOLDER, null, null, null, null, "actionBarDefaultSearchPlaceholder"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_ITEMSCOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_BACKGROUND, null, null, null, null, "actionBarActionModeDefault"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_TOPBACKGROUND, null, null, null, null, "actionBarActionModeDefaultTop"));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_SELECTORCOLOR, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.selectedMessagesCountTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
        ChatAvatarContainer chatAvatarContainer5 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer5 != null ? chatAvatarContainer5.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_muteIconDrawable}, null, "chat_muteIcon"));
        ChatAvatarContainer chatAvatarContainer6 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer6 != null ? chatAvatarContainer6.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_lockIconDrawable}, null, "chat_lockIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.avatarDrawables, null, "avatar_text"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundRed"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundOrange"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundViolet"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundGreen"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundCyan"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundBlue"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_backgroundPink"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageRed"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageOrange"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageViolet"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageGreen"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageCyan"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessageBlue"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "avatar_nameInMessagePink"));
        Theme.MessageDrawable messageDrawable = (Theme.MessageDrawable) getThemedDrawable("drawableMsgIn");
        Theme.MessageDrawable messageDrawable2 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInMedia");
        Theme.MessageDrawable messageDrawable3 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInSelected");
        Theme.MessageDrawable messageDrawable4 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInMediaSelected");
        Theme.MessageDrawable messageDrawable5 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOut");
        Theme.MessageDrawable messageDrawable6 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutMedia");
        Theme.MessageDrawable messageDrawable7 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutSelected");
        Theme.MessageDrawable messageDrawable8 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutMediaSelected");
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, new Drawable[]{messageDrawable, messageDrawable2}, null, "chat_inBubble"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable3, messageDrawable4}, null, "chat_inBubbleSelected"));
        if (messageDrawable != null) {
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable.getShadowDrawables(), null, "chat_inBubbleShadow"));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable2.getShadowDrawables(), null, "chat_inBubbleShadow"));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable5.getShadowDrawables(), null, "chat_outBubbleShadow"));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable6.getShadowDrawables(), null, "chat_outBubbleShadow"));
        }
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, "chat_outBubble"));
        if (!this.themeDelegate.isThemeChangeAvailable()) {
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, "chat_outBubbleGradient"));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, "chat_outBubbleGradient2"));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, "chat_outBubbleGradient3"));
        }
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable7, messageDrawable8}, null, "chat_outBubbleSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable7, messageDrawable8}, null, "chat_outBubbleGradientSelectedOverlay"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActionCell.class}, getThemedPaint("paintChatActionText"), null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatActionCell.class}, getThemedPaint("paintChatActionText"), null, null, "chat_serviceLink"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_botCardDrawalbe, getThemedDrawable("drawableShareIcon"), getThemedDrawable("drawableReplyIcon"), getThemedDrawable("drawableBotInline"), getThemedDrawable("drawableBotLink"), getThemedDrawable("drawableGoIcon"), getThemedDrawable("drawableCommentSticker")}, null, "chat_serviceIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, "chat_serviceBackgroundSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, null, null, "chat_messageTextIn"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_messageTextOut"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class, BotHelpCell.class}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messageLinkIn", (Object) null));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messageLinkOut", (Object) null));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgNoSoundDrawable}, null, "chat_mediaTimeText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheck")}, null, "chat_outSentCheck"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckSelected")}, null, "chat_outSentCheckSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckRead"), getThemedDrawable("drawableMsgOutHalfCheck")}, null, "chat_outSentCheckRead"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckReadSelected"), getThemedDrawable("drawableMsgOutHalfCheckSelected")}, null, "chat_outSentCheckReadSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outSentClock"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outSentClockSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inSentClock"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inSentClockSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaCheckDrawable, Theme.chat_msgMediaHalfCheckDrawable}, null, "chat_mediaSentCheck"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgStickerHalfCheck"), getThemedDrawable("drawableMsgStickerCheck"), getThemedDrawable("drawableMsgStickerClock"), getThemedDrawable("drawableMsgStickerViews"), getThemedDrawable("drawableMsgStickerReplies"), getThemedDrawable("drawableMsgStickerPinned")}, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaSentClock"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutViews"), getThemedDrawable("drawableMsgOutReplies"), getThemedDrawable("drawableMsgOutPinned")}, null, "chat_outViews"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutViewsSelected"), getThemedDrawable("drawableMsgOutReplies"), getThemedDrawable("drawableMsgOutPinnedSelected")}, null, "chat_outViewsSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsDrawable, Theme.chat_msgInRepliesDrawable, Theme.chat_msgInPinnedDrawable}, null, "chat_inViews"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsSelectedDrawable, Theme.chat_msgInRepliesSelectedDrawable, Theme.chat_msgInPinnedSelectedDrawable}, null, "chat_inViewsSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaViewsDrawable, Theme.chat_msgMediaRepliesDrawable, Theme.chat_msgMediaPinnedDrawable}, null, "chat_mediaViews"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutMenu")}, null, "chat_outMenu"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutMenuSelected")}, null, "chat_outMenuSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuDrawable}, null, "chat_inMenu"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuSelectedDrawable}, null, "chat_inMenuSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaMenuDrawable}, null, "chat_mediaMenu"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutInstant")}, null, "chat_outInstant"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInInstantDrawable, Theme.chat_commentDrawable, Theme.chat_commentArrowDrawable}, null, "chat_inInstant"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCallAudio"), getThemedDrawable("drawableMsgOutCallVideo")}, null, "chat_outInstant"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCallAudioSelected"), getThemedDrawable("drawableMsgOutCallVideo")}, null, "chat_outInstant"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.chat_msgInCallDrawable, null, "chat_inInstant"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.chat_msgInCallSelectedDrawable, null, "chat_inInstantSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallUpGreenDrawable}, null, "chat_outUpCall"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallDownRedDrawable}, null, "chat_inUpCall"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallDownGreenDrawable}, null, "chat_inDownCall"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_msgErrorPaint, null, null, "chat_sentError"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgErrorDrawable}, null, "chat_sentErrorIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, themeDescriptionDelegate, "chat_selectedBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_durationPaint, null, null, "chat_previewDurationText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_gamePaint, null, null, "chat_previewGameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewInstantText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewInstantText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewInstantSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewInstantSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_deleteProgressPaint, null, null, "chat_secretTimeText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, getThemedPaint("paintChatBotButton"), null, null, "chat_botButtonText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_botProgressPaint, null, null, "chat_botProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, getThemedPaint("paintChatTimeBackground"), null, null, "chat_mediaTimeBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inForwardedNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outForwardedNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPsaNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPsaNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inViaBotNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outViaBotNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerViaBotNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyLine"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyLine"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyLine"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMessageText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMessageText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMediaMessageText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMediaMessageText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inReplyMediaMessageSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outReplyMediaMessageSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_stickerReplyMessageText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPreviewLine"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPreviewLine"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inSiteNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outSiteNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactPhoneText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inContactPhoneSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactPhoneText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outContactPhoneSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSelectedProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSelectedProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaTimeText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inTimeText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outTimeText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inTimeSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_adminText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_adminSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAdminText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAdminSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outTimeSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioPerfomerText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioPerfomerSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioPerfomerText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioPerfomerSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioTitleText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioTitleText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioDurationText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioDurationText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioDurationSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioDurationSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbarSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbarSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioSeekbarFill"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inAudioCacheSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioSeekbarFill"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outAudioCacheSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbar"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbarSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbarSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVoiceSeekbarFill"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVoiceSeekbarFill"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileProgress"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileProgressSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileProgressSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileNameText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileInfoText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileInfoText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileInfoSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileInfoSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inFileBackgroundSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outFileBackgroundSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVenueInfoText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVenueInfoText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inVenueInfoSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outVenueInfoSelectedText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_mediaInfoText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_urlPaint, null, null, "chat_linkSelectBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_textSearchSelectionPaint, null, null, "chat_textSelectBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outLoader"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outMediaIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outLoaderSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outMediaIconSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inLoader"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inMediaIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inLoaderSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inMediaIconSelected"));
        Drawable[][] drawableArr = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr[0][0], drawableArr[1][0], drawableArr[2][0], drawableArr[3][0]}, null, "chat_mediaLoaderPhoto"));
        Drawable[][] drawableArr2 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr2[0][0], drawableArr2[1][0], drawableArr2[2][0], drawableArr2[3][0]}, null, "chat_mediaLoaderPhotoIcon"));
        Drawable[][] drawableArr3 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr3[0][1], drawableArr3[1][1], drawableArr3[2][1], drawableArr3[3][1]}, null, "chat_mediaLoaderPhotoSelected"));
        Drawable[][] drawableArr4 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr4[0][1], drawableArr4[1][1], drawableArr4[2][1], drawableArr4[3][1]}, null, "chat_mediaLoaderPhotoIconSelected"));
        Drawable[][] drawableArr5 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr5[7][0], drawableArr5[8][0]}, null, "chat_outLoaderPhoto"));
        Drawable[][] drawableArr6 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr6[7][0], drawableArr6[8][0]}, null, "chat_outLoaderPhotoIcon"));
        Drawable[][] drawableArr7 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr7[7][1], drawableArr7[8][1]}, null, "chat_outLoaderPhotoSelected"));
        Drawable[][] drawableArr8 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr8[7][1], drawableArr8[8][1]}, null, "chat_outLoaderPhotoIconSelected"));
        Drawable[][] drawableArr9 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr9[10][0], drawableArr9[11][0]}, null, "chat_inLoaderPhoto"));
        Drawable[][] drawableArr10 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr10[10][0], drawableArr10[11][0]}, null, "chat_inLoaderPhotoIcon"));
        Drawable[][] drawableArr11 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr11[10][1], drawableArr11[11][1]}, null, "chat_inLoaderPhotoSelected"));
        Drawable[][] drawableArr12 = Theme.chat_photoStatesDrawables;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{drawableArr12[10][1], drawableArr12[11][1]}, null, "chat_inLoaderPhotoIconSelected"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[9][0]}, null, "chat_outFileIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[9][1]}, null, "chat_outFileSelectedIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[12][0]}, null, "chat_inFileIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_photoStatesDrawables[12][1]}, null, "chat_inFileSelectedIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, "chat_inContactBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, "chat_inContactIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, "chat_outContactBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, "chat_outContactIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inLocationBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[0]}, null, "chat_inLocationIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outLocationBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[1]}, null, "chat_outLocationIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPollCorrectAnswer"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPollCorrectAnswer"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_inPollWrongAnswer"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, "chat_outPollWrongAnswer"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_pollHintDrawable[0]}, null, "chat_inPreviewInstantText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_pollHintDrawable[1]}, null, "chat_outPreviewInstantText"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_psaHelpDrawable[0]}, null, "chat_inViews"));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_psaHelpDrawable[1]}, null, "chat_outViews"));
        if (!this.themeDelegate.isThemeChangeAvailable()) {
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, Theme.avatarDrawables, null, "avatar_text"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_countPaint, null, null, "chats_unreadCounter"));
            TextPaint[] textPaintArr = Theme.dialogs_namePaint;
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, new Paint[]{textPaintArr[0], textPaintArr[1], Theme.dialogs_searchNamePaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chats_name"));
            TextPaint[] textPaintArr2 = Theme.dialogs_nameEncryptedPaint;
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, new Paint[]{textPaintArr2[0], textPaintArr2[1], Theme.dialogs_searchNameEncryptedPaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chats_secretName"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_lockDrawable}, null, "chats_secretIcon"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_groupDrawable, Theme.dialogs_broadcastDrawable, Theme.dialogs_botDrawable}, null, "chats_nameIcon"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_scamDrawable, Theme.dialogs_fakeDrawable, Theme.dialogs_shopDrawable}, null, "chats_draft"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_messagePaint[1], null, null, "chats_message_threeLines"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_messageNamePaint, null, null, "chats_nameMessage_threeLines"));
            arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chats_nameMessage"));
            arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chats_attachMessage"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, Theme.dialogs_messagePrintingPaint, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chats_actionMessage"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_timePaint, null, null, "chats_date"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_checkDrawable}, null, "chats_sentCheck"));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_checkReadDrawable, Theme.dialogs_halfCheckDrawable}, null, "chats_sentReadCheck"));
        }
        arrayList.add(new ThemeDescription(this.mentionContainer, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.mentionContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.mentionContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowRoundDrawable}, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.searchContainer, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.searchContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.bottomOverlay, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.bottomOverlay, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.bottomOverlayChat, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.bottomOverlayChat, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.bottomMessagesActionContainer, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.bottomMessagesActionContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, "chat_messagePanelShadow"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelText"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_CURSORCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelCursor"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_HINTTEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelHint"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"sendButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelSend"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"sendButton"}, null, null, 24, null, "chat_messagePanelSend"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"emojiButton1"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"emojiButton1"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"emojiButton2"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"emojiButton2"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"botButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"botButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR | ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_recordedVoiceDot"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"attachButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"attachButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"audioSendButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"videoSendButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVideoFrame"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"videoTimelineView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelSend"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"micDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVoicePressed"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"cameraDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVoicePressed"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"sendDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVoicePressed"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, "key_chat_messagePanelVoiceLock"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, null, null, null, "key_chat_messagePanelVoiceLockBackground"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockShadowDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "key_chat_messagePanelVoiceLockShadow"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"recordDeleteImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioBackground"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_recordedVoiceBackground"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, "chat_recordTime"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, "chat_recordVoiceCancel"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioTimeTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVoiceDuration"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, "chat_recordVoiceCancel"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonProgress"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "contextProgressInner1"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"doneButtonProgress"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "contextProgressOuter1"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"cancelBotButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelCancelInlineBot"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"cancelBotButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "listSelectorSDK21"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"redDotPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_recordedVoiceDot"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"paint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelVoiceBackground"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"seekBarWaveform"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_recordedVoiceProgress"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"seekBarWaveform"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_recordedVoiceProgressInner"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"dotPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_emojiPanelNewTrending"));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_recordedVoicePlayPause"));
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView != null ? chatActivityEnterView.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelBackground"));
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView2 != null ? chatActivityEnterView2.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelShadowLine"));
        ChatActivityEnterView chatActivityEnterView3 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView3 != null ? chatActivityEnterView3.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelEmptyText"));
        ChatActivityEnterView chatActivityEnterView4 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView4 != null ? chatActivityEnterView4.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelIcon"));
        ChatActivityEnterView chatActivityEnterView5 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView5 != null ? chatActivityEnterView5.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelIconSelected"));
        ChatActivityEnterView chatActivityEnterView6 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView6 != null ? chatActivityEnterView6.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelStickerPackSelector"));
        ChatActivityEnterView chatActivityEnterView7 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView7 != null ? chatActivityEnterView7.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelBackspace"));
        ChatActivityEnterView chatActivityEnterView8 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView8 != null ? chatActivityEnterView8.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelTrendingTitle"));
        ChatActivityEnterView chatActivityEnterView9 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView9 != null ? chatActivityEnterView9.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelTrendingDescription"));
        ChatActivityEnterView chatActivityEnterView10 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView10 != null ? chatActivityEnterView10.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelBadgeText"));
        ChatActivityEnterView chatActivityEnterView11 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView11 != null ? chatActivityEnterView11.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelBadgeBackground"));
        ChatActivityEnterView chatActivityEnterView12 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView12 != null ? chatActivityEnterView12.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiBottomPanelIcon"));
        ChatActivityEnterView chatActivityEnterView13 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView13 != null ? chatActivityEnterView13.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiSearchIcon"));
        ChatActivityEnterView chatActivityEnterView14 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView14 != null ? chatActivityEnterView14.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelStickerSetNameHighlight"));
        ChatActivityEnterView chatActivityEnterView15 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView15 != null ? chatActivityEnterView15.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, "chat_emojiPanelStickerPackSelectorLine"));
        ChatActivityEnterView chatActivityEnterView16 = this.chatActivityEnterView;
        if (chatActivityEnterView16 != null) {
            TrendingStickersAlert trendingStickersAlert = chatActivityEnterView16.getTrendingStickersAlert();
            if (trendingStickersAlert != null) {
                arrayList.addAll(trendingStickersAlert.getThemeDescriptions());
            }
            arrayList.add(new ThemeDescription((View) null, 0, (Class[]) null, (String[]) null, (Paint[]) null, new Drawable[]{this.chatActivityEnterView.getStickersArrowDrawable()}, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_messagePanelIcons"));
        }
        int i = 0;
        while (i < 2) {
            UndoView undoView = i == 0 ? this.undoView : this.topUndoView;
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "undo_background"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"undoImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_cancelColor"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"undoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_cancelColor"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"infoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_infoColor"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"subinfoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_infoColor"));
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{UndoView.class}, new String[]{"subinfoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_cancelColor"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"textPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_infoColor"));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"progressPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_infoColor"));
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{UndoView.class}, new String[]{"leftImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "undo_infoColor"));
            i++;
        }
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_botKeyboardButtonBackgroundPressed"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerBackground"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"playButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerPlayPause"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerTitle"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerPerformer"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_FASTSCROLL, new Class[]{FragmentContextView.class}, new String[]{"subtitleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerClose"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"closeButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "inappPlayerClose"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "returnToCallBackground"));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "returnToCallText"));
        arrayList.add(new ThemeDescription(this.pinnedLineView, 0, null, null, null, themeDescriptionDelegate, "chat_topPanelLine"));
        arrayList.add(new ThemeDescription(this.pinnedLineView, 0, null, null, null, themeDescriptionDelegate, "windowBackgroundWhite"));
        arrayList.add(new ThemeDescription(this.pinnedCounterTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelTitle"));
        for (int i2 = 0; i2 < 2; i2++) {
            arrayList.add(new ThemeDescription(this.pinnedNameTextView[i2], ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelTitle"));
            arrayList.add(new ThemeDescription(this.pinnedMessageTextView[i2], ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelMessage"));
        }
        arrayList.add(new ThemeDescription(this.alertNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelTitle"));
        arrayList.add(new ThemeDescription(this.alertTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_topPanelMessage"));
        arrayList.add(new ThemeDescription(this.closePinned, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_topPanelClose"));
        arrayList.add(new ThemeDescription(this.pinnedListButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_topPanelClose"));
        arrayList.add(new ThemeDescription(this.closeReportSpam, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_topPanelClose"));
        arrayList.add(new ThemeDescription(this.topChatPanelView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground"));
        arrayList.add(new ThemeDescription(this.alertView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground"));
        arrayList.add(new ThemeDescription(this.pinnedMessageView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_topPanelBackground"));
        arrayList.add(new ThemeDescription(this.addToContactsButton, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_addContact"));
        arrayList.add(new ThemeDescription(this.reportSpamButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, null, null, null, null, "chat_reportSpam"));
        arrayList.add(new ThemeDescription(this.reportSpamButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, null, null, null, null, "chat_addContact"));
        arrayList.add(new ThemeDescription(this.replyLineView, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, "chat_replyPanelLine"));
        arrayList.add(new ThemeDescription(this.replyNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_replyPanelName"));
        arrayList.add(new ThemeDescription(this.replyObjectTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "windowBackgroundWhiteGrayText"));
        arrayList.add(new ThemeDescription(this.replyObjectHintTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "windowBackgroundWhiteGrayText"));
        arrayList.add(new ThemeDescription(this.replyIconImageView, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_replyPanelIcons"));
        arrayList.add(new ThemeDescription(this.replyCloseImageView, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_replyPanelClose"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_replyPanelName"));
        arrayList.add(new ThemeDescription(this.searchUpButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons"));
        arrayList.add(new ThemeDescription(this.searchUpButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.searchDownButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons"));
        arrayList.add(new ThemeDescription(this.searchDownButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.searchCalendarButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons"));
        arrayList.add(new ThemeDescription(this.searchCalendarButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.searchUserButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_searchPanelIcons"));
        arrayList.add(new ThemeDescription(this.searchUserButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.searchCountText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_searchPanelText"));
        arrayList.add(new ThemeDescription(this.searchAsListTogglerView, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.replyButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
        arrayList.add(new ThemeDescription(this.replyButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.forwardButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "actionBarActionModeDefaultIcon"));
        arrayList.add(new ThemeDescription(this.forwardButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "actionBarActionModeDefaultSelector"));
        arrayList.add(new ThemeDescription(this.bottomOverlayText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_secretChatStatusText"));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, "chat_fieldOverlayText"));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, "chat_goDownButtonCounterBackground"));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, "chat_messagePanelBackground"));
        arrayList.add(new ThemeDescription(this.bottomOverlayProgress, 0, null, null, null, null, "chat_fieldOverlayText"));
        arrayList.add(new ThemeDescription(this.bottomOverlayImage, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_fieldOverlayText"));
        arrayList.add(new ThemeDescription(this.bigEmptyView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.emptyView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.progressBar, ThemeDescription.FLAG_PROGRESSBAR, null, null, null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.stickersPanelArrow, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_stickersHintPanel"));
        arrayList.add(new ThemeDescription(this.stickersListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{StickerCell.class}, null, null, null, "chat_stickersHintPanel"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE, new Class[]{ChatUnreadCell.class}, new String[]{"backgroundLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_unreadMessagesStartBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"imageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_unreadMessagesStartArrowIcon"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_unreadMessagesStartText"));
        arrayList.add(new ThemeDescription(this.progressView2, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.emptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.bigEmptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_SERVICEBACKGROUND, new Class[]{ChatLoadingCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_PROGRESSBAR, new Class[]{ChatLoadingCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotSwitchCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_botSwitchToInlineText"));
        arrayList.add(new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"nameTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "windowBackgroundWhiteBlackText"));
        arrayList.add(new ThemeDescription(this.mentionListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"usernameTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "windowBackgroundWhiteGrayText3"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, new Drawable[]{Theme.chat_inlineResultFile, Theme.chat_inlineResultAudio, Theme.chat_inlineResultLocation}, null, "chat_inlineResultIcon"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteGrayText2"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteLinkText"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "windowBackgroundWhiteBlackText"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "chat_inAudioProgress"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "chat_inAudioSelectedProgress"));
        arrayList.add(new ThemeDescription(this.mentionListView, 0, new Class[]{ContextLinkCell.class}, null, null, null, "divider"));
        arrayList.add(new ThemeDescription(this.gifHintTextView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_gifSaveHintBackground"));
        arrayList.add(new ThemeDescription(this.gifHintTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_gifSaveHintText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachMediaBanBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachMediaBanText"));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_gifSaveHintText"));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{HintView.class}, new String[]{"imageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_gifSaveHintText"));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_gifSaveHintBackground"));
        arrayList.add(new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_gifSaveHintText"));
        arrayList.add(new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "chat_gifSaveHintBackground"));
        arrayList.add(new ThemeDescription(this.pagedownButtonCounter, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButtonCounterBackground"));
        arrayList.add(new ThemeDescription(this.pagedownButtonCounter, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_goDownButtonCounter"));
        arrayList.add(new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButton"));
        arrayList.add(new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "chat_goDownButtonShadow"));
        arrayList.add(new ThemeDescription(this.pagedownButtonImage, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_goDownButtonIcon"));
        arrayList.add(new ThemeDescription(this.mentiondownButtonCounter, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButtonCounterBackground"));
        arrayList.add(new ThemeDescription(this.mentiondownButtonCounter, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, "chat_goDownButtonCounter"));
        arrayList.add(new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, "chat_goDownButton"));
        arrayList.add(new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, "chat_goDownButtonShadow"));
        arrayList.add(new ThemeDescription(this.mentiondownButtonImage, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, "chat_goDownButtonIcon"));
        ChatAvatarContainer chatAvatarContainer7 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer7 != null ? chatAvatarContainer7.getTimeItem() : null, 0, null, null, null, null, "chat_secretTimerBackground"));
        ChatAvatarContainer chatAvatarContainer8 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer8 != null ? chatAvatarContainer8.getTimeItem() : null, 0, null, null, null, null, "chat_secretTimerText"));
        arrayList.add(new ThemeDescription(this.floatingDateView, 0, null, null, null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.floatingDateView, 0, null, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(this.infoTopView, 0, null, null, null, null, "chat_serviceText"));
        arrayList.add(new ThemeDescription(this.infoTopView, 0, null, null, null, null, "chat_serviceBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachGalleryIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachGalleryBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachGalleryText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachAudioIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachAudioBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachAudioText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachFileIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachFileBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachFileText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachContactIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachContactBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachContactText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachLocationIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachLocationBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachLocationText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachPollIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachPollBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachPollText"));
        arrayList.add(new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachEmptyDrawable}, null, "chat_attachEmptyImage"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "chat_attachPhotoBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogBackground"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogBackgroundGray"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogTextGray2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogScrollGlow"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogGrayLine"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogCameraIcon"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, "dialogButtonSelector"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "windowBackgroundWhiteLinkSelection"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "windowBackgroundWhiteInputField"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_outTextSelectionHighlight"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_inTextSelectionHighlight"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "chat_TextSelectionCursor"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayGreen1"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayGreen2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayBlue1"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayBlue2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_topPanelGreen1"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_topPanelGreen2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_topPanelBlue1"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_topPanelBlue2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_topPanelGray"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayAlertGradientMuted"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayAlertGradientMuted2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayAlertGradientUnmuted"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayAlertGradientUnmuted2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_mutedByAdminGradient"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_mutedByAdminGradient2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_mutedByAdminGradient3"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "voipgroup_overlayAlertMutedByAdmin"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "kvoipgroup_overlayAlertMutedByAdmin2"));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, "windowBackgroundGray"));
        if (this.chatActivityEnterView != null) {
            arrayList.add(new ThemeDescription(this.chatActivityEnterView.botCommandsMenuContainer.listView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotCommandsMenuView.BotCommandView.class}, new String[]{"description"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "windowBackgroundWhiteBlackText"));
            arrayList.add(new ThemeDescription(this.chatActivityEnterView.botCommandsMenuContainer.listView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotCommandsMenuView.BotCommandView.class}, new String[]{"command"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, "windowBackgroundWhiteGrayText"));
        }
        Iterator<ThemeDescription> it = arrayList.iterator();
        while (it.hasNext()) {
            it.next().resourcesProvider = this.themeDelegate;
        }
        return arrayList;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$getThemeDescriptions$165, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$getThemeDescriptions$165$ChatActivity() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.updateColors();
        }
        Theme.refreshAttachButtonsColors();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.checkColors();
        }
        RecyclerListView recyclerListView = this.chatListView;
        int i = 0;
        if (recyclerListView != null) {
            int childCount = recyclerListView.getChildCount();
            for (int i2 = 0; i2 < childCount; i2++) {
                View childAt = this.chatListView.getChildAt(i2);
                if (childAt instanceof ChatMessageCell) {
                    ((ChatMessageCell) childAt).createSelectorDrawable(0);
                } else if (childAt instanceof ChatActionCell) {
                    ((ChatActionCell) childAt).setInvalidateColors(true);
                }
            }
        }
        RecyclerListView recyclerListView2 = this.messagesSearchListView;
        if (recyclerListView2 != null) {
            int childCount2 = recyclerListView2.getChildCount();
            for (int i3 = 0; i3 < childCount2; i3++) {
                View childAt2 = this.messagesSearchListView.getChildAt(i3);
                if (childAt2 instanceof DialogCell) {
                    ((DialogCell) childAt2).update(0);
                }
            }
        }
        if (this.scrimPopupWindowItems != null) {
            while (true) {
                ActionBarMenuSubItem[] actionBarMenuSubItemArr = this.scrimPopupWindowItems;
                if (i >= actionBarMenuSubItemArr.length) {
                    break;
                }
                actionBarMenuSubItemArr[i].setColors(getThemedColor("actionBarDefaultSubmenuItem"), getThemedColor("actionBarDefaultSubmenuItemIcon"));
                this.scrimPopupWindowItems[i].setSelectorColor(getThemedColor("dialogButtonSelector"));
                i++;
            }
        }
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            View contentView = actionBarPopupWindow.getContentView();
            contentView.setBackgroundColor(getThemedColor("actionBarDefaultSubmenuBackground"));
            contentView.invalidate();
        }
        InstantCameraView instantCameraView = this.instantCameraView;
        if (instantCameraView != null) {
            instantCameraView.invalidateBlur();
        }
        PinnedLineView pinnedLineView = this.pinnedLineView;
        if (pinnedLineView != null) {
            pinnedLineView.updateColors();
        }
        ChatActivityEnterTopView chatActivityEnterTopView = this.chatActivityEnterTopView;
        if (chatActivityEnterTopView != null && chatActivityEnterTopView.getEditView() != null) {
            this.chatActivityEnterTopView.getEditView().updateColors();
        }
        ActionBarMenuItem actionBarMenuItem = this.headerItem;
        if (actionBarMenuItem != null) {
            actionBarMenuItem.updateColor();
        }
        setNavigationBarColor(getThemedColor("windowBackgroundGray"));
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            fragmentContextView.updateColors();
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.updateColors();
        }
    }

    public ChatAvatarContainer getAvatarContainer() {
        return this.avatarContainer;
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    protected AnimatorSet onCustomTransitionAnimation(boolean isOpen, final Runnable callback) {
        if (!isOpen || !this.fromPullingDownTransition || getParentLayout().fragmentsStack.size() <= 1) {
            return null;
        }
        BaseFragment baseFragment = getParentLayout().fragmentsStack.get(getParentLayout().fragmentsStack.size() - 2);
        if (!(baseFragment instanceof ChatActivity)) {
            return null;
        }
        final ChatActivity chatActivity = (ChatActivity) baseFragment;
        chatActivity.setTransitionToChatActivity(this);
        this.fragmentView.setAlpha(0.0f);
        this.contentView.setSkipBackgroundDrawing(true);
        this.avatarContainer.setTranslationY(AndroidUtilities.dp(8.0f));
        this.avatarContainer.getAvatarImageView().setAlpha(0.0f);
        this.avatarContainer.getAvatarImageView().setTranslationY(-AndroidUtilities.dp(8.0f));
        this.toPullingDownTransition = true;
        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
        final boolean z = chatActivity.fragmentContextView.getMeasuredHeight() != this.fragmentContextView.getMeasuredHeight();
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$aScxMc0K5aD-Uhk1PrvnL30w7iM
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                this.f$0.lambda$onCustomTransitionAnimation$166$ChatActivity(chatActivity, z, valueAnimator);
            }
        });
        updateChatListViewTopPadding();
        AnimatorSet animatorSet = new AnimatorSet();
        this.fragmentTransition = animatorSet;
        animatorSet.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.109
            int index;

            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationStart(Animator animation) {
                super.onAnimationStart(animation);
                this.index = NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).setAnimationInProgress(this.index, null);
            }

            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animation) {
                ChatActivity.this.fragmentTransition = null;
                NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).onAnimationFinish(this.index);
                super.onAnimationEnd(animation);
                ChatActivity.this.contentView.invalidate();
                ChatActivity.this.contentView.setSkipBackgroundDrawing(false);
                ChatActivity.this.toPullingDownTransition = false;
                chatActivity.setTransitionToChatProgress(0.0f);
                chatActivity.setTransitionToChatActivity(null);
                ((BaseFragment) ChatActivity.this).fragmentView.setAlpha(1.0f);
                callback.run();
                ChatActivity.this.avatarContainer.setTranslationY(0.0f);
                chatActivity.avatarContainer.setTranslationY(0.0f);
                chatActivity.avatarContainer.getAvatarImageView().setTranslationY(0.0f);
                ChatActivity.this.avatarContainer.getAvatarImageView().setScaleX(1.0f);
                ChatActivity.this.avatarContainer.getAvatarImageView().setScaleY(1.0f);
                ChatActivity.this.avatarContainer.getAvatarImageView().setAlpha(1.0f);
                chatActivity.avatarContainer.getAvatarImageView().setScaleX(1.0f);
                chatActivity.avatarContainer.getAvatarImageView().setScaleY(1.0f);
                chatActivity.avatarContainer.getAvatarImageView().setAlpha(1.0f);
                chatActivity.pinnedMessageView.setAlpha(1.0f);
                chatActivity.topChatPanelView.setAlpha(1.0f);
            }
        });
        this.fragmentTransition.setDuration(300L);
        this.fragmentTransition.setInterpolator(CubicBezierInterpolator.DEFAULT);
        this.fragmentTransition.playTogether(valueAnimatorOfFloat);
        AndroidUtilities.runOnUIThread(this.fragmentTransitionRunnable, 200L);
        return this.fragmentTransition;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$onCustomTransitionAnimation$166, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$onCustomTransitionAnimation$166$ChatActivity(ChatActivity chatActivity, boolean z, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        chatActivity.setTransitionToChatProgress(fFloatValue);
        float f = 1.0f - fFloatValue;
        float fDp = AndroidUtilities.dp(8.0f) * f;
        this.avatarContainer.setTranslationY(fDp);
        this.avatarContainer.getAvatarImageView().setTranslationY(-fDp);
        float f2 = (-AndroidUtilities.dp(8.0f)) * fFloatValue;
        chatActivity.avatarContainer.setTranslationY(f2);
        chatActivity.avatarContainer.getAvatarImageView().setTranslationY(-f2);
        float f3 = (fFloatValue * 0.2f) + 0.8f;
        this.avatarContainer.getAvatarImageView().setScaleX(f3);
        this.avatarContainer.getAvatarImageView().setScaleY(f3);
        this.avatarContainer.getAvatarImageView().setAlpha(fFloatValue);
        float f4 = (0.2f * f) + 0.8f;
        chatActivity.avatarContainer.getAvatarImageView().setScaleX(f4);
        chatActivity.avatarContainer.getAvatarImageView().setScaleY(f4);
        chatActivity.avatarContainer.getAvatarImageView().setAlpha(f);
        if (z) {
            chatActivity.fragmentContextView.setAlpha(f);
        }
        chatActivity.pinnedMessageView.setAlpha(f);
        chatActivity.topChatPanelView.setAlpha(f);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setTransitionToChatActivity(ChatActivity chatActivity) {
        this.pullingDownAnimateToActivity = chatActivity;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setTransitionToChatProgress(float p) {
        this.pullingDownAnimateProgress = p;
        this.fragmentView.invalidate();
        this.chatListView.invalidate();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showChatThemeBottomSheet() {
        this.chatThemeBottomSheet = new ChatThemeBottomSheet(this, this.themeDelegate);
        this.chatListView.setOnInterceptTouchListener(new RecyclerListView.OnInterceptTouchListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$LJIA2ToSsGXVwO9CFHrf2D6VMbI
            @Override // ir.eitaa.ui.Components.RecyclerListView.OnInterceptTouchListener
            public final boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                return ChatActivity.lambda$showChatThemeBottomSheet$167(motionEvent);
            }
        });
        setChildrenEnabled(this.contentView, false);
        showDialog(this.chatThemeBottomSheet, new DialogInterface.OnDismissListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$6YkzeC8MoomKQZFc6YjQDBFe_-k
            @Override // android.content.DialogInterface.OnDismissListener
            public final void onDismiss(DialogInterface dialogInterface) {
                this.f$0.lambda$showChatThemeBottomSheet$168$ChatActivity(dialogInterface);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$showChatThemeBottomSheet$168, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$showChatThemeBottomSheet$168$ChatActivity(DialogInterface dialogInterface) {
        this.chatThemeBottomSheet = null;
        this.chatListView.setOnInterceptTouchListener(null);
        setChildrenEnabled(this.contentView, true);
        ChatThemeController.clearWallpaperThumbImages();
    }

    private void setChildrenEnabled(View view, boolean isEnabled) {
        if (view instanceof ViewGroup) {
            ViewGroup viewGroup = (ViewGroup) view;
            for (int i = 0; i < viewGroup.getChildCount(); i++) {
                setChildrenEnabled(viewGroup.getChildAt(i), isEnabled);
            }
        }
        if (view == this.chatListView || view == this.contentView) {
            return;
        }
        view.setEnabled(isEnabled);
    }

    private void checkThemeEmoticon() {
        TLRPC$ChatFull tLRPC$ChatFull;
        if (this.fragmentOpened) {
            TLRPC$UserFull tLRPC$UserFull = this.userInfo;
            String str = tLRPC$UserFull != null ? tLRPC$UserFull.theme_emoticon : null;
            if (str == null && (tLRPC$ChatFull = this.chatInfo) != null) {
                str = tLRPC$ChatFull.theme_emoticon;
            }
            setChatThemeEmoticon(str);
        }
    }

    private void setChatThemeEmoticon(final String emoticon) {
        ChatThemeController.getInstance(this.currentAccount).setDialogTheme(this.dialog_id, emoticon, false);
        if (!TextUtils.isEmpty(emoticon)) {
            ChatThemeController.requestChatTheme(emoticon, new ResultCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$xXhQvG3g29hqTdJT41uzSoysOWs
                @Override // ir.eitaa.tgnet.ResultCallback
                public final void onComplete(Object obj) {
                    this.f$0.lambda$setChatThemeEmoticon$169$ChatActivity((ChatTheme) obj);
                }

                @Override // ir.eitaa.tgnet.ResultCallback
                public /* synthetic */ void onError(TLRPC$TL_error tLRPC$TL_error) {
                    ResultCallback.CC.$default$onError(this, tLRPC$TL_error);
                }
            });
        } else {
            this.themeDelegate.setCurrentTheme(null, this.openAnimationStartTime != 0, null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: lambda$setChatThemeEmoticon$169, reason: merged with bridge method [inline-methods] */
    public /* synthetic */ void lambda$setChatThemeEmoticon$169$ChatActivity(ChatTheme chatTheme) {
        this.themeDelegate.setCurrentTheme(chatTheme, this.openAnimationStartTime != 0, null);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public int getNavigationBarColor() {
        return getThemedColor("windowBackgroundGray");
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public int getThemedColor(String key) {
        Integer color = this.themeDelegate.getColor(key);
        return color != null ? color.intValue() : super.getThemedColor(key);
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public Drawable getThemedDrawable(String drawableKey) {
        Drawable drawable = this.themeDelegate.getDrawable(drawableKey);
        return drawable != null ? drawable : super.getThemedDrawable(drawableKey);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Paint getThemedPaint(String paintKey) {
        Paint paint = this.themeDelegate.getPaint(paintKey);
        return paint != null ? paint : Theme.getThemePaint(paintKey);
    }

    public float getChatListViewPadding() {
        return this.chatListViewPaddingTop;
    }

    public FragmentContextView getFragmentContextView() {
        return this.fragmentContextView;
    }

    @Override // ir.eitaa.ui.ActionBar.BaseFragment
    public Theme.ResourcesProvider getResourceProvider() {
        return this.themeDelegate;
    }

    public class ThemeDelegate implements Theme.ResourcesProvider, ChatActionCell.ThemeDelegate, ForwardingPreviewView.ResourcesDelegate {
        private HashMap<String, Integer> animatingColors;
        Theme.MessageDrawable animatingMessageDrawable;
        Theme.MessageDrawable animatingMessageMediaDrawable;
        private Drawable backgroundDrawable;
        private List<ChatTheme> cachedThemes;
        private ChatTheme chatTheme;
        private int currentColor;
        int currentServiceColor;
        boolean isBackgroundMotion;
        private AnimatorSet patternAlphaAnimator;
        private ValueAnimator patternIntensityAnimator;
        private Bitmap serviceBitmap;
        private Bitmap serviceBitmapSource;
        private Canvas serviceCanvas;
        private BitmapShader serviceShader;
        Bitmap startServiceBitmap;
        int startServiceButtonColor;
        int startServiceColor;
        int startServiceIconColor;
        int startServiceLinkColor;
        int startServiceTextColor;
        private final HashMap<String, Drawable> currentDrawables = new HashMap<>();
        private final HashMap<String, Paint> currentPaints = new HashMap<>();
        private final Matrix actionMatrix = new Matrix();
        private HashMap<String, Integer> currentColors = new HashMap<>();
        private Paint paint = new Paint();
        private boolean isDark = Theme.getActiveTheme().isDark();

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public /* synthetic */ int getColorOrDefault(String str) {
            return Theme.ResourcesProvider.CC.$default$getColorOrDefault(this, str);
        }

        /* JADX WARN: Removed duplicated region for block: B:7:0x0053  */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        ThemeDelegate() {
            /*
                r5 = this;
                ir.eitaa.ui.ChatActivity.this = r6
                r5.<init>()
                java.util.HashMap r0 = new java.util.HashMap
                r0.<init>()
                r5.currentDrawables = r0
                java.util.HashMap r0 = new java.util.HashMap
                r0.<init>()
                r5.currentPaints = r0
                android.graphics.Matrix r0 = new android.graphics.Matrix
                r0.<init>()
                r5.actionMatrix = r0
                java.util.HashMap r0 = new java.util.HashMap
                r0.<init>()
                r5.currentColors = r0
                android.graphics.Paint r0 = new android.graphics.Paint
                r0.<init>()
                r5.paint = r0
                ir.eitaa.ui.ActionBar.Theme$ThemeInfo r0 = ir.eitaa.ui.ActionBar.Theme.getActiveTheme()
                boolean r0 = r0.isDark()
                r5.isDark = r0
                boolean r0 = r5.isThemeChangeAvailable()
                r1 = 1
                r2 = 0
                if (r0 == 0) goto L53
                int r0 = ir.eitaa.ui.ChatActivity.access$47200(r6)
                ir.eitaa.messenger.ChatThemeController r0 = ir.eitaa.messenger.ChatThemeController.getInstance(r0)
                long r3 = ir.eitaa.ui.ChatActivity.access$500(r6)
                ir.eitaa.ui.ActionBar.ChatTheme r6 = r0.getDialogTheme(r3)
                r5.chatTheme = r6
                if (r6 == 0) goto L53
                r5.setupChatTheme(r6, r2, r1)
                r6 = 1
                goto L54
            L53:
                r6 = 0
            L54:
                if (r6 != 0) goto L59
                ir.eitaa.ui.ActionBar.Theme.refreshThemeColors(r1, r2)
            L59:
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: ir.eitaa.ui.ChatActivity.ThemeDelegate.<init>(ir.eitaa.ui.ChatActivity):void");
        }

        public List<ChatTheme> getCachedThemes() {
            return this.cachedThemes;
        }

        public void setCachedThemes(List<ChatTheme> cachedThemes) {
            this.cachedThemes = cachedThemes;
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public Integer getColor(String key) {
            String fallbackKey;
            Integer num;
            if (this.chatTheme == null) {
                return Integer.valueOf(Theme.getColor(key));
            }
            HashMap<String, Integer> map = this.animatingColors;
            if (map != null && (num = map.get(key)) != null) {
                return num;
            }
            Integer numValueOf = this.currentColors.get(key);
            if (numValueOf == null) {
                if ("chat_outBubbleGradient".equals(key) || "chat_outBubbleGradient2".equals(key) || "chat_outBubbleGradient3".equals(key)) {
                    numValueOf = this.currentColors.get("chat_outBubble");
                    if (numValueOf == null) {
                        numValueOf = Theme.getColorOrNull(key);
                    }
                    if (numValueOf == null) {
                        numValueOf = Integer.valueOf(Theme.getColor("chat_outBubble"));
                    }
                }
                if (numValueOf == null && (fallbackKey = Theme.getFallbackKey(key)) != null) {
                    numValueOf = this.currentColors.get(fallbackKey);
                }
            }
            return (numValueOf != null || this.chatTheme == null) ? numValueOf : Integer.valueOf(Theme.getDefaultColor(key));
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public Integer getCurrentColor(String key) {
            return getCurrentColor(key, false);
        }

        public Integer getCurrentColor(String key, boolean ignoreAnimation) {
            HashMap<String, Integer> map;
            if (this.chatTheme == null) {
                return Theme.getColorOrNull(key);
            }
            Integer num = null;
            if (!ignoreAnimation && (map = this.animatingColors) != null) {
                num = map.get(key);
            }
            return num == null ? this.currentColors.get(key) : num;
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public void setAnimatedColor(String key, int color) {
            HashMap<String, Integer> map = this.animatingColors;
            if (map != null) {
                map.put(key, Integer.valueOf(color));
            }
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public void applyServiceShaderMatrix(int w, int h, float translationX, float translationY) {
            Bitmap bitmap;
            BitmapShader bitmapShader;
            if (this.chatTheme == null || (bitmap = this.serviceBitmap) == null || (bitmapShader = this.serviceShader) == null) {
                Theme.applyServiceShaderMatrix(w, h, translationX, translationY);
            } else {
                Theme.applyServiceShaderMatrix(bitmap, bitmapShader, this.actionMatrix, w, h, translationX, translationY);
            }
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public boolean hasGradientService() {
            return this.chatTheme != null ? this.serviceShader != null : Theme.hasGradientService();
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public Drawable getDrawable(String drawableKey) {
            if (this.currentDrawables.isEmpty()) {
                return null;
            }
            return this.currentDrawables.get(drawableKey);
        }

        @Override // ir.eitaa.ui.ActionBar.Theme.ResourcesProvider
        public Paint getPaint(String paintKey) {
            if (this.chatTheme != null) {
                return this.currentPaints.get(paintKey);
            }
            return null;
        }

        public boolean isThemeChangeAvailable() {
            ChatActivity chatActivity = ChatActivity.this;
            return chatActivity.currentChat == null && chatActivity.currentEncryptedChat == null && !chatActivity.currentUser.bot && chatActivity.dialog_id >= 0;
        }

        public ChatTheme getCurrentTheme() {
            return this.chatTheme;
        }

        @Override // ir.eitaa.ui.Components.ForwardingPreviewView.ResourcesDelegate
        public Drawable getWallpaperDrawable() {
            Drawable drawable = this.backgroundDrawable;
            return drawable != null ? drawable : Theme.getCachedWallpaperNonBlocking();
        }

        @Override // ir.eitaa.ui.Components.ForwardingPreviewView.ResourcesDelegate
        public boolean isWallpaperMotion() {
            if (this.chatTheme != null) {
                return false;
            }
            return Theme.isWallpaperMotion();
        }

        public void setCurrentTheme(final ChatTheme chatTheme, final boolean animated, Boolean forceDark) {
            if (((BaseFragment) ChatActivity.this).parentLayout == null) {
                return;
            }
            boolean zBooleanValue = forceDark != null ? forceDark.booleanValue() : Theme.getActiveTheme().isDark();
            String emoticon = chatTheme != null ? chatTheme.getEmoticon() : null;
            ChatTheme chatTheme2 = this.chatTheme;
            String emoticon2 = chatTheme2 != null ? chatTheme2.getEmoticon() : null;
            if (isThemeChangeAvailable()) {
                if (TextUtils.equals(emoticon2, emoticon) && this.isDark == zBooleanValue) {
                    return;
                }
                this.isDark = zBooleanValue;
                Theme.ThemeInfo currentNightTheme = zBooleanValue ? Theme.getCurrentNightTheme() : Theme.getCurrentTheme();
                ActionBarLayout.ThemeAnimationSettings themeAnimationSettings = new ActionBarLayout.ThemeAnimationSettings(currentNightTheme, currentNightTheme.currentAccentId, currentNightTheme.isDark(), !animated);
                if (this.chatTheme == null) {
                    Drawable cachedWallpaperNonBlocking = Theme.getCachedWallpaperNonBlocking();
                    this.isBackgroundMotion = cachedWallpaperNonBlocking instanceof MotionBackgroundDrawable;
                    initServiceMessageColors(cachedWallpaperNonBlocking);
                    this.startServiceTextColor = this.isBackgroundMotion ? -1 : Theme.getColor("chat_serviceText");
                    this.startServiceLinkColor = this.isBackgroundMotion ? -1 : Theme.getColor("chat_serviceLink");
                    this.startServiceButtonColor = this.isBackgroundMotion ? -1 : Theme.getColor("chat_serviceLink");
                    this.startServiceIconColor = this.isBackgroundMotion ? -1 : Theme.getColor("chat_serviceIcon");
                } else if (this.isBackgroundMotion) {
                    this.startServiceBitmap = ((MotionBackgroundDrawable) this.backgroundDrawable).getBitmap();
                }
                this.startServiceColor = this.currentServiceColor;
                this.startServiceTextColor = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceText", true);
                this.startServiceLinkColor = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceLink", true);
                this.startServiceButtonColor = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceLink", true);
                this.startServiceIconColor = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceIcon", true);
                if (chatTheme != null) {
                    this.currentColor = AndroidUtilities.calcDrawableColor(this.backgroundDrawable)[0];
                    initDrawables();
                    initPaints();
                }
                themeAnimationSettings.applyTheme = false;
                themeAnimationSettings.afterStartDescriptionsAddedRunnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$44lYAaDxJRq13l6uo-V-BIt3V8Q
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$setCurrentTheme$0$ChatActivity$ThemeDelegate(chatTheme, animated);
                    }
                };
                if (animated) {
                    themeAnimationSettings.animationProgress = new ActionBarLayout.ThemeAnimationSettings.onAnimationProgress() { // from class: ir.eitaa.ui.ChatActivity.ThemeDelegate.1
                        @Override // ir.eitaa.ui.ActionBar.ActionBarLayout.ThemeAnimationSettings.onAnimationProgress
                        public void setProgress(float p) {
                            ThemeDelegate themeDelegate = ThemeDelegate.this;
                            themeDelegate.animatingMessageDrawable.crossfadeProgress = p;
                            themeDelegate.animatingMessageMediaDrawable.crossfadeProgress = p;
                            themeDelegate.updateServiceMessageColor(p);
                        }
                    };
                    themeAnimationSettings.beforeAnimationRunnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$zHKlLomFOg-2_2Dp6Dffa-VuoPY
                        @Override // java.lang.Runnable
                        public final void run() throws InterruptedException, IOException {
                            this.f$0.lambda$setCurrentTheme$1$ChatActivity$ThemeDelegate();
                        }
                    };
                    themeAnimationSettings.afterAnimationRunnable = new Runnable() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$02EfpEiIBtfCQYM9iJ6Hl9e8RcE
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$setCurrentTheme$2$ChatActivity$ThemeDelegate();
                        }
                    };
                }
                themeAnimationSettings.onlyTopFragment = true;
                themeAnimationSettings.resourcesProvider = this;
                themeAnimationSettings.duration = 250L;
                ((BaseFragment) ChatActivity.this).parentLayout.animateThemedValues(themeAnimationSettings);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$setCurrentTheme$0, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$setCurrentTheme$0$ChatActivity$ThemeDelegate(ChatTheme chatTheme, boolean z) {
            setupChatTheme(chatTheme, z, false);
            initServiceMessageColors(this.backgroundDrawable);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$setCurrentTheme$1, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$setCurrentTheme$1$ChatActivity$ThemeDelegate() throws InterruptedException, IOException {
            this.animatingColors = new HashMap<>();
            Theme.MessageDrawable messageDrawable = (Theme.MessageDrawable) ChatActivity.this.getThemedDrawable("drawableMsgOut");
            this.animatingMessageDrawable = messageDrawable;
            messageDrawable.crossfadeFromDrawable = ((BaseFragment) ChatActivity.this).parentLayout.messageDrawableOutStart;
            Theme.MessageDrawable messageDrawable2 = (Theme.MessageDrawable) ChatActivity.this.getThemedDrawable("drawableMsgOutMedia");
            this.animatingMessageMediaDrawable = messageDrawable2;
            messageDrawable2.crossfadeFromDrawable = ((BaseFragment) ChatActivity.this).parentLayout.messageDrawableOutMediaStart;
            this.animatingMessageDrawable.crossfadeProgress = 0.0f;
            this.animatingMessageMediaDrawable.crossfadeProgress = 0.0f;
            ChatActivity.this.updateMessagesVisiblePart(false);
            updateServiceMessageColor(0.0f);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$setCurrentTheme$2, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$setCurrentTheme$2$ChatActivity$ThemeDelegate() {
            this.animatingMessageDrawable.crossfadeFromDrawable = null;
            this.animatingMessageMediaDrawable.crossfadeFromDrawable = null;
            this.animatingColors = null;
            updateServiceMessageColor(1.0f);
        }

        private void setupChatTheme(ChatTheme chatTheme, boolean withAnimation, boolean createNewResources) {
            Theme.ThemeInfo theme;
            this.chatTheme = chatTheme;
            Drawable backgroundImage = ((BaseFragment) ChatActivity.this).fragmentView != null ? ((SizeNotifierFrameLayout) ((BaseFragment) ChatActivity.this).fragmentView).getBackgroundImage() : null;
            final MotionBackgroundDrawable motionBackgroundDrawable = backgroundImage instanceof MotionBackgroundDrawable ? (MotionBackgroundDrawable) backgroundImage : null;
            int phase = motionBackgroundDrawable != null ? motionBackgroundDrawable.getPhase() : 0;
            if (chatTheme == null || chatTheme.isDefault) {
                this.currentColor = Theme.getServiceMessageColor();
            }
            if (chatTheme != null) {
                this.currentColors = chatTheme.getCurrentColors(((BaseFragment) ChatActivity.this).currentAccount, this.isDark);
                this.backgroundDrawable = getBackgroundDrawableFromTheme(chatTheme, phase);
                AnimatorSet animatorSet = this.patternAlphaAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                }
                if (withAnimation) {
                    this.patternAlphaAnimator = new AnimatorSet();
                    if (motionBackgroundDrawable != null) {
                        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(1.0f, 0.0f);
                        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$vKY6TBlko8No_2NFBL3xVDtuvUo
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                motionBackgroundDrawable.setPatternAlpha(((Float) valueAnimator.getAnimatedValue()).floatValue());
                            }
                        });
                        valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.ThemeDelegate.2
                            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                            public void onAnimationEnd(Animator animation) {
                                super.onAnimationEnd(animation);
                                motionBackgroundDrawable.setPatternAlpha(1.0f);
                            }
                        });
                        valueAnimatorOfFloat.setDuration(200L);
                        this.patternAlphaAnimator.playTogether(valueAnimatorOfFloat);
                    }
                    Drawable drawable = this.backgroundDrawable;
                    if (drawable instanceof MotionBackgroundDrawable) {
                        final MotionBackgroundDrawable motionBackgroundDrawable2 = (MotionBackgroundDrawable) drawable;
                        motionBackgroundDrawable2.setPatternAlpha(0.0f);
                        ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(0.0f, 1.0f);
                        valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$9QWNTkzDHyGVHX1te1sRImXIfes
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                motionBackgroundDrawable2.setPatternAlpha(((Float) valueAnimator.getAnimatedValue()).floatValue());
                            }
                        });
                        valueAnimatorOfFloat2.addListener(new AnimatorListenerAdapter() { // from class: ir.eitaa.ui.ChatActivity.ThemeDelegate.3
                            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                            public void onAnimationEnd(Animator animation) {
                                super.onAnimationEnd(animation);
                                motionBackgroundDrawable2.setPatternAlpha(1.0f);
                            }
                        });
                        valueAnimatorOfFloat2.setDuration(250L);
                        this.patternAlphaAnimator.playTogether(valueAnimatorOfFloat2);
                    }
                    this.patternAlphaAnimator.start();
                }
                if (createNewResources) {
                    this.currentColor = AndroidUtilities.calcDrawableColor(this.backgroundDrawable)[0];
                    initDrawables();
                    initPaints();
                    initServiceMessageColors(this.backgroundDrawable);
                    updateServiceMessageColor(1.0f);
                    return;
                }
                return;
            }
            this.currentColors = new HashMap<>();
            this.currentPaints.clear();
            this.currentDrawables.clear();
            Drawable cachedWallpaperNonBlocking = Theme.getCachedWallpaperNonBlocking();
            if (cachedWallpaperNonBlocking instanceof MotionBackgroundDrawable) {
                ((MotionBackgroundDrawable) cachedWallpaperNonBlocking).setPhase(phase);
            }
            this.backgroundDrawable = null;
            if (Theme.getActiveTheme().isDark() == this.isDark) {
                theme = Theme.getActiveTheme();
            } else {
                SharedPreferences sharedPreferences = ApplicationLoader.applicationContext.getSharedPreferences("themeconfig", 0);
                String string = sharedPreferences.getString("lastDayTheme", "Blue");
                String str = Theme.getTheme(string) != null ? string : "Blue";
                String string2 = sharedPreferences.getString("lastDarkTheme", "Dark Blue");
                theme = this.isDark ? Theme.getTheme(Theme.getTheme(string2) != null ? string2 : "Dark Blue") : Theme.getTheme(str);
            }
            Theme.applyTheme(theme, false, this.isDark);
        }

        private void initDrawables() {
            Drawable messageDrawable;
            String themeDrawableColorKey;
            for (Map.Entry<String, Drawable> entry : Theme.getThemeDrawablesMap().entrySet()) {
                String key = entry.getKey();
                key.hashCode();
                switch (key) {
                    case "drawableMsgIn":
                        messageDrawable = new Theme.MessageDrawable(0, false, false, this);
                        break;
                    case "drawableMsgInMedia":
                        messageDrawable = new Theme.MessageDrawable(1, false, false, this);
                        break;
                    case "drawableMsgInMediaSelected":
                        messageDrawable = new Theme.MessageDrawable(1, false, true, this);
                        break;
                    case "drawableMsgOutMedia":
                        messageDrawable = new Theme.MessageDrawable(1, true, false, this);
                        break;
                    case "drawableMsgOutSelected":
                        messageDrawable = new Theme.MessageDrawable(0, true, true, this);
                        break;
                    case "drawableMsgOutMediaSelected":
                        messageDrawable = new Theme.MessageDrawable(1, true, true, this);
                        break;
                    case "drawableMsgInSelected":
                        messageDrawable = new Theme.MessageDrawable(0, false, true, this);
                        break;
                    case "drawableMsgOut":
                        messageDrawable = new Theme.MessageDrawable(0, true, false, this);
                        break;
                    default:
                        Drawable.ConstantState constantState = entry.getValue().getConstantState();
                        messageDrawable = constantState != null ? constantState.newDrawable().mutate() : null;
                        if (messageDrawable != null && (themeDrawableColorKey = Theme.getThemeDrawableColorKey(entry.getKey())) != null) {
                            Integer color = getColor(themeDrawableColorKey);
                            if (color == null) {
                                color = Integer.valueOf(Theme.getColor(themeDrawableColorKey));
                            }
                            Theme.setDrawableColor(messageDrawable, color.intValue());
                            break;
                        }
                        break;
                }
                if (messageDrawable != null) {
                    this.currentDrawables.put(entry.getKey(), messageDrawable);
                }
            }
        }

        private void initPaints() {
            Paint paint;
            for (Map.Entry<String, Paint> entry : Theme.getThemePaintsMap().entrySet()) {
                Paint value = entry.getValue();
                if (value instanceof TextPaint) {
                    paint = new TextPaint();
                    paint.setTextSize(value.getTextSize());
                    paint.setTypeface(AndroidUtilities.getFontFamily(false));
                } else {
                    paint = new Paint();
                }
                if ((value.getFlags() & 1) != 0) {
                    paint.setFlags(1);
                }
                String themePaintColorKey = Theme.getThemePaintColorKey(entry.getKey());
                if (themePaintColorKey != null) {
                    Integer color = getColor(themePaintColorKey);
                    if (color == null) {
                        color = Integer.valueOf(Theme.getColor(themePaintColorKey));
                    }
                    paint.setColor(color.intValue());
                }
                this.currentPaints.put(entry.getKey(), paint);
            }
        }

        private void initServiceMessageColors(Drawable backgroundDrawable) {
            int i = AndroidUtilities.calcDrawableColor(backgroundDrawable)[0];
            Integer currentColor = getCurrentColor("chat_serviceBackground");
            if (currentColor == null) {
                currentColor = Integer.valueOf(i);
            }
            this.currentServiceColor = currentColor.intValue();
            boolean z = backgroundDrawable instanceof MotionBackgroundDrawable;
            this.isBackgroundMotion = z;
            if (z) {
                this.serviceBitmap = Bitmap.createBitmap(60, 80, Bitmap.Config.ARGB_8888);
                this.serviceBitmapSource = ((MotionBackgroundDrawable) backgroundDrawable).getBitmap();
                Canvas canvas = new Canvas(this.serviceBitmap);
                this.serviceCanvas = canvas;
                canvas.drawBitmap(this.serviceBitmapSource, 0.0f, 0.0f, (Paint) null);
                Bitmap bitmap = this.serviceBitmap;
                Shader.TileMode tileMode = Shader.TileMode.CLAMP;
                this.serviceShader = new BitmapShader(bitmap, tileMode, tileMode);
            } else {
                this.serviceBitmap = null;
                this.serviceShader = null;
            }
            Paint paint = getPaint("paintChatActionBackground");
            Paint paint2 = getPaint("paintChatActionBackgroundSelected");
            if (paint != null) {
                if (this.isBackgroundMotion) {
                    ColorMatrix colorMatrix = new ColorMatrix();
                    colorMatrix.setSaturation(((MotionBackgroundDrawable) backgroundDrawable).getIntensity() >= 0 ? 1.8f : 0.5f);
                    paint.setAlpha(127);
                    paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));
                    paint.setShader(this.serviceShader);
                    paint2.setAlpha(127);
                    paint2.setColorFilter(new ColorMatrixColorFilter(colorMatrix));
                    paint2.setShader(this.serviceShader);
                    return;
                }
                paint.setColorFilter(null);
                paint.setShader(null);
                paint2.setColorFilter(null);
                paint2.setShader(null);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public void updateServiceMessageColor(float progress) {
            Bitmap bitmap;
            Bitmap bitmap2;
            if (this.currentPaints.isEmpty()) {
                return;
            }
            Paint paint = getPaint("paintChatActionBackground");
            Paint paint2 = getPaint("paintChatActionBackgroundSelected");
            int iBlendARGB = this.currentServiceColor;
            int currentColorOrDefault = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceText", true);
            int currentColorOrDefault2 = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceLink", true);
            int currentColorOrDefault3 = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceLink", true);
            int currentColorOrDefault4 = this.isBackgroundMotion ? -1 : getCurrentColorOrDefault("chat_serviceIcon", true);
            if (progress != 1.0f) {
                iBlendARGB = ColorUtils.blendARGB(this.startServiceColor, iBlendARGB, progress);
                currentColorOrDefault = ColorUtils.blendARGB(this.startServiceTextColor, currentColorOrDefault, progress);
                currentColorOrDefault2 = ColorUtils.blendARGB(this.startServiceLinkColor, currentColorOrDefault2, progress);
                currentColorOrDefault3 = ColorUtils.blendARGB(this.startServiceButtonColor, currentColorOrDefault3, progress);
                currentColorOrDefault4 = ColorUtils.blendARGB(this.startServiceIconColor, currentColorOrDefault4, progress);
            }
            if (paint != null && !this.isBackgroundMotion) {
                paint.setColor(iBlendARGB);
                paint2.setColor(iBlendARGB);
            }
            this.currentColor = iBlendARGB;
            Paint paint3 = getPaint("paintChatActionText");
            if (paint3 != null) {
                ((TextPaint) paint3).linkColor = currentColorOrDefault2;
                getPaint("paintChatActionText").setColor(currentColorOrDefault);
                getPaint("paintChatBotButton").setColor(currentColorOrDefault3);
            }
            Theme.setDrawableColor(getDrawable("drawableMsgStickerCheck"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerClock"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerHalfCheck"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerPinned"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerReplies"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerViews"), currentColorOrDefault);
            Theme.setDrawableColor(getDrawable("drawableBotInline"), currentColorOrDefault4);
            Theme.setDrawableColor(getDrawable("drawableBotLink"), currentColorOrDefault4);
            Theme.setDrawableColor(getDrawable("drawableCommentSticker"), currentColorOrDefault4);
            Theme.setDrawableColor(getDrawable("drawableGoIcon"), currentColorOrDefault4);
            Theme.setDrawableColor(getDrawable("drawableReplyIcon"), currentColorOrDefault4);
            Theme.setDrawableColor(getDrawable("drawableShareIcon"), currentColorOrDefault4);
            Canvas canvas = this.serviceCanvas;
            if (canvas == null || (bitmap = this.serviceBitmapSource) == null) {
                return;
            }
            if (progress != 1.0f && (bitmap2 = this.startServiceBitmap) != null) {
                canvas.drawBitmap(bitmap2, 0.0f, 0.0f, (Paint) null);
                this.paint.setAlpha((int) (progress * 255.0f));
                this.serviceCanvas.drawBitmap(this.serviceBitmapSource, 0.0f, 0.0f, this.paint);
                return;
            }
            canvas.drawBitmap(bitmap, 0.0f, 0.0f, (Paint) null);
        }

        private Drawable getBackgroundDrawableFromTheme(final ChatTheme chatTheme, int prevPhase) {
            if (chatTheme.isDefault) {
                return Theme.createBackgroundDrawable(ChatTheme.getDefaultThemeInfo(this.isDark), chatTheme.getCurrentColors(((BaseFragment) ChatActivity.this).currentAccount, this.isDark), chatTheme.getWallpaperLink(this.isDark), prevPhase).wallpaper;
            }
            Integer color = getColor("chat_wallpaper");
            Integer color2 = getColor("chat_wallpaper_gradient_to");
            Integer color3 = getColor("key_chat_wallpaper_gradient_to2");
            Integer color4 = getColor("key_chat_wallpaper_gradient_to3");
            if (color4 == null) {
                color4 = 0;
            }
            final MotionBackgroundDrawable motionBackgroundDrawable = new MotionBackgroundDrawable();
            motionBackgroundDrawable.setPatternBitmap(chatTheme.getWallpaper(this.isDark).settings.intensity);
            motionBackgroundDrawable.setColors(color.intValue(), color2.intValue(), color3.intValue(), color4.intValue(), true);
            motionBackgroundDrawable.setPhase(prevPhase);
            final int patternColor = motionBackgroundDrawable.getPatternColor();
            final boolean z = this.isDark;
            chatTheme.loadWallpaper(z, new ResultCallback() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$qKl7pK9ZVhnxryHbqbj_N1xccXM
                @Override // ir.eitaa.tgnet.ResultCallback
                public final void onComplete(Object obj) {
                    this.f$0.lambda$getBackgroundDrawableFromTheme$6$ChatActivity$ThemeDelegate(chatTheme, z, motionBackgroundDrawable, patternColor, (Pair) obj);
                }

                @Override // ir.eitaa.tgnet.ResultCallback
                public /* synthetic */ void onError(TLRPC$TL_error tLRPC$TL_error) {
                    ResultCallback.CC.$default$onError(this, tLRPC$TL_error);
                }
            });
            return motionBackgroundDrawable;
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: lambda$getBackgroundDrawableFromTheme$6, reason: merged with bridge method [inline-methods] */
        public /* synthetic */ void lambda$getBackgroundDrawableFromTheme$6$ChatActivity$ThemeDelegate(ChatTheme chatTheme, boolean z, final MotionBackgroundDrawable motionBackgroundDrawable, int i, Pair pair) {
            if (pair == null) {
                return;
            }
            long jLongValue = ((Long) pair.first).longValue();
            Bitmap bitmap = (Bitmap) pair.second;
            ChatTheme chatTheme2 = this.chatTheme;
            if (chatTheme2 == null || jLongValue != chatTheme2.getTlTheme(this.isDark).id || bitmap == null) {
                return;
            }
            ValueAnimator valueAnimator = this.patternIntensityAnimator;
            if (valueAnimator != null) {
                valueAnimator.cancel();
            }
            motionBackgroundDrawable.setPatternBitmap(chatTheme.getWallpaper(z).settings.intensity, bitmap);
            motionBackgroundDrawable.setPatternColorFilter(i);
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
            this.patternIntensityAnimator = valueAnimatorOfFloat;
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: ir.eitaa.ui.-$$Lambda$ChatActivity$ThemeDelegate$TopZn7E99yn6BrGPe0CGw66TNwE
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                    motionBackgroundDrawable.setPatternAlpha(((Float) valueAnimator2.getAnimatedValue()).floatValue());
                }
            });
            this.patternIntensityAnimator.setDuration(250L);
            this.patternIntensityAnimator.start();
        }

        private int getCurrentColorOrDefault(String key, boolean ignoreAnimation) {
            Integer currentColor = getCurrentColor(key, ignoreAnimation);
            if (currentColor == null) {
                currentColor = Integer.valueOf(Theme.getColor(key, null, ignoreAnimation));
            }
            return currentColor.intValue();
        }
    }
}
